<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<title>CSS Properties and Values API Level 1 （日本語訳）</title>

<link rel="stylesheet" href="common.css" type="text/css" />
<link rel="stylesheet" href="common-css.css" type="text/css" />

<style>
.js, .js-value, .js-slot {
	color: #006633;
}
.js-value {
	font-family: sans-serif0, sans-serif;
}

/* アルゴリズム */

*.algorithm {
	padding: .5em;
	border: thin solid #ddd;
	border-radius: .5em;
	margin: .5em 0;
}

</style>

<script src="common0.js" ></script>
<script src="common1.js" async></script>

<script>
Util.ready = function(){
	const source_data = {
		generate: expand,
	};
	Util.switchWordsInit(source_data);
}

function expand(){

	const class_map = {
		p: 'property',
		v: 'value',
		u: 'unit',
		f: 'func',
		t: 'type',
		u: 'unit',
		at: 'at-rule',
		css: 'css',
		e: 'element',
		a: 'attr',
		at: 'at-rule',
		E: 'error',
		sl: 'js-slot',
		U: 'code-point',
	};

	const tag_map = {
		p: 'code',
		f: 'code',
		u: 'code',
		v: 'code',
		t: 'var',
		at: 'code',
		I: 'code',
		m: 'code',
		E: 'code',
		e: 'code',
		u: 'code',
		a: 'code',
		css: 'code',
		c: 'code',
		sl: 'span',
		U: 'span',
		i: 'i',
	};

	const link_map = this.link_map;

	return this.html.replace(
		/%[~\w\-一-鿆あ-ん]+|`(.+?)([$@^])(\w*)/g,
		create_html
	);

	function create_html(match, key, indicator, klass){

if(!key) {
	return '<var>' + match.slice(1).replace(/\/(.+)/, '<sub>$1</sub>') + '</var>';
}

let text = key;
let href = '';
let tag = tag_map[klass];

switch(klass){
case 'r': // ref
	text = '[' + key + ']';
	href = '#biblio-' + key.toLowerCase();
	break;
case 'm': // IDL member
	const n = text.indexOf('(');
	if(n > 0){
		key = text.slice(0, n);
		text = key + text.slice(n).replace(/\w+/g, '<var>$&</var>');
	}
	break;
case 't': // type
	text = '&lt;' + key + '&gt;';
	break;
case 'f': // 
	text = key + '()';
	break;
case 'U': // code point
	text = 'U+' + key;
	break;
case 'at': // at-rule
	text = '@' + key;
	break;
case 'l': // literal
	return '"<code class="literal">' + text + '</code>"'
case 'sl': // internal slot
	text = '[[' + text + ']]';
	break;
case 'en': // english words
	return '<span lang="en-x-a0">' + key + '</span>'
	break;
case 'issue':
	return(
'<a href="https://github.com/w3c/css-houdini-drafts/issues/' + key + '">issue#' + key + '</a>'
	);
}

const classname = class_map[klass];

if(tag) {
	text = '<' + tag + (
		classname ? ' class="' + classname + '"' : ''
	) + '>' + text + '</' + tag + '>';
}


if(indicator !== '^'){
	href = link_map[klass ? (klass + '.' + key) : key] || href;
	if(!href){
		console.log(match); // check error
		return match;
	}

	switch(indicator){
	case '$':
		text = '<a href="' + href + '">' + text + '</a>';
		break;
	case '@':
		text = '<dfn id="' + href.slice(1) + '">' + text + '</dfn>';
		break;
	}
}
return text;

	}
}
</script>


<script type="text/plain" id="_source_data">

●●options
spec_title:CSS Properties and Values API Level 1
spec_date:2018-07-04
trans_update:2018-07-11
source_checked:180703
original_url:https://drafts.css-houdini.org/css-properties-values-api/
	page_state_key:CSS
spec_status:ED
ref_id_prefix:biblio-
ref_id_lowercase:true
site_nav:css
conformance:css
copyright:2018,use
trans_1st_pub:2018-05-12

●●original_id_map

●●link_map
	●IDL
E.InvalidModificationError:~WEBIDL#invalidmodificationerror
E.SyntaxError:~WEBIDL#syntaxerror

DOMString:~WEBIDL#idl-DOMString
boolean:~WEBIDL#idl-boolean

I.CSS:~CSSOM1#namespacedef-css
I.Document:~DOM4#document
I.PropertyDescriptor:#dictdef-propertydescriptor
	PropertyDescriptor:#propertydescriptor

sl.registeredPropertySet:#dom-window-registeredpropertyset-slot

m.inherits:#dom-propertydescriptor-inherits
m.initialValue:#dom-propertydescriptor-initialvalue
m.name:#dom-propertydescriptor-name
m.registerProperty:#dom-css-registerproperty
m.supports:~CSSCOND#dom-css-supports
m.syntax:#dom-propertydescriptor-syntax

	#dom-css-registerproperty-descriptor-descriptor
	#dom-css-unregisterproperty-name-name

	●CSS
at.supports:~CSSCOND#at-ruledef-supports

p.color:~CSSCOLOR#propdef-color
p.font-size:~CSSFONTS#propdef-font-size
p.line-height:~CSS2VISUDET#propdef-line-height

u.em:~CSSVAL#em
u.ex:~CSSVAL#ex
u.cap:~CSSVAL#cap
u.ch:~CSSVAL#ch
u.ic:~CSSVAL#ic
u.lh:~CSSVAL#lh
u.rem:~CSSVAL#rem
u.rlh:~CSSVAL#rlh

t.angle:~CSSVAL#angle-value
t.calc():~CSSVAL#funcdef-calc
t.color:~CSSCOLOR#typedef-color
	t.color:~CSSWGcss-color-3/#valuea-def-color
t.ident:~CSSVAL#typedef-ident
t.custom-ident:~CSSVAL#identifier-value
t.custom-property-name:~CSSVAR#typedef-custom-property-name
t.declaration-value:~CSSSYN#typedef-declaration-value
t.image:~CSSIMAGE#typedef-image
t.integer:~CSSVAL#integer-value
t.length:~CSSVAL#length-value
t.length-percentage:~CSSVAL#typedef-length-percentage
t.number:~CSSVAL#number-value
t.percentage:~CSSVAL#percentage-value
t.resolution:~CSSVAL#resolution-value
t.time:~CSSVAL#time-value
t.transform-function:~TRANSFORM#typedef-transform-function
t.url:~CSSVAL#url-value
f.var:~CSSVAR#funcdef-var

	v.green:~CSSCOLOR#valdef-color-green
v.inherit:~CASCADE#valdef-all-inherit
v.unset:~CASCADE#valdef-all-unset
v.red:~CSSCOLOR#valdef-color-red
	RED:~CSSCOLOR#valdef-color-red
	Red:~CSSCOLOR#valdef-color-red

v.revert:~CASCADE#valdef-all-revert
v.blue:~CSSCOLOR#valdef-color-blue
v.black:~CSSCOLOR#valdef-color-black

	<https://github.com/w3c/css-houdini-drafts/issues/118>:https://github.com/w3c/css-houdini-drafts/issues/118

構文解析を試みる:#_attempt-to-parse

独立に算出-可能:#computationally-independent
~custom~propを登録する:#register-a-custom-property

~CSS全域~keyword:~CSSVAL#css-wide-keywords
~math関数:~CSSVAL#math-function

~ASCII大小無視:~INFRA#ascii-case-insensitive
結付けられている文書:~WINDOW#concept-document-window
現在の大域~obj:~WAPI#current-global-object

~cascade:~CASCADE#cascade
指定d値:~CASCADE#specified-value

~custom~prop:~CSSVAR#custom-property
算出d値の時点で無効:~CSSVAR#invalid-at-computed-value-time
名前~符号位置:~CSSSYN#name-code-point
名前開始~符号位置:~CSSSYN#name-start-code-point

	~THROW:~WEBIDL#dfn-throw

	§2.3 Supported syntax strings:#supported-syntax-strings
	§2.4 Calculation of Computed Values:#calculation-of-computed-values
	CSS Values 3 §2 Value Definition Syntax:~CSSVAL#value-defs


●●words_table1

●●words_table



	●値型／構文
flag::::フラグ
item::::アイテム
slot::::スロット
calc:
集合:set::~
下位集合:subset::~
member::::メンバ
method::::メソッド
list::::リスト
record::::レコード
obj:object:::オブジェクト
辞書:dictionary::~
真偽値:boolean::~
真:true::~
実数:number::~
型:type::~
空:empty::~


ASCII:
keyword::::キーワード
token::::トークン
	並び:sequence
stream::::ストリーム
値:value::~
	区切りの／区切って:separated
	区切りの:-separated
式:expression::~
符号位置:code point::~
	符号位置ごとに:codepoint-wise
space::::スペース
comma::::カンマ
小文字:lower-case::~
大小無視:case-insensitive::~
引数:argument::~
成分:component::~
primitive:
項:term::~
	項:primitive
名:name::~
名前:name::~
名前開始:name-start::~
単位:unit::~
妥当:valid::~
	妥当でない:invalid
無効:invalid::~
文字列:string::~
百分率:percentage::~
生成規則:production::~
生産-:produce::~
構文:syntax::~
構文解析-:parse::~
構文解析:parsing::~
比較-:compare::~
絶対:absolute::~
相対:relative::~
規則:rule::~
解析済み:parsed::~
解決-:resolve::~
解決:resolution::~
識別子:identifier::~
長さ:length::~
順序:order::~
違反-:violate::~
評価-:evaluate::~
試験-:test::~::テスト
math:
寛容:liberal:~
	-:followed by
	`ident^t:ident
	`px^css :pixel
	`color$t／`color$p:color
	全部的な構文:full breadth
	~~項:clause／item
	`url^f:URL

	●CSS ／ animation
cascade::::カスケード
animation::::アニメーション
初期:initial::~
算出-:compute::~
	独立に算出-可能:computationally independent
算出d:computed::算出
算出:computation::~
条件付き:conditional::~
補間-:interpolate::~
補間:interpolation::~
遷移:transition::~
宣言:declaration::~
宣言d:declared::宣言
始値:start::~
終値:end::~
関数:function::~
全域:-wide:~
単純:simple:~
call:
custom::::カスタム
layout::::レイアウト
	length-percentage:#1
prop:property:::プロパティ
stylesheet::::スタイルシート
style::::スタイル
要素:element::~
親:parent::~
根:root::~::ルート
継承-:inherit::~
継承:inheritance::~
文書:document::~

	●仕様
API:
CSS:
algo::::アルゴリズム
level::::レベル
UA:user agent:UA
module::::モジュール
privacy::::プライバシー
security::::セキュリティ
可用:available:~
事例:case:~
将来:future:~
影響0:impact:影響
情報:information:~
方式:manner:~
標準:standard:~
	注意:note
特色機能:feature:~
独立:independent:~
目的:purpose:~
直に:direct に:~
相互運用性:interoperability:~
	interop
知識:knowledge:~
課題:issue:~
通常の:normal な:~
通常通り:as normal に:通常どおり
適切:appropriate:~
基礎的な:primitive:~
綺麗:clean:きれい
段階:stage:~
仕方:way:~
便利用:convenience:~
	同様に:similarly
	の様な:like
	言い換えれば:In other words
	関わらず:regardless
	を問わず:regardless
	可能:possible:~
	例:example
	例えば:for example
	べき:should
	しかしながら，:however
	よって:hence
	したがって:thus
	よくある:frequently
	-:identically
	-:optionally
	-:precise
	ない限り:so long as
	ほぼ何でも:nearly anything
	どちらに〜ようが:regardless of whether
	しようが:even though
	としても:even if
	-:we

	●仕様（動詞
fall-back:fall back:::フォールバック
fallback::::フォールバック
support::::サポート
受容-:accept:~
仕様:spec:~
作者:author:~
	作者:user
供-:provide:~
依拠-:rely::~
保守-:maintain:~
制約-:restrict:~
制限-:limit:~
定義-:define:~
定義な:-defined:定義の
定義:definition:~
実装:implementation:~
導入-:introduce:~
手段:means:~
手続き:steps:~
拡張-:extend:~
指定-:specify::~
指定d:specified::指定
	指定d値になる:as specified
挙動する:behave する:ふるまう
挙動:behaviour:ふるまい
	挙動:behavior:~
推奨-:recommend:~
改める:alter する:~
既知の:known:~
望む:wish する:~
期待-:expect:~
決定-:determine:~
確保-:ensure:~
考慮点:considerations:~
表記規約:conventions:~
複雑さ:complexity:~
見なさ:consider さ:~
考慮-:consider:~
許容-:allow:~
調整-:adjust:~
述べる:describe する:~
述べら:describe さ:~
	に従って:as described in
適用-:apply:~
避ける:avoid する:~
	記され:written
制御-:control:~
	により制御され:-controlled
包括的:comprehensive:~
拡げる:expand する:~
真似る:resembleする:~
見出され:find され:~
影響-:affect:~
有意:significant:~
拘束:constraint:~
追加の:additional:~
	とする:suppose
	結果になる:end up
	則って:according
	扱う:treat
	用いて:using
	揃って:line up
	補うもの:complementary
	表す:express
	序論:introduction:~
	内部:private:~
	利用-可能~usable:~
	区別:distinction:~
	それを受け:accordingly
	〜も~~考慮に入れる:pay attention to 〜 when considering
	-:means
	より~~優先され:supersed
	従う:follow

	●未分類
pipeline:
web:
上書き:override:~
処理-:process:~
包含-:contain:~
参照-:reference:~
参照:reference:~
合致-:match:~
照合-:match:~
生成-:generate:~
無視-:ignore:~
登録-:register::~
	登録-法:registering
登録:registration::~
未登録に:unregister::~
	登録されていない:unregistered

簡約-:reduce::~
操作-:manipulate:~
改変-:modify:~

組入れる:incorporate:~
	re-incorporated into
組合せ:combination:~
組合せた:combine した:~
組合せれ:combine でき:~
	組合せ:combining
表現-:represent:~
計算:calculation:~
設定-:set:~
	設定し直す:reset
追加-:add:~
	追加して:additional
	追加で:additional
	-:Additional
選定-:select:~
除去-:remove:~
塗り:paint::~
変換-:convert:~
変化-:change:~
変更-:change:~
実行-:execute:~
結付けら:associate さ:結び付けら
被呼出時:被 invoke 時:~
	被呼出時:called

環境設定:configuration::~
大域的:global::~::グローバル
大域:global::~::グローバル
既定の:default::~::デフォルト
既定:default::~::デフォルト

options:::option 集

基底:base::~
URL:
相違:difference:~
自動的:automatic:~
等価:equivalent:~
循環依存:dependency cycle:~
辺:edge:~
	辺で結ぶ:add an edge

	現れる:appear
	生じ:occur

	-:down the DOM tree
	-:gain
	-:get#1
	`class^a:class#1
	:against
	:become
	~method:function
	近く:closely
	成す:contained in
	切り替わる:flip
	-:re
	-:passing
	-:repetition

	単位による:expressed in
	転換-:turned into
	時点／〜時:time
	になる:become
	除いて:except
	-:get 〜ed


	●指示語
現在の:current:~
全部的:full:~
新たな:new:~
	:one
	0 個~以上:zero or more
	1 個以上:one or more
	2 個目:first／:second
	最初の:first
	この:this
	これらの:these
	すでに:already
	すべての:all
	その:that
	その:those
	それら:they
	それらの:their
	与-:give
	介:via
	他の:other
	他の場合:otherwise
	何か:something
	各:each
	同じ:same
	含-:include
	常に:always
	所与の:given
	次の:the following
	何ものも:anything
	他方:On the other hand,
	も:neither is,
	等々:any other casing variants
	上に挙げた:preceding
	一方で:while
	とり:take
	残された唯一の:left only
	両者:both
	中間:intermediate
	以上:at least
	それまで:previously
	現時点では:currently
	依然として:still
	異なる:different
	結果:result
	および:as well as
	ここ:here
	上:above
	下:below
	別の:another
	前:before
	後:after
	複数の:multiple
	に対して:against
	代わりに:instead
	唯一の:only
	間:during
	間で:across
	ごく:very
	-:finally
	の間:between


●●ref_normative

[CSS-CASCADE-4]
    Elika Etemad; Tab Atkins Jr.. CSS Cascading and Inheritance Level 4. 14 January 2016. CR. URL: https://www.w3.org/TR/css-cascade-4/ 
[CSS-COLOR-3]
    Tantek Çelik; Chris Lilley; David Baron. CSS Color Module Level 3. 19 June 2018. REC. URL: https://www.w3.org/TR/css-color-3/ 
[CSS-CONDITIONAL-3]
    CSS Conditional Rules Module Level 3 URL: https://www.w3.org/TR/css3-conditional/ 
[CSS-FONTS-3]
    John Daggett; Myles Maxfield; Chris Lilley. CSS Fonts Module Level 3. 26 June 2018. CR. URL: https://www.w3.org/TR/css-fonts-3/ 
[CSS-SYNTAX-3]
    Tab Atkins Jr.; Simon Sapin. CSS Syntax Module Level 3. 20 February 2014. CR. URL: https://www.w3.org/TR/css-syntax-3/ 
[CSS-TRANSFORMS-1]
    Simon Fraser; et al. CSS Transforms Module Level 1. 30 November 2017. WD. URL: https://www.w3.org/TR/css-transforms-1/ 
[CSS-VALUES-4]
    CSS Values and Units Module Level 4 URL: https://drafts.csswg.org/css-values-4/ 
[CSS-VARIABLES]
    Tab Atkins Jr.. CSS Custom Properties for Cascading Variables Module Level 1. 3 December 2015. CR. URL: https://www.w3.org/TR/css-variables-1/ 
[CSS2]
    Bert Bos; et al. Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification. 7 June 2011. REC. URL: https://www.w3.org/TR/CSS2/ 
[CSS3-ANIMATIONS]
    Dean Jackson; et al. CSS Animations Level 1. 30 November 2017. WD. URL: https://www.w3.org/TR/css-animations-1/ 
[CSS3-IMAGES]
    Elika Etemad; Tab Atkins Jr.. CSS Image Values and Replaced Content Module Level 3. 17 April 2012. CR. URL: https://www.w3.org/TR/css3-images/ 
[CSS3-TRANSITIONS]
    David Baron; Dean Jackson; Brian Birtles. CSS Transitions. 30 November 2017. WD. URL: https://www.w3.org/TR/css-transitions-1/ 
[CSS3-VALUES]
    Tab Atkins Jr.; Elika Etemad. CSS Values and Units Module Level 3. 29 September 2016. CR. URL: https://www.w3.org/TR/css-values-3/ 
[CSSOM-1]
    Simon Pieters; Glenn Adams. CSS Object Model (CSSOM). 17 March 2016. WD. URL: https://www.w3.org/TR/cssom-1/ 
[DOM]
    Anne van Kesteren. DOM Standard. Living Standard. URL: https://dom.spec.whatwg.org/ 
[HTML]
    Anne van Kesteren; et al. HTML Standard. Living Standard. URL: https://html.spec.whatwg.org/multipage/ 
[RFC2119]
    S. Bradner. Key words for use in RFCs to Indicate Requirement Levels. March 1997. Best Current Practice. URL: https://tools.ietf.org/html/rfc2119 
[WebIDL]
    Cameron McCormack; Boris Zbarsky; Tobie Langel. Web IDL. 15 December 2016. ED. URL: https://heycam.github.io/webidl/ 

●●ref_informative

[CSS-COLOR-4]
    Tab Atkins Jr.; Chris Lilley. CSS Color Module Level 4. 5 July 2016. WD. URL: https://www.w3.org/TR/css-color-4/ 
[CSS-LAYOUT-API]
    CSS Layout API. 
[CSS-PAINT-API]
    CSS Painting API. 
[INFRA]
    Anne van Kesteren; Domenic Denicola. Infra Standard. Living Standard. URL: https://infra.spec.whatwg.org/ 


●●trans_metadata
<p>
~THIS_PAGEは、 W3C により
編集者草案として公開された
<a href="~SPEC_URL">CSS Properties and Values API Level 1</a>
を日本語に翻訳したものです。
~PUB
</p>

●●spec_metadata

このバージョン
	https://drafts.css-houdini.org/css-properties-values-api-1/ 

最新 発行バージョン
	https://www.w3.org/TR/css-properties-values-api-1/ 

以前のバージョン
	https://www.w3.org/TR/2017/WD-css-properties-values-api-1-20171109/ 
	http://www.w3.org/TR/2016/WD-css-properties-values-api-1-20160607/ 

フィードバック
	<a href="mailto:public-houdini@w3.org?subject=%5Bcss-properties-values-api%5D%20YOUR%20TOPIC%20HERE">public-houdini@w3.org</a> with subject line “<kbd>[css-properties-values-api] <i>… message topic …</i></kbd>” (<a href="http://lists.w3.org/Archives/Public/public-houdini/" rel="discussion">archives</a>)

最新の課題
	<a href="https://github.com/w3c/css-houdini-drafts/labels/css-properties-values-api-1">GitHub Issues</a>

編集
	<a href="http://xanthir.com/contact/">Tab Atkins-Bittner</a> (Google)
	<a href="mailto:daniel.glazman@disruptive-innovations.com">Daniel Glazman</a>
	<a href="mailto:stearns@adobe.com">Alan Stearns</a>
	<a href="mailto:gwhit@microsoft.com">Greg Whitworth</a>

前任編集者
	<a href="mailto:shanestephens@google.com">Shane Stephens</a>
	<a href="mailto:esprehn@chromium.org">Elliot Sprehn</a>

</script>


</head><body>

<header>

	<hgroup>
<h1 id="title">CSS Properties and Values API Level 1</h1>
	</hgroup>

</header>

<div id="MAIN" style="display:none;">


	<section id="abstract">
<h2 title="Abstract">要約</h2>

<p>
この~CSS~moduleは、新たな~CSS~propを登録するための~APIを定義する。
この~APIを用いて登録された~propは、［
型, 継承の挙動, 初期~値
］を定義する構文解析-構文を伴って供される。
◎
This CSS module defines an API for registering new CSS properties. Properties registered using this API are provided with a parse syntax that defines a type, inheritance behaviour, and an initial value.
</p>



	</section>
	<section id="status">
<h2 title="Status of this document">この文書の位置付け</h2>

<p>
<!-- 
この節では、発行時点における…
 -->
これは編集者草案の公開の複製です…
<span class="trans-note">【
以下，この節の他の内容は
<a href="css-common-ja.html#status">CSS 日本語訳 共通ページ</a>
に委譲
】</span></p>

	</section>

<main id="MAIN0">

	<section id="intro">
<h2 title="Introduction">1. 序論</h2>

<p>
~CSSは、~web文書の［
~layout, 塗り, 挙動
］を改変するために操作できる~propたちが成す，包括的な集合を定義している。
しかしながら、~web作者が，この集合に~propを追加して拡張したいと望むこともよくある。
◎
CSS defines a comprehensive set of properties that can be manipulated in order to modify the layout, paint, or behaviour of a web document. However, web authors frequently wish to extend this set with additional properties.
</p>


<p>
`css-variables$r は、作者が制御する~propを定義するための基礎的な手段を供しているが、これらの~propは、常に~token~listを値にとり, 常に継承され~MUST。
加えて、それが影響0し得るのは，文書の~layoutや塗りに限られる
— `var^f 参照を介して他の~propの値を組入れることにより。
◎
[css-variables] provides primitive means for defining user-controlled properties, however these properties always take token lists as values, must always inherit, and can only impact document layout or paint by being re-incorporated into the value of other properties via a var() reference.
</p>


<p>
この仕様は、 `css-variables$r を拡張し，［
値~型, 初期~値, 定義-済みの継承の挙動
］を備える~propを登録できるようにする。
◎
This specification extends [css-variables], allowing the registration of properties that have a value type, an initial value, and a defined inheritance behaviour.
</p>


<p>
この仕様は［
`css-paint-api$r ／ `css-layout-api$r
］を補うものであり、~custom~propが［
塗り／~layout
］の挙動に直に影響0できるようにする。
◎
This specification is complementary to [css-paint-api] and [css-layout-api], which allow custom properties to directly impact paint and layout behaviours respectively.
</p>


	</section>
	<section id="registering-custom-properties">
<h2 title="Registering custom properties">2. ~custom~propの登録-法</h2>


<pre class="idl">
dictionary `PropertyDescriptor@I {
  required `DOMString$ `name$m;
           `DOMString$ `syntax$m       = "*";
  required `boolean$   `inherits$m;
           `DOMString$ `initialValue$m;
};

partial interface `CSS$I {
  static void `registerProperty$m(`PropertyDescriptor$I %descriptor);
};
</pre>

<p>
各 `Document$I ~objは、
`registeredPropertySet@sl
内部~slotを追加で持つ
— それは、登録-済みの~custom~propについて述べる~recordたちが成す集合を~~保持する。
◎
Additional, the Document object gains a new [[registeredPropertySet]] private slot, which is a set of records that describe registered custom properties.
</p>


		<section id="the-propertydescriptor-dictionary">
<h3 title="The PropertyDescriptor dictionary">2.1. `PropertyDescriptor^I 辞書</h3>

<p id="propertydescriptor">
`PropertyDescriptor$I 辞書は、作者が指定した［
~custom~prop用の環境設定~options
］を表現する
— それは、次の~memberからなる：
◎
A PropertyDescriptor dictionary represents author-specified configuration options for a custom property. PropertyDescriptor dictionaries contain the following members:
</p>

<dl class="idl-def">
	<dt>`name@m
◎
name, of type DOMString
</dt>
	<dd>
定義する~custom~propの名前を与える。
◎
The name of the custom property being defined.
</dd>

	<dt>`syntax@m
◎
syntax, of type DOMString, defaulting to "*"
</dt>
	<dd>
この~custom~propをどう構文解析するかを表現する文字列を与える。
◎
A string representing how this custom property is parsed.
</dd>

	<dt>`inherits@m
◎
inherits, of type boolean
</dt>
	<dd>
この~custom~propは［
継承するべきならば ~T ／
他の場合は ~F
］。
◎
True if this custom property should inherit down the DOM tree; False otherwise.
</dd>

	<dt>`initialValue@m
◎
initialValue, of type DOMString
</dt>
	<dd>
この~custom~propの初期~値を与える。
◎
The initial value of this custom property.
</dd>
</dl>



		</section>
		<section id="the-registerproperty-function">
<h3 title="The registerProperty() function">2.2. `registerProperty()^m ~method</h3>

<dl class="idl-def">
	<dt>`registerProperty(descriptor)@m</dt>
	<dd>
%descriptor に供された環境設定~optionsに則って~custom~propを登録する。
◎
The registerProperty(PropertyDescriptor descriptor) method registers a custom property according to the configuration options provided in descriptor.＼
</dd>
	<dd>
被呼出時には、次を実行し~MUST
⇒
`~custom~propを登録する$(
%descriptor の `name$m ~memberの値,
%descriptor の `syntax$m ~memberの値,
%descriptor の `inherits$m ~memberの値,
%descriptor の `initialValue$m ~memberの値
)
◎
When it is called, it executes the register a custom property algorithm, passing the options in its descriptor argument as arguments of the same names.
</dd>
</dl>

<div class="algorithm">

<p>
以下において
`構文解析を試みる@
所では、所与の
( %文字列, %構文 )
に対し，次を走らすとする：
</p>

<ol>
	<li>
~IF［
%文字列 は %構文 に合致しない
］
⇒
~THROW `SyntaxError$E
</li>
	<li>
~RET %文字列 を %構文 に則って構文解析した結果
</li>
</ol>
</div>

<div class="algorithm">

<p>
`~custom~propを登録する@
ときは、所与の
( 文字列 %名前,
文字列 %構文,
真偽値 %継承する,
文字列 %初期~値
)
に対し，次の手続きを実行する：
◎
To register a custom property with name being a string, and optionally syntax being a string, inherits being a boolean, and initialValue being a string, execute these steps:
</p>

<ol>
	<li>
%~prop集合 ~LET `現在の大域~obj$に`結付けられている文書$の `registeredPropertySet$sl ~slot値
◎
Let property set be the value of the current global object’s associated Document’s [[registeredPropertySet]] slot.
</li>
	<li>
%解析済み名 ~LET `構文解析を試みる$( %名前, `custom-property-name$t )
◎
Attempt to parse name as a &lt;custom-property-name&gt;. If this fails, throw a SyntaxError and exit this algorithm.
◎
Otherwise, let parsed name be the parsed value.
</li>
	<li>
~IF［
%~prop集合 内に［
~prop名 ~EQ %解析済み名
］なる~recordは在る
］
⇒
~THROW `InvalidModificationError$E
◎
If property set already contains an entry with parsed name as its property name (compared codepoint-wise), throw an InvalidModificationError and exit this algorithm.
</li>
	<li>
~IF［
%構文 ~IN { ε, `*^l （ U+002A ASTERISK ） }
］
⇒
%解析済み構文 ~LET ε
◎
If syntax is not present, or is equal to "*" (U+002A ASTERISK), let parsed syntax be undefined, and skip to the next step of this algorithm.
</li>
	<li>
<p>
~ELSE
⇒
%解析済み構文 ~LET `構文解析を試みる$( %構文,
<a href="#supported-syntax-strings">§~supportされる構文~文字列</a>に与える規則
)
◎
Otherwise, attempt to parse syntax according to the rules in §2.3 Supported syntax strings. If it does not parse successfully, throw a SyntaxError. Otherwise, let parsed syntax be the parsed syntax.
</p>

<p class="note">注記：
例えば、妥当な構文~文字列は

`&lt;length&gt;^l や
`&lt;number&gt;+^l
の様な何かであり，許容される構文は
<a href="~CSSVAL#value-defs">CSS Values 3 §2 値~定義~構文</a>
の下位集合である。
この仕様の将来~levelでは、［
~CSS~propが許容する全部的な構文を，より近く真似る~custom~prop
］も許容するように，許容される構文~文字列の複雑さを拡げるものと期待されている。
◎
Note: For example, a valid syntax string is something like "&lt;length&gt;", or "&lt;number&gt;+"; the allowed syntax is a subset of CSS Values 3 §2 Value Definition Syntax. Future levels of this specification are expected to expand the complexity of allowed syntax strings, allowing custom properties that more closely resemble the full breadth of what CSS properties allow.
</p>
	</li>
	<li>
<p>
~IF［
%解析済み構文 ~EQ ε
］：
</p>
		<ol>
			<li>
~IF［
%初期~値 ~EQ ε
］
⇒
%解析済み初期~値 ~LET 空
— これは［
`css-variables$r に定義される~custom~propの “既定の” 初期~値
］として扱われ~MUST。
◎
If parsed syntax is undefined, and initialValue is not present, let parsed initial value be empty. This must be treated identically to the "default" initial value of custom properties, as defined in [css-variables]. Skip to the next step of this algorithm.
</li>
			<li>
~ELSE
⇒
%解析済み初期~値 ~LET `構文解析を試みる$( %初期~値, `declaration-value$t )
◎
Otherwise, if parsed syntax is undefined, parse initialValue as a &lt;declaration-value&gt;. If this fails, throw a SyntaxError and exit this algorithm. Otherwise, let parsed initial value be the parsed result. Skip to the next step of this algorithm.
</li>
		</ol>
	</li>
	<li>
~ELIF［
%初期~値 ~EQ ε
］
⇒
~THROW `SyntaxError$E
◎
Otherwise, if initialValue is not present, throw a SyntaxError and exit this algorithm.
</li>
	<li>
<p>
~ELSE：
</p>
		<ol>
			<li>
%解析済み初期~値 ~LET `構文解析を試みる$( %初期~値, %解析済み構文 )
◎
Otherwise, parse initialValue according to parsed syntax. If this fails, throw a SyntaxError and exit this algorithm.
</li>
			<li>
~IF［
%解析済み初期~値 は`独立に算出-可能$でない
］
⇒
~THROW `SyntaxError$E
◎
Otherwise, let parsed initial value be the parsed result. If parsed initial value is not computationally independent, throw a SyntaxError and exit this algorithm.
</li>
		</ol>
	</li>
	<li>
%~prop集合 に次のようにされた~recordを追加する
⇒＃
~prop名 ~SET %解析済み名,
構文  ~SET %解析済み構文,
初期~値  ~SET %解析済み初期~値,
継承-~flag ~SET %継承する
◎
Set inherit flag to the value of inherits.
◎
Let registered property be a record with a property name of parsed name, a syntax of parsed syntax, an initial value of parsed initial value, and an inherit flag of inherit flag. Add registered property to property set.
</li>
</ol>

</div>

<p>
~prop値は、次に挙げるもののみを利用して算出d値に変換できるならば
`独立に算出-可能@
とされる
⇒＃
要素~上の~propの値,
~CSSにより変更し得ない “大域的な” 情報
◎
A property value is computationally independent if it can be converted into a computed value using only the value of the property on the element, and "global" information that cannot be changed by CSS.
</p>

<div class="example">

<p>
例えば `5px^v は、`独立に算出-可能$になる
— それを算出d値に変換した結果は ~~元のままなので。
同様に，`1in^v も、`独立に算出-可能$になる
— 算出d値に変換するときには，［
`1in^v は `96px^v である
］という “大域的な知識” のみに依拠し、~CSSにおける何ものも，それを［
改める／調整する
］ことはないので。
◎
For example, 5px is computationally independent, as converting it into a computed value doesn’t change it at all. Similarly, 1in is computationally independent, as converting it into a computed value relies only on the "global knowledge" that 1in is 96px, which can’t be altered or adjusted by anything in CSS.
</p>

<p>
他方 `3em^v は`独立に算出-可能$でない
— それは、要素（または要素の親）上の `font-size$p 値に依拠するので。
`var$f 関数を伴う値も`~custom~prop$の値に依拠するので~~同様になる。
◎
On the other hand, 3em is not computationally independent, because it relies on the value of font-size on the element (or the element’s parent). Neither is a value with a var() function, because it relies on the value of a custom property.
</p>

</div>

<p>
所与の型を伴う~custom~propが登録されたとき、その~prop用の指定d値を算出d値に転換する処理-は，選定された型により全部的に定義される
— <a href="#calculation-of-computed-values">§算出d値の計算</a>
にて述べるように。
◎
When a custom property is registered with a given type, the process via which specified values for that property are turned into computed values is defined fully by the type selected, as described in §2.4 Calculation of Computed Values.
</p>

<p class="note">注記：
将来には、~propを未登録にする仕方も追加され得る。
◎
Note: A way to unregister properties may be added in the future.
</p>

<p>
~custom~propの登録は、いかなる仕方でも，`~cascade$に影響しては~MUST_NOT。
登録された~prop用に指定した構文を問わず、`~custom~prop$は，構文解析-時点では 通常通りほぼ何でも受容するように構文解析される。
しかしながら，登録された`~custom~prop$に対する`指定d値$が 登録した構文に違反する場合、~propは`算出d値の時点で無効$になる（したがって，登録した初期~値に設定し直される）。
◎
Registering a custom property must not affect the cascade in any way. Regardless of what syntax is specified for a registered property, at parse time it is still parsed as normal for a custom property, accepting nearly anything. If the specified value for a registered custom property violates the registered syntax, however, the property becomes invalid at computed-value time (and thus resets to the registered initial value).
</p>

<div class="example">

<p>
既定では、一連の~token並びとして構文解析できる どの~custom~prop宣言も妥当になる。
よって，次の~stylesheetによる結果は：
◎
By default, all custom property declarations that can be parsed as a sequence of tokens are valid. Hence, the result of this stylesheet:
</p>

<pre class="lang-css">
.thing {
  --my-color: green;
  --my-color: url("not-a-color");
  color: var(--my-color);
}
</pre>

<p>
`class^a `thing^l を伴う要素の `color$p ~propは、 `inherit$v に設定される
— 2 個目の `--my-color^p 宣言は 構文解析-時に 1 個目のものを上書きし（両者とも妥当である）、
`color$p ~prop内の `var$f 参照は `算出d値の時点で無効$と見出されるので（ `url("not-a-color")^v は `color$t でないので）。
~CSS~pipelineのこの段階（算出d値の時点）で可用な~fallbackは，~propの初期~値しかなく、
`color$p の事例では `inherit$v になる。
利用-可能な妥当な値は他にもあるが（ `green^v ）、
`url^f がより~~優先されるので，構文解析-時に除去される。
◎
is to set the color property of elements of class "thing" to inherit. The second --my-color declaration overrides the first at parse time (both are valid), and the var() reference in the color property is found to be invalid at computed-value time (because url("not-a-color") is not a color). At this stage of the CSS pipeline (computation time), the only available fallback is the initial value of the property, which in the case of color is inherit. Although there was a valid usable value (green), this was removed during parsing because it was superseded by the URL.
</p>

<p>
次を~callした場合：
◎
If we call:
</p>

<pre class="lang-javascript">
CSS.registerProperty({
  name: "--my-color",
  syntax: "&lt;color&gt;",
  initialValue: "black",
  inherits: false
});
</pre>

<p>
この登録が上の~stylesheetを構文解析する前, 後どちらに生じようが、構文解析が有意に変化することはない。
登録が生じたときの，唯一の相違は：
代わりに `--my-color^p ~propが`算出d値の時点で無効$になり、その初期~値 `black$v に設定される。
それから、 `color$p が妥当に `black$v に設定される
— `算出d値の時点で無効$にされ， `inherit$v になるのではなく。
◎
the parsing doesn’t significantly change, regardless of whether the registration occurs before or after the stylesheet above. The only difference is that it’s the --my-color property that becomes invalid at computed-value time instead and gets set to its initial value of black; then color is validly set to black, rather than being invalid at computed-value time and becoming inherit.
</p>

</div>

		</section>
		<section id="supported-syntax-strings">
<h3 title="Supported syntax strings">2.3. ~supportされる構文~文字列</h3>

<p>
以下に挙げる構文~文字列が~supportされる：
◎
The following syntax strings are supported:
</p>

<dl>
	<dt>
~primitive項
◎
Primitive Terms
</dt>
	<dd>
<p>
次に挙げる構文~文字列は、~primitive項であり、その下に述べるように組合せれる：
◎
The following syntax strings are primitive terms that can be combined as described below:
</p>
		<dl>
			<dt>`&lt;length&gt;^l</dt>
			<dd>
<!-- Any valid -->
`length$t 値
◎
Any valid &lt;length&gt; value
</dd>

			<dt>`&lt;number&gt;^l</dt>
			<dd>
`number$t 値
◎
&lt;number&gt; values
</dd>

			<dt>`&lt;percentage&gt;^l</dt>
			<dd>
`percentage$t 値
◎
Any valid &lt;percentage&gt; value
</dd>

			<dt>`&lt;length-percentage&gt;^l</dt>
			<dd>
`length$t 値
◎
Any valid &lt;length&gt;＼
</dd>
			<dd>
`percentage$t 値
◎
or &lt;percentage&gt; value,＼
</dd>
			<dd>
`length$t, `percentage$t 成分の組合せからなる `calc()$t 式
【`~math関数$？ 】
◎
any valid &lt;calc()&gt; expression combining &lt;length&gt; and &lt;percentage&gt; components.
</dd>

			<dt>`&lt;color&gt;^l</dt>
			<dd>
`color$t 値
◎
Any valid &lt;color&gt; value
</dd>

			<dt>`&lt;image&gt;^l</dt>
			<dd>
`image$t 値
◎
Any valid &lt;image&gt; value
</dd>

			<dt>`&lt;url&gt;^l</dt>
			<dd>
`url$t 値
◎
Any valid &lt;url&gt; value
</dd>

			<dt>`&lt;integer&gt;^l</dt>
			<dd>
`integer$t 値
◎
Any valid &lt;integer&gt; value
</dd>

			<dt>`&lt;angle&gt;^l</dt>
			<dd>
`angle$t 値
◎
Any valid &lt;angle&gt; value
</dd>

			<dt>`&lt;time&gt;^l</dt>
			<dd>
`time$t 値
◎
Any valid &lt;time&gt; value
</dd>

			<dt>`&lt;resolution&gt;^l</dt>
			<dd>
`resolution$t 値
◎
Any valid &lt;resolution&gt; value
</dd>

			<dt>`&lt;transform-function&gt;^l</dt>
			<dd>
`transform-function$t 値
◎
Any valid &lt;transform-function&gt; value
</dd>

			<dt>`&lt;custom-ident&gt;^l</dt>
			<dd>
`custom-ident$t 値
◎
Any valid &lt;custom-ident&gt; value
</dd>
			<dt>
`custom-ident$t 生成規則に合致する, かつ［
`名前開始~符号位置$, 0 個~以上の`名前~符号位置$
］並びが成すもの
◎
Any sequence consisting of a name-start code point, followed by zero or more name code points, which matches the &lt;custom-ident&gt; production
</dt>
			<dd>
その並びで与えられる識別子
◎
That identifier
</dd>
			<dd class="note">注記：
`custom-ident$t は、符号位置ごとに比較される。
これは、~UA定義な~CSSにおける通常の挙動（ ~ASCIIに制限され, `~ASCII大小無視$で比較される）と異なる。
なので， `Red^c の様な `ident^t を指定した場合、値 `Red^v は受容されるが， `red^v, `RED^v は合致しない。
~CSS表記規約に合致するためには、 `ident^t は~ASCIIのみに制約した上で，小文字で記すことが推奨される。
◎
Note: &lt;custom-ident&gt;s are compared codepoint-wise with each other; this is different than the normal behavior of UA-defined CSS which limits itself to ASCII and is ASCII case-insensitive. So, specifying an ident like Red means that the precise value Red is accepted; red, RED, and any other casing variants are not matched by this. It is recommended that idents be restricted to ASCII and written in lower-case, to match CSS conventions.
</dd>
		</dl>
	</dd>

	<dt>`&lt;transform-list&gt;^l</dt>
	<dd>
`transform-function$t 値たちからなる~list。
これは、 `&lt;transform-function&gt;+^l に等価な便利用~生成規則である。
◎
A list of valid &lt;transform-function&gt; values. This is a convenience production which is equivalent to "&lt;transform-function&gt;+"
</dd>

	<dt>
いずれかの~primitive項に `+^l を付加して得られる文字列
◎
Any primitive term followed by '+'
</dt>
	<dd>
1 個~以上の［
その項が指定する型の値
］が成す，~space区切りの~list。
`&lt;transform-list&gt;^l は すでに~space区切りの~listなので、
`&lt;transform-list&gt;+^l は 妥当でないことに注意。
◎
A space-separated list of one or more repetitions of the type specified by the string. Note: Since &lt;transform-list&gt; is already a space separated list, &lt;transform-list&gt;+ is invalid.
</dd>

	<dt>
いずれかの~primitive項に `#^l を付加して得られる文字列
◎
Any primitive term followed by '#'
</dt>
	<dd>
1 個~以上の［
その項が指定する型の値
］が成す，~comma区切りの~list。
◎
A comma-separated list of one or more repetitions of the type specified by the string.
</dd>

	<dt>
いくつかの項からなる任意の組合せを `|^l で区切って得られる文字列
◎
Any combination of terms separated by '|'
</dt>
	<dd>
組合せを成すある~~項に合致する値
— 指定された順序で【先頭に近い項ほど~~優先される】。
◎
Any value that matches one of the items in the combination, matched in specified order.
</dd>
	<dd class="note">注記：
すなわち，構文~文字列
`red | &lt;color&gt;^l
が与えられた下では、［
値 `red$v と照合したときには，識別子として構文解析する
］ことになる一方，［
値 `blue$v と照合したときには， `color$t として構文解析する
］ことになる。
◎
Note: That is, given the syntax string "red | &lt;color&gt;", matching the value red against it will parse as an identifier, while matching the value blue will parse as a &lt;color&gt;.
</dd>

	<dt>`*^l</dt>
	<dd>
妥当な任意の~token~stream
◎
Any valid token stream
</dd>
</dl>


<p class="note">注記：
`css3-values$r は、長さのみを受容する~propと, 長さ, 百分率とも受容する~propとの区別を保守する。
しかしながら，この区別は、現時点では生成規則と綺麗に揃っていない。
それを受け，この区別を綺麗に指定する目的で、この仕様は `length-percentage^t 生成規則を導入する。
◎
Note: [css3-values] maintains a distinction between properties that accept only a length, and properties that accept both a length and a percentage, however the distinction doesn’t currently cleanly line up with the productions. Accordingly, this specification introduces the length-percentage production for the purpose of cleanly specifying this distinction.
</p>

<p>
指定された構文に関わらず，すべての~custom~propは、`~CSS全域~keyword$（ `revert$v も含む）を受容して，それらの値を適切に処理することになる。
◎
Regardless of the syntax specified, all custom properties will accept CSS-wide keywords as well as revert, and process these values appropriately.
</p>


<p class="note">注記：
このことは、 `PropertyDescriptor$I 辞書の `initialValue$m ~memberには適用されない。
◎
Note: This does not apply to the initialValue member of the PropertyDescriptor dictionary.
</p>

<div class="example">

<p>
例えば，次のものは、どれも妥当な構文~文字列になる：
◎
For example, the following are all valid syntax strings.
</p>


<dl>
	<dt>`&lt;length&gt;^l</dt>
	<dd>
長さ値を受容する
◎
accepts length values
</dd>

	<dt>`&lt;length&gt; | &lt;percentage&gt;^l</dt>
	<dd>
［
長さ ／ 百分率／ 百分率を与える~calc式 ／ 長さを与える~calc式
］値を受容するが、［
長さ値, 百分率~値
］の組合せを包含している~calc式は受容しない。
◎
accepts lengths, percentages, percentage calc expressions, and length calc expressions, but not calc expressions containing a combination of length and percentage values.
</dd>

	<dt>`&lt;length-percentage&gt;^l</dt>
	<dd>
［
`&lt;length&gt; | &lt;percentage&gt;^l
］が受容するすべての値, および
長さ値と百分率~値の組合せを包含している~calc式を受容する。
◎
accepts all values that "&lt;length&gt; | &lt;percentage&gt;" would accept, as well as calc expressions containing a combination of both length and percentage values.
</dd>

	<dt>`big | bigger | BIGGER^l</dt>
	<dd>
［
`big^v, `bigger^v, `BIGGER^v
］（いずれも `ident^t ）を受容する。
◎
accepts the ident "big", or the ident "bigger", or the ident "BIGGER".
</dd>

	<dt>`&lt;length&gt;+^l</dt>
	<dd>
長さ値が成す~listを受容する。
◎
accepts a list of length values.
</dd>
</dl></div>



		</section>
		<section id="calculation-of-computed-values">
<h3 title="Calculation of Computed Values">2.4. 算出d値の計算</h3>

<p>
~custom~propの構文は、その~prop用に［
指定d値から算出d値を生成する方法
］を全部的に決定する。
◎
The syntax of a custom property fully determines how computed values are generated from specified values for that property.
</p>

<p>
`~CSS全域~keyword$（ `revert$v も含む）が生成する算出d値は、
`css3-values$r, `css-cascade-4$r
に従う。
他の場合：
◎
The CSS-wide keywords and revert generate computed values as described in [css3-values] and [css-cascade-4] respectively. Otherwise:
</p>

<ul>
	<li>
`length^t 値~用の算出d値は、 `px^css 単位による絶対~長さになる。
◎
For &lt;length&gt; values, the computed value is the absolute length expressed in pixels.
</li>
	<li>
<p>
`length-percentage^t 値~用の算出d値は、次のいずれかになる：
◎
For &lt;length-percentage&gt; values, the computed value is one of the following:
</p>

		<ul>
			<li>
指定d値は長さ単位のみ包含する場合
⇒
算出d値は `px^css 単位による絶対~長さになる。
◎
if the specified value contains only length units, the computed value is the absolute length expressed in pixels.
</li>
			<li>
指定d値は百分率のみを包含する場合
⇒
算出d値は単純な百分率になる。
◎
if the specified value contains only percentages, the computed value is a simple percentage.
</li>
			<li>
他の場合
⇒
算出d値は［
`px^css 単位による絶対~長さ, 百分率~値
］を包含している `calc^f 式になる。
◎
otherwise, the computed value is a calc expression containing an absolute length expressed in pixels, and a percentage value.
</li>
		</ul>
	</li>
	<li>
［
`custom-ident^t ／
`ident^t ／
`color^t ／
`integer^t ／
`angle^t ／
`time^t ／
`resolution^t ／
`*^l
］値~用の算出d値は、指定d値になる。
◎
For &lt;custom-ident&gt;, ident, &lt;color&gt;, &lt;integer&gt;, &lt;angle&gt;, &lt;time&gt;, &lt;resolution&gt; or "*" values, the computed value is as specified.
</li>
	<li>
<p>
`url^t 値~用の算出d値は、次のいずれかになる：
◎
For &lt;url&gt; values, the computed value is one of the following:
</p>

		<ul>
			<li>
~URLは相対~URLである場合、算出d値は `css3-values$r に従って絶対~URLに解決される。
◎
if the URL is a relative URL, the computed value is the resolved absolute URL as described in [css3-values].
</li>
			<li>
他の場合、算出d値は指定d値になる。
◎
otherwise, the computed value is as specified.
</li>
		</ul>
<p>
`image^t 値~用の算出d値は、値~内に現れる相対~URLは［
`css3-values$r に従って絶対~URLに解決される
］ことを除いて，指定d値になる。
◎
For &lt;image&gt; values, the computed value is as specified, except that relative URLs that appear in the value are resolved to absolute URLs as described in [css3-values].
</p>
	</li>
	<li>
~calc式でない［
`number^t ／ `percentage^t
］値~用の算出d値は、指定d値になる。
~calc式を与える［
`number^t ／ `percentage^t
］値は、算出の間に単純な［
実数／百分率
］に簡約される。
◎
For &lt;number&gt; and &lt;percentage&gt; values which are not calc expressions, the computed value is as specified. Calc expressions that are &lt;number&gt; and &lt;percentage&gt; values get reduced during computation to simple numbers and percentages respectively.
</li>
	<li>
`transform-list^t を成す `transform-function^t 値~用の算出d値は、指定d値を成すすべての長さ値をそれぞれの算出d値に解決した結果になる。
◎
For &lt;transform-function&gt; values contained in &lt;transform-list&gt; values, the computed value is as specified but with all lengths resolved to their computed values.
</li>
	<li>
［［
`|^l で区切られた何~項かからなる構文~文字列
］により指定される値
］用の算出d値は、［
指定d値に合致する最初の~~項
］用の計算~規則を適用した結果になる。
◎
For values specified by a syntax string that include "|" clauses, the computed value is given by applying the calculation rules for the first clause that matches to the specified value.
</li>
	<li>
~list値~用の算出d値は、~listを成す各~項を算出d値に~~置換した結果になる。
◎
For list values, the computed value is a list of the computed values of the primitives in the list.
</li>
</ul>


		</section>
		<section id="supports">
<h3 title="Registered Properties and @supports">2.5. 登録された~propと `supports^at</h3>

<p>
登録されていない~custom~propは、 `supports$at を介して試験されるときには “常に妥当” になる
— `@supports (--foo: red) {...}^css の様な規則を評価した結果は、~custom~prop用の（ごく寛容な）構文に違反しない限り，常に真になる。
◎
Unregistered custom properties are “always valid” when tested via @supports; a rule like `@supports (--foo: red) {...}` is always true so long as you don’t violate the (very liberal) syntax for custom properties.
</p>

<p>
~custom~propを登録しても、これが変化することはない。
例えば，ある~custom~propが `syntax: "&lt;color&gt;"^c で登録されたとしても、
`@supports (--foo: 1em) {...}^css
の様な規則は，依然として真に評価され, その~styleは適用される。
◎
Registering a custom property does not change this. Even if a custom property is, for example, registered with `syntax: " "`, a rule like `@supports (--foo: 1em) {...}` will still evaluate as true and apply those styles.
</p>

<p class="note">注記：
これは、登録された~custom~propを構文解析するときの挙動に合致する。
構文に `&lt;color&gt;^l を指定して登録された~custom~prop `--foo^p が，
`--foo: 1em;^css
と記されたとしても、構文解析-時には，依然として妥当として受容されることになる
— が、自動的に`算出d値の時点で無効$になる。
`supports$at は構文解析-時の挙動を試験するので、登録した構文を問わず，すべての値を妥当として受容する。
◎
Note: This matches the parsing behavior of registered custom properties. A registered custom property specified as `" "` but written as `--foo: 1em;` will still be accepted as valid at parse-time, but be automatically invalid at computed-value time. As @supports tests parse behavior, it thus also accepts all values as valid regardless of the registered syntax.
</p>

		</section>
		<section id="dependency-cycles-via-relative-units">
<h3 title="Dependency cycles via relative units">2.6. 相対~単位を介する循環依存</h3>

<p>
登録された~custom~propは、循環依存の解決にあたり，登録されていない~custom~propと同じ規則に従うが、以下に挙げる追加の拘束も~~課される:
◎
Registered custom properties follow the same rules for dependency cycle resolution as unregistered custom properties, with the following additional constraints:
</p>

<p>
登録された~custom~propのうち、構文~成分に［
`length$t ／ `length-percentage$t
］を伴うものは：
◎
For any registered custom property with a &lt;length&gt; or &lt;length-percentage&gt; syntax component:
</p>

<ul>
	<li>
~propは［
`em$u ／ `ex$u ／ `cap$u ／ `ch$u ／ `ic$u ／ `lh$u
］単位を包含する場合
⇒
~propと現在の要素の `font-size$p ~propとの間を辺で結ぶ。
◎
If the property contains any of the following units: em, ex, cap, ch, ic, lh; then add an edge between the property and the font-size of the current element.
</li>
	<li>
~propは `lh$u 単位を包含する場合
⇒
~propと現在の要素の `line-height$p ~propとの間を辺で結ぶ。
◎
If the property contains the lh unit, add an edge between the property and the line-height of the current element.
</li>
	<li>
~propは［
`rem$u ／ `rlh$u
］単位を包含する場合
⇒
~propと根~要素の `font-size$p ~propとの間を辺で結ぶ。
◎
If the property contains any of the following units: rem, rlh; then add an edge between the property and the font-size' of the root element.
</li>
	<li>
~propは `rlh$u 単位を包含する場合
⇒
~propと根~要素の `line-height$p ~propとの間を辺で結ぶ。
◎
If the property contains the rlh unit, add an edge between the property and the line-height' of the root element.
</li>
</ul>

<div class="example">
<p>
例えば，次の登録が与えられたとする：
◎
For example, given this registration:
</p>

<pre class="lang-javascript">
CSS.registerProperty({
  name: "--my-font-size",
  syntax: "&lt;length&gt;",
  initialValue: "0px",
  inherits: false
});
</pre>

<p>
次の~styleは、循環依存を生産することになる：
◎
the following will produce a dependency cycle:
</p>

<pre class="lang-css">
div {
  --my-font-size: 10em;
  font-size: var(--my-font-size);
}
</pre>

<p>
`font-size^p は、値 `unset$v が指定されていたかのように挙動することになる。
◎
and font-size will behave as if the value unset was specified.
</p>

</div>

		</section>
	</section>
	<section id="behavior-of-custom-properties">
<h2 title="Behavior of Custom Properties">3. ~custom~propの挙動</h2>

		<section id="animation-behavior-of-custom-properties">
<h3 title="Animation Behavior of Custom Properties">3.1. ~animationにおける~custom~propの挙動</h3>


<p class="note">注記：
［
`css3-animations$r ／ `css3-transitions$r
］に定義されるように，~custom~propを参照する［
~animation ／ 遷移
］を指定することも可能である。
◎
Note: As defined by [css3-animations] and [css3-transitions], it is possible to specify animations and transitions that reference custom properties.
</p>


<p>
［
~animation／遷移
］から参照される~custom~propは、その型に定義される方式で補間される。
その型が `+^css を伴う~listとして定義されている場合、単純~listとして補間される。
`css3-transitions$r
◎
When referenced by animations and transitions, custom properties interpolate in a manner defined by their types. If their type is defined as a list with "+", it’s interpolated as a simple list [css3-transitions].
</p>

<p>
補間の始値と終値の型が合致する場合、それらは `css3-animations$r に指定されるように補間される。
他の場合、補間は既定の［
50% の所で切り替わるふるまい
］に~fall-backする。
`css3-animations$r
◎
If the start and end of an interpolation have matching types, then they will interpolate as specified in [css3-animations]. Otherwise, the interpolation falls back to the default 50% flip described in [css3-animations].
</p>


<p class="issue">
~custom~prop上の~animationにより補間された中間~結果は、その値を表現している~token~streamを生成-可能で~MUST。
相互運用性の課題を避けるため、これが各 実装~間で標準になることを確保するべきである。
◎
Intermediate interpolated results of animations on custom properties must be able to generate a token stream representing their value. We should ensure that this is standard across implementations to avoid interop issues.
</p>

		</section>
		<section id="conditional-rules">
<h3 title="Conditional Rules">3.2. 条件付き規則</h3>


<p>
［
`supports$at 規則 ／
`supports()$m ~method
］の挙動は `css-variables$r に指定される。
◎
@supports rules and the supports(conditionText) method behave as specified in [css-variables].
</p>


<p class="note">注記：
言い換えれば、所与の~custom~propが値を~supportするかどうか決定する目的においては、
~custom~prop用に登録した型は無視され， 1 個~以上の~tokenからなるどの値も妥当と見なされる。
◎
Note: In other words, for the purpose of determining whether a value is supported by a given custom property, the type registered for the custom property is ignored and any value consisting of at least one token is considered valid.
</p>


<p class="issue">
`supports^at 規則は、~custom~propに対しては，その型も~~考慮に入れるべきか？
`118$issue
◎
should @supports pay attention to type when considering custom properties? &lt;https://github.com/w3c/css-houdini-drafts/issues/118&gt;
</p>



		</section>
		<section id="relative-urls">
<h3 title="Relative URLs">3.3. 相対~URL</h3>

<p>
登録された~custom~prop内に現れる相対~URL値は、 `css3-values$r に従って全部的~URLに解決される。
◎
Relative URL values that appear in registered custom properties are resolved to full URLs as described in [css3-values].
</p>

<div class="example">
<p>
~URLは，それが現れる~stylesheetの基底~URLに対して解決されるので、複数の相対~URLが異なる基底~URLに対して解決される結果になり得る
— それらが同じ【名前の】~prop内に現れようが。
◎
Because URLs resolve against the base URL of the stylesheet they appear in, we can end up with multiple relative URLs that resolve against different base URLs, even though they appear in the same property.
</p>

<p>
例えば
`--url-foo^p, `--url-bar^p
は、ともに，構文に `url$t を与えて登録された~custom~propとする。
ある~stylesheetが `/style/foo/foo.css^c にあって：
◎
For example, suppose --url-foo and --url-bar are registered custom properties with &lt;url&gt; syntax, and that we have a stylesheet at /style/foo/foo.css:
</p>

<pre class="lang-css">
div {
  --url-foo: url("foo.png");
}
</pre>

<p>
別の~stylesheetが `/style/bar/bar.css^c にあって：
◎
and another stylesheet at /style/bar/bar.css
</p>

<pre class="lang-css">
div {
  --url-bar: url("bar.png");
}
</pre>

<p>
文書は， `/index.html^c にあるとする：
◎
and finally a document at /index.html:
</p>

<pre class="lang-markup">
&lt;link href="/style/foo/foo.css" rel="stylesheet" type="text/css"&gt;
&lt;link href="/style/bar/bar.css" rel="stylesheet" type="text/css"&gt;
&lt;div style="background-image: var(--url-foo), var(---url-bar);"&gt;
&lt;/div&gt;
</pre>

<p>
ここでは、［
`var(--url-foo)^v ／ `var(--url-bar)^v
］参照は［
`/style/foo^c ／ `/style/bar^c
］に対して解決される~URLを生産することになる。
◎
Here, the var(--url-foo) reference would produce a URL that resolves against /style/foo, and the var(--url-bar) reference would produce a URL that resolves against /style/bar.
</p>

</div>

		</section>
	</section>
	<section id="examples">
<h2 title="Examples">4. 例</h2>

		<section class="example">
<h3 title="Example 1: Using custom properties to add animation behavior">4.1. ~custom~propを用いて~animationにおける挙動を追加する例</h3>

<pre class="lang-markup">
&lt;script&gt;
CSS.registerProperty({
  name: "--stop-color",
  syntax: "&lt;color&gt;",
  inherits: false,
  initialValue: "rgba(0,0,0,0)"
});
&lt;/script&gt;

&lt;style&gt;

.button {
  --stop-color: red;
  background: linear-gradient(var(--stop-color), black);
  transition: --stop-color 1s;
}

.button:hover {
  --stop-color: green;
}

&lt;/style&gt;
</pre>



		</section>
	</section>
	<section id="security-considerations">
<h2 title="Security Considerations">5. ~securityの考慮点</h2>

<p>
この仕様に与える特色機能により導入される，既知の~security上の課題は無い。
◎
There are no known security issues introduced by these features.
</p>

	</section>
	<section id="privacy-considerations">
<h2 title="Privacy Considerations">6. ~privacyの考慮点</h2>


<p>
この仕様に与える特色機能により導入される，既知の~privacy上の課題は無い。
◎
There are no known privacy issues introduced by these features.
</p>
	</section>

</main></div>

