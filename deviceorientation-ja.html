<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<title>DeviceOrientation Event Specification （日本語訳）</title>

<link rel="stylesheet" href="common.css" type="text/css">
<link rel="stylesheet" href="common-w3c.css" type="text/css">

<style>
img {
	background: white;
}

._matrix tr {
	border: none;
}
._matrix td {
	text-align: center;
	padding: 0.2em 0.5em;
}
._matrix {
	border-collapse: separate;
	border-spacing: 0;
	border: solid thin currentcolor;
	border-style: none solid;
	border-radius: 5px;
}

._math-formula {
	display: flex;
	flex-wrap: wrap;
	align-items: center;
	column-gap: 0.4em;
}

div._math-formula {
	margin-left: 2em;
	
}

.xattr {
	font-family: monospace0, monospace;
	color: var(--K-color);
}

</style>

<script src="common0.js"></script>
<script src="common1.js" async></script>

<script>

Util.ready = function(){
	const source_data = {
		persisted_parts: Object.create(null),
		generate: expand
	};

	{
		// 行列表現を生成
		let data = PAGE_DATA.matrix_data
.replace( /\s*●(.+)/g,
	'</tbody></table><table id="_dgm-$1" class="_matrix"><tbody>' )
.replace(/[\s\S]*?<\/table>/, '')
.replace(/\n(?=[^<\s])/g, '<tr><td>')
.replace(/,[ \t]*/g, '<td>')
.replace(/\.(\w+)/g, '<sub>$1</sub>')
.replace(/%([\wα-γθ]+)/g, '<var>$1</var>')
+ '</tbody></table>';

		delete PAGE_DATA.matrix_data;

		const div = C('div');
		div.innerHTML = data;
		for(let e = div.firstElementChild; e; e = e.nextElementSibling){
			if(e.id){
				source_data.persisted_parts[e.id] = e;
			}
		}
	}

	Util.switchWordsInit(source_data);
}

function expand(){
	const class_map = this.class_map;
	const tag_map = this.tag_map;
	const link_map = this.link_map;
	let ctx_ifc = '';

	return this.html.replace(
		/%[\w\-~一-鿆あ-んα-γθ]+|`(.+?)([$@\^])(\w*)/g,
		create_html
	);

	function create_html(match, key, indicator, klass){
if(!indicator) {//%
	return `<var>${match.slice(1)}</var>`;
}

let href = '';
let href1 = '';
{
	const n = key.indexOf('＠');
	if(n > 0) {
		href1 = key.slice(n + 1);
		key = key.slice(0, n);
	}
}
let text = key;

switch(klass){
case 'r': // ref
	text = `[${key}]`;
	href = `#biblio-${key.toLowerCase()}`;
	break;
case 'l':
case 'pF':
case 'vsT':
	text = `"<code class="literal">${text}</code>"`;
	break;
case 'mc':
	text = 'constructor';
	href = `#dom-${key.toLowerCase()}-${key.toLowerCase()}`;
	break;
case 'I': // set context if @
	if( indicator === '@'){
		ctx_ifc = key.toLowerCase();
	}
	break;
case 'I0': // set context
	ctx_ifc = key.toLowerCase();
	return '';
	break;
case 'm':
	const n = text.indexOf('(');
	if(n > 0){
		key = text.slice(0, n);
		text = key + text.slice(n).replace(/\w+/g, '<var>$&</var>');
	}
	href = `#dom-${ctx_ifc}-${key.toLowerCase()}`;
	break;
case 'sl':
	text = `[[${text}]]`;
	break;
case 'xA':
	text = `[${key}]`;
	break;
case 'dgm':
	return `<a id="_dgm-${key}">＊</a>`;
	break;
case 'en':
	return `<span lang="en">${key}</span>`;
	break;
}

let tag = tag_map[klass];
if(tag) {
	let classname = class_map[klass];
	classname = classname ? ` class="${classname}"` : '';
	text = `<${tag}${classname}>${text}</${tag}>`;
}

if(indicator !== '^'){
	href = href1 || link_map[ klass ? `${klass}.${key}` : key ] || href;
	if(!href){
		console.log(match); // check error
		return match;
	}

	switch(indicator){
	case '$':
		text = `<a href="${href}">${text}</a>`;
		break;
	case '@':
		text = `<dfn id="${href.slice(1)}">${text}</dfn>`;
		break;
	}
}

return text;

	}
}

</script>

<script type="text/plain" id="_source_data">

●●options

spec_title:DeviceOrientation Event Specification
spec_date:2024-01-05
trans_update:2024-01-12
source_checked:231205
spec_status:ED
original_url:https://w3c.github.io/deviceorientation/
ref_id_prefix:biblio-
page_state_key:SENSORS
site_nav:sensors,uievents
ref_id_lowercase:true
copyright:2024,permissive
trans_1st_pub:2019-02-28

●●class_map
et:event-type
op:op
E:error
xA:xattr
jt:js-type
jv:js-value

●●tag_map
E:code
I:code
mc:code
m:code
n:code
et:code
op:span
c:code
jt:code
jv:code
xA:code
cite:cite
i:i

●●original_id_map

●●mdn_urls
devicemotionevent:API/DeviceMotionEvent
devicemotioneventacceleration:API/DeviceMotionEventAcceleration
devicemotioneventrotationrate:API/DeviceMotionEventRotationRate
deviceorientationevent:API/DeviceOrientationEvent
	dictdef-devicemotioneventaccelerationinit:API/DeviceMotionEventAccelerationInit
	dictdef-devicemotioneventinit:API/DeviceMotionEventInit
	dictdef-devicemotioneventrotationrateinit:API/DeviceMotionEventRotationRateInit
	dictdef-deviceorientationeventinit:API/DeviceOrientationEventInit

def-deviceorientation:Events/deviceorientation
def-devicemotion:Events/devicemotion
	def-deviceorientationabsolute:Events/deviceorientationabsolute

●●link_map

	●IDL

Exposed:~WEBIDLjs#Exposed
SecureContext:~WEBIDLjs#SecureContext
boolean:~WEBIDL#idl-boolean
double:~WEBIDL#idl-double
DOMString:~WEBIDL#idl-DOMString
Promise:~WEBIDL#idl-promise

E.NotAllowedError:~WEBIDL#notallowederror
	例外／DOMException:~WEBIDL#idl-DOMException

I.DeviceMotionEvent:#devicemotionevent
I.DeviceMotionEventAcceleration:#devicemotioneventacceleration
I.DeviceMotionEventAccelerationInit:#dictdef-devicemotioneventaccelerationinit
I.DeviceMotionEventInit:#dictdef-devicemotioneventinit
I.DeviceMotionEventRotationRate:#devicemotioneventrotationrate
I.DeviceMotionEventRotationRateInit:#dictdef-devicemotioneventrotationrateinit
I.DeviceOrientationEvent:#deviceorientationevent
I.DeviceOrientationEventInit:#dictdef-deviceorientationeventinit
I.PermissionState:~PERMISSIONS#dom-permissionstate

I.Event:~DOM4#event
I.EventHandler:~WAPI#eventhandler
I.EventInit:~DOM4#dictdef-eventinit
I.Window:~WINDOW#window
I.WindowEventHandlers:~WAPI#windoweventhandlers


	■DeviceOrientationEvent
	m.Constructor:#dom-deviceorientationevent-deviceorientationevent
		%type:#dom-deviceorientationevent-deviceorientationevent-type-eventinitdict-type
		%eventInitDict:#dom-deviceorientationevent-deviceorientationevent-type-eventinitdict-eventinitdict
	m.alpha:#dom-deviceorientationevent-alpha
	m.beta:#dom-deviceorientationevent-beta
	m.gamma:#dom-deviceorientationevent-gamma
	m.absolute:#dom-deviceorientationevent-absolute
	m.requestPermission:#dom-deviceorientationevent-requestpermission

	■DeviceOrientationEventInit
	m.alpha:#dom-deviceorientationeventinit-alpha
	m.beta:#dom-deviceorientationeventinit-beta
	m.gamma:#dom-deviceorientationeventinit-gamma
	m.absolute:#dom-deviceorientationeventinit-absolute
	
	■DeviceMotionEventAcceleration
	m.x:#dom-devicemotioneventacceleration-x
	m.y:#dom-devicemotioneventacceleration-y
	m.z:#dom-devicemotioneventacceleration-z

	■DeviceMotionEventRotationRate
	m.alpha:#dom-devicemotioneventrotationrate-alpha
	m.beta:#dom-devicemotioneventrotationrate-beta
	m.gamma:#dom-devicemotioneventrotationrate-gamma
	m.Constructor:#dom-devicemotionevent-devicemotionevent
	m.type:#dom-devicemotionevent-devicemotionevent-type-eventinitdict-type
	m.eventInitDict:#dom-devicemotionevent-devicemotionevent-type-eventinitdict-eventinitdict

	■DeviceMotionEvent
	m.acceleration:#dom-devicemotionevent-acceleration
	m.accelerationIncludingGravity:#dom-devicemotionevent-accelerationincludinggravity
	m.rotationRate:#dom-devicemotionevent-rotationrate
	m.interval:#dom-devicemotionevent-interval
	m.requestPermission:#dom-devicemotionevent-requestpermission

	■DeviceMotionEventAccelerationInit
	m.x:#dom-devicemotioneventaccelerationinit-x
	m.y:#dom-devicemotioneventaccelerationinit-y
	m.z:#dom-devicemotioneventaccelerationinit-z

	■DeviceMotionEventRotationRateInit
	m.alpha:#dom-devicemotioneventrotationrateinit-alpha
	m.beta:#dom-devicemotioneventrotationrateinit-beta
	m.gamma:#dom-devicemotioneventrotationrateinit-gamma

	■DeviceMotionEventInit
	m.acceleration:#dom-devicemotioneventinit-acceleration
	m.accelerationIncludingGravity:#dom-devicemotioneventinit-accelerationincludinggravity
	m.rotationRate:#dom-devicemotioneventinit-rotationrate
	m.interval:#dom-devicemotioneventinit-interval

~window:~WINDOW#the-window-object
	n.window:~WINDOW#dom-window	→ ~window

n.ondeviceorientation:#dom-window-ondeviceorientation
n.ondeviceorientationabsolute:#dom-window-ondeviceorientationabsolute
n.ondevicemotion:#dom-window-ondevicemotion


et.deviceorientation:#def-deviceorientation
et.deviceorientationabsolute:#def-deviceorientationabsolute
et.devicemotion:#def-devicemotion

	●code 他
pF.accelerometer:#accelerometer-feature
pF.gyroscope:#gyroscope-feature
pF.magnetometer:#magnetometer-feature

l.accelerometer:#permissiondef-accelerometer
l.gyroscope:#permissiondef-gyroscope
l.magnetometer:#permissiondef-magnetometer

l.denied:~PERMISSIONS#dom-permissionstate-denied
	~PERMISSIONS#dfn-denied
l.granted:~PERMISSIONS#dom-permissionstate-granted
	~PERMISSIONS#dfn-granted

vsT.absolute-orientation:#absolute-orientation-virtual-sensor-type
vsT.relative-orientation:#relative-orientation-virtual-sensor-type
vsT.accelerometer:#accelerometer-virtual-sensor-type
vsT.linear-acceleration:#linear-acceleration-virtual-sensor-type
vsT.gyroscope:#gyroscope-virtual-sensor-type

jt.Object:~TC39M/fundamental-objects.html#sec-object-objects
jt.Number:~TC39M/numbers-and-dates.html#sec-number-objects

	●用語
相対~方位:#relative-orientation
絶対~方位:#absolute-orientation
重力を伴う加速度:#acceleration-with-gravity
線形~加速度:#linear-acceleration
回転~率:#rotation-rate

~x軸~加速度:#devicemotioneventacceleration-x-axis-acceleration
~y軸~加速度:#devicemotioneventacceleration-y-axis-acceleration
~z軸~加速度:#devicemotioneventacceleration-z-axis-acceleration
~x軸~回転~率:#devicemotioneventrotationrate-x-axis-rotation-rate
~y軸~回転~率:#devicemotioneventrotationrate-y-axis-rotation-rate
~z軸~回転~率:#devicemotioneventrotationrate-z-axis-rotation-rate

方位~eventを発火する:#fire-an-orientation-event
方位における有意な変化:#significant-change-in-orientation
~deviceの動きと方位~task~source:#device-motion-and-orientation-task-source
方位~data読取りを構文解析する:#parse-orientation-data-reading

~Euler角度:#intrinsic-Tait-Bryan-angles
§ ~deviceの動き:#device-motion-model

	§:#introduction
	§:#use-cases
	§:#deviceorientation

	●外部（sensor
地球の基準~座標系:~ORIENTATION-SENSOR#earths-reference-coordinate-system
~device座標系:~ACCELEROMETER#device-coordinate-system

有限な数:~SENSORS#_finite-number
~sensor融合:~SENSORS#sensor-fusion
~virtual~sensor対応付け:~SENSORS#virtual-sensor-mapping
vS.読取りを供せるか:~SENSORS#virtual-sensor-can-provide-readings-flag
~virtual~sensor型:~SENSORS#virtual-sensor-type
~sensor読取り:~SENSORS#sensor-reading
型ごとの~virtual~sensor~metadata:~SENSORS#per-type-virtual-sensor-metadata
~virtual~sensor~metadata:~SENSORS#virtual-sensor-metadata
vsM.読取り構文解析~algo:~SENSORS#virtual-sensor-metadata-reading-parsing-algorithm
~xyzの読取りを構文解析する:~SENSORS#parse-xyz-reading

	●外部
実装定義:~INFRA#implementation-defined
並列的:~HTMLINFRA#in-parallel
付加する:~INFRA#list-append
~map:~INFRA#ordered-map
map.~entry:~INFRA#map-entry
map.~key:~INFRA#map-key
map.値:~INFRA#map-value

新たな~obj:~WEBIDLjs#new
新たな~promise:~WEBIDLjs#a-new-promise
却下される~promise:~WEBIDLjs#a-promise-rejected-with
~promiseを解決する:~WEBIDLjs#resolve

~eventを発火する:~DOM4#concept-event-fire

利用は許容されて:~HEembed#allowed-to-use

doc.可視性~状態:~HTMLinteraction#visibility-state
一過な作動化を有して:~HTMLinteraction#transient-activation

生成元:~ORIGIN#concept-origin
同一-生成元:~ORIGIN#same-origin

結付けられた文書:~WINDOW#concept-document-window
対応する~navigable:~WINDOW#window-navigable

~navigable:~HTMLds#navigable
nav.~top-level辿可能:~HTMLds#nav-top
~top-level辿可能:~HTMLds#top-level-traversable
nav.作動中な~window:~HTMLds#nav-window
子~navigable:~HTMLds#child-navigable
nav.作動中な文書:~HTMLds#nav-document

~event~handler~event型:~WAPI#event-handler-event-type
~event~handler~IDL属性:~WAPI#event-handler-idl-attributes
~event~handler:~WAPI#event-handlers
~task:~WAPI#concept-task
~task~source:~WAPI#task-source
大域~taskを~queueする:~WAPI#queue-a-global-task
~taskを~queueする:~WAPI#queue-a-task
現在の大域~obj:~WAPI#current-global-object
関連な~realm:~WAPI#concept-relevant-realm
関連な設定群~obj:~WAPI#relevant-settings-object
enV.生成元:~WAPI#concept-settings-object-origin
enV.~secureな文脈:~WAPI#secure-context
関連な大域~obj:~WAPI#concept-relevant-global
gL.~realm:~WAPI#concept-global-object-realm

既定の強力な特能:~PERMISSIONS#dfn-default-powerful-feature
強力な特能:~PERMISSIONS#dfn-powerful-feature
利用する許可を要請する:~PERMISSIONS#dfn-request-permission-to-use
現在の許可~状態を取得する:~PERMISSIONS#dfn-getting-the-current-permission-state
許可を表出する:~PERMISSIONS#dfn-express-permission
施策により制御される特能:~PERMISSIONS-POLICY#policy-controlled-feature
既定の許容list:~PERMISSIONS-POLICY#policy-controlled-feature-default-allowlist

拡張~command:~WEBDRIVER#dfn-extension-commands
~propを取得する:~WEBDRIVER#dfn-getting-properties

●●words_table1
COMPAT:compat-ja.html
	https://compat.spec.whatwg.org/
MOTION-SENSORS:motion-sensors-ja.html
ORIENTATION-SENSOR:orientation-sensor-ja.html
ACCELEROMETER:accelerometer-ja.html
WEBDRIVER:https://w3c.github.io/webdriver/
TC39M:https://tc39.es/ecma262/multipage

pow2:<sup>2</sup>
	DIV:<span class="op">/</span>

●●words_table


	●device
device:
battery::::バッテリー
display::::ディスプレイ
compass::::コンパス
compass-heading:compass heading:compass の向き::コンパスの向き
gimbal-lock:gimbal lock:::ジンバルロック
gyroscope::::ジャイロスコープ
laptop-computer:laptop computer:::ノートPC
sensor::::センサー
tablet::::タブレット
	~hostしている:hosting
融合:fusion::~
信号:signal::~
搭載-:mount:~
携帯:mobile::~::モバイル
電話:phone:~
旋回する:swiveling:~
後部:rear:~
対面-:face:~
寿命:life:~
地図:map:~
乗物:vehicle:~
較正-:calibrate::~
較正:calibration::~
最新な:latest:~

	^en:shaking
sprite::::スプライト

	握って:hold して
	握って:holding the device in their hand
	眺める:view
	~~運行:travel
	組み込まれた:integrated
	~~部位:element
	~~展開-:deploy
	引き出し式の:slide-out
	~sensor融合$:fusion sensor

	●物理／幾何／算術
x:
y:
z:
xyz:
X:
X1:X' 
Y:
Y2:Y'' 
Z:
XYZ:
Euler::::オイラー
角度:angle::~
右手系:right-hand convention::~
左手系:left-hand convention::~
右手:right-hand:~
基準:reference:~
	基準~座標~frame:earth frame
	~device座標~frame:body frame
	~device座標~frame:device frame
	~device座標~frame:device body frame
	座標:Cartesian coordinate
速度:velocity::~
	速度:speed
加速:acceleration::~
加速度:acceleration::~
加速度計:accelerometer::~
磁力計:magnetometer::~
運動:movement::動き
動き:motion::~
傾き:tilting::~
半径:radius::~
右周りに:right-hand bendに::~
回転-:rotate::~
回転:rotation::~
地球:Earth::~
	地球:earth
垂直:perpendicular::~
	直立して:vertical in front
垂直面:vertical plane:~
	垂直面に:in a vertical plane
	垂直面／直立面を成す
縦置き:portrait::~
水平:horizontal::~
	水平~面に寝かされ:lying flat on a horizontal surface
面:surface::~
平面:plane::~
三次元-:tridimensional:~
	真上:Up／:uppermost
	真上を向いて:upward

	上端が真上を指すよう:the top uppermost
時計回り:clockwise::~
自由落下:free-fall::~
重力:gravity::~
	重力:gravity force
重心:center of mass::~
率:rate::~
側:side::~
力学:dynamics::~
揃えら:alignさ:~
揃う:alignする:~
meter::::メートル
milli::::ミリ
	~milli秒:millisecond
	秒:second
radian::::ラジアン
度d:degree:度°
	deg:
線形:linear::~
寄与:contribution:~
固有-:proper::~
alpha:
beta:
gamma:
行列:matrix::~
四元数:quaternion::~
	四元数:Quaternion
四平方定理:four-square-theorem::~
座標系変換:transformation::~
数学的:mathematical::~
近似的:approximate::~
	正な値:positive
変形:transform::~

	~pow2:squared
	等し:equal
	~Euler角度:intrinsic Tait-Bryan angles of type Z - X' - Y''
	~~直交して:orthogonal
	右:right
	向く:towards
	回され:turn
	背面から先 out of the back of
	~~逆回転:in the opposite sense
	〜~~方向の:along 〜
	〜周りの:around 〜
	〜周りの:about 〜
	~周りの回転~:along 〜

	●自動化
virtual:

	●IDL／data／構造

	●処理
	取消~可能:cancelable
換算-:convert::~
換算:conversion::~
	計算-法:calculating
	~RET:abort

	%~event名:event name
	%~window:window
	%絶対か:absolute
	%方位:orientation
	%加速度:acceleration
	%重力を伴う加速度:accelerationIncludingGravity
	%回転~率:rotationRate
	%~interval:interval
	%~x加速度
	%~y加速度
	%~z加速度
	%~x回転~率
	%~y回転~率
	%~z回転~率
	%~beta:x-rotation
	%~gamma:y-rotation
	%~alpha:z-rotation
	%~alpha:alpha
	%~beta:beta
	%~gamma:gamma
	%名前:name
	%許可~状態:permission state
	%許可~状態:permissionState
	%大域~obj:global
	%環境:environment
	%許可~名:permission name
	%状態:state
	%施策:policy
	%施策~群:policies
	%文書:document
	%結果:result
	%~top-level辿可能:topLevelTraversable
	%~virtual~sensor型:virtualSensorType
	%~virtual~sensor:virtualSensor
	%~platform線形~加速度:platformLinearAcceleration
	%~platform重力を伴う加速度:platformAccelerationIncludingGravity
	%~platform回転~率:platformRotationRate
	%~parameter群:parameters
	%読取り:reading

	●保安
露呈-:reveal::露わに
持続的:persistent::~
受動的:passive::~

	●仕様
欠点:disadvantage:~
説明書き:explainer:~
伝える:informする:~
給-:supply:~
欠く:lackする:~
徴す:signifyする:~
参照r:refer:参照
請合う:warrantする:請け合う
変種:variant:~
許容list:allowlist::許容 list:許容リスト
種類:kind:~
編集上:editorial:~
現代化:modernize:~
並替えた:reorderした:並び替えた
export:
commit:
難題:challenge:~
査定-:assess:~
重合する:overlapする:重なり合う
選択肢:option:~
派生する:deriveされる:~
定式化:formation:~
交換可能:interchange 可能:~

	MOTION-SENSORS$r:Motion Sensors Explainer
	有用さに劣る:less useful
	問わない:agnostic
	代替の:alternatively
	より低-:lower-
	低次な:low
	高~level:high-level
	加えて、furthermore
	まったく:can never
	何であれ:irrespective
	足る:sufficiently
	を踏まえて、:In light of 〜
	~~有益に:beneficial impact
	主な:main
	`DOM4$r :DOM4 Events
	〜に利する:on behalf of
	抜き出す:extract illustrate
	示され:shown
	示す:show
	必要-:need
	〜とするなら:provided 〜
	-:we wish to determine the
	-:wishing to
	~~参考:aid
	遂げられ:carried out
	選ばれた:choice
	選ばれ:chosen
	~~選択:choice
	どの座標系を選ぶか:whose choice
	その帰結として:consequently
	用語定義:dfn
	~~有意:substantial
	注記すべき:notable
	書き直-:reword
	語句:phrasing
	倣うように:align
	倣うよう:with
	注記:note
	利用〜ようにした:start 〜 usage
	§ ~deviceの動き:Device Motion Model
	限られて:limited
	読取り:readings
	突きつける:pose
	依存しないよう:to prevent a dependency
	とは違って:contrary to
	敷かれ:laid out
	~~追加な:extra

	●未分類
新鮮:fresh:~
game::::ゲーム
	~game用の:gaming
utility::::ユーティリティ
	-:set of intrinsic
生な:rawな::~
現実:reality::~
現実拡張:augmented-reality::~
閾値:threshold::~
interval::::インターバル
一過:transient::~
束ねる:bundleする:~

	ある:folded to
	上げる:increase
	対応する:corresponding
	成す:form
	指-:point
	含-:include
	始めて:Starting with
	生-:occur
	背後に回され:backgrounded
	~deviceの方位:Device Orientation
	~~円周／:around
	次に分類できる:categorized into following categories
	~PLUS:plus
	~MINUS:equal and opposite to
	-:Finally
	卓上に置かれて:laying flat on a table
	^i:Windows
	^i:Android
	^i:Core Motion
	~~元の:previous
	一連の:a series of
	とは異なる:differs from
	複数種:different kinds
	一度に:at once
	在ること:presence
	在る:present
	来る:come

●●images
＠deviceorientation/
start｜width:450px; height:450px;｜｜.png
z-rotation｜width:450px; height:450px;｜｜.png
	= c-rotation.png
x-rotation｜width:450px; height:450px;｜｜.png
	= a-rotation.png
y-rotation｜width:450px; height:450px;｜｜.png
	= b-rotation.png

●●matrix_data

●equation1
0
0
−1

●equation2
cos(%α), −sin(%α), 0
sin(%α), cos(%α), 0
0, 0, 1

●equation3
1, 0, 0
0, cos(%β), −sin(%β)
0, sin(%β), cos(%β)

●equation4
cos(%γ), 0, sin(%γ)
0, 1, 0
−sin(%γ), 0, cos(%γ)

●equation13a
cos(%α) cos(%γ) − sin(%α) sin(%β) sin(%γ), −cos(%β) sin(%α), cos(%γ) sin(%α) sin(%β) + cos(%α) sin(%γ)
cos(%γ) sin(%α) + cos(%α) sin(%β) sin(%γ), cos(%α) cos(%β), sin(%α) sin(%γ) − cos(%α) cos(%γ) sin(%β)
−cos(%β) sin(%γ), sin(%β), cos(%β) cos(%γ)

●equation5e
−cos(%α)sin(%γ) − sin(%α)sin(%β)cos(%γ)
−sin(%α)sin(%γ) + cos(%α)sin(%β)cos(%γ)
−cos(%β)cos(%γ)


●●ref_normative

[ACCELEROMETER]
    Anssi Kostiainen. ＜Accelerometer＞. URL: https://w3c.github.io/accelerometer/
[DOM]
    Anne van Kesteren. ＜DOM Standard＞. Living Standard. URL: https://dom.spec.whatwg.org/
[ECMASCRIPT]
    ＜ECMAScript Language Specification＞. URL: https://tc39.es/ecma262/multipage/
[GENERIC-SENSOR]
    Rick Waldron. ＜Generic Sensor API＞. URL: https://w3c.github.io/sensors/
[HTML]
    Anne van Kesteren; et al. ＜HTML Standard＞. Living Standard. URL: https://html.spec.whatwg.org/multipage/
[INFRA]
    Anne van Kesteren; Domenic Denicola. ＜Infra Standard＞. Living Standard. URL: https://infra.spec.whatwg.org/
[ORIENTATION-SENSOR]
    Kenneth Christiansen; Anssi Kostiainen. ＜Orientation Sensor＞. URL: https://w3c.github.io/orientation-sensor/
[PERMISSIONS]
    Marcos Caceres; Mike Taylor. ＜Permissions＞. URL: https://w3c.github.io/permissions/
[PERMISSIONS-POLICY-1]
    Ian Clelland. ＜Permissions Policy＞. URL: https://w3c.github.io/webappsec-permissions-policy/
[RFC2119]
    S. Bradner. ＜Key words for use in RFCs to Indicate Requirement Levels＞. March 1997. Best Current Practice. URL: https://datatracker.ietf.org/doc/html/rfc2119
[WEBDRIVER2]
    Simon Stewart; David Burns. ＜WebDriver＞. URL: https://w3c.github.io/webdriver/
[WEBIDL]
    Edgar Chen; Timothy Gu. ＜Web IDL Standard＞. Living Standard. URL: https://webidl.spec.whatwg.org/

●●ref_informative

[CSS-TRANSFORMS-2]
    Tab Atkins Jr.; et al. ＜CSS Transforms Module Level 2＞. URL: https://drafts.csswg.org/css-transforms-2/
[EULERANGLES]
    ＜Euler Angles＞. URL: https://en.wikipedia.org/wiki/Euler_angles
[FINGERPRINT]
    ＜Mobile Device Identification via Sensor Fingerprinting＞. 6 Aug 2014. URL: https://arxiv.org/abs/1408.1416
[G-FORCE]
    ＜G-Force＞. URL: https://en.wikipedia.org/wiki/G-force
[GEOMETRY-1]
    Simon Pieters; Chris Harrelson. ＜Geometry Interfaces Module Level 1＞. URL: https://drafts.fxtf.org/geometry/
[GIMBALLOCK]
    ＜Gimbal Lock＞. URL: https://en.wikipedia.org/wiki/Gimbal_Lock
[GYROSCOPE]
    Anssi Kostiainen. ＜Gyroscope＞. URL: https://w3c.github.io/gyroscope/
[INDOORPOS]
    Shala, Ubejd; Angel Rodriguez. ＜Indoor positioning using sensor-fusion in android devices＞. 2011. URL: http://www.diva-portal.org/smash/record.jsf?pid=diva2%3A475619&amp;dswid=9050
[MOTION-SENSORS]
    Kenneth Christiansen; Alexander Shalamov. ＜Motion Sensors Explainer＞. URL: https://w3c.github.io/motion-sensors/
[PROPERACCELERATION]
    ＜Proper acceleration＞. URL: https://en.wikipedia.org/wiki/Proper_acceleration
[QUATERNIONS]
    ＜Quaternions＞. URL: https://en.wikipedia.org/wiki/Quaternion
[SCREEN-ORIENTATION]
    Marcos Caceres. ＜Screen Orientation＞. URL: https://w3c.github.io/screen-orientation/
[SENSORID]
    Zhang, Jiexin; Beresford, Alastair R.; Sheret, Ian. ＜SensorID: Sensor Calibration Fingerprinting for Smartphones＞. 2019. URL: https://doi.org/10.1109/SP.2019.00072
[TOUCH]
    ＜TouchSignatures: Identification of User Touch Actions and PINs Based on Mobile Sensor Data via JavaScript＞. 12 Feb 2016. URL: https://arxiv.org/abs/1602.04115


●●trans_metadata
<p>
~THIS_PAGEは、~W3Cにより
編集者草案として公開された
<a href="~SPEC_URL">DeviceOrientation Event Specification</a>
を日本語に翻訳したものです。
~PUB
</p>

●●spec_metadata

最新公表バージョン
	https://www.w3.org/TR/orientation-event/
公表履歴
	https://www.w3.org/standards/history/orientation-event/
フィードバック
	<a href="public-device-apis@w3.org">public-device-apis@w3.org</a> with subject line “[orientation-event] … message topic …” (<a href="https://lists.w3.org/Archives/Public/public-device-apis/">archives</a>)
	https://github.com/w3c/deviceorientation/issues
編集
	Reilly Grant (Google LLC)
	Raphael Kubo da Costa (Intel Corporation)
前任編集者
	Rich Tibbett (Opera Software ASA)
	Tim Volodine (Google Inc)
	Steve Block (Google Inc until July 2012)
	Andrei Popescu (Google Inc until July 2012)
更新履歴
	https://github.com/w3c/deviceorientation/commits/main/index.bs

</script>


</head>
<body>

<header>
	<hgroup>
<h1>DeviceOrientation Event</h1>
	</hgroup>
</header>

<div id="MAIN" hidden>
	<section id="abstract">
◎要約

<p>
この仕様は、［
【~UAを】~hostしている~deviceの物理的な方位や動き
］についての情報を供するための，新たな~DOM~eventたちを定義する。
◎
This specification defines several new DOM events that provide information about the physical orientation and motion of a hosting device.
</p>

	</section>
	<section id="sotd">
◎位置付け

<p>
これは、編集者草案の公な複製です…
【以下、この内容は，~SOTD-W3Cに移譲。】
</p>

	</section>

<main id="MAIN0">

	<section id="_conventions">
<h2>【この訳に特有な表記規約】</h2>

◎表記記号

	</section>
	<section id="conformance-requirements">
<h2 title="Conformance requirements">1. 適合性の要件</h2>

【この節の他の内容は、`~W3C日本語訳 共通~page＠~W3Ccommon#conformance$に移譲。】

<p>
この仕様が導入する各種~eventは、
`DOM$r に定義される `Event$I ~interfaceを実装する。
したがって，実装は、
その仕様も~supportするモノトスル。
◎
The events introduced by this specification implement the Event interface defined in the DOM Specification, [DOM]. Implementations must therefore support this specification.
</p>

	</section>
	<section id="introduction">
<h2 title="Introduction">2. 序論</h2>

◎非規範的

<p>
この仕様は、
~hostしている~deviceの物理的な方位や運動についての情報を得するため，
以下に挙げる新たな~DOM~eventたち【！two】を供する。
~eventにより供される情報は、
生な~sensor~dataではなく，高~levelな~dataであり、
下層の情報~sourceを問わない。
共通的な情報の~sourceには、［
~gyroscope, ~compass, 加速度計
］も含まれる。
◎
This specification provides two new DOM events for obtaining information about the physical orientation and movement of the hosting device. The information provided by the events is not raw sensor data, but rather high-level data which is agnostic to the underlying source of information. Common sources of information include gyroscopes, compasses and accelerometers.
</p>

<dl>
	<dt>`deviceorientation$et</dt>
	<dd>
~deviceの物理的な方位を給する
— ~deviceに局所的な座標~frameからの一連の回転として表出される。
◎
The first DOM event provided by the specification, deviceorientation, supplies the physical orientation of the device, expressed as a series of rotations from a local coordinate frame.
</dd>

	<dt>`deviceorientationabsolute$et</dt>
	<dd class="trans-note">【
`相対~方位$に代えて`絶対~方位$が利用されることを除き，
`deviceorientation$et と同様
（この項は、
この訳による補完）。
】</dd>

	<dt>`devicemotion$et</dt>
	<dd>
~deviceの加速度を給する
— 当の~deviceにて定義される座標~frameにおける座標で表出される。
それはまた、
~deviceに局所的な座標~frameについての回転~率も給する。
実用的にアリな所では、
~deviceの重心の加速度も~eventに供されるベキである。
◎
The second DOM event provided by this specification, devicemotion, supplies the acceleration of the device, expressed in Cartesian coordinates in a coordinate frame defined in the device. It also supplies the rotation rate of the device about a local coordinate frame. Where practically possible, the event should provide the acceleration of the device’s center of mass.
</dd>
</dl>

<p class="trans-note">【
“座標~frame（ `coordinate frame^en, 略して `frame^en ）” とは、
抽象-概念としては座標系（ `coordinate system^en ）と同義であるが，
物理的な何かに直に結付けられていることを含意する
（その何かが物体なら、
回転など，物体の動きに~~追従することになる）。
】</p>

<p>
以下の~codeに、
これらの~eventの基本的な利用を抜き出す。
◎
The following code extracts illustrate basic use of the events.
</p>

<div class="example">
<p>
`deviceorientation$et ~eventを受取るよう登録する例：
◎
Registering to receive deviceorientation events:
</p>

<pre class="lang-js">
window.addEventListener("deviceorientation", function(%event) {
    /* <span class="comment">
%event の `alpha^m, `beta^m, `gamma^m ~memberを処理する
◎
process event.alpha, event.beta and event.gamma
</span> */
}, true);
</pre>
</div>

<div class="example">
<p>
当の~deviceは水平~面に寝かされていて，その~screenの上端は西を指しているときの方位は：
◎
A device lying flat on a horizontal surface with the top of the screen pointing West has the following orientation:
</p>

<pre class="lang-js">
{
  alpha: 90,
  beta: 0,
  gamma: 0
};
</pre>

<p>
~compass-heading（ `compass heading^en ）†を取得するには、
単純に 360 度dから `alpha^m を減算する。
~deviceが水平~面~上で回されるに伴い，~compass-headingは［
360 − `alpha^m
］になる。
【†この文脈においては、北極方向から時計回りに，~screenの上端が指す向きまでの角度。】
◎
To get the compass heading, one would simply subtract alpha from 360 degrees. As the device is turned on the horizontal surface, the compass heading is (360 - alpha).
</p>
</div>

<div class="example">
<p>
利用者が握っている~deviceの~screenが垂直面を成していて, 上端は真上を指しているとき、
`beta^m の値は， `alpha^m, `gamma^m が何であれ 90 になる。
◎
A user is holding the device in their hand, with the screen in a vertical plane and the top of the screen pointing upwards. The value of beta is 90, irrespective of what alpha and gamma are.
</p>
</div>

<div class="example">
<p>
利用者が対面するように握っている~deviceは［
~compass-heading†は %N 度dにあり，その~screenは垂直面を成していて, 上端は右を指している
］とき、
~deviceの方位は：
◎
A user facing a compass heading of alpha degrees is holding the device in their hand, with the screen in a vertical plane and the top of the screen pointing to their right. The orientation of the device is:
</p>

<pre class="lang-js">
{
  alpha: 270 - %N,
  beta: 0,
  gamma: 90
};
</pre>

<p class="trans-note">【†
この文脈の “~compass-heading” は、
上の例と整合していない。
おそらく、
`§ ~compass-headingの計算-法＠#worked-example$にて定義されるそれを意味する（~screenに直交し，奥方を指す~vectorの水平~成分）。
】</p>
</div>

<div class="example">
<p>
`devicemotion$et ~eventを受取るよう登録する例：
◎
Registering to receive devicemotion events:
</p>

<pre class="lang-js">
window.addEventListener("devicemotion", function(%event) {
    /* <span class="comment">
%event の［
`acceleration^m,
`accelerationIncludingGravity^m,
`rotationRate^m,
`interval^m
］を処理する。
◎
Process event.acceleration, event.accelerationIncludingGravity,
event.rotationRate and event.interval
</span> */
}, true);
   
</pre>
</div>

<div class="example">
<p>
当の~deviceは，水平~面に寝かされていて その~screenは真上を向いている下では、
`acceleration^m は 0 になり，
`accelerationIncludingGravity^m は次の値になる：
◎
A device lying flat on a horizontal surface with the screen upmost has an acceleration of zero and the following value for accelerationIncludingGravity:
</p>

<pre class="lang-js">
{
  x: 0,
  y: 0,
  z: 9.8
};
</pre>
</div>

<div class="example">
<p>
~deviceは、
自由落下していて，その~screenは水平かつ真上を向いている下では：
`accelerationIncludingGravity^m は 0 になり，
`acceleration^m は次の値になる：
◎
A device in free-fall, with the screen horizontal and upmost, has an accelerationIncludingGravity of zero and the following value for acceleration:
</p>

<pre class="lang-js">
{
  x: 0,
  y: 0,
  z: -9.8
};
</pre>
</div>

<div class="example">
<p>
~deviceは［
半径 %r の~~円周を，右周りに速度 %v で~~運行している乗物
］に搭載されていて、
その~screenは［
垂直面を成していて,
上端は真上を指していて,
乗物の後部に対面している
］とする。
~deviceは［
`acceleration^m, `accelerationIncludingGravity^m
］どちらに対しても，正な~x成分［
%x ~EQ %v ~pow2 ~DIV %r
］を記録し、
`rotationRate.gamma^m に負な値［
%γ ~EQ − ( %v ~DIV %r ) ~MUL ( 180 ~DIV π )
］を記録する：
◎
A device is mounted in a vehicle, with the screen in a vertical plane, the top uppermost and facing the rear of the vehicle. The vehicle is travelling at speed v around a right-hand bend of radius r. The device records a positive x component for both acceleration and accelerationIncludingGravity. The device also records a negative value for rotationRate.gamma:
</p>

<pre class="lang-js">
{
  acceleration: {x: %x, y: 0, z: 0},
  accelerationIncludingGravity: {x: %x, y: 9.8, z: 0},
  rotationRate: {alpha: 0, beta: 0, gamma: %γ}
};
</pre>

【！ v^2/r 】
</div>

	</section>
	<section id="scope">
<h2 title="Scope">3. 視野</h2>

◎非規範的

<p>
この仕様は、［
~hostしている~deviceの物理的な方位や動きを述べる情報
］を検索取得するための~DOM~eventを供することに制限される。
この~APIに意図される目的は、
`§ 利用事例＠#use-cases$
に示されるような単純な利用事例を可能化することである。
次に挙げるものは、
この仕様の視野から外れる
⇒＃
この~dataの操作-用に~utilityを供すること（座標系変換~libraryなど）／
低次な~sensor~dataに~accessすること／
その種の~sensorを直に制御すること
◎
This specification is limited to providing DOM events for retrieving information describing the physical orientation and motion of the hosting device. The intended purpose of this API is to enable simple use cases such as those in Use-Cases section. The scope of this specification does not include providing utilities to manipulate this data, such as transformation libraries. Nor does it include providing access to low sensor data, or direct control of these sensors.
</p>

	</section>
	<section id="model">
<h2 title="Model">4. ~model</h2>

		<section id="device-orientation-model">
<h3 title="Device Orientation">4.1. ~deviceの方位</h3>

<p>
この仕様は、
~deviceの物理的な方位を`実装定義$な基準~座標~frameに相対的な一連の回転として表出する。
◎
This specification expresses a device’s physical orientation as a series of rotations relative to an implementation-defined reference coordinate frame.
</p>

<p>
回転たちが成す連列は、
内在的な［
~Z - ~X1 - ~Y2
］型の `Tait-Bryan^en 角度
（ `intrinsic Tait-Bryan angles of type Z - X' - Y''^en ）
— 以下では，単に
`~Euler角度@
と称する† —
を与える。
それは、
`ACCELEROMETER$r にて定義される`~device座標系$に対し適用され，
以下に要約される：
◎
The sequence of rotation steps is a set of intrinsic Tait-Bryan angles of type Z - X' - Y'' ([EULERANGLES]) that are applied on the device coordinate system defined in [ACCELEROMETER] and summarized below:
</p>

<p class="trans-note">【†
他所から簡便に参照するため、
この訳では，`~Euler角度$（ `Euler angle^en ）をこの定義による用語として利用する
— ~Euler角度の定義には、
他にもいくつか変種があるが
（`参考＠https://en.wikipedia.org/wiki/Euler_angles$）。
】【
内在的とは、
`~device座標系$に適用されることを意味する。
それは、
~deviceの動きに追従する：
~X1は 最初に~Z軸周りの回転を適用した後の~X軸，
~Y2は さらに~X1軸周りの回転を適用した後の~Y軸を表す。
】</p>
		<ul>
			<li>
~xは［
~screen／~keyboard
］の平面~内にあり，正な値は［
~screen／~keyboard
］の右手~側を向く。
◎
x is in the plane of the screen or keyboard and is positive towards the right hand side of the screen or keyboard.
</li>
			<li>
~yは［
~screen／~keyboard
］の平面~内にあり，正な値は［
~screen／~keyboard
］の上端を向く。
◎
y is in the plane of the screen or keyboard and is positive towards the top of the screen or keyboard.
</li>
			<li>
~zは［
~screen／~keyboard
］の平面に垂直であり，正な値は［
~screen／~keyboard
］から外へ【利用者~側へ】を向く。
◎
z is perpendicular to the screen or keyboard, positive out of the screen or keyboard.
</li>
		</ul>

<p>
電話や~tabletなどの携帯~device用には、
~device座標~frameは，標準な方位にある~screen
— 概して縦置き —
に相対的に定義される。
これは、［
引き出し式~keyboardなどの~~部位を~~展開していない ／
~displayなどの旋回する~~部位は その既定の位置にある
］ことを意味する。
そのような~~部位が回転されたり~~展開されて，~screenの方位が変化しても、
~deviceに相対的な座標~frameの方位には影響しない。
~laptop-computerにおいては、
~device座標~frameは，組み込まれた~keyboardに相対的に定義される。
【要約すれば、~deviceの~~可動部ではない，本体の方位に基づく。】
◎
For a mobile device such as a phone or tablet, the device coordinate frame is defined relative to the screen in its standard orientation, typically portrait. This means that slide-out elements such as keyboards are not deployed, and swiveling elements such as displays are folded to their default position. If the orientation of the screen changes when the device is rotated or a slide-out keyboard is deployed, this does not affect the orientation of the coordinate frame relative to the device. For a laptop computer, the device coordinate frame is defined relative to the integrated keyboard.
</p>

<p class="note">注記：
~screen方位における変化を検出するよう望んでいる利用者【~API利用者】は、
`SCREEN-ORIENTATION$r を参照rするべきである。
◎
Note: Users wishing to detect changes in screen orientation should refer to [SCREEN-ORIENTATION].
</p>

<p>
回転は，右手系を利用するモノトスル
— 軸~周りの正な回転は、
軸の正な方向に向かって眺めたとき，時計回りになるよう。
◎
Rotations must use the right-hand convention, such that positive rotation around an axis is clockwise when viewed along the positive direction of the axis.
</p>

<p class="note">注記：
この仕様が利用する座標系は、
`CSS-TRANSFORMS-2$r
`§ 変形の描画~model＠~TRANSFORM2#transform-rendering$
とは異なる
— そこでは、
~y軸の正な向きは下端を指し，回転は左手系に従う。
加えて，
`GEOMETRY-1$r に指定される［
`rotateSelf()＠~GEOMETRY#dom-dommatrix-rotateself$c ／
`rotate()＠~GEOMETRY#dom-dommatrixreadonly-rotate$c
］は、
回転を Z-Y'-X'' 順序で適用する
— それは、
ここで指定される順序とは異なる。
◎
Note: the coordinate system used by this specification differs from CSS Transforms 2 § 4 The Transform Rendering Model, where the y axis is positive to the bottom and rotations follow the left-hand convention. Additionally, rotateSelf() and rotate(), specified in [GEOMETRY-1], apply rotations in an Z - Y' - X'' order, which differs from the order specified here.
</p>

<p>
`DeviceOrientationEvent^I0 ［
`alpha$m,
`beta$m,
`gamma$m
］により表現される回転は、
次の手続きにより遂げられる：
◎
A rotation represented by alpha, beta and gamma is carried out by the following steps:
</p>
<ol>
	<li>
<p>
初期~位置：
◎
↓ Rotate the device frame around its z axis by alpha degrees, with alpha in [0, 360).
</p>

<figure>
<p class="alt" hidden id="_dgm-start">
開始-時の方位
◎
start orientation
</p>
<figcaption>
初期~位置にある~deviceにおいては、
基準~座標~frame【！基準~frame】（~XYZ）と~device座標~frame【！body frame】（~xyz）は揃えられている。
◎
Device in the initial position, with the reference (XYZ) and body (xyz) frames aligned.
</figcaption></figure>

	</li>
	<li>
<p>
~device座標~frame【！device frame】をその~z軸~周りで `alpha$m 度d
— 0 以上, 360 未満 —
だけ回転する。
◎
↑</p>

<figure>
<p class="alt" hidden id="_dgm-z-rotation">
~z軸~周りの回転
◎
rotation about z axis
</p>

<figcaption>
~deviceを~z軸~周りで角度~alphaだけ回転する
— 添字 “<sub>o</sub>” が付与された［
~x ／ ~y
］は、
~~元の［
~x ／ ~y
］軸の所在を表す
— 以下の図も同様。
◎
Device rotated through angle alpha about z axis, with previous locations of x and y axes shown as x0 and y0.
</figcaption></figure>

	</li>
	<li>
<p>
~device座標~frame【！device frame】を その~x軸~周りで `beta$m 度d
— ~MINUS 180 以上, 180 未満 —
だけ回転する。
◎
Rotate the device frame around its x axis by beta degrees, with beta in [-180, 180).
</p>

<figure>
<p class="alt" hidden id="_dgm-x-rotation">
~x軸~周りの回転
◎
rotation about x axis
</p>

<figcaption>
回転された~deviceの新たな~x軸~周りで角度~betaだけ回転する。
◎
Device rotated through angle beta about new x axis, with previous locations of y and z axes shown as y0 and z0.
</figcaption></figure>
	</li>
	<li>
<p>
~device座標~frame【！device frame】を その~y軸~周りで `gamma$m 度d
— ~MINUS 90 以上, 90 未満 —
だけ回転する。
◎
Rotate the device frame around its y axis by gamma degrees, with gamma in [-90, 90).
</p>

<figure>
<p class="alt" hidden id="_dgm-y-rotation">
~y軸~周りの回転
◎
rotation about y axis
</p>

<figcaption>
回転された~deviceの新たな~y軸~周りで角度~gammaだけ回転する。
◎
Device rotated through angle gamma about new y axis, with previous locations of x and z axes shown as x0 and z0.
</figcaption></figure>
	</li>
</ol>

<p class="note">注記：
これらの角度は，数学的な規約に従って選ばれたが、
`alpha$m は~compass-heading【~screenの上端が指す方角】とは~~逆回転を表すことに加え，
乗物~力学に利用される `roll-pitch-yaw^en 規約には合致しない。
◎
Note: This choice of angles follows mathematical convention, but means that alpha is in the opposite sense to a compass heading. It also means that the angles do not match the roll-pitch-yaw convention used in vehicle dynamics.
</p>

			<section id="choice-of-reference-coordinate-system">
<h4 title="Choice of reference coordinate system">4.1.1. 基準~座標系の~~選択</h4>

<p>
~deviceの方位は、
常に，別の座標系
— 基準~座標系 —
に相対的になる。
どの座標系を選ぶかは、［
当の方位が伝達する情報の種類,
方位~dataの~source
］どちらにも波及する。
◎
A device’s orientation is always relative to another coordinate system, whose choice influences the kind of information that the orientation conveys as well as the source of the orientation data.
</p>

<p>
`相対~方位@
は、［
加速度計, ~gyroscope
］で測定され，
基準~座標系は恣意的に~~選ばれる。
その帰結として、
方位~dataは，当の~deviceの初期~位置に相対的な変化についての情報を供する。
◎
Relative orientation is measured with an accelerometer and a gyroscope, and the reference coordinate system is arbitrary. Consequently, the orientation data provides information about changes relative to the initial position of the device.
</p>

<p class="note">注記：
これは、
~native~platformの用語においては，次に類似する
⇒＃
`Windows^i 上では相対 `OrientationSensor＠https://learn.microsoft.com/en-us/uwp/api/windows.devices.sensors.sensorreadingtype#remarks$c ／
`Android^i 上では `~game回転~vector~sensor＠https://developer.android.com/reference/android/hardware/Sensor#TYPE_GAME_ROTATION_VECTOR$ ／
`Core Motion^i 用には `xArbitraryZVertical＠https://developer.apple.com/documentation/coremotion/cmattitudereferenceframe/1615953-xarbitraryzvertical$c ~option
◎
Note: In native platform terms, this is similar to a relative OrientationSensor on Windows, a game rotation vector sensor on Android, or the xArbitraryZVertical option for Core Motion.
</p>

<p>
`絶対~方位@
は、［
加速度計, ~gyroscope, 磁力計
］で測定され，
基準~座標系は`地球の基準~座標系$である。
◎
Absolute orientation is measured with an accelerometer, a gyroscope and a magnetometer, and the reference coordinate system is the Earth’s reference coordinate system.
</p>

<p class="note">注記：
これは、
~native~platformの用語においては，次に類似する
⇒＃
`Windows^i 上では，絶対 `OrientationSensor＠https://learn.microsoft.com/en-us/uwp/api/windows.devices.sensors.sensorreadingtype#remarks$c ／
`Android^i 上では `回転~vector~sensor＠https://developer.android.com/reference/android/hardware/Sensor#TYPE_ROTATION_VECTOR$ ／
`Core Motion^i 用には `xMagneticNorthZVertical＠https://developer.apple.com/documentation/coremotion/cmattitudereferenceframe/1616123-xmagneticnorthzvertical$c ~option
◎
Note: In native platform terms, this is similar to an absolute OrientationSensor on Windows, a rotation vector sensor on Android, or the xMagneticNorthZVertical option for Core Motion.
</p>

			</section>
		</section>
		<section id="device-motion-model">
<h3 title="Device Motion">4.2. ~deviceの動き</h3>

<p>
この仕様は、
空間における~deviceの動きを その［
加速~率と回転~率
］を測定することにより表出する
— それらは［
加速度計と~gyroscope
］から得される。
その~dataは、
前~節にて要約した`~device座標系$に相対的に供される。
◎
This specification expresses a device’s motion in space by measuring its acceleration and rotation rate, which are obtained from an accelerometer and a gyroscope. The data is provided relative to the device coordinate system summarized in the previous section.
</p>

<p>
加速度は、
~deviceの速度における時間に関する変化~率であり，
m/s~pow2（~meter / 秒の 2 乗）で表出される。
◎
Acceleration is the rate of change of velocity of a device with respect to time. Is is expressed in meters per second squared (m/s2).
</p>

<p>
`線形~加速度@
（ `linear acceleration^en ）は、
重力【！gravity force】による寄与が無い~deviceの加速~率を表現する。
それは、
当の~deviceが卓上に置かれているとき，
0 m/s~pow2 になる。
◎
Linear acceleration represents the device’s acceleration rate without the contribution of the gravity force. When the device is laying flat on a table, its linear acceleration is 0 m/s2.
</p>

<p>
`重力を伴う加速度@
（ `acceleration with gravity^en ）は、
重力の効果を含む加速度であり，
その値は固有-加速度 `PROPERACCELERATION$r を表現する。
それは、
~deviceが自由落下しているとき，
0 m/s~pow2 になる。
これは，多くの応用では有用さに劣るが、
`線形~加速度$を供せない実装（例えば，~gyroscopeを欠くことに因り）が最善な労による~supportを供する手段として供される。
◎
When the acceleration includes gravity, its value includes the effect of gravity and represents proper acceleration ([PROPERACCELERATION]). When the device is in free-fall, the acceleration is 0 m/s2. This is less useful in many applications but is provided as a means of providing best-effort support by implementations that are unable to provide linear acceleration (due, for example, to the lack of a gyroscope).
</p>

<p class="note">注記：
実施においては、
`重力を伴う加速度$は，
`加速度計＠~MOTION-SENSORS#accelerometer$ `MOTION-SENSORS$r
から得された生な読取り
— または `G-FORCE$r 【 “G がかかる” の “G” （加速度）】 —
を表現する一方で、
`線形~加速度$は，
`線形~加速度~sensor＠~MOTION-SENSORS#linear-acceleration-sensor$ `MOTION-SENSORS$r
からの読取りを供する。
後者は、
`~sensor融合$になる見込みが高い。
測定し得る各種［
加速度計, 加速度
］についての より詳細な論は、
`MOTION-SENSORS$r, `ACCELEROMETER$r を見よ。
◎
Note: In practice, acceleration with gravity represents the raw readings obtained from an Motion Sensors Explainer § accelerometer, or the [G-FORCE] whereas linear acceleration provides the readings of a Motion Sensors Explainer § linear-acceleration-sensor and is likely a fusion sensor. [MOTION-SENSORS] and [ACCELEROMETER] both contain a more detailed discussion about the different types of accelerometers and accelerations that can be measured.
</p>

<p>
`回転~率@
は、［
`~device座標系$における指定された軸
］周りで~deviceが回転する率を測定する。
~device方位と同じく，
回転は，右手系を利用するモノトスル
— 軸~周りの正な回転は、
軸の正な方向に向かって眺めたとき，時計回りになるよう。
`回転~率$は、
deg/s （度d数 / 秒）で測定される。
◎
The rotation rate measures the rate at which the device rotates about a specified axis in the device coordinate system. As with device orientation, rotations must use the right-hand convention, such that positive rotation around an axis is clockwise when viewed along the positive direction of the axis. The rotation rate is measured in degrees per second (deg/s).
</p>

<p class="note">注記：
［
~gyroscope, 回転~率, 測定
］についての より詳細な論は、
`MOTION-SENSORS$r, `GYROSCOPE$r
を見よ。
◎
Note: [MOTION-SENSORS] and [GYROSCOPE] both contain a more detailed discussion of gyroscopes, rotation rates and measurements.
</p>

		</section>
	</section>
	<section id="permissions-policy-integration">
<h2 title="Permissions Policy integration">5. `許可~施策^cite の統合</h2>

<div>
<p>
この仕様は、
次に挙げる `施策により制御される特能$を定義する：
</p>
<ul>
	<li>
`accelerometer@pF
</li>
	<li>
`gyroscope@pF
</li>
	<li>
`magnetometer@pF
</li>
</ul>

<p>
これらの`既定の許容list$は、
いずれも `'self'^l とする。
</p>
◎
This specification defines the following policy-controlled features:
• "accelerometer", whose default allowlist is "self".
• "gyroscope", whose default allowlist is "self".
• "magnetometer", whose default allowlist is "self".
</div>

<div class="note">
<p>注記：
上に挙げた`施策により制御される特能$のこの仕様による用法は：
◎
Note: Usage of the policy-controlled features above by this specification is as follows:
</p>
<ul>
	<li>
<p>
`deviceorientation$et ~eventは：
</p>
		<ul>
			<li>
`相対~方位$の~dataを供するときは、
次に挙げる特能を要求する
⇒＃
`accelerometer$pF,
`gyroscope$pF
</li>
			<li>
`絶対~方位$の~dataに~fall-backする実装~用には、
`magnetometer$pF 特能も要求される【！used】。
</li>
		</ul>
◎
The deviceorientation event requires the "accelerometer" and "gyroscope" features when providing relative orientation data. For the implementation to fall back to absolute orientation data, the "magnetometer" feature is also used.
</li>
	<li>
`deviceorientationabsolute$et ~eventは、
次に挙げる特能を要求する
⇒＃
`accelerometer$pF,
`gyroscope$pF,
`magnetometer$pF
◎
The deviceorientationabsolute event requires the "accelerometer", "gyroscope" and "magnetometer" feature.
</li>
	<li>
`devicemotion$et ~eventは、
次に挙げる特能を要求する
⇒＃
`accelerometer$pF,
`gyroscope$pF
◎
The devicemotion event requires the "accelerometer" and "gyroscope".
</li>
</ul>
</div>

	</section>
	<section id="permissions-api-integration">
<h2 title="Permissions API integration">6. `許可~API^cite の統合</h2>

<p>
この仕様は、
次に挙げる`既定の強力な特能$を定義する：
◎
This specification defines the following default powerful features:
</p>
<ul>
	<li>
`accelerometer@l
</li>
	<li>
`gyroscope@l
</li>
	<li>
`magnetometer@l
</li>
</ul>

<div class="note">
<p>
注記：
上に挙げた`強力な特能$のこの仕様による用法は：
◎
Note: Usage of the powerful features above by this specification is as follows:
</p>
<ul>
	<li>
<p>
`deviceorientation$et ~eventは：
</p>
		<ul>
			<li>
`相対~方位$の~dataを供するときは、
次に挙げる特能を要求する
⇒＃
`accelerometer$l,
`gyroscope$l
</li>
			<li>
`絶対~方位$の~dataに~fall-backする実装~用には、
`magnetometer$l 特能も要求される。
</li>
		</ul>
◎
The deviceorientation event requires "accelerometer" and "gyroscope" when providing relative orientation data. For the implementation to fall back to absolute orientation data, "magnetometer" is also required.
</li>
	<li>
`deviceorientationabsolute$et ~eventは、
次に挙げる特能を要求する
⇒＃
`accelerometer$l,
`gyroscope$l
`magnetometer$l
◎
The deviceorientationabsolute event requires "accelerometer", "gyroscope" and "magnetometer".
</li>
	<li>
`devicemotion$et ~eventは、
次に挙げる特能を要求する
⇒＃
`accelerometer$l,
`gyroscope$l
◎
The devicemotion event requires "accelerometer" and "gyroscope".
</li>
</ul>
</div>

	</section>
	<section id="taks-source">
<h2 title="Task Source">7. ~task~source</h2>

<p>
この仕様に言及される`~task$用の`~task~source$は、
`~deviceの動きと方位~task~source@
である。
◎
The task source for the tasks mentioned in this specification is the device motion and orientation task source.
</p>

	</section>
	<section id="api">
<h2 title="API">8. ~API</h2>

		<section id="deviceorientation">
<h3 title="deviceorientation Event">8.1. `deviceorientation^et ~event</h3>

<pre class="idl">
partial interface `Window$I {
  [`SecureContext$] attribute `EventHandler$I `ondeviceorientation$n;
};

[`Exposed$=Window, `SecureContext$]
interface `DeviceOrientationEvent@I : `Event$I {
  `DeviceOrientationEvent@mc(DOMString %type, optional `DeviceOrientationEventInit$I %eventInitDict = {});
  readonly attribute double? `alpha$m;
  readonly attribute double? `beta$m;
  readonly attribute double? `gamma$m;
  readonly attribute boolean `absolute$m;

  static `Promise$&lt;`PermissionState$I&gt; `requestPermission$m(optional `boolean$ %absolute = false);
};

dictionary `DeviceOrientationEventInit@I : `EventInit$I {
  double? `alpha@m = null;
  double? `beta@m = null;
  double? `gamma@m = null;
  boolean `absolute@m = false;
};
</pre>

<p>
`ondeviceorientation@n
属性は、
名前 `ondeviceorientation^l を伴う`~event~handler$用の`~event~handler~IDL属性$である
— 対応する`~event~handler~event型$は、
`deviceorientation@et
である。
◎
The ondeviceorientation attribute is an event handler IDL attribute for the ondeviceorientation event handler, whose event handler event type is deviceorientation.
</p>

<p class="trans-note">【
`ondeviceorientation$n は `Window$I ~interfaceに定義されているが、
なぜ， `Window^I 用の他の多くの`~event~handler~IDL属性$と同様に `WindowEventHandlers$I ~interface~mixinにて定義されないのかは不明。
以下の各節に定義される~event~handler~IDL属性も同様。
】</p>

`DeviceOrientationEvent^I0

<div>
<p>
`alpha@m
属性は：
</p>
<ul>
	<li>
`~Euler角度$における~Z軸~周りの回転を表現する。
</li>
	<li class="algo">
その取得子~手続きは、
初期化-時の値を返す。
</li>
</ul>
◎
The alpha attribute must return the value it was initialized to. It represents the rotation around the Z axis in the Z - X' - Y'' intrinsic Tait-Bryan angles described in § 4.1 Device Orientation.
</div>

<div>
<p>
`beta@m
属性は：
</p>
<ul>
	<li>
`~Euler角度$における
（~Z軸~周りの回転が適用された後に生産された）
~X1軸~周りの回転を表現する。
</li>
	<li class="algo">
その取得子~手続きは、
初期化-時の値を返す。
</li>
</ul>
◎
The beta attribute must return the value it was initialized to. It represents the rotation around the X' axis (produced after the rotation around the Z axis has been applied) axis in the Z - X' - Y'' intrinsic Tait-Bryan angles described in § 4.1 Device Orientation.
</div>

<div>
<p>
`gamma@m
属性は：
</p>
<ul>
	<li>
`~Euler角度$における
（~Z, ~X1軸~周りの回転が この順序で適用された後に生産された）
~Y2軸~周りの回転を表現する。
</li>
	<li class="algo">
その取得子~手続きは、
初期化-時の値を返す。
</li>
</ul>
◎
The gamma attribute must return the value it was initialized to. It represents the rotation around the Y'' axis (produced after the rotation around the Z and X' axes have been applied in this order) in the Z - X' - Y'' intrinsic Tait-Bryan angles described in § 4.1 Device Orientation.
</div>

<div>
<p>
`absolute@m
属性は：
</p>
<ul>
	<li>
［
`相対~方位$, `絶対~方位$
］どちらの~dataが供されているかを指示する。
</li>
	<li class="algo">
その取得子~手続きは、
初期化-時の値を返す。
</li>
</ul>
◎
The absolute attribute must return the value it was initialized to. It indicates whether relative orientation or absolute orientation data is being provided.
</div>

<div class="algo">
<p>
`requestPermission(absolute)@m
静的~method手続きは：
◎
The requestPermission(absolute) method steps are:
</p>
<ol>
	<li>
%大域~obj ~LET `現在の大域~obj$
◎
Let global be the current global object.
</li>
	<li>
~IF［
コレに`関連な大域~obj$は`一過な作動化を有して$いない
］
⇒
~RET `却下される~promise$( `NotAllowedError$E 例外 )
◎
If this’s relevant global object does not have transient activation, return a promise rejected with a "NotAllowedError" DOMException.
</li>
	<li>
%結果 ~LET `新たな~promise$( コレに`関連な~realm$ )
◎
Let result be a new promise in this’s relevant Realm.
</li>
	<li class="algo">
<p>
この段は`並列的$に走らす：
◎
Run these steps in parallel:
</p>
		<ol>
			<li>
%許可~群 ~LET « `accelerometer$l, `gyroscope$l »
◎
↓</li>
			<li>
~IF［
%absolute ~EQ ~T
］
⇒
%許可~群 に `magnetometer$l を`付加する$
◎
If absolute is true:
• Let permissions be « "accelerometer", "gyroscope", "magnetometer" ».
◎
Otherwise:
• Let permissions be « "accelerometer", "gyroscope" ».
</li>
			<li>
%許可~状態 ~LET `granted$l
◎
Let permissionState be "granted".
</li>
			<li>
<p>
%許可~群 を成す
~EACH( %名前 )
に対し：
◎
For each name of permissions:
</p>

<p class="note">注記：
複数の許可を一度に要請するための~algoは無い。
しかしながら，~UAには、［
複数種の媒体~用の同時並行な要請たち
］を［
利用者が対面する単独の許可~promptに束ねる
］ことが奨励される。
◎
Note: There is no algorithm for requesting multiple permissions at once. However, user agents are encouraged to bundle concurrent requests for different kinds of media into a single user-facing permission prompt.
</p>
				<ol>
					<li>
<p>
~IF［
`利用する許可を要請する$( %名前 ) ~EQ `denied$l
］：
◎
If the result of requesting permission to use name is "denied":
</p>
						<ol>
							<li>
%許可~状態 ~SET `denied$l
◎
Set permissionState to "denied".
</li>
							<li>
~BREAK
◎
Break
</li>
						</ol>
					</li>
				</ol>
			</li>
			<li>
<p>
`大域~taskを~queueする$( `~deviceの動きと方位~task~source$, %大域~obj, 次の手続き )
◎
Queue a global task on the device motion and orientation task source given global to＼
</p>

<div class="algo">
手続きは
⇒
`~promiseを解決する$( %結果, %許可~状態 )
◎
resolve result with permissionState.
</div>
			</li>
		</ol>
	</li>
	<li>
~RET %結果
◎
Return result.
</li>
</ol>
</div>

<div class="algo">
<p>
`方位~eventを発火する@
ときは、
所与の
( `Window$I %~window, 文字列 %~event名, 真偽値 %絶対か ):
◎
To fire an orientation event given a event name (a string), window (a Window) and absolute (a boolean):
</p>
<ol>
	<li>
%方位 ~LET ~NULL
◎
Let orientation be null.
</li>
	<li>
%~top-level辿可能 ~LET %~window に`対応する~navigable$の`~top-level辿可能$nav
◎
Let topLevelTraversable be window’s navigable’s top-level traversable.
</li>
	<li>
%~virtual~sensor型 ~LET %絶対か に応じて
⇒＃
~T ならば `absolute-orientation$vsT ／
~F ならば `relative-orientation$vsT
◎
Let virtualSensorType be "relative-orientation" if absolute is false, and "absolute-orientation" otherwise.
</li>
	<li>
%~virtual~sensor ~LET %~top-level辿可能 の`~virtual~sensor対応付け$[ %~virtual~sensor型 ]
◎
↓</li>
	<li>
<p>
~IF［
%~virtual~sensor ~NEQ ε
］~AND［
%~virtual~sensor の`読取りを供せるか$vS ~EQ ~T
］：
</p>
		<ol>
			<li>
%方位 ~SET 新たな`~map$
</li>
			<li>
<p>
« `alpha^l, `beta^l, `gamma^l »
を成す
~EACH( %~key )
に対し
⇒
%方位[ %~key ] ~SET ［
%~virtual~sensor は %~key に対応する最新な読取りを供せるならば，その値／
~ELSE_ ~NULL
］
</p>

<p class="trans-note">【
［
`alpha^l ／ `beta^l ／ `gamma^l
］は、
`~Euler角度$における［
~Z ／ ~X1 ／ ~Y2
］軸~周りの回転~角度に対応する。
】【
供せるかどうかが，軸に応じて異なる場合もあるかもしれない。
】</p>
			</li>
		</ol>
◎
If topLevelTraversable’s virtual sensor mapping contains virtualSensorType:
• Let virtualSensor be topLevelTraversable’s virtual sensor mapping[virtualSensorType].
• If virtualSensor’s can provide readings flag is true:
•• Set orientation to the latest readings provided to virtualSensor with the "alpha", "beta", and "gamma" keys.
</li>
	<li>
~ELSE
⇒
%方位 ~SET %絶対か に応じて
⇒＃
~F ならば三次元-平面における~deviceの`相対~方位$／
~T ならば三次元-平面における~deviceの`絶対~方位$
◎
Otherwise:
• If absolute is false:
•• Set orientation to the device’s relative orientation in the tridimensional plane.
• Otherwise:
•• Set orientation to the device’s absolute orientation in the tridimensional plane.
</li>
	<li>
%許可~群 ~LET « `accelerometer$l, `gyroscope$l »
◎
↓</li>
	<li>
~IF［
%絶対か ~EQ ~T
］
⇒
%許可~群 に `magnetometer$l を`付加する$
◎
Let permissions be null.
◎
If absolute is false:
• Set permissions to « "accelerometer", "gyroscope" ».
◎
Otherwise:
• Set permissions to « "accelerometer", "gyroscope", "magnetometer" ».
</li>
	<li>
%環境 ~LET %~window に`関連な設定群~obj$
◎
Let environment be window’s relevant settings object.
</li>
	<li class="algo">
<p>
この段は`並列的$に走らす：
◎
Run these steps in parallel:
</p>
		<ol>
			<li>
<p>
%許可~群 を成す
~EACH( %許可~名 )
に対し：
◎
For each permission name in permissions:
</p>
				<ol>
					<li>
%状態 ~LET `現在の許可~状態を取得する$( %許可~名, %環境 )
◎
Let state be the result of getting the current permission state with permission name and environment.
</li>
					<li>
~IF［
%状態 ~NEQ `granted$l
］
⇒
~RET
◎
If state is not "granted", return.
</li>
				</ol>
			</li>
			<li>
<p>
`大域~taskを~queueする$( `~deviceの動きと方位~task~source$, %~window, 次の手続き )
◎
Queue a global task on the device motion and orientation task source given window to run＼
</p>

<div class="algo">
<p>
手続きは：
◎
the following steps:
</p>
				<ol>
					<li>
( %~alpha, %~beta, %~gamma ) ~LET ( ~NULL, ~NULL, ~NULL )
◎
↓</li>
					<li>
~IF［
%方位[ `alpha^l ] ~NEQ ~NULL
］
⇒
%~alpha ~SET 精度 0.1 deg までに制限された %方位[ `alpha^l ]
◎
Let z rotation be orientation’s representation as intrinsic Tait-Bryan angles Z - X' - Y'' along the Z axis, or null if the implementation cannot provide an angle value.
◎
If z rotation is not null, limit z rotation’s precision to 0.1 degrees.
</li>
					<li>
~IF［
%方位[ `beta^l ] ~NEQ ~NULL
］
⇒
%~beta ~SET 精度 0.1 deg までに制限された %方位[ `beta^l ]
◎
Let x rotation be orientation’s representation as intrinsic Tait-Bryan angles Z - X' - Y'' along the X' axis, or null if the implementation cannot provide an angle value.
◎
If x rotation is not null, limit x rotation’s precision to 0.1 degrees.
</li>
					<li>
~IF［
%方位[ `gamma^l ] ~NEQ ~NULL
］
⇒
%~gamma ~SET 精度 0.1 deg までに制限された %方位[ `gamma^l ]
◎
Let y rotation be orientation’s representation as intrinsic Tait-Bryan angles Z - X' - Y'' along the Y'' axis, or null if the implementation cannot provide an angle value.
◎
If y rotation is not null, limit y rotation’s precision to 0.1 degrees.
</li>
					<li>
`~eventを発火する$( %~window, %~event名, `DeviceOrientationEvent$I )
— 次のように初期化して
⇒＃
`alpha$m ~SET %~alpha,
`beta$m ~SET %~beta,
`gamma$m ~SET %~gamma,
`absolute$m ~SET %絶対か
◎
Fire an event named event name at window, using DeviceOrientationEvent, with the alpha attribute initialized to z rotation, the beta attribute initialized to x rotation, the gamma attribute initialized to y rotation, and the absolute attribute initialized to absolute.
</li>
				</ol>
</div>
			</li>
		</ol>
	</li>
</ol>
</div>

<p>
`方位における有意な変化@
は、［
方位~値を前回の値と比較した相違
］が［
`deviceorientation$et ／ `deviceorientationabsolute$et
］~eventの発火を請合うことを指示する。
`方位における有意な変化$が生じたかどうか決定する処理nは、
`実装定義$である
— 最大な閾値として，変化 1 度dが推奨されるが。
実装は、
~pageが新鮮な~dataを有していないと予見するに足る事由†があるならば，
有意な変化が生じたものと見なしてもヨイ。
◎
A significant change in orientation indicates a difference in orientation values compared to the previous ones that warrants the firing of a deviceorientation or deviceorientationabsolute event. The process of determining whether a significant change in orientation has occurred is implementation-defined, though a maximum threshold for change of 1 degree is recommended. Implementations may also consider that it has occurred if they have reason to believe that the page does not have sufficiently fresh data.
</p>

<p class="trans-note">【†
例えば、［
方位~値を “供せる” から “供せない”, またはその逆に変化した
］ときが挙げられよう。
】</p>

<p class="note">注記：
実装は、
`方位における有意な変化$が生じたか否かを決定する際には，
`§ 自動化＠#automation$ を
— ~virtual~sensor読取りの更新-時にそれが査定されるよう —
織り込まなければならない。
◎
Note: Implementations must take § 11 Automation into account to determine whether a significant change in orientation has occurred, so that a virtual sensor reading update causes it to be assessed.
</p>

<div class="algo">
<p>
~UAは，
`方位における有意な変化$が生じたときは、
`~navigable$にて`作動中な~window$nav %~window に対し，
次の手続きを実行するモノトスル：
◎
Whenever a significant change in orientation occurs, the user agent must execute the following steps on a navigable’s active window window:
</p>

<p class="trans-note">【
適用-可能な`~navigable$が複数ある場合、
それら各~navigableに対し，実行されよう。
】</p>

<ol>
	<li>
%絶対か ~LET ［
次が満たされるならば ~T ／
~ELSE_ ~F
］
⇒
［
実装は`相対~方位$を供せない
］~OR［
結果の~dataは`相対~方位$より`絶対~方位$の方が正確aである
］
◎
If the implementation cannot provide relative orientation or the resulting absolute orientation data is more accurate:
• Let absolute be true.
• Let policies be « "accelerometer", "gyroscope", "magnetometer" ».
◎
Otherwise:
• Let absolute be false.
• Let policies be « "accelerometer", "gyroscope" ».
</li>
	<li>
%施策~群 ~LET « `accelerometer$pF, `gyroscope$pF »
◎
↑</li>
	<li>
~IF［
%絶対か ~EQ ~T
］
⇒
%施策~群 に `magnetometer$pF を`付加する$
◎
↑</li>
	<li>
%文書 ~LET %~window に`結付けられた文書$
◎
Let document be window’s associated Document.
</li>
	<li>
%施策~群 を成す
~EACH( %施策 )
に対し
⇒
~IF［
%文書 には %施策 と命名された`施策により制御される特能$の`利用は許容されて$いない
］
⇒
~RET
◎
For each policy of policies:
• If document is not allowed to use the policy-controlled feature named policy, return.
</li>
	<li>
`方位~eventを発火する$( %~window, `deviceorientation$et, %絶対か )
◎
Invoke fire an orientation event with deviceorientation, window, and absolute.
</li>
</ol>
</div>

<p>
実装は、
方位~情報をまったく供せない場合は，~eventの［
`alpha$m, `beta$m, `gamma$m
］属性をいずれも ~NULL に設定した上で発火するベキである。
◎
If an implementation can never provide orientation information, the event should be fired with the alpha, beta and gamma attributes set to null.
</p>

		</section>
		<section id="deviceorientationabsolute">
<h3 title="deviceorientationabsolute Event">8.2. `deviceorientationabsolute^et ~event</h3>

<p class="issue">
［
`deviceorientationabsolute$et ~event,
その `ondeviceorientationabsolute$n ~event~handler~IDL属性
］の`実装~経験は限られている＠https://wpt.fyi/results/orientation-event/ondeviceorientationabsolute.https.html$。
◎
The deviceorientationabsolute event and its ondeviceorientationabsolute event handler IDL attribute have limited implementation experience.
</p>

<pre class="idl">
partial interface `Window$I {
    [`SecureContext$] attribute `EventHandler$I `ondeviceorientationabsolute$n;
};
</pre>

<p>
`ondeviceorientationabsolute@n
属性は、
名前 `ondeviceorientationabsolute^l を伴う`~event~handler$用の`~event~handler~IDL属性$である
— 対応する`~event~handler~event型$は、
`deviceorientationabsolute@et
である。
◎
The ondeviceorientationabsolute attribute is an event handler IDL attribute for the ondeviceorientationabsolute event handler, whose event handler event type is deviceorientationabsolute.
</p>

<p>
`deviceorientationabsolute$et ~eventは、
常に`絶対~方位$による~dataを供することを除いて，
`deviceorientation$et ~eventに完全に相似的である。
◎
A deviceorientationabsolute event is completely analogous to the deviceorientation event, except that it must always provide absolute orientation data.
</p>

<div class="algo">
<p>
~UAは，
`方位における有意な変化$が生じたときは、
`~navigable$にて`作動中な~window$nav %~window に対し，
次の手続きを実行するモノトスル：
◎
Whenever a significant change in orientation occurs, the user agent must execute the following steps on a navigable’s active window window:
</p>
<ol>
	<li>
`方位~eventを発火する$( %~window, `deviceorientationabsolute$et, ~T )
◎
Invoke fire an orientation event with deviceorientationabsolute, window, and true.
</li>
</ol>
</div>

<p>
実装は、
絶対~方位~情報をまったく供せない場合は，~eventの［
`alpha$m, `beta$m, `gamma$m
］属性をいずれも ~NULL に設定した上で発火するベキである。
◎
If an implementation can never provide absolute orientation information, the event should be fired with the alpha, beta and gamma attributes set to null.
</p>

		</section>
		<section id="devicemotion">
<h3 title="devicemotion Event">8.3. `devicemotion^et ~event</h3>

			<section id="device-motion-event-acceleration-api">
<h4 title="The DeviceMotionEventAcceleration interface">8.3.1. `DeviceMotionEventAcceleration^I ~interface</h4>

<pre class="idl">
[`Exposed$=Window, `SecureContext$]
interface `DeviceMotionEventAcceleration@I {
    readonly attribute `double$? `x$m;
    readonly attribute `double$? `y$m;
    readonly attribute `double$? `z$m;
};
</pre>

<p>
`DeviceMotionEventAcceleration$I ~interfaceは、
`§ ~deviceの動き＠#device-motion-model$
にて述べたとおり，
~deviceの加速度を表現する。
◎
The DeviceMotionEventAcceleration interface represents the device’s acceleration as described in § 4.2 Device Motion.＼
</p>

<p>
各 `DeviceMotionEventAcceleration$I ~objには、
次に挙げる~dataが結付けられる：
◎
It has the following associated data:
</p>

<dl>
	<dt>
`~x軸~加速度@
◎
x axis acceleration
</dt>
	<dd>
~NULL ／
当の~deviceの~X軸~~方向の加速~率
— 初期~時は ~NULL とする。
◎
The device’s acceleration rate along the X axis, or null. It is initially null.
</dd>

	<dt>
`~y軸~加速度@
◎
y axis acceleration
</dt>
	<dd>
~NULL ／
当の~deviceの~Y軸~~方向の加速~率
— 初期~時は ~NULL とする。
◎
The device’s acceleration rate along the Y axis, or null. It is initially null.
</dd>

	<dt>
`~z軸~加速度@
◎
z axis acceleration
</dt>
	<dd>
~NULL ／
当の~deviceの~Z軸~~方向の加速~率
— 初期~時は ~NULL とする。
◎
The device’s acceleration rate along the Z axis, or null. It is initially null.
</dd>
</dl>

<div class="algo">
`x@m
取得子~手続きは
⇒
~RET コレの`~x軸~加速度$の値
◎
The x getter steps are to return the value of this’s x axis acceleration.
</div>

<div class="algo">
`y@m
取得子~手続きは
⇒
~RET コレの`~y軸~加速度$の値
◎
The y getter steps are to return the value of this’s y axis acceleration.
</div>

<div class="algo">
`z@m
取得子~手続きは
⇒
~RET コレの`~z軸~加速度$の値
◎
The z getter steps are to return the value of this’s z axis acceleration.
</div>

			</section>
			<section id="device-motion-event-rotation-rate-api">
<h4 title="The DeviceMotionEventRotationRate interface">8.3.2. `DeviceMotionEventRotationRate^I ~interface</h4>

<pre class="idl">
[`Exposed$=Window, `SecureContext$]
interface `DeviceMotionEventRotationRate@I {
    readonly attribute `double$? `alpha$m;
    readonly attribute `double$? `beta$m;
    readonly attribute `double$? `gamma$m;
};
</pre>

<p>
`DeviceMotionEventRotationRate$I ~interfaceは、
`§ ~deviceの動き＠#device-motion-model$
にて述べたとおり，
~deviceの`回転~率$を表現する。
◎
The DeviceMotionEventRotationRate interface represents the device’s rotation rate as described in § 4.2 Device Motion.＼
</p>

<p>
各 `DeviceMotionEventRotationRate$I ~objには、
次に挙げる~dataが結付けられる：
◎
It has the following associated data:
</p>
<dl>
	<dt>
`~x軸~回転~率@
◎
x axis rotation rate
</dt>
	<dd>
~NULL ／
当の~deviceの~X軸~周りの回転~率
— 初期~時は ~NULL とする。
◎
The device’s rotation rate about the X axis, or null. It is initially null.
</dd>

	<dt>
`~y軸~回転~率@
◎
y axis rotation rate
</dt>
	<dd>
~NULL ／
当の~deviceの~Y軸周りの回転~率
— 初期~時は ~NULL とする。
◎
The device’s rotation rate about the Y axis, or null. It is initially null.
</dd>

	<dt>
`~z軸~回転~率@
◎
z axis rotation rate
</dt>
	<dd>
~NULL ／
当の~deviceの~Z軸周りの回転~率
— 初期~時は ~NULL とする。
◎
The device’s rotation rate about the Z axis, or null. It is initially null.
</dd>
</dl>

<div class="algo">
`alpha@m
取得子~手続きは
⇒
~RET コレの`~x軸~回転~率$の値
◎
The alpha getter steps are to return the value of this’s x axis rotation rate.
</div>

<div class="algo">
`beta@m
取得子~手続きは
⇒
~RET コレの`~y軸~回転~率$の値
◎
The beta getter steps are to return the value of this’s y axis rotation rate.
</div>

<div class="algo">
`gamma@m
取得子~手続きは
⇒
~RET コレの`~z軸~回転~率$の値
◎
The gamma getter steps are to return the value of this’s z axis rotation rate.
</div>

			</section>
			<section id="device-motion-event-api">
<h4 title="The DeviceMotionEvent interface">8.3.3. `DeviceMotionEvent^I ~interface</h4>

<pre class="idl">
partial interface `Window$I {
    [`SecureContext$] attribute `EventHandler$I `ondevicemotion$n;
};

[`Exposed$=Window, `SecureContext$]
interface `DeviceMotionEvent@I : `Event$I {
    `DeviceMotionEvent@mc(`DOMString$ %type, optional `DeviceMotionEventInit$I %eventInitDict = {});
    readonly attribute `DeviceMotionEventAcceleration$I? `acceleration$m;
    readonly attribute `DeviceMotionEventAcceleration$I? `accelerationIncludingGravity$m;
    readonly attribute `DeviceMotionEventRotationRate$I? `rotationRate$m;
    readonly attribute `double$ `interval$m;

     static `Promise$&lt;`PermissionState$I&gt; `requestPermission$m();
};

dictionary `DeviceMotionEventAccelerationInit@I {
    `double$? `x@m = null;
    `double$? `y@m = null;
    `double$? `z@m = null;
};

dictionary `DeviceMotionEventRotationRateInit@I {
    `double$? `alpha@m = null;
    `double$? `beta@m = null;
    `double$? `gamma@m = null;
};

dictionary `DeviceMotionEventInit@I : `EventInit$I {
    `DeviceMotionEventAccelerationInit$I `acceleration@m;
    `DeviceMotionEventAccelerationInit$I `accelerationIncludingGravity@m;
    `DeviceMotionEventRotationRateInit$I `rotationRate@m;
    `double$ `interval@m = 0;
};
</pre>

<p>
`ondevicemotion@n
属性は、
名前 `ondevicemotion^l を伴う`~event~handler$用の`~event~handler~IDL属性$である
— 対応する`~event~handler~event型$は、
`devicemotion@et
である。
◎
The ondevicemotion attribute is an event handler IDL attribute for the ondevicemotion event handler, whose event handler event type is devicemotion.
</p>

`DeviceMotionEvent^I0

<div>
<p>
`acceleration@m
属性は：
</p>
<ul>
	<li>
当の~deviceの`線形~加速度$を表現する。
</li>
	<li class="algo">
その取得子~手続きは、
初期化-時の値を返す。
</li>
	<li>
コレの作成-時には、
~NULL に初期化するモノトスル。
</li>
</ul>
◎
The acceleration attribute must return the value it was initialized to. When the object is created, this attribute must be initialized to null. It represents the device’s linear acceleration.
</div>

<div>
<p>
`accelerationIncludingGravity@m
属性は：
</p>
<ul>
	<li>
当の~deviceの`重力を伴う加速度$を表現する。
</li>
	<li class="algo">
その取得子~手続きは、
初期化-時の値を返す。
</li>
	<li>
コレの作成-時には、
~NULL に初期化するモノトスル。
</li>
</ul>
◎
The accelerationIncludingGravity attribute must return the value it was initialized to. When the object is created, this attribute must be initialized to null. It represents the device’s acceleration with gravity.
</div>

<div>
<p>
`rotationRate@m
属性は：
</p>
<ul>
	<li>
当の~deviceの`回転~率$を表現する。
</li>
	<li class="algo">
その取得子~手続きは、
初期化-時の値を返す。
</li>
	<li>
コレの作成-時には、
~NULL に初期化するモノトスル。
</li>
</ul>
◎
The rotationRate attribute must return the value it was initialized to. When the object is created, this attribute must be initialized to null. It represents the device’s rotation rate.
</div>

<div>
<p>
`interval@m
属性は：
</p>
<ul>
	<li>
下層の~hardwareから~dataが得される~interval【~~周期】を表現する。
</li>
	<li>
~Web~appによる~dataの~filter法を単純~化するため、
~intervalは【各~event間にわたって】定数である。
</li>
	<li class="algo">
その取得子~手続きは、
初期化-時の値を~milli秒~数（ ms 単位）で表出して返すモノトスル。
</li>
</ul>
◎
The interval attribute must return the value it was initialized to. It represents the interval at which data is obtained from the underlying hardware and must be expressed in milliseconds (ms). It is constant to simplify filtering of the data by the Web application.
</div>

<div class="algo">
<p>
`requestPermission()@m
静的~method手続きは：
◎
The requestPermission() method steps are:
</p>
<ol>
	<li>
%大域~obj ~LET `現在の大域~obj$
◎
Let global be the current global object.
</li>
	<li>
~IF［
コレに`関連な大域~obj$は`一過な作動化を有して$いない
］
⇒
~RET `却下される~promise$( `NotAllowedError$E 例外 )
◎
If this’s relevant global object does not have transient activation, return a promise rejected with a "NotAllowedError" DOMException.
</li>
	<li>
%結果 ~LET `新たな~promise$( コレに`関連な~realm$ )
◎
Let result be a new promise in this’s relevant Realm.
</li>
	<li class="algo">
<p>
この段は`並列的$に走らす：
◎
Run these steps in parallel:
</p>
		<ol>
			<li>
%許可~状態 ~LET `granted$l
◎
Let permissionState be "granted".
</li>
			<li>
<p>
« `accelerometer$l, `gyroscope$l » を成す
~EACH( %名前 )
に対し：
◎
For each name of « "accelerometer", "gyroscope" »:
</p>

<p class="note">注記：
複数の許可を一度に要請するための~algoは無い。
しかしながら，~UAには、［
複数種の媒体~用の同時並行な要請たち
］を［
利用者が対面する単独の許可~promptに束ねる
］ことが奨励される。
◎
Note: There is no algorithm for requesting multiple permissions at once. However, user agents are encouraged to bundle concurrent requests for different kinds of media into a single user-facing permission prompt.
</p>
				<ol>
					<li>
<p>
~IF［
`利用する許可を要請する$( %名前 ) ~EQ `denied$l
］：
◎
If the result of requesting permission to use name is "denied":
</p>
						<ol>
							<li>
%許可~状態 ~SET `denied$l
◎
Set permissionState to "denied".
</li>
							<li>
~BREAK
◎
Break
</li>
						</ol>
					</li>
				</ol>
			</li>
			<li>
<p>
`大域~taskを~queueする$( `~deviceの動きと方位~task~source$, %大域~obj, 次の手続き )
◎
Queue a global task on the device motion and orientation task source given global to＼
</p>

<div class="algo">
手続きは
⇒
`~promiseを解決する$( %結果, %許可~状態 )
◎
resolve result with permissionState.
</div>
			</li>
		</ol>
	</li>
	<li>
~RET %結果
◎
Return result.
</li>
</ol>
</div>

<div class="algo">
<p>
~UAは，`実装定義$な~interval %~interval で、
`~navigable$にて`作動中な~window$nav %~window に対し，
次の手続きを実行するモノトスル：
◎
At an implementation-defined interval interval, the user agent must execute the following steps on a navigable’s active window window:
</p>

<p class="trans-note">【
適用-可能な`~navigable$が複数ある場合、
それらに対し同期的に実行されるかどうかは指定されていない。
】</p>

<ol>
	<li>
%文書 ~LET %~window に`結付けられた文書$
◎
Let document be window’s associated Document.
</li>
	<li>
« `accelerometer$pF, `gyroscope$pF »
を成す
~EACH( %施策 )
に対し
⇒
~IF［
%文書 には %施策 と命名された`施策により制御される特能$の`利用は許容されて$いない
］
⇒
~RET
◎
For each policy of « "accelerometer", "gyroscope" »:
• If document is not allowed to use the policy-controlled feature named policy, return.
</li>
	<li>
%~top-level辿可能 ~LET %~window に`対応する~navigable$の`~top-level辿可能$nav
◎
Let topLevelTraversable be window’s navigable’s top-level traversable.
</li>
	<li>
%~platform線形~加速度 ~LET ~NULL
◎
Let platformLinearAcceleration be null.
</li>
	<li>
%~virtual~sensor ~LET %~top-level辿可能 の`~virtual~sensor対応付け$[ `linear-acceleration^l ]
◎
↓</li>
	<li>
~IF［
%~virtual~sensor ~NEQ ε
］~AND［
%~virtual~sensor の`読取りを供せるか$vS ~EQ ~T
］
⇒
%~platform線形~加速度 ~SET %~virtual~sensor に供された最新な読取り
◎
If topLevelTraversable’s virtual sensor mapping contains "linear-acceleration":
• Let virtualSensor be topLevelTraversable’s virtual sensor mapping["linear-acceleration"].
• If virtualSensor’s can provide readings flag is true, then set platformLinearAcceleration to the latest readings provided to virtualSensor.
</li>
	<li>
~ELIF［
実装は`線形~加速度$を供せる
］
⇒
%~platform線形~加速度 ~SET 当の~deviceの［
~X, ~Y, ~Z
］軸~~方向の`線形~加速度$
◎
Otherwise, if the implementation is able to provide linear acceleration:
• Set platformLinearAcceleration to the device’s linear acceleration along the X, Y and Z axes.
</li>
	<li>
%加速度 ~LET ~NULL
◎
Let acceleration be null.
</li>
	<li>
<p>
~IF［
%~platform線形~加速度 ~NEQ ~NULL
］：
◎
If platformLinearAcceleration is not null:
</p>
		<ol>
			<li>
%加速度 ~SET `新たな~obj$( `DeviceMotionEventAcceleration$I, %~window の`~realm$gL )
◎
Set acceleration to a new DeviceMotionEventAcceleration created in window’s realm.
</li>
			<li>
~IF［
%~platform線形~加速度 は~X軸~~方向の`線形~加速度$ %~x加速度 を供せる
］
⇒
%加速度 の`~x軸~加速度$ ~SET 精度 0.1 m/s~pow2 までに制限された %~x加速度
◎
Set acceleration’s x axis acceleration to platformLinearAcceleration’s value along the X axis, or null if it cannot be provided.
◎
If acceleration’s x axis acceleration is not null, limit its precision to no more than 0.1 m/s2.
</li>
			<li>
~IF［
%~platform線形~加速度 は~Y軸~~方向の`線形~加速度$ %~y加速度 を供せる
］
⇒
%加速度 の`~y軸~加速度$ ~SET 精度 0.1 m/s~pow2 までに制限された %~y加速度
◎
Set acceleration’s y axis acceleration to platformLinearAcceleration’s value along the Y axis, or null if it cannot be provided.
◎
If acceleration’s y axis acceleration is not null, limit its precision to no more than 0.1 m/s2.
</li>
			<li>
~IF［
%~platform線形~加速度 は~Z軸~~方向の`線形~加速度$ %~z加速度 を供せる
］
⇒
%加速度 の`~z軸~加速度$ ~SET 精度 0.1 m/s~pow2 までに制限された %~z加速度
◎
Set acceleration’s z axis acceleration to platformLinearAcceleration’s value along the Z axis, or null if it cannot be provided.
◎
If acceleration’s z axis acceleration is not null, limit its precision to no more than 0.1 m/s2.
</li>
		</ol>
	</li>
	<li>
%~platform重力を伴う加速度 ~LET ~NULL
◎
Let platformAccelerationIncludingGravity be null.
</li>
	<li>
%~virtual~sensor ~LET %~top-level辿可能 の`~virtual~sensor対応付け$[ `accelerometer^l ]
◎
↓</li>
	<li>
~IF［
%~virtual~sensor ~NEQ ε
］~AND［
%~virtual~sensor の`読取りを供せるか$vS ~EQ ~T
］
⇒
%~platform重力を伴う加速度 ~SET %~virtual~sensor に供された最新な読取り
◎
If topLevelTraversable’s virtual sensor mapping contains "accelerometer":
• Let virtualSensor be topLevelTraversable’s virtual sensor mapping["accelerometer"].
• If virtualSensor’s can provide readings flag is true, then set platformAccelerationIncludingGravity to the latest readings provided to virtualSensor.
</li>
	<li>
~ELIF［
実装は`重力を伴う加速度$を供せる
］
⇒
%~platform重力を伴う加速度 ~SET 当の~deviceの［
~X, ~Y, ~Z
］軸~~方向の`線形~加速度$
◎
Otherwise, if the implementation is able to provide acceleration with gravity:
• Set platformAccelerationIncludingGravity to the device’s linear acceleration along the X, Y and Z axes.
</li>
	<li>
%重力を伴う加速度 ~LET ~NULL
◎
Let accelerationIncludingGravity be null.
</li>
	<li>
<p>
~IF［
%~platform重力を伴う加速度 ~NEQ ~NULL
］：
◎
If platformAccelerationIncludingGravity is not null:
</p>
		<ol>
			<li>
%重力を伴う加速度 ~SET `新たな~obj$( `DeviceMotionEventAcceleration$I, %~window の`~realm$gL )
◎
Set accelerationIncludingGravity to a new DeviceMotionEventAcceleration created in window’s realm.
</li>
			<li>
~IF［
%~platform重力を伴う加速度 は~X軸~~方向の値 %~x加速度 を供せる
］
⇒
%重力を伴う加速度 の`~x軸~加速度$ ~SET 精度 0.1 m/s~pow2 までに制限された %~x加速度
◎
Set accelerationIncludingGravity’s x axis acceleration to platformAccelerationIncludingGravity’s value along the X axis, or null if it cannot be provided.
◎
If accelerationIncludingGravity’s x axis acceleration is not null, limit its precision to no more than 0.1 m/s2.
</li>
			<li>
~IF［
%~platform重力を伴う加速度 は~Y軸~~方向の値 %~y加速度 を供せる
］
⇒
%重力を伴う加速度 の`~y軸~加速度$ ~SET 精度 0.1 m/s~pow2 までに制限された %~y加速度
◎
Set accelerationIncludingGravity’s y axis acceleration to platformAccelerationIncludingGravity’s value along the Y axis, or null if it cannot be provided.
◎
If accelerationIncludingGravity’s y axis acceleration is not null, limit its precision to no more than 0.1 m/s2.
</li>
			<li>
~IF［
%~platform重力を伴う加速度 は~Z軸~~方向の値 %~z加速度 を供せる
］
⇒
%重力を伴う加速度 の`~z軸~加速度$ ~SET 精度 0.1 m/s~pow2 までに制限された %~z加速度
◎
Set accelerationIncludingGravity’s z axis acceleration to platformAccelerationIncludingGravity’s value along the Z axis, or null if it cannot be provided.
◎
If accelerationIncludingGravity’s z axis acceleration is not null, limit its precision to no more than 0.1 m/s2.
</li>
		</ol>
	</li>
	<li>
%~platform回転~率 ~LET ~NULL
◎
Let platformRotationRate be null.
</li>
	<li>
%~virtual~sensor ~LET %~top-level辿可能 の`~virtual~sensor対応付け$[ `gyroscope^l ]
◎
↓</li>
	<li>
~IF［
%~virtual~sensor ~NEQ ε
］~AND［
%~virtual~sensor の`読取りを供せるか$vS ~EQ ~T
］
⇒
%~platform回転~率 ~SET %~virtual~sensor に供された最新な読取り
◎
If topLevelTraversable’s virtual sensor mapping contains "gyroscope":
• Let virtualSensor be topLevelTraversable’s virtual sensor mapping["gyroscope"].
• If virtualSensor’s can provide readings flag is true, then set platformRotationRate to the latest readings provided to virtualSensor.
</li>
	<li>
~ELIF［
実装は`回転~率$を供せる
］
⇒
%~platform回転~率 ~SET 当の~deviceの［
~X, ~Y, ~Z
］軸~周りの`回転~率$
◎
Otherwise, if the implementation is able to provide rotation rate:
• Set platformRotationRate to the device’s rotation rate about the X, Y and Z axes.
</li>
	<li>
%回転~率 ~LET ~NULL
◎
Let rotationRate be null.
</li>
	<li>
<p>
~IF［
%~platform回転~率 ~NEQ ~NULL
］：
◎
If platformRotationRate is not null:
</p>
		<ol>
			<li>
%回転~率 ~SET `新たな~obj$( `DeviceMotionEventRotationRate$I, %~window の`~realm$gL )
◎
Set rotationRate to a new DeviceMotionEventRotationRate created in window’s realm.
</li>
			<li>
~IF［
%~platform回転~率 は~X軸~周りの`回転~率$ %~x回転~率 を供せる
］
⇒
%回転~率 の`~x軸~回転~率$ ~SET 精度 0.1 deg/s までに制限された %~x回転~率
◎
Set rotationRate’s x axis rotation rate to platformRotationRate’s value about the X axis, or null if it cannot be provided.
◎
If rotationRate’s x axis rotation rate is not null, limit its precision to no more than 0.1 deg/s.
</li>
			<li>
~IF［
%~platform回転~率 は~Y軸~周りの`回転~率$ %~y回転~率 を供せる
］
⇒
%回転~率 の`~y軸~回転~率$ ~SET 精度 0.1 deg/s までに制限された %~y回転~率
◎
Set rotationRate’s y axis rotation rate to platformRotationRate’s value about the Y axis, or null if it cannot be provided.
◎
If rotationRate’s y axis rotation rate is not null, limit its precision to no more than 0.1 deg/s.
</li>
			<li>
~IF［
%~platform回転~率 は~Z軸~周りの`回転~率$ %~z回転~率 を供せる
］
⇒
%回転~率 の`~z軸~回転~率$ ~SET 精度 0.1 deg/s までに制限された %~z回転~率
◎
Set rotationRate’s z axis rotation rate to platformRotationRate’s value about the Z axis, or null if it cannot be provided.
◎
If rotationRate’s z axis rotation rate is not null, limit its precision to no more than 0.1 deg/s.
</li>
		</ol>
	</li>
	<li>
%環境 ~LET %~window に`関連な設定群~obj$
◎
Let environment be window’s relevant settings object.
</li>
	<li class="algo">
<p>
この段は`並列的$に走らす：
◎
Run these steps in parallel:
</p>
		<ol>
			<li>
<p>
« `accelerometer$l, `gyroscope$l »
を成す
~EACH( %許可~名 )
に対し：
◎
For each permission name in « "accelerometer", "gyroscope" »:
</p>
				<ol>
					<li>
%状態 ~LET `現在の許可~状態を取得する$( %許可~名, %環境 )
◎
Let state be the result of getting the current permission state with permission name and environment.
</li>
					<li>
~IF［
%状態 ~NEQ `granted$l
］
⇒
~RET
◎
If state is not "granted", return.
</li>
				</ol>
			</li>
			<li>
<p>
`大域~taskを~queueする$( `~deviceの動きと方位~task~source$, %~window, 次の手続き )
◎
Queue a global task on the device motion and orientation task source given window to run＼
</p>

<div class="algo">
手続きは
⇒
`~eventを発火する$( %~window, `devicemotion$et, `DeviceMotionEvent$I )
— 次のように初期化して
`DeviceMotionEvent^I0
⇒＃
`acceleration$m 属性 ~SET %加速度,
`accelerationIncludingGravity$m 属性 ~SET %重力を伴う加速度,
`rotationRate$m 属性 ~SET %回転~率,
`interval$m 属性 ~SET %~interval
◎
the following steps:
• Fire an event named devicemotion at window, using DeviceMotionEvent, with the acceleration attribute initialized to acceleration, the accelerationIncludingGravity attribute initialized to accelerationIncludingGravity, the rotationRate attribute initialized to rotationRate, and the interval attribute initialized to interval.
</div>
			</li>
		</ol>
	</li>
</ol>
</div>

<p>
実装は、
動き情報を まったく供せない場合でも，~eventを発火するベキである
— 次に挙げる属性をすべて ~NULL に設定した上で
⇒＃
`acceleration$m,
`accelerationIncludingGravity$m,
`rotationRate$m
◎
If an implementation can never provide motion information, the event should be fired with the acceleration, accelerationIncludingGravity and rotationRate attributes set to null.
</p>

			</section>
		</section>
	</section>
	<section id="security-and-privacy">
<h2 title="Security and privacy considerations">9. ~security／~privacyの考慮点</h2>

<p>
この仕様に定義される~APIは、［
加速度計, ~gyroscope, 磁力計
］などの~hardware~sensorからの情報を得するために利用できる。
供される~dataは、
敏感であり，悪意的な~web~pageによる攻撃の~subjectになり得るものと考えられている。
［
加速度計, ~gyroscope, 磁力計
］の較正は、
特定0の~sensor~hardwareについての持続的な詳細を露呈し得る
`SENSORID$r
。
主な攻撃~行路は、
次に分類できる：
◎
The API defined in this specification can be used to obtain information from hardware sensors, such as accelerometer, gyroscope and magnetometer. Provided data may be considered as sensitive and could become a subject of attack from malicious web pages. The calibration of accelerometers, gyroscopes and magnetometers may reveal persistent details about the particular sensor hardware [SENSORID]. The main attack vectors can be categorized into following categories:
</p>

<ul>
	<li>
利用者~入力の監視
`TOUCH$r
◎
Monitoring of a user input [TOUCH]
</li>
	<li>
所在の追跡
`INDOORPOS$r
◎
Location tracking [INDOORPOS]
</li>
	<li>
利用者の識別
`FINGERPRINT$r
◎
User identification [FINGERPRINT]
</li>
</ul>

<p>
それを踏まえて、
実装は，［
当の~web~pageによる~sensorの利用を徴す視覚的な指示子
］を考慮してもヨイ。
加えて，この仕様は、
次について，利用者が~UAに対し`許可を表出する$ことを要求する
⇒
`requestPermission()$m の~callを介して，~deviceの［
動き／方位
］~dataを作者に供する
◎
In light of that, implementations may consider visual indicators to signify the use of sensors by the web page. Additionally, this specification requires users to give express permission for the user agent to provide device motion and/or orientation data via the requestPermission() API calls.
</p>

<p>
加えて，［
~privacy~risk,
指紋収集,
その他の攻撃
］の機会cを最小限にするため、
実装が この仕様に定義される~eventを発火するのは，
~AND↓ が満たされる場合に限るモノトスル：
◎
Furthermore, to minimize privacy risks, the chance of fingerprinting and other attacks the implementations must:
</p>

<ul>
	<li>
<p>
~targetは［
~AND↓ を満たす`~navigable$ %~navigable
］にて`作動中な~window$navである
◎
↓</p>
		<ul>
			<li>
［
%~navigable にて`作動中な文書$nav ~NEQ ~NULL
］~AND［
%~navigable にて`作動中な文書$navの`可視性~状態$doc ~EQ `visible^l
］
◎
fire events only when a navigable's active document's visibility state is "visible",
</li>
			<li>
次の 2 つは`同一-生成元$である
（ %~navigable は`~top-level辿可能$であるならば常に満たされる）
⇒＃
%~navigable にて`作動中な~window$navに`関連な設定群~obj$の`生成元$enV,
%~navigable の`~top-level辿可能$navにて`作動中な~window$navに`関連な設定群~obj$の`生成元$enV
◎
fire events only on the top-level traversable's active window and child navigables' active windows whose relevant settings object's origin is same origin with the top-level traversable's active window's relevant settings object's origin.
</li>
			<li>
%~navigable に`関連な設定群~obj$は`~secureな文脈$enVである
◎
fire events on a navigable's active windows only when its relevant settings object is a secure context,
</li>
		</ul>
	</li>
	<li>
これまでの各節に述べたとおり，属性~値の精度を制限する。
◎
limit precision of attribute values as described in the previous sections.
</li>
</ul>

<p>
加えて、
そのように実装することは，
携帯~deviceの~battery寿命にも~~有益になろう。
◎
Additionally, implementing these items may also have a beneficial impact on the battery life of mobile devices.
</p>

	</section>
	<section id="use-cases-and-requirements">
<h2 title="Use-Cases and Requirements">10. 利用事例と要件</h2>

		<section id="use-cases">
<h3 title="Use-Cases">10.1. 利用事例</h3>

◎非規範的

<dl>
	<dt id="controlling-a-game">
~gameの制御-法
◎
7.1.1. Controlling a game
</dt>
	<dd>
~game用の~Web~appは、
~deviceの方位を監視して，ある種の方向への傾きを~screen~spriteを制御する手段として解釈する。
◎
A gaming Web application monitors the device’s orientation and interprets tilting in a certain direction as a means to control an on-screen sprite.
</dd>

	<dt id="gesture-recognition">
~gesture認識
◎
7.1.2. Gesture recognition
</dt>
	<dd>
~Web~appは、
~deviceの加速度を監視して，ある種の~gestureを認識するために信号~処理を適用する。
例えば、
`shaking^en ~gestureを利用して ~web~formを~clearするなど。
◎
A Web application monitors the device’s acceleration and applies signal processing in order to recognize certain specific gestures. For example, using a shaking gesture to clear a web form.
</dd>

	<dt id="mapping">
地図~用
◎
7.1.3. Mapping
</dt>
	<dd>
地図~用の~Web~appは、
~deviceの方位を利用して，地図が現実と正しく揃うようにする。
◎
A mapping Web application uses the device’s orientation to correctly align the map with reality.
</dd>
</dl>

		</section>
		<section id="requirements">
<h3 title="Requirements">10.2. 要件</h3>

◎非規範的

<p>
仕様は、
次に従わなければナラナイ：
◎
↓</p>

<ul>
	<li>
空間における~deviceの物理的な［
方位, 動き
］を述べる~dataを供する。
◎
The specification must provide data that describes the physical orientation in space of the device.
◎
The specification must provide data that describes the motion in space of the device.
</li>
	<li>
~deviceの方位~変化に応じれる~event~handlerを登録するのを，~Web~appに許容する。
◎
The specification must allow Web applications to register for changes in the device’s orientation.
</li>
	<li>
方位, 動きとも，下層の~data~sourceは問わないとする。
◎
The specification must be agnostic to the underlying sources of orientation and motion data.
</li>
	<li>
既存の~DOM~event~frameworkを利用する。
◎
The specification must use the existing DOM event framework.
</li>
</ul>

		</section>
	</section>
	<section id="automation">
<h2 title="Automation">11. 自動化</h2>

<p>
この仕様は、
~test作者に難題を突きつけ得る
— この仕様に定義される各種~eventは、［
読取りを容易に制御できない物理的な~hardware
］が在ることに依存するので。
◎
This specification can pose a challenge to test authors, as the events defined here depend on the presence of physical hardware whose readings cannot be easily controlled.
</p>

<p>
この難題に取組むため、
この文書は，［
`WEBDRIVER2$r による`拡張~command$
］と［
`GENERIC-SENSOR$r `§ 自動化＠~SENSORS#automation$
により敷かれた基盤
］の上に築かれる。
別々な`拡張~command$を伴う，完全に［
新たな, 独立な
］基盤を開発する選択肢もあったが、
これが選ばれたのは、
これら 2 つの仕様は，有意に重合するからである
— `GENERIC-SENSOR$r 仕様を~testすることにおいて，類似な難題が在ることのみならず、
派生する多くの~API（例： `GYROSCOPE$r ）が，類似な情報を得して供することにおいて。
◎
To address this challenge, this document builds upon the [WEBDRIVER2] extension commands and infrastructure laid out by Generic Sensor API § 9 Automation. This was chosen over the option of developing completely new and independent infrastructure with separate extension commands because there is significant overlap between the two specifications: not only does testing the [GENERIC-SENSOR] specification present similar challenges, but many derived APIs (e.g. [GYROSCOPE]) obtain and provide similar information.
</p>

<p>
この仕様が実装に~supportするよう要求するのは、
`GENERIC-SENSOR$r `§ 自動化＠~SENSORS#automation$
に限られる
— その【そこから派生する】各種［
~interface, ~event
］ではなく。
◎
This specification only requires implementations to support the Generic Sensor API § 9 Automation section of the [GENERIC-SENSOR] specification, not its interfaces and events.
</p>


		<section id="device-orientation-automation">
<h3 title="Device Orientation Automation">11.1. ~device方位の自動化</h3>

<p>
`deviceorientation$et ~event用の自動化の~supportは、［
加速度計, ~gyroscope, 任意選択で磁力計
］を表現する~virtual~sensorの上に築かれる。
◎
Automation support for the deviceorientation event is built upon virtual sensors that represent accelerometers, gyroscopes and, optionally, magnetometers.
</p>

<p>
~UAにより~platformから検索取得される方位~dataは、［
加速度計, ~gyroscope, 任意選択で磁力計
］から来る。
しかしながら，動き~dataとは違って、
これらの より低-~levelな読取りは，［
`§ ~device方位＠#device-orientation-model$
にて述べられる定式化に従って，`~Euler角度$に変形する
］モノトスル。
さらには、
~platformは，~~追加な~APIとして［
生な［
加速度, 回転
］~dataから それらの変換のうち一部をすでに遂行するもの
］を~UAに供するかもしれない。
◎
Orientation data retrieved from the platform by the user agent comes from accelerometers, gyroscopes and, optionally, magnetometers. Contrary to motion data, however, these lower-level readings must be transformed into Euler angles in the formation described in § 4.1 Device Orientation. Furthermore, the platform might provide extra APIs to the user agent that already perform some of those conversions from raw acceleration and rotation data.
</p>

<p>
したがって、
実装（および自動化の利用者）に対し［
方位~読取りを より低-~levelな~virtual~sensorを介して供する
（それは、
異なる単位による測定を利用する）
］ことを要求する代わりに、
この仕様は、［
相対 `and^en【？】 方位
］~data用の~~追加な`~virtual~sensor型$を［
この仕様により利用される形式
］で定義する。
◎
Therefore, instead of requiring implementations (and automation users) to provide orientation readings via lower-level virtual sensors which use different units of measurement, this specification defines extra virtual sensor types for relative and orientation data in the format used by this specification.
</p>

			<section id="parse-orientation-data-reading-algorithm">
<h4 title="Parse orientation reading data algorithm">11.1.1. 方位~data読取りを構文解析する~algo</h4>

<div class="algo">
<p>
`方位~data読取りを構文解析する@
ときは、
所与の
( ~JSON `Object$jt %~parameter群 )
に対し：
◎
To perform the parse orientation data reading algorithm, given a JSON Object parameters:
</p>
<ol>
	<li>
%~alpha ~LET %~parameter群 から`~propを取得する$( `alpha^l )
◎
Let alpha be the result of invoking get a property from parameters with "alpha".
</li>
	<li>
~IF［
%~alpha は`有限な数$でない
］
⇒
~RET `undefined^jv
◎
If alpha is not a Number, or its value is NaN, +∞, or −∞, return undefined.
</li>
	<li>
~IF［
%~alpha ~LT 0
］~OR［
%~alpha ~GTE 360
］
⇒
~RET `undefined^jv
◎
If alpha is not in the range [0, 360), then return undefined.
</li>
	<li>
%~beta ~LET %~parameter群 から`~propを取得する$( `beta^l )
◎
Let beta be the result of invoking get a property from parameters with "beta".
</li>
	<li>
~IF［
%~beta は`有限な数$でない
］
⇒
~RET `undefined^jv
◎
If beta is not a Number, or its value is NaN, +∞, or −∞, return undefined.
</li>
	<li>
~IF［
%~beta ~LT −180
］~OR［
%~beta ~GTE 180
］
⇒
~RET `undefined^jv
◎
If beta is not in the range [-180, 180), then return undefined.
</li>
	<li>
%~gamma ~LET %~parameter群 から`~propを取得する$( `gamma^l )
◎
Let gamma be the result of invoking get a property from parameters with "gamma".
</li>
	<li>
~IF［
%~gamma は`有限な数$でない
］
⇒
~RET `undefined^jv
◎
If gamma is not a Number, or its value is NaN, +∞, or −∞, return undefined.
</li>
	<li>
~IF［
%~gamma ~LT −90
］~OR［
%~gamma ~GTE 90
］
⇒
~RET `undefined^jv
◎
If gamma is not in the range [-90, 90), then return undefined.
</li>
	<li>
%読取り ~LET 新たな`~map$
◎
Let reading be a new map.
</li>
	<li>
%読取り[ `alpha^l ] ~SET %~alpha
◎
Set reading["alpha"] to alpha.
</li>
	<li>
%読取り [`beta^l ] ~SET %~beta
◎
Set reading["beta"] to beta.
</li>
	<li>
%読取り[`gamma^l ] ~SET %~gamma
◎
Set reading["gamma"] to gamma.
</li>
	<li>
~RET %読取り
◎
Return reading.
</li>
</ol>

<p class="note">注記：
上の~algoでは、
`~sensor読取り$の概念 `GENERIC-SENSOR$r に依存しないよう，
 %読取り を`~map$として定義する。
それは、
上の~algoの目的においては交換可能になるべきである。
◎
Note: reading is defined as a map in the algorithm above to prevent a dependency on the sensor reading concept from the [GENERIC-SENSOR] specification. They should be interchangeable for the purposes of the algorithm above.
</p>
</div>

			</section>
			<section id="absolute-orientation-virtual-sensors">
<h4 title="The &quot;absolute-orientation&quot; virtual sensor type">11.1.2. `absolute-orientation^l ~virtual~sensor型</h4>

<p>
`型ごとの~virtual~sensor~metadata$は、
次の`~entry$mapを伴うモノトスル：
◎
The per-type virtual sensor metadata map must have the following entry:
</p>
<dl>
	<dt>
`~key$map
◎
key
</dt>
	<dd>
`absolute-orientation@vsT
◎
"absolute-orientation"
</dd>

	<dt>
`値$map
◎
value
</dt>
	<dd>
ある`~virtual~sensor~metadata$
— その`読取り構文解析~algo$vsMは
⇒
`方位~data読取りを構文解析する$
◎
A virtual sensor metadata whose reading parsing algorithm is parse orientation data reading.
</dd>
</dl>

			</section>
			<section id="relative-orientation-virtual-sensors">
<h4 title="The &quot;relative-orientation&quot; virtual sensor type">11.1.3. `relative-orientation^l ~virtual~sensor型</h4>

<p>
`型ごとの~virtual~sensor~metadata$は、
次の`~entry$mapを伴うモノトスル：
◎
The per-type virtual sensor metadata map must have the following entry:
</p>

<dl>
	<dt>
`~key$map
◎
key
</dt>
	<dd>
`relative-orientation@vsT
◎
"relative-orientation"
</dd>

	<dt>
`値$map
◎
value
</dt>
	<dd>
ある`~virtual~sensor~metadata$
— その`読取り構文解析~algo$vsMは
⇒
`方位~data読取りを構文解析する$
◎
A virtual sensor metadata whose reading parsing algorithm is parse orientation data reading.
</dd>
</dl>

			</section>
		</section>
		<section id="device-motion-automation">
<h3 title="Device Motion Automation">11.2. ~deviceの動きの自動化</h3>

<p>
~UAにより~platformから検索取得される動き~dataは［
加速度計, ~gyroscope
］から来る。
この仕様は、
`型ごとの~virtual~sensor~metadata$を成すある種の~entryを定義する
— それらは、
`ACCELEROMETER$r, `GYROSCOPE$r
と共有される。
◎
The motion data retrieved from the platform by the user agent comes from accelerometers and gyroscopes. This specification defines certain per-type virtual sensor metadata entries that are shared with the [ACCELEROMETER] and [GYROSCOPE] specifications.
</p>

<p>
［
加速度計／線形~加速度／~gyroscope
］用の~virtual~sensorは、［
`重力を伴う加速度$／
`線形~加速度$／
`回転~率$
］の~dataを~platformに供するために利用される。
◎
Accelerometer virtual sensors are used to provide acceleration with gravity data to the platform. Linear Acceleration virtual sensors are used to provide linear acceleration data to the platform. Gyroscope virtual sensors are used to provide rotation rate data to the platform.
</p>

			<section id="accelerometer-virtual-sensors">
<h4 title="The &quot;accelerometer&quot; virtual sensor type">11.2.1. `accelerometer^l ~virtual~sensor型</h4>

<p>
`型ごとの~virtual~sensor~metadata$は、
次の`~entry$mapを伴うモノトスル：
◎
The per-type virtual sensor metadata map must have the following entry:
</p>

<dl>
	<dt>
`~key$map
◎
key
</dt>
	<dd>
`accelerometer@vsT
◎
"accelerometer"
</dd>

	<dt>
`値$map
◎
value
</dt>
	<dd>
ある`~virtual~sensor~metadata$
— その`読取り構文解析~algo$vsMは
⇒
`~xyzの読取りを構文解析する$
◎
A virtual sensor metadata whose reading parsing algorithm is parse xyz reading.
</dd>
</dl>

			</section>
			<section id="linear-acceleration-virtual-sensors">
<h4 title="The &quot;linear-acceleration&quot; virtual sensor type">11.2.2. `linear-acceleration^l ~virtual~sensor型</h4>

<p>
`型ごとの~virtual~sensor~metadata$は、
次の`~entry$mapを伴うモノトスル：
◎
The per-type virtual sensor metadata map must have the following entry:
</p>

<dl>
	<dt>
`~key$map
◎
key
</dt>
	<dd>
`linear-acceleration@vsT
◎
"linear-acceleration"
</dd>

	<dt>
`値$map
◎
value
</dt>
	<dd>
ある`~virtual~sensor~metadata$
— その`読取り構文解析~algo$vsMは
⇒
`~xyzの読取りを構文解析する$
◎
A virtual sensor metadata whose reading parsing algorithm is parse xyz reading.
</dd>
</dl>

			</section>
			<section id="gyroscope-virtual-sensors">
<h4 title="The &quot;gyroscope&quot; virtual sensor type">11.2.3. `gyroscope^l ~virtual~sensor型</h4>

<p>
`型ごとの~virtual~sensor~metadata$は、
次の`~entry$mapを伴うモノトスル：
◎
The per-type virtual sensor metadata map must have the following entry:
</p>
<dl>
	<dt>
`~key$map
◎
key
</dt>
	<dd>
`gyroscope@vsT
◎
"gyroscope"
</dd>

	<dt>
`値$map
◎
value
</dt>
	<dd>
ある`~virtual~sensor~metadata$
— その`読取り構文解析~algo$vsMは
⇒
`~xyzの読取りを構文解析する$
◎
A virtual sensor metadata whose reading parsing algorithm is parse xyz reading.
</dd>
</dl>

			</section>
		</section>
	</section>
	<section id="examples">
<h2 title="A. Examples">例</h2>

◎非規範的

【！ All equations in this section are created using MathJAX and are provided @ http://jsfiddle.net/richtr/w7Xgu/ 】

		<section id="worked-example">
<h3 title="A.1 Calculating compass heading">~compass-headingの計算-法</h3>

◎非規範的

<p>
以下に作業した例は、
`deviceorientation$et ~eventの利用者~向けの~~参考として意図されている。
◎
The following worked example is intended as an aid to users of the DeviceOrientation event.
</p>

<p>
`§ 序論＠#introduction$
では、
~deviceの~screenが水平なときに~compass-headingを得する，
`deviceorientation$et ~eventの用例を供した。
この例では、
利用者が対面して握っている~deviceの~screenが近似的に直立しているとき，
~deviceの~compass-headingを決定する方法を示す。
これの応用は、
現実拡張~systemである。
◎
Introduction section provided an example of using the DeviceOrientation event to obtain a compass heading when the device is held with the screen horizontal. This example shows how to determine the compass heading that the user is facing when holding the device with the screen approximately vertical in front of them. An application of this is an augmented-reality system.
</p>

<p>
ここでの~deviceの~compass-headingとは、
精確には，［
~deviceの~screenに~~直交し，~screenの背面から先を指す~vector
］の水平~成分である。
◎
More precisely, we wish to determine the compass heading of the horizontal component of a vector which is orthogonal to the device’s screen and pointing out of the back of the screen.
</p>

<p>
%v は、
回転された~device座標~frame【！device body frame】（~xyz）における，この~vectorを表現するとする：
◎
If v represents this vector in the rotated device body frame xyz, then v is as follows.
• v = [0; 0; -1]
</p>

<div class="_math-formula">
%v ~EQ `equation1^dgm
</div>

<p>
~z軸~周りの回転に因る座標系変換は、
次の回転~行列 %Z で表現できる：
◎
The transformation of v due to the rotation about the z axis can be represented by the following rotation matrix.
• Z = [cos(alpha) -sin(alpha) 0; sin(alpha) cos(alpha) 0; 0 0 1]
</p>

<div class="_math-formula">
`equation2^dgm
</div>

<p>
~x軸~周りの回転に因る座標系変換は、
次の回転~行列 %X で表現できる：
◎
The transformation of v due to the rotation about the x axis can be represented by the following rotation matrix.
• X = [1 0 0; 0 cos(beta) -sin(beta); 0 sin(beta) cos(beta)]"
</p>

<div class="_math-formula">
`equation3^dgm
</div>

<p>
~y軸~周りの回転に因る座標系変換は、
次の回転~行列 %Y で表現できる：
◎
The transformation of v due to the rotation about the y axis can be represented by the following rotation matrix.
• Y = [cos(gamma) 0 sin(gamma); 0 1 0; -sin(gamma) 0 cos(gamma)]
</p>

<div class="_math-formula">
`equation4^dgm
</div>

<p>
%R は、
基準~座標~frame【！earth frame】（~XYZ）における~deviceの全部的な回転~行列を表現するとする。
初期の~device座標~frame【！body frame】は基準~座標~frame【！earth frame】に揃えられているので、［
%R ~EQ %Z ~MUL %X ~MUL %Y
］であり，その結果は：
◎
If R represents the full rotation matrix of the device in the earth frame XYZ, then since the initial body frame is aligned with the earth, R is as follows.
• R = ZXY = [[cos(alpha) cos(gamma)-sin(alpha) sin(beta) sin(gamma), -cos(beta) sin(alpha), cos(gamma) sin(alpha) sin(beta)+cos(alpha) sin(gamma)], [cos(gamma) sin(alpha)+cos(alpha) sin(beta) sin(gamma), cos(alpha) cos(beta), sin(alpha) sin(gamma)-cos(alpha) cos(gamma) sin(beta)], [-cos(beta) sin(gamma), sin(beta), cos(beta) cos(gamma)]]
</p>

<div class="_math-formula">
`equation13a^dgm
</div>

<p>
%V は基準~座標~frame【！earth frame】（~XYZ）における~vector %v を表現するとする。
［
【！equation5a】
%V ~EQ %R ~MUL %v
］であり，その結果は：
◎
If v' represents the vector v in the earth frame XYZ, then since the initial body frame is aligned with the earth, v' is as follows.
• v' = Rv
• v' = [-cos(alpha)sin(gamma)-sin(alpha)sin(beta)cos(gamma); -sin(alpha)sin(gamma)+cos(alpha)sin(beta)cos(gamma); -cos(beta)cos(gamma)]
</p>

<div class="_math-formula">
`equation5e^dgm
</div>

<p>
%θ は~compass-headingを表すとするとき、［
%β, %γ とも 0
］ではないとするなら［
%θ ~EQ `arctan^op( ( %V の~x成分 ) ~DIV ( %V の~y成分 ) )
］であり，その結果は
【！equation6】
⇒
%θ ~EQ `arctan^op(
( −`cos^op(%α)`sin^op(%γ) − `sin^op(%α)`sin^op(%β)`cos^op(%γ) )
~DIV
( −`sin^op(%α)`sin^op(%γ) + `cos^op(%α)`sin^op(%β)`cos^op(%γ) )
)
◎
The compass heading θ is given by
• theta = atan((v’_x)/(v’_y)) = atan((-cos(alpha)sin(gamma)-sin(alpha)sin(beta)cos(gamma))/(-sin(alpha)sin(gamma)+cos(alpha)sin(beta)cos(gamma)))
◎
provided that β and γ are not both zero.
</p>

<div class="example">
<p>
上による~compass-headingの計算は、
~JSでは次のように表現できる
— 供された各~parameterが定義されていて（ ~NULLでない），かつ絶対~方位（ `absolute^m ~EQ ~T ）を表現するならば，正しい~compass-headingを返す。
◎
The compass heading calculation above can be represented in JavaScript as follows to return the correct compass heading when the provided parameters are defined, not null and represent absolute values.
</p>

<pre class="lang-js">
var %degtorad = Math.PI / 180; /* <span class="comment">
度d ↔ ~radian 間の換算~用
◎
Degree-to-Radian conversion
</span> */

function compassHeading( %alpha, %beta, %gamma ) {

  var %_x = %beta  ? %beta  * %degtorad : 0; // %β 値
  var %_y = %gamma ? %gamma * %degtorad : 0; // %γ 値
  var %_z = %alpha ? %alpha * %degtorad : 0; // %α 値

  var %cX = Math.cos( %_x );
  var %cY = Math.cos( %_y );
  var %cZ = Math.cos( %_z );
  var %sX = Math.sin( %_x );
  var %sY = Math.sin( %_y );
  var %sZ = Math.sin( %_z );

  /* <span class="comment">
%V の~x, ~y成分を計算する
◎
Calculate Vx and Vy components
</span> */
  var %Vx = - %cZ * %sY - %sZ * %sX * %cY;
  var %Vy = - %sZ * %sY + %cZ * %sX * %cY;

  /* <span class="comment">
~compass-headingを計算する
◎
Calculate compass heading
</span> */
  var %compassHeading = Math.atan( %Vx / %Vy );

  /* <span class="comment">
~compass-headingを， 0 以上 2 π 未満に換算する
◎
Convert compass heading to use whole unit circle
</span> */
  if( %Vy &lt; 0 ) {
    %compassHeading += Math.PI;
  } else if( %Vx &lt; 0 ) {
    %compassHeading += 2 * Math.PI;
  }

  return %compassHeading * ( 180 / Math.PI ); /* <span class="comment">
度dによる~compass-heading
◎
Compass Heading (in degrees)
</span> */

}
</pre>
</div>

<p>
整合性~検査として，
%γ を 0 に設定した場合、
%θ は，期待されるとおり
【！equation7】
⇒＃
%θ ~EQ `arctan^op( −`sin^op(%α)`sin^op(%β) ~DIV `cos^op(%α)`sin^op(%β) )
~EQ `arctan^op( −`sin^op(%α) ~DIV `cos^op(%α) ) ~EQ −%α
◎
As a consistency check, if we set γ = 0, then
• theta = atan(-sin(alpha)sin(beta)/cos(alpha)sin(beta)) = -alpha
◎
as expected.
</p>

<p>
代替の整合性~検査として，
%β を 90 に設定した場合【すなわち，本体は直立している】、
%θ は，期待されるとおり
【！equation8a, equation8b】
⇒＃
%θ ~EQ `arctan^op( ( −`cos^op(%α)`sin^op(%γ) − `sin^op(%α)`cos^op(%γ) ) ~DIV ( −`sin^op(%α)`sin^op(%γ) + `cos^op(%α)`cos^op(%γ) ) )
~EQ `arctan^op( −`sin^op(%α+%γ) ~DIV `cos^op(%α+%γ) )
~EQ −(%α+%γ)
◎
Alternatively, if we set β = 90, then
• theta = atan((-cos(alpha)sin(gamma)-sin(alpha)cos(gamma))/(-sin(alpha)sin(gamma)+cos(alpha)cos(gamma)))
• theta = atan(-sin(alpha+gamma)/cos(alpha+gamma)) = -(alpha+gamma)
◎
as expected.
</p>

		</section>
		<section id="worked-example-2">
<h3 title="A.2 Alternate device orientation representations">~device方位の代替-表現</h3>

◎非規範的

<p>
`~Euler角度$を利用して方位を述べることには、
~gimbal-lock `GIMBALLOCK$r を導入するなどの欠点もあり得る。
意図される応用に依存して，~device方位を表す値を他の回転~表現に換算する方が有用になり得る。
◎
Describing orientation using Tait-Bryan angles can have some disadvantages such as introducing gimbal lock [GIMBALLOCK]. Depending on the intended application it can be useful to convert the Device Orientation values to other rotation representations.
</p>

<p>
方位~用の代替-表現としては、
回転~行列を利用するものが先ず挙げられる。
`§ ~compass-headingの計算-法＠#worked-example$にて供した，成分~回転~行列を組合せることにより、
~device座標~frame【！body frame】の方位を組合せた回転~行列
— その節に述べた %R —
【！equation13a】
として表現できる。
それは、
基準~座標~frame【！earth frame】（~XYZ）からの~deviceの回転~行列を表現する。
◎
The first alternate orientation representation uses rotation matrices. By combining the component rotation matrices provided in the worked example above we can represent the orientation of the device body frame as a combined rotation matrix.
◎
If R represents the rotation matrix of the device in the earth frame XYZ, then since the initial body frame is aligned with the earth, R is as follows.
• R = ZXY = [[cos(alpha) cos(gamma)-sin(alpha) sin(beta) sin(gamma), -cos(beta) sin(alpha), cos(gamma) sin(alpha) sin(beta)+cos(alpha) sin(gamma)], [cos(gamma) sin(alpha)+cos(alpha) sin(beta) sin(gamma), cos(alpha) cos(beta), sin(alpha) sin(gamma)-cos(alpha) cos(gamma) sin(beta)], [-cos(beta) sin(gamma), sin(beta), cos(beta) cos(gamma)]]
</p>

<div class="example">
<p>
この回転~行列は、
~JSでは，次のように表現できる
— 供された各~parameterが定義されていて, ~NULLでなく, `absolute^m 値を表現するならば：
◎
The above combined rotation matrix can be represented in JavaScript as follows provided passed parameters are defined, not null and represent absolute values.
</p>

<pre class="lang-js">
var %degtorad = Math.PI / 180; /* <span class="comment">
度d ↔ ~radian 間の換算~用
◎
Degree-to-Radian conversion
</span> */

function getRotationMatrix( alpha, %beta, %gamma ) {

  var %_x = %beta  ? %beta  * %degtorad : 0; // %β 値
  var %_y = %gamma ? %gamma * %degtorad : 0; // %γ 値
  var %_z = %alpha ? %alpha * %degtorad : 0; // %α 値

  var %cX = Math.cos( %_x );
  var %cY = Math.cos( %_y );
  var %cZ = Math.cos( %_z );
  var %sX = Math.sin( %_x );
  var %sY = Math.sin( %_y );
  var %sZ = Math.sin( %_z );

  /* <span class="comment">
ZXY 回転~行列の構築
◎
ZXY rotation matrix construction.
</span> */

  var %m11 = %cZ * %cY - %sZ * %sX * %sY;
  var %m12 = - %cX * %sZ;
  var %m13 = %cY * %sZ * %sX + %cZ * %sY;

  var %m21 = %cY * %sZ + %cZ * %sX * %sY;
  var %m22 = %cZ * %cX;
  var %m23 = %sZ * %sY - %cZ * %cY * %sX;

  var %m31 = - %cX * %sY;
  var %m32 = %sX;
  var %m33 = %cX * %cY;

  return [
    %m11,    %m12,    %m13,
    %m21,    %m22,    %m23,
    %m31,    %m32,    %m33
  ];

};
</pre>
</div>

<p>
~device方位~data用には、
四元数 `QUATERNIONS$r による代替-表現もある。
◎
Another alternate representation of device orientation data is as Quaternions. [QUATERNIONS]
</p>

<div>
<p>
%q ~EQ ( %w, %x, %y, %z ) は、
基準~座標~frame【！earth frame】（~XYZ） における~deviceの単位~四元数を表現するとする。
初期の~device座標~frame【！body frame】は基準~座標~frame【！earth】に揃えられているので、
%q は次のようになる
【！equation14】
⇒＃
%w ~EQ `cos^op( %b ) `cos^op( %c ) `cos^op( %a ) ~MINUS `sin^op( %b ) `sin^op( %c ) `sin^op( %a ),
%x ~EQ `sin^op( %b ) `cos^op( %c ) `cos^op( %a ) ~MINUS `cos^op( %b ) `sin^op( %c ) `sin^op( %a ),
%y ~EQ `cos^op( %b ) `sin^op( %c ) `cos^op( %a ) ~PLUS `sin^op( %b ) `cos^op( %c ) `sin^op( %a ),
%z ~EQ `cos^op( %b ) `cos^op( %c ) `sin^op( %a ) ~PLUS `sin^op( %b ) `sin^op( %c ) `cos^op( %a )
</p>

<p>
ここで
⇒＃
( %a, %b, %c ) ~EQ ( %α ~DIV 2, %β ~DIV 2, %γ ~DIV 2 )
</p>

◎
If q represents the unit quaternion of the device in the earth frame XYZ, then since the initial body frame is aligned with the earth, q is as follows.
• q = [[q_w], [q_x], [q_y], [q_z]] = [[cos(beta)cos(gamma)cos(alpha) - sin(beta)sin(gamma)sin(alpha)], [sin(beta)cos(gamma)cos(alpha) - cos(beta)sin(gamma)sin(alpha)], [cos(beta)sin(gamma)cos(alpha) + sin(beta)cos(gamma)sin(alpha)], [cos(beta)cos(gamma)sin(alpha) + sin(beta)sin(gamma)cos(alpha)]]
</div>

<div class="example">
<p>
上の四元数は、
~JSでは，次のように表現できる
— 供された~parameterが定義されていて, ~NULLでなく, `absolute^m 値を表現するならば。
◎
The above quaternion can be represented in JavaScript as follows provided the passed parameters are defined, are absolute values and those parameters are not null.
</p>

<pre class="lang-js">
var %degtorad = Math.PI / 180; /* <span class="comment">
度d ↔ ~radian 間の換算~用
◎
Degree-to-Radian conversion
</span> */

function getQuaternion( %alpha, %beta, %gamma ) {

  var %_x = %beta  ? %beta  * %degtorad : 0; // %β 値
  var %_y = %gamma ? %gamma * %degtorad : 0; // %γ 値
  var %_z = %alpha ? %alpha * %degtorad : 0; // %α 値

  var %cX = Math.cos( %_x/2 );
  var %cY = Math.cos( %_y/2 );
  var %cZ = Math.cos( %_z/2 );
  var %sX = Math.sin( %_x/2 );
  var %sY = Math.sin( %_y/2 );
  var %sZ = Math.sin( %_z/2 );

  /* <span class="comment">
ZXY 四元数の構築
◎
ZXY quaternion construction.
</span> */

  var %w = %cX * %cY * %cZ - %sX * %sY * %sZ;
  var %x = %sX * %cY * %cZ - %cX * %sY * %sZ;
  var %y = %cX * %sY * %cZ + %sX * %cY * %sZ;
  var %z = %cX * %cY * %sZ + %sX * %sY * %cZ;

  return [ %w, %x, %y, %z ];

}
</pre>
</div>

<p>
単位~四元数が正しく構築されたかどうかは、
`Lagrange^en の四平方定理を利用して検査できる
— 結果は，期待されるとおり 1 になる
【！equation18】
⇒
%w ~pow2 ~PLUS %x ~pow2 ~PLUS %y ~pow2 ~PLUS %z ~pow2
~EQ 1
◎
We can check that a Unit Quaternion has been constructed correctly using Lagrange’s four-square theorem
• q_w^2 * q_x^2 * q_y^2 * q_z^2 = 1
◎
as expected.
</p>

		</section>
	</section>
	<section id="acknowledgments">
<h2 title="Acknowledgments">謝辞</h2>

<p lang="en">
Lars Erik Bolstad, Dean Jackson, Claes Nilsson, George Percivall, Doug Turner, Matt Womer, Chris Dumez
</p>

	</section>
	<section id="changes">
<h2 title="Changes">変更点</h2>

<p>
この節では、
考査を手引きするため，［
~~有意な変更点, 注記すべき編集上の改善
］を要約する。
全部的な詳細は、
`~commit~log＠https://github.com/w3c/deviceorientation/commits/main$
にて可用である。
◎
This section summarizes substantial changes and notable editorial improvements to guide review. Full details are available from the commit log.＼
</p>
<dl>
	<dt>
`2016年 08月 18日 勧告候補＠~TR/2016/CR-orientation-event-20160818/$からの変更点
◎
Changes since the Candidate Recommendation 2016-08-18:
</dt>
	<dd>
`§ 許可~施策の統合＠#permissions-policy-integration$
を追加した。
◎
Add Permissions Policy integration
</dd>
	<dd>
実装者~向けに，複数の許可~要請を束ねることについて注記を追加した。
◎
Add note to implementers about bundling permission requests
</dd>
	<dd>
強力な特能［
`accelerometer$pF,
`gyroscope$pF,
`magnetometer$pF
］を~exportした。
◎
Export powerful features Accelerometer, Gyroscope and Magnetometer
</dd>
	<dd>
`§ 許可~APIの統合＠#permissions-policy-integration$
を追加した。
それに伴い， `requestPermission()^m の利用を要求するようにした。
◎
Add Permissions API integration, start requiring requestPermission() usage
</dd>
	<dd>
編集上：
`§ ~API＠#api$
を より規範的に, より多くの用語定義を伴うよう定義した。
◎
editorial: Define API section more normatively and with more dfns
</dd>
	<dd>
編集上：
`§ ~deviceの動き＠#device-motion-model$
内の加速度に関する説明を並替えた。
◎
editorial: Reorder acceleration explanation in Device Motion Model section
</dd>
	<dd>
編集上：
~deviceの回転と動きについて説明と参照を更新した。
◎
editorial: Update explanations of the device rotation and motion references
</dd>
	<dd>
編集上：
より精確な~event取扱い用語を利用して，他を現代化した。
◎
editorial: Use more precise event handling terms, modernize others
</dd>
	<dd>
編集上：
方位~変化~eventに代えて `SCREEN-ORIENTATION$r を参照rするようにした。
◎
editorial: Refer to [SCREEN-ORIENTATION] instead of the orientation change event
</dd>
	<dd>
編集上：
`§ ~security／~privacyの考慮点＠#security-and-privacy$
における要件を書き直した。
◎
editorial: Reword requirements in "Security and privacy considerations"
</dd>
	<dd>
`§ 利用事例と要件＠#use-cases-and-requirements$,
`§ 例＠#examples$
を規範的でないものと~markした。
◎
Mark use cases and requirements and examples sections non-normative
</dd>
	<dd>
`oncompassneedscalibration^et ~eventを除去した。
◎
Remove the oncompassneedscalibration event
</dd>
	<dd>
“利用者-作動化により誘発され”
への参照を
“`一過な作動化を有して$”
を参照rするよう更新した。
◎
Update references to "triggered by user activation", now referred to as "transient activation"
</dd>
	<dd>
~eventの発火-法を~DOMによる語句に倣うようにした。
◎
Align with DOM phrasing on firing events
</dd>
	<dd>
`DeviceMotionEvent$I 用の加速度~propについて注記を追加した。
◎
Add a note about acceleration properties for DeviceMotionEvent
</dd>
	<dd>
座標系が~CSS座標系からどう相違するかについて説明する注記を追加した。
◎
Add a note explaining how the coordinate system differs from the CSS coordinate system
</dd>
	<dd>
`受動的な指紋収集の課題＠https://github.com/w3c/deviceorientation/issues/85$
を軽減するため、［
0.1 deg ／ 0.1 deg/s ／ 0.1 m/s~pow2
］より精確にしないことを要求するようにした。
◎
Require no more precise than 0.1 degrees, 0.1 degrees per second, 0.1 meters per second squared to mitigate a passive fingerprinting issue
</dd>
	<dd>
~IDL内の構築子~定義を~Web~IDLに倣うよう更新した。
◎
Update constructor definition in IDL with the Web IDL
</dd>
	<dd>
各~interfaceに明示的な `Exposed^xA 拡張d属性を追加した。
◎
Add explicit [Exposed] to interfaces
</dd>
	<dd>
辞書~memberの既定~値を~IDL内で設定しておくよう更新した。
◎
Update IDL dictionaries with new dictionary defaulting setup
</dd>
	<dd>
［
`deviceorientationabsolute$et ~event, その `ondeviceorientationabsolute$n ~event~handler~IDL属性
］の実装~経験は限られていることを注記した。
◎
Note the deviceorientationabsolute event and its ondeviceorientationabsolute event handler IDL attribute have limited implementation experience
</dd>
	<dd>
［
`DeviceOrientationEvent$I,
`DeviceMotionEvent$I
］に静的~演算として `requestPermission()^m ~APIを追加した。
◎
Add requestPermission() API static operation to both DeviceOrientationEvent and DeviceMotionEvent
</dd>
	<dd>
［
`ondeviceorientation$n,
`ondevicemotion$n,
`ondeviceorientationabsolute$n
］~event~handlerに `SecureContext^xA 拡張d属性を追加した。
◎
Add [SecureContext] to event handlers ondeviceorientation, ondevicemotion and ondeviceorientationabsolute
</dd>
	<dd>
すべての~interfaceを~secureな文脈に制約した。
◎
Restrict all interfaces to secure contexts
</dd>
	<dd>
［
`DeviceAcceleration^I, `DeviceRotationRate^I
【今や廃された？】
］から `NoInterfaceObject^xA 拡張d属性を除去した。
◎
Remove [NoInterfaceObject] from DeviceAcceleration and DeviceRotationRate
</dd>
	<dd>
`§ ~security／~privacyの考慮点＠#security-and-privacy$
を規範的にした。
◎
Make security and privacy considerations normative
</dd>
	<dd>
注釈文にしか与えていなかった `ondeviceorientationabsolute$n ~event~handler属性を~IDL~blockの中に追加した。
◎
Add the ondeviceorientationabsolute event handler attribute into the IDL block (was only in prose)
</dd>
	<dd>
`DeviceMotionEventInit$I の各~辞書~memberから '`?^c' を除去した。
◎
Remove '?' from dictionary members of DeviceMotionEventInit
</dd>
	<dd>
`Exposed=Window^xA 拡張d属性を利用するようにした。
◎
Use [Exposed=Window] extended attribute
</dd>
</dl>

	</section>
</main></div>
