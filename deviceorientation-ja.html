<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<title>DeviceOrientation Event Specification （日本語訳）</title>

<link rel="stylesheet" href="common.css" type="text/css">
<link rel="stylesheet" href="common-w3c.css" type="text/css">

<style>
img {
	background: white;
}

._matrix tr {
	border: none;
}
._matrix td {
	text-align: center;
	padding: 0.2em 0.5em;
}
._matrix {
	border-collapse: separate;
	border-spacing: 0;
	border: solid thin currentcolor;
	border-style: none solid;
	border-radius: 5px;
}

._math-formula {
	display: flex;
	flex-wrap: wrap;
	align-items: center;
	column-gap: 0.4em;
}

div._math-formula {
	margin-left: 2em;
	
}

</style>

<script src="common0.js"></script>
<script src="common1.js" async></script>

<script>

Util.ready = function(){
	const source_data = {
		persisted_parts: Object.create(null),
		generate: expand
	};

	{
		// 行列表現を生成
		let data = PAGE_DATA.matrix_data
.replace( /\s*●(.+)/g,
	'</tbody></table><table id="_dgm-$1" class="_matrix"><tbody>' )
.replace(/[\s\S]*?<\/table>/, '')
.replace(/\n(?=[^<\s])/g, '<tr><td>')
.replace(/,[ \t]*/g, '<td>')
.replace(/\.(\w+)/g, '<sub>$1</sub>')
.replace(/%([\wα-γθ]+)/g, '<var>$1</var>')
+ '</tbody></table>';

		delete PAGE_DATA.matrix_data;

		const div = C('div');
		div.innerHTML = data;
		for(let e = div.firstElementChild; e; e = e.nextElementSibling){
			if(e.id){
				source_data.persisted_parts[e.id] = e;
			}
		}
	}

	Util.switchWordsInit(source_data);
}

function expand(){
	const class_map = this.class_map;
	const tag_map = this.tag_map;
	const link_map = this.link_map;
	let ctx_ifc = '';

	return this.html.replace(
		/%[\w\-~一-鿆あ-んα-γθ]+|`(.+?)([$@\^])(\w*)/g,
		create_html
	);

	function create_html(match, key, indicator, klass){
if(!indicator) {//%
	return `<var>${match.slice(1)}</var>`;
}

let href = '';
let href1 = '';
{
	const n = key.indexOf('＠');
	if(n > 0) {
		href1 = key.slice(n + 1);
		key = key.slice(0, n);
	}
}
let text = key;

switch(klass){
case 'r': // ref
	text = `[${key}]`;
	href = `#biblio-${key.toLowerCase()}`;
	break;
case 'l': // literal
	text = `"<code class="literal">${text}</code>"`;
	break;
case 'mc':
	text = 'constructor';
	href = `#dom-${key.toLowerCase()}-${key.toLowerCase()}`;
	break;
case 'I': // set context if @
	if( indicator === '@'){
		ctx_ifc = key.toLowerCase();
	}
	break;
case 'I0': // set context
	ctx_ifc = key.toLowerCase();
	return '';
	break;
case 'm':
	const n = text.indexOf('(');
	if(n > 0){
		key = text.slice(0, n);
		text = key + text.slice(n).replace(/\w+/g, '<var>$&</var>');
	}
	href = `#dom-${ctx_ifc}-${key.toLowerCase()}`;
	break;
case 'sl':
	text = `[[${text}]]`;
	break;
case 'dgm':
	return `<a id="_dgm-${key}">＊</a>`;
	break;
case 'en':
	return `<span lang="en">${key}</span>`;
	break;
}

let tag = tag_map[klass];
if(tag) {
	let classname = class_map[klass];
	classname = classname ? ` class="${classname}"` : '';
	text = `<${tag}${classname}>${text}</${tag}>`;
}

if(indicator !== '^'){
	href = href1 || link_map[ klass ? `${klass}.${key}` : key ] || href;
	if(!href){
		console.log(match); // check error
		return match;
	}

	switch(indicator){
	case '$':
		text = `<a href="${href}">${text}</a>`;
		break;
	case '@':
		text = `<dfn id="${href.slice(1)}">${text}</dfn>`;
		break;
	}
}

return text;

	}
}

</script>

<script type="text/plain" id="_source_data">

●●options

spec_title:DeviceOrientation Event Specification
spec_date:2023-11-10
trans_update:2023-11-12
source_checked:231110
spec_status:ED
original_url:https://w3c.github.io/deviceorientation/
ref_id_prefix:biblio-
page_state_key:SENSORS
site_nav:sensors,uievents
ref_id_lowercase:true
copyright:2023,permissive
trans_1st_pub:2019-02-28

●●class_map
et:event-type
op:op
E:error

●●tag_map
E:code
I:code
mc:code
m:code
n:code
et:code
op:span
c:code
cite:cite
i:i

●●original_id_map

●●mdn_urls
devicemotionevent:API/DeviceMotionEvent
devicemotioneventacceleration:API/DeviceMotionEventAcceleration
devicemotioneventrotationrate:API/DeviceMotionEventRotationRate
deviceorientationevent:API/DeviceOrientationEvent
	dictdef-devicemotioneventaccelerationinit:API/DeviceMotionEventAccelerationInit
	dictdef-devicemotioneventinit:API/DeviceMotionEventInit
	dictdef-devicemotioneventrotationrateinit:API/DeviceMotionEventRotationRateInit
	dictdef-deviceorientationeventinit:API/DeviceOrientationEventInit

def-deviceorientation:Events/deviceorientation
def-devicemotion:Events/devicemotion
	def-deviceorientationabsolute:Events/deviceorientationabsolute

●●link_map

	●IDL

Exposed:~WEBIDLjs#Exposed
SecureContext:~WEBIDLjs#SecureContext
boolean:~WEBIDL#idl-boolean
double:~WEBIDL#idl-double
DOMString:~WEBIDL#idl-DOMString
Promise:~WEBIDL#idl-promise

E.NotAllowedError:~WEBIDL#notallowederror
	例外／DOMException:~WEBIDL#idl-DOMException

I.DeviceMotionEvent:#devicemotionevent
I.DeviceMotionEventAcceleration:#devicemotioneventacceleration
I.DeviceMotionEventAccelerationInit:#dictdef-devicemotioneventaccelerationinit
I.DeviceMotionEventInit:#dictdef-devicemotioneventinit
I.DeviceMotionEventRotationRate:#devicemotioneventrotationrate
I.DeviceMotionEventRotationRateInit:#dictdef-devicemotioneventrotationrateinit
I.DeviceOrientationEvent:#deviceorientationevent
I.DeviceOrientationEventInit:#dictdef-deviceorientationeventinit
I.PermissionState:~PERMISSIONS#dom-permissionstate

I.Event:~DOM4#event
I.EventHandler:~WAPI#eventhandler
I.EventInit:~DOM4#dictdef-eventinit
I.Window:~WINDOW#window
I.WindowEventHandlers:~WAPI#windoweventhandlers


	■DeviceOrientationEvent
	m.Constructor:#dom-deviceorientationevent-deviceorientationevent
	%type:#dom-deviceorientationevent-deviceorientationevent-type-eventinitdict-type
	%eventInitDict:#dom-deviceorientationevent-deviceorientationevent-type-eventinitdict-eventinitdict

	m.alpha:#dom-deviceorientationevent-alpha
	m.beta:#dom-deviceorientationevent-beta
	m.gamma:#dom-deviceorientationevent-gamma
	m.absolute:#dom-deviceorientationevent-absolute
	m.requestPermission:#dom-deviceorientationevent-requestpermission

	■DeviceOrientationEventInit
	m.alpha:#dom-deviceorientationeventinit-alpha
	m.beta:#dom-deviceorientationeventinit-beta
	m.gamma:#dom-deviceorientationeventinit-gamma
	m.absolute:#dom-deviceorientationeventinit-absolute
	
	■DeviceMotionEventAcceleration
	m.x:#dom-devicemotioneventacceleration-x
	m.y:#dom-devicemotioneventacceleration-y
	m.z:#dom-devicemotioneventacceleration-z

	■DeviceMotionEventRotationRate
	m.alpha:#dom-devicemotioneventrotationrate-alpha
	m.beta:#dom-devicemotioneventrotationrate-beta
	m.gamma:#dom-devicemotioneventrotationrate-gamma
	m.Constructor:#dom-devicemotionevent-devicemotionevent
	m.type:#dom-devicemotionevent-devicemotionevent-type-eventinitdict-type
	m.eventInitDict:#dom-devicemotionevent-devicemotionevent-type-eventinitdict-eventinitdict

	■DeviceMotionEvent
	m.acceleration:#dom-devicemotionevent-acceleration
	m.accelerationIncludingGravity:#dom-devicemotionevent-accelerationincludinggravity
	m.rotationRate:#dom-devicemotionevent-rotationrate
	m.interval:#dom-devicemotionevent-interval
	m.requestPermission:#dom-devicemotionevent-requestpermission

	■DeviceMotionEventAccelerationInit
	m.x:#dom-devicemotioneventaccelerationinit-x
	m.y:#dom-devicemotioneventaccelerationinit-y
	m.z:#dom-devicemotioneventaccelerationinit-z

	■DeviceMotionEventRotationRateInit
	m.alpha:#dom-devicemotioneventrotationrateinit-alpha
	m.beta:#dom-devicemotioneventrotationrateinit-beta
	m.gamma:#dom-devicemotioneventrotationrateinit-gamma

	■DeviceMotionEventInit
	m.acceleration:#dom-devicemotioneventinit-acceleration
	m.accelerationIncludingGravity:#dom-devicemotioneventinit-accelerationincludinggravity
	m.rotationRate:#dom-devicemotioneventinit-rotationrate
	m.interval:#dom-devicemotioneventinit-interval

~window:~WINDOW#the-window-object
	n.window:~WINDOW#dom-window	→ ~window

n.ondeviceorientation:#dom-window-ondeviceorientation
n.ondeviceorientationabsolute:#dom-window-ondeviceorientationabsolute
n.ondevicemotion:#dom-window-ondevicemotion


et.deviceorientation:#def-deviceorientation
et.deviceorientationabsolute:#def-deviceorientationabsolute
et.devicemotion:#def-devicemotion

	●用語
相対~方位:#relative-orientation
絶対~方位:#absolute-orientation
重力を伴う加速度:#acceleration-with-gravity
線形~加速度:#linear-acceleration
回転~率:#rotation-rate

	地球~frame:#_earth-frame
	本体~frame:#_body-frame

許可:#permission

§~compass-headingの計算-法:#worked-example
	§:#introduction
	§:#use-cases
	§:#deviceorientation

	●外部（sensor
地球の基準~座標系:~ORIENTATION-SENSOR#earths-reference-coordinate-system
~device座標系:~ACCELEROMETER#device-coordinate-system

	●外部
実装定義:~INFRA#implementation-defined

並列的:~HTMLINFRA#in-parallel

doc.可視性~状態:~HTMLinteraction#visibility-state
	可視:~PAGE-VISIBILITY#dom-visibilitystate-visible
	https://www.w3.org/TR/page-visibility-2/#dom-visibilitystate-visible

生成元:~ORIGIN#concept-origin
同一-生成元:~ORIGIN#same-origin

結付けられた文書:~WINDOW#concept-document-window

~navigable:~HTMLds#navigable
nav.~top-level辿可能:~HTMLds#nav-top
~top-level辿可能:~HTMLds#top-level-traversable
nav.作動中な~window:~HTMLds#nav-window
子~navigable:~HTMLds#child-navigable
nav.作動中な文書:~HTMLds#nav-document

	bc.作動中な文書:~HTMLds#active-document
	廃）入子な閲覧~文脈:~BROWSERS#nested-browsing-context
	~top-level閲覧~文脈:~HTMLds#top-level-browsing-context
~sensor融合:~SENSORS#sensor-fusion

~eventを発火する:~DOM4#concept-event-fire

~event~handler~event型:~WAPI#event-handler-event-type
~event~handler~IDL属性:~WAPI#event-handler-idl-attributes
~event~handler:~WAPI#event-handlers
~taskを~queueする:~WAPI#queue-a-task
関連な設定群~obj:~WAPI#relevant-settings-object
enV.生成元:~WAPI#concept-settings-object-origin
enV.~secureな文脈:~WAPI#secure-context
関連な大域~obj:~WAPI#concept-relevant-global

一過な作動化？:~HTMLinteraction#transient-activation
~promiseを却下する:~WEBIDLjs#reject
~promiseを解決する:~WEBIDLjs#resolve

●●words_table1
COMPAT:compat-ja.html
	https://compat.spec.whatwg.org/
MOTION-SENSORS:motion-sensors-ja.html
ORIENTATION-SENSOR:orientation-sensor-ja.html
ACCELEROMETER:accelerometer-ja.html

pow2:<sup>2</sup>
	DIV:<span class="op">/</span>

●●words_table


	●device
device:
battery::::バッテリー
display::::ディスプレイ
compass::::コンパス
compass-heading:compass heading:compass の向き::コンパスの向き
gimbal-lock:gimbal lock:::ジンバルロック
gyroscope::::ジャイロスコープ
laptop-computer:laptop computer:::ノートPC
sensor::::センサー
tablet::::タブレット
	~hostしている:hosting
融合:fusion::~

	握って:hold して
	握って:holding the device in their hand
信号:signal::~
搭載-:mount:~
携帯:mobile::~::モバイル
電話:phone:~
旋回する:swiveling:~
後部:rear:~
対面-:face:~
寿命:life:~
地図:map:~
乗物:vehicle:~

較正-:calibrate::~
較正:calibration::~

	^en:shaking
sprite::::スプライト

	眺める:view
	~~運行:travel
	組み込まれた:integrated
	~~部位:element
	~~展開-:deploy
	引き出し式の:slide-out
	~sensor融合$:fusion sensor

	●物理／幾何
x:
y:
z:
xyz:
X:
Y:
Z:
XYZ:
右手系:right-hand convention::~
左手系:left-hand convention::~
右手:right-hand:~
基準:reference:~
	基準~座標~frame:earth frame
	~device座標~frame:body frame
	~device座標~frame:device frame
	~device座標~frame:device body frame
	座標:Cartesian coordinate
速度:velocity::~
	速度:speed
加速:acceleration::~
加速度:acceleration::~
加速度計:accelerometer::~
磁力計:magnetometer::~
運動:movement::動き
動き:motion::~
傾き:tilting::~
半径:radius::~
右周りに:right-hand bendに::~
回転-:rotate::~
回転:rotation::~
地球:Earth::~
	地球:earth
垂直:perpendicular::~
	直立して:vertical in front
垂直面:vertical plane:~
	垂直面に:in a vertical plane
	垂直面／直立面を成す
縦置き:portrait::~
水平:horizontal::~
	水平~面に寝かされ:lying flat on a horizontal surface
面:surface::~
平面:plane::~
度d:degree:deg:度°
	真上:Up／:uppermost
	真上を向いて:upward

	上端が真上を指すよう:the top uppermost
時計回り:clockwise::~
自由落下:free-fall::~
重力:gravity::~
	重力:gravity force
重心:center of mass::~
率:rate::~
側:side::~
力学:dynamics::~
揃えら:alignさ:~
揃う:alignする:~
	オイラー角:Tait-Bryan angle
meter::::メートル
milli::::ミリ
	~milli秒:millisecond
	秒:second
線形:linear::~
寄与:contribution:~
固有-:proper::~
	~~直交して:orthogonal
	右:right
	向く:towards
	回され:turn
	背面から先 out of the back of
	~~逆回転:in the opposite sense

	●算術
alpha:
beta:
gamma:
radian::::ラジアン
行列:matrix::~
四元数:quaternion::~
	四元数:Quaternion
四平方定理:four-square-theorem::~
座標系変換:transformation::~
数学的:mathematical::~
近似的:approximate::~
	正な値:positive
変形:transform::~

	~pow2:squared
	等し:equal

	●IDL／data／構造

	●処理
	取消~可能:cancelable
換算-:convert::~
換算:conversion::~
	計算-法:calculating
	~RET:abort

	●保安
露呈-:reveal::露わに
持続的:persistent::~

	●仕様
欠点:disadvantage:~
説明書き:explainer:~
伝える:informする:~
給-:supply:~
欠く:lackする:~
尋ねる:askする:~
伝えら:informさ:~
徴す:signifyする:~
参照r:refer:参照
種類:kind:~

	MOTION-SENSORS$r:Motion Sensors Explainer
	有用さに劣る:less useful
	問わない:agnostic
	代替の:alternatively
	低次な:low
	高~level:high-level
	加えて、furthermore
	まったく:can never
	何であれ:irrespective
	足る:sufficiently
	を踏まえて、:In light of 〜
	~~有益に:beneficial impact
	主な:main
	`DOM4$r :DOM4 Events
	〜に利する:on behalf of
	抜き出す:extract illustrate
	示され:shown
	示す:show
	必要-:need
	〜とするなら:provided 〜
	-:we wish to determine the
	-:wishing to
	~~参考:aid
	集まって:gather
	遂げられ:carried out
	選ばれた:choice
	どちらを選んだか:choice
	~~選択:choice
	選んで:choose
	選べる:choose
	どの座標系を選ぶか:whose choice
	その帰結として:consequently

	●未分類
新鮮:fresh:~
game::::ゲーム
	~game用の:gaming
utility::::ユーティリティ
	-:set of intrinsic
生な:rawな::~
現実:reality::~
現実拡張:augmented-reality::~
閾値:threshold::~
	間隔:interval
新鮮:fresh:~
一過:transient::~

	ある:folded to
	上げる:increase
	対応する:corresponding
	成す:form
	指-:point
	含-:include
	始めて:Starting with
	生-:occur
	背後に回され:backgrounded
	~device方位:Device Orientation
	~~円周／:around
	次に分類できる:categorized into following categories
	~PLUS:plus
	~MINUS:equal and opposite to
	-:Finally
	卓上に置かれて:laying flat on a table
	^i:Windows
	^i:Android
	^i:Core Motion
	~~元の:previous
	一連の:a series of
	とは異なる:differs from

●●images
＠deviceorientation/
start｜width:450px; height:450px;｜｜.png
z-rotation｜width:450px; height:450px;｜｜.png
	= c-rotation.png
x-rotation｜width:450px; height:450px;｜｜.png
	= a-rotation.png
y-rotation｜width:450px; height:450px;｜｜.png
	= b-rotation.png

●●matrix_data

●equation1
0
0
−1

●equation2
cos(%α), −sin(%α), 0
sin(%α), cos(%α), 0
0, 0, 1

●equation3
1, 0, 0
0, cos(%β), −sin(%β)
0, sin(%β), cos(%β)

●equation4
cos(%γ), 0, sin(%γ)
0, 1, 0
−sin(%γ), 0, cos(%γ)

●equation13a
cos(%α) cos(%γ) − sin(%α) sin(%β) sin(%γ), −cos(%β) sin(%α), cos(%γ) sin(%α) sin(%β) + cos(%α) sin(%γ)
cos(%γ) sin(%α) + cos(%α) sin(%β) sin(%γ), cos(%α) cos(%β), sin(%α) sin(%γ) − cos(%α) cos(%γ) sin(%β)
−cos(%β) sin(%γ), sin(%β), cos(%β) cos(%γ)

●equation5e
−cos(%α)sin(%γ) − sin(%α)sin(%β)cos(%γ)
−sin(%α)sin(%γ) + cos(%α)sin(%β)cos(%γ)
−cos(%β)cos(%γ)


●●ref_normative

[ACCELEROMETER]
    Anssi Kostiainen. ＜Accelerometer＞. URL: https://w3c.github.io/accelerometer/
[DOM]
    Anne van Kesteren. ＜DOM Standard＞. Living Standard. URL: https://dom.spec.whatwg.org/
[HTML]
    Anne van Kesteren; et al. ＜HTML Standard＞. Living Standard. URL: https://html.spec.whatwg.org/multipage/
[INFRA]
    Anne van Kesteren; Domenic Denicola. ＜Infra Standard＞. Living Standard. URL: https://infra.spec.whatwg.org/
[ORIENTATION-SENSOR]
    Kenneth Christiansen; Anssi Kostiainen. ＜Orientation Sensor＞. URL: https://w3c.github.io/orientation-sensor/
[PERMISSIONS]
    Marcos Caceres; Mike Taylor. ＜Permissions＞. URL: https://w3c.github.io/permissions/
[RFC2119]
    S. Bradner. ＜Key words for use in RFCs to Indicate Requirement Levels＞. March 1997. Best Current Practice. URL: https://datatracker.ietf.org/doc/html/rfc2119
[WEBIDL]
    Edgar Chen; Timothy Gu. ＜Web IDL Standard＞. Living Standard. URL: https://webidl.spec.whatwg.org/

●●ref_informative

[CSS-TRANSFORMS-2]
    Tab Atkins Jr.; et al. ＜CSS Transforms Module Level 2＞. URL: https://drafts.csswg.org/css-transforms-2/
[EULERANGLES]
    ＜Euler Angles＞. URL: https://en.wikipedia.org/wiki/Euler_angles
[FINGERPRINT]
    ＜Mobile Device Identification via Sensor Fingerprinting＞. 6 Aug 2014. URL: https://arxiv.org/abs/1408.1416
[G-FORCE]
    ＜G-Force＞. URL: https://en.wikipedia.org/wiki/G-force
[GEOMETRY-1]
    Simon Pieters; Chris Harrelson. ＜Geometry Interfaces Module Level 1＞. URL: https://drafts.fxtf.org/geometry/
[GIMBALLOCK]
    ＜Gimbal Lock＞. URL: https://en.wikipedia.org/wiki/Gimbal_Lock
[GYROSCOPE]
    Anssi Kostiainen. ＜Gyroscope＞. URL: https://w3c.github.io/gyroscope/
[INDOORPOS]
    Shala, Ubejd; Angel Rodriguez. ＜Indoor positioning using sensor-fusion in android devices＞. 2011. URL: http://www.diva-portal.org/smash/record.jsf?pid=diva2%3A475619&amp;dswid=9050
[MOTION-SENSORS]
    Kenneth Christiansen; Alexander Shalamov. ＜Motion Sensors Explainer＞. URL: https://w3c.github.io/motion-sensors/
[PROPERACCELERATION]
    ＜Proper acceleration＞. URL: https://en.wikipedia.org/wiki/Proper_acceleration
[QUATERNIONS]
    ＜Quaternions＞. URL: https://en.wikipedia.org/wiki/Quaternion
[SCREEN-ORIENTATION]
    Marcos Caceres. ＜Screen Orientation＞. URL: https://w3c.github.io/screen-orientation/
[SENSORID]
    Zhang, Jiexin; Beresford, Alastair R.; Sheret, Ian. ＜SensorID: Sensor Calibration Fingerprinting for Smartphones＞. 2019. URL: https://doi.org/10.1109/SP.2019.00072
[TOUCH]
    ＜TouchSignatures: Identification of User Touch Actions and PINs Based on Mobile Sensor Data via JavaScript＞. 12 Feb 2016. URL: https://arxiv.org/abs/1602.04115


●●trans_metadata
<p>
~THIS_PAGEは、~W3Cにより
編集者草案として公開された
<a href="~SPEC_URL">DeviceOrientation Event Specification</a>
を日本語に翻訳したものです。
~PUB
</p>

●●spec_metadata

最新公表バージョン
	https://www.w3.org/TR/orientation-event/
公表履歴
	https://www.w3.org/standards/history/orientation-event/
フィードバック
	<a href="public-device-apis@w3.org">public-device-apis@w3.org</a> with subject line “[orientation-event] … message topic …” (<a href="https://lists.w3.org/Archives/Public/public-device-apis/">archives</a>)
	https://github.com/w3c/deviceorientation/issues
編集
	Reilly Grant (Google LLC)
	Raphael Kubo da Costa (Intel Corporation)
前任編集者
	Rich Tibbett (Opera Software ASA)
	Tim Volodine (Google Inc)
	Steve Block (Google Inc until July 2012)
	Andrei Popescu (Google Inc until July 2012)
更新履歴
	https://github.com/w3c/deviceorientation/commits/main/index.bs

</script>


</head>
<body>

<header>
	<hgroup>
<h1>DeviceOrientation Event</h1>
	</hgroup>
</header>

<div id="MAIN" hidden>
	<section id="abstract">
◎要約

<p>
この仕様は、［
【~UAを】~hostしている~deviceの物理的な方位や動き
］についての情報を供するための，新たな~DOM~eventたちを定義する。
◎
This specification defines several new DOM events that provide information about the physical orientation and motion of a hosting device.
</p>

	</section>
	<section id="sotd">
◎位置付け

<p>
これは、編集者草案の公な複製です…
【以下、この内容は，~SOTD-W3Cに移譲。】
</p>

	</section>

<main id="MAIN0">

	<section id="_conventions">
<h2>【この訳に特有な表記規約】</h2>

◎表記記号

	</section>
	<section id="conformance-requirements">
<h2 title="Conformance requirements">1. 適合性の要件</h2>

【この節の他の内容は、`~W3C日本語訳 共通~page＠~W3Ccommon#conformance$に移譲。】

<p>
この仕様が導入する各種~eventは、
`DOM$r に定義される `Event$I ~interfaceを実装する。
したがって，実装は、
その仕様も~supportするモノトスル。
◎
The events introduced by this specification implement the Event interface defined in the DOM Specification, [DOM]. Implementations must therefore support this specification.
</p>

	</section>
	<section id="introduction">
<h2 title="Introduction">2. 序論</h2>

◎非規範的

<p>
この仕様は、
~hostしている~deviceの物理的な方位や運動についての情報を得するため，
以下に挙げる新たな~DOM~eventたち【！two】を供する。
~eventにより供される情報は、
生な~sensor~dataではなく，高~levelな~dataであり、
下層の情報~sourceを問わない。
共通的な情報の~sourceには、［
~gyroscope, ~compass, 加速度計
］も含まれる。
◎
This specification provides two new DOM events for obtaining information about the physical orientation and movement of the hosting device. The information provided by the events is not raw sensor data, but rather high-level data which is agnostic to the underlying source of information. Common sources of information include gyroscopes, compasses and accelerometers.
</p>

<dl>
	<dt>`deviceorientation$et</dt>
	<dd>
~deviceの物理的な方位を給する
— ~deviceに局所的な座標~frameからの一連の回転として表出される。
◎
The first DOM event provided by the specification, deviceorientation, supplies the physical orientation of the device, expressed as a series of rotations from a local coordinate frame.
</dd>

	<dt>`deviceorientationabsolute$et</dt>
	<dd class="trans-note">【
`相対~方位$に代えて`絶対~方位$が利用されることを除き，
`deviceorientation$et と同様
（この項は、
この訳による補完）。
】</dd>

	<dt>`devicemotion$et</dt>
	<dd>
~deviceの加速度を給する
— 当の~deviceにて定義される座標~frameにおける座標で表出される。
それはまた、
~deviceに局所的な座標~frameについての回転~率も給する。
実用的にアリな所では、
~deviceの重心の加速度も~eventに供されるベキである。
◎
The second DOM event provided by this specification, devicemotion, supplies the acceleration of the device, expressed in Cartesian coordinates in a coordinate frame defined in the device. It also supplies the rotation rate of the device about a local coordinate frame. Where practically possible, the event should provide the acceleration of the device’s center of mass.
</dd>
</dl>

<p class="trans-note">【
“座標~frame（ `coordinate frame^en, 略して `frame^en ）” とは、
抽象-概念としては座標系（ `coordinate system^en ）と同義であるが，
物理的な何かに直に結付けられていることを含意する
（その何かが物体なら、
回転など，物体の動きに~~追従することになる）。
】</p>

<p>
以下の~codeに、
これらの~eventの基本的な利用を抜き出す。
◎
The following code extracts illustrate basic use of the events.
</p>

<div class="example">
<p>
`deviceorientation$et ~eventを受取るよう登録する例：
◎
Registering to receive deviceorientation events:
</p>

<pre class="lang-js">
window.addEventListener("deviceorientation", function(%event) {
    /* <span class="comment">
%event の `alpha^m, `beta^m, `gamma^m ~memberを処理する
◎
process event.alpha, event.beta and event.gamma
</span> */
}, true);
</pre>
</div>

<div class="example">
<p>
当の~deviceは水平~面に寝かされていて，その~screenの上端は西を指しているときの方位は：
◎
A device lying flat on a horizontal surface with the top of the screen pointing West has the following orientation:
</p>

<pre class="lang-js">
{
  alpha: 90,
  beta: 0,
  gamma: 0
};
</pre>

<p>
~compass-heading（ `compass heading^en ）†を取得するには、
単純に 360 度dから `alpha^m を減算する。
~deviceが水平~面~上で回されるに伴い，~compass-headingは［
360 − `alpha^m
］になる。
【†この文脈においては、北極方向から時計回りに，~screenの上端が指す向きまでの角度。】
◎
To get the compass heading, one would simply subtract alpha from 360 degrees. As the device is turned on the horizontal surface, the compass heading is (360 - alpha).
</p>
</div>

<div class="example">
<p>
利用者が握っている~deviceの~screenが垂直面を成していて, 上端は真上を指しているとき、
`beta^m の値は， `alpha^m, `gamma^m が何であれ 90 になる。
◎
A user is holding the device in their hand, with the screen in a vertical plane and the top of the screen pointing upwards. The value of beta is 90, irrespective of what alpha and gamma are.
</p>
</div>

<div class="example">
<p>
利用者が対面するように握っている~deviceは［
~compass-heading†は %N 度dにあり，その~screenは垂直面を成していて, 上端は右を指している
］とき、
~deviceの方位は：
◎
A user facing a compass heading of alpha degrees is holding the device in their hand, with the screen in a vertical plane and the top of the screen pointing to their right. The orientation of the device is:
</p>

<pre class="lang-js">
{
  alpha: 270 - %N,
  beta: 0,
  gamma: 90
};
</pre>

<p class="trans-note">【†
この文脈の “~compass-heading” は、
上の例と整合していない。
おそらく、
`§~compass-headingの計算-法$にて定義されるそれを意味する（~screenに直交し，奥方を指す~vectorの水平~成分）。
】</p>
</div>

<div class="example">
<p>
`devicemotion$et ~eventを受取るよう登録する例：
◎
Registering to receive devicemotion events:
</p>

<pre class="lang-js">
window.addEventListener("devicemotion", function(%event) {
    /* <span class="comment">
%event の［
`acceleration^m,
`accelerationIncludingGravity^m,
`rotationRate^m,
`interval^m
］を処理する。
◎
Process event.acceleration, event.accelerationIncludingGravity,
event.rotationRate and event.interval
</span> */
}, true);
   
</pre>
</div>

<div class="example">
<p>
当の~deviceは，水平~面に寝かされていて その~screenは真上を向いている下では、
`acceleration^m は 0 になり，
`accelerationIncludingGravity^m は次の値になる：
◎
A device lying flat on a horizontal surface with the screen upmost has an acceleration of zero and the following value for accelerationIncludingGravity:
</p>

<pre class="lang-js">
{
  x: 0,
  y: 0,
  z: 9.8
};
</pre>
</div>

<div class="example">
<p>
~deviceは、
自由落下していて，その~screenは水平かつ真上を向いている下では：
`accelerationIncludingGravity^m は 0 になり，
`acceleration^m は次の値になる：
◎
A device in free-fall, with the screen horizontal and upmost, has an accelerationIncludingGravity of zero and the following value for acceleration:
</p>

<pre class="lang-js">
{
  x: 0,
  y: 0,
  z: -9.8
};
</pre>
</div>

<div class="example">
<p>
~deviceは［
半径 %r の~~円周を，右周りに速度 %v で~~運行している乗物
］に搭載されていて、
その~screenは［
垂直面を成していて,
上端は真上を指していて,
乗物の後部に対面している
］とする。
~deviceは［
`acceleration^m, `accelerationIncludingGravity^m
］どちらに対しても，正な~x成分［
%x ~EQ %v ~pow2 ~DIV %r
］を記録し、
`rotationRate.gamma^m に負な値［
%γ ~EQ − ( %v ~DIV %r ) ~MUL ( 180 ~DIV π )
］を記録する：
◎
A device is mounted in a vehicle, with the screen in a vertical plane, the top uppermost and facing the rear of the vehicle. The vehicle is travelling at speed v around a right-hand bend of radius r. The device records a positive x component for both acceleration and accelerationIncludingGravity. The device also records a negative value for rotationRate.gamma:
</p>

<pre class="lang-js">
{
  acceleration: {x: %x, y: 0, z: 0},
  accelerationIncludingGravity: {x: %x, y: 9.8, z: 0},
  rotationRate: {alpha: 0, beta: 0, gamma: %γ}
};
</pre>

【！ v^2/r 】
</div>

	</section>
	<section id="scope">
<h2 title="Scope">3. 視野</h2>

◎非規範的

<p>
この仕様は、［
~hostしている~deviceの物理的な方位や動きを述べる情報
］を検索取得するための~DOM~eventを供することに制限される。
この~APIに意図される目的は、
`§ 利用事例＠#use-cases$
に示されるような単純な利用事例を可能化することである。
次に挙げるものは、
この仕様の視野から外れる
⇒＃
この~dataの操作-用に~utilityを供すること（座標系変換~libraryなど）／
低次な~sensor~dataに~accessすること／
その種の~sensorを直に制御すること
◎
This specification is limited to providing DOM events for retrieving information describing the physical orientation and motion of the hosting device. The intended purpose of this API is to enable simple use cases such as those in Use-Cases section. The scope of this specification does not include providing utilities to manipulate this data, such as transformation libraries. Nor does it include providing access to low sensor data, or direct control of these sensors.
</p>

	</section>
	<section id="model">
<h2 title="Model">4. ~model</h2>

		<section id="device-orientation-model">
<h3 title="Device Orientation">4.1. ~device方位</h3>

<p>
この仕様は、
~deviceの物理的な方位を`実装定義$な基準~座標~frameに相対的な一連の回転として表出する。
◎
This specification expresses a device’s physical orientation as a series of rotations relative to an implementation-defined reference coordinate frame.
</p>

<p>
回転たちが成す連列は、
【！a set of intrinsic】 Z-X'-Y'' 型のオイラー角（ `Tait-Bryan^en 角度）
`EULERANGLES$r
を与える。
それは、
`ACCELEROMETER$r にて定義される`~device座標系$に対し適用され，
以下に要約される：
◎
The sequence of rotation steps is a set of intrinsic Tait-Bryan angles of type Z - X' - Y'' ([EULERANGLES]) that are applied on the device coordinate system defined in [ACCELEROMETER] and summarized below:
</p>
		<ul>
			<li>
~xは［
~screen／~keyboard
］の平面~内にあり，正な値は［
~screen／~keyboard
］の右手~側を向く。
◎
x is in the plane of the screen or keyboard and is positive towards the right hand side of the screen or keyboard.
</li>
			<li>
~yは［
~screen／~keyboard
］の平面~内にあり，正な値は［
~screen／~keyboard
］の上端を向く。
◎
y is in the plane of the screen or keyboard and is positive towards the top of the screen or keyboard.
</li>
			<li>
~zは［
~screen／~keyboard
］の平面に垂直であり，正な値は［
~screen／~keyboard
］から外へ【利用者~側へ】を向く。
◎
z is perpendicular to the screen or keyboard, positive out of the screen or keyboard.
</li>
		</ul>

<p>
電話や~tabletなどの携帯~device用には、
~device座標~frameは，標準な方位にある~screen
— 概して縦置き —
に相対的に定義される。
これは、［
引き出し式~keyboardなどの~~部位を~~展開していない ／
~displayなどの旋回する~~部位は その既定の位置にある
］ことを意味する。
そのような~~部位が回転されたり~~展開されて，~screenの方位が変化しても、
~deviceに相対的な座標~frameの方位には影響しない。
~laptop-computerにおいては、
~device座標~frameは，組み込まれた~keyboardに相対的に定義される。
【要約すれば、~deviceの~~可動部ではない，本体の方位に基づく。】
◎
For a mobile device such as a phone or tablet, the device coordinate frame is defined relative to the screen in its standard orientation, typically portrait. This means that slide-out elements such as keyboards are not deployed, and swiveling elements such as displays are folded to their default position. If the orientation of the screen changes when the device is rotated or a slide-out keyboard is deployed, this does not affect the orientation of the coordinate frame relative to the device. For a laptop computer, the device coordinate frame is defined relative to the integrated keyboard.
</p>

<p class="note">注記：
~screen方位における変化を検出するよう望んでいる利用者【~API利用者】は、
`SCREEN-ORIENTATION$r を参照rするべきである。
◎
Note: Users wishing to detect changes in screen orientation should refer to [SCREEN-ORIENTATION].
</p>

<p>
回転は，右手系を利用するモノトスル
— 軸~周りの正な回転は、
軸の正な方向に向かって眺めたとき，時計回りになるよう。
◎
Rotations must use the right-hand convention, such that positive rotation around an axis is clockwise when viewed along the positive direction of the axis.
</p>

<p class="note">注記：
この仕様が利用する座標系は、
`CSS-TRANSFORMS-2$r
`§ 変形の描画~model＠~TRANSFORM2#transform-rendering$
とは異なる
— そこでは、
~y軸の正な向きは下端を指し，回転は左手系に従う。
加えて，
`GEOMETRY-1$r に指定される［
`rotateSelf()＠~GEOMETRY#dom-dommatrix-rotateself$c ／
`rotate()＠~GEOMETRY#dom-dommatrixreadonly-rotate$c
］は、
回転を Z-Y'-X'' 順序で適用する
— それは、
ここで指定される順序とは異なる。
◎
Note: the coordinate system used by this specification differs from CSS Transforms 2 § 4 The Transform Rendering Model, where the y axis is positive to the bottom and rotations follow the left-hand convention. Additionally, rotateSelf() and rotate(), specified in [GEOMETRY-1], apply rotations in an Z - Y' - X'' order, which differs from the order specified here.
</p>

<p>
`DeviceOrientationEvent^I0 ［
`alpha$m,
`beta$m,
`gamma$m
］により表現される回転は、
次の手続きにより遂げられる：
◎
A rotation represented by alpha, beta and gamma is carried out by the following steps:
</p>
<ol>
	<li>
<p>
初期~位置：
◎
↓ Rotate the device frame around its z axis by alpha degrees, with alpha in [0, 360).
</p>

<figure>
<p class="alt" hidden id="_dgm-start">
開始-時の方位
◎
start orientation
</p>
<figcaption>
初期~位置にある~deviceにおいては、
基準~座標~frame【！基準~frame】（~XYZ）と~device座標~frame【！body frame】（~xyz）は揃えられている。
◎
Device in the initial position, with the reference (XYZ) and body (xyz) frames aligned.
</figcaption></figure>

	</li>
	<li>
<p>
~device座標~frame【！device frame】をその~z軸~周りで `alpha$m 度d
— 0 以上, 360 未満 —
だけ回転する。
◎
↑</p>

<figure>
<p class="alt" hidden id="_dgm-z-rotation">
~z軸~周りの回転
◎
rotation about z axis
</p>

<figcaption>
~deviceを~z軸~周りで角度~alphaだけ回転する
— 添字 “<sub>o</sub>” が付与された［
~x ／ ~y
］は、
~~元の［
~x ／ ~y
］軸の所在を表す
— 以下の図も同様。
◎
Device rotated through angle alpha about z axis, with previous locations of x and y axes shown as x0 and y0.
</figcaption></figure>

	</li>
	<li>
<p>
~device座標~frame【！device frame】を その~x軸~周りで `beta$m 度d
— ~MINUS 180 以上, 180 未満 —
だけ回転する。
◎
Rotate the device frame around its x axis by beta degrees, with beta in [-180, 180).
</p>

<figure>
<p class="alt" hidden id="_dgm-x-rotation">
~x軸~周りの回転
◎
rotation about x axis
</p>

<figcaption>
回転された~deviceの新たな~x軸~周りで角度~betaだけ回転する。
◎
Device rotated through angle beta about new x axis, with previous locations of y and z axes shown as y0 and z0.
</figcaption></figure>
	</li>
	<li>
<p>
~device座標~frame【！device frame】を その~y軸~周りで `gamma$m 度d
— ~MINUS 90 以上, 90 未満 —
だけ回転する。
◎
Rotate the device frame around its y axis by gamma degrees, with gamma in [-90, 90).
</p>

<figure>
<p class="alt" hidden id="_dgm-y-rotation">
~y軸~周りの回転
◎
rotation about y axis
</p>

<figcaption>
回転された~deviceの新たな~y軸~周りで角度~gammaだけ回転する。
◎
Device rotated through angle gamma about new y axis, with previous locations of x and z axes shown as x0 and z0.
</figcaption></figure>
	</li>
</ol>

<p class="note">注記：
これらの角度は，数学的な規約に従って選ばれたが、
`alpha$m は~compass-heading【~screenの上端が指す方角】とは~~逆回転を表すことに加え，
乗物~力学に利用される `roll-pitch-yaw^en 規約には合致しない。
◎
Note: This choice of angles follows mathematical convention, but means that alpha is in the opposite sense to a compass heading. It also means that the angles do not match the roll-pitch-yaw convention used in vehicle dynamics.
</p>

			<section id="choice-of-reference-coordinate-system">
<h4 title="Choice of reference coordinate system">4.1.1. 基準~座標系の~~選択</h4>

<p>
~deviceの方位は、
常に，別の座標系
— 基準~座標系 —
に相対的になる。
どの座標系を選ぶかは、［
当の方位が伝達する情報の種類,
方位~dataの~source
］どちらにも波及する。
◎
A device’s orientation is always relative to another coordinate system, whose choice influences the kind of information that the orientation conveys as well as the source of the orientation data.
</p>

<p>
`相対~方位@
は、［
加速度計, ~gyroscope
］で測定され，
基準~座標系は恣意的に~~選ばれる。
その帰結として、
方位~dataは，当の~deviceの初期~位置に相対的な変化についての情報を供する。
◎
Relative orientation is measured with an accelerometer and a gyroscope, and the reference coordinate system is arbitrary. Consequently, the orientation data provides information about changes relative to the initial position of the device.
</p>

<p class="note">注記：
これは、
~native~platformの用語においては，次に類似する
⇒＃
`Windows^i 上では相対 `OrientationSensor＠https://learn.microsoft.com/en-us/uwp/api/windows.devices.sensors.sensorreadingtype#remarks$c ／
`Android^i 上では `~game回転~vector~sensor＠https://developer.android.com/reference/android/hardware/Sensor#TYPE_GAME_ROTATION_VECTOR$ ／
`Core Motion^i 用には `xArbitraryZVertical＠https://developer.apple.com/documentation/coremotion/cmattitudereferenceframe/1615953-xarbitraryzvertical$c ~option
◎
Note: In native platform terms, this is similar to a relative OrientationSensor on Windows, a game rotation vector sensor on Android, or the xArbitraryZVertical option for Core Motion.
</p>

<p>
`絶対~方位@
は、［
加速度計, ~gyroscope, 磁力計
］で測定され，
基準~座標系は`地球の基準~座標系$である。
◎
Absolute orientation is measured with an accelerometer, a gyroscope and a magnetometer, and the reference coordinate system is the Earth’s reference coordinate system.
</p>

<p class="note">注記：
これは、
~native~platformの用語においては，次に類似する
⇒＃
`Windows^i 上では，絶対 `OrientationSensor＠https://learn.microsoft.com/en-us/uwp/api/windows.devices.sensors.sensorreadingtype#remarks$c ／
`Android^i 上では `回転~vector~sensor＠https://developer.android.com/reference/android/hardware/Sensor#TYPE_ROTATION_VECTOR$ ／
`Core Motion^i 用には `xMagneticNorthZVertical＠https://developer.apple.com/documentation/coremotion/cmattitudereferenceframe/1616123-xmagneticnorthzvertical$c ~option
◎
Note: In native platform terms, this is similar to an absolute OrientationSensor on Windows, a rotation vector sensor on Android, or the xMagneticNorthZVertical option for Core Motion.
</p>

			</section>
		</section>
		<section id="device-motion-model">
<h3 title="Device Motion">4.2. ~deviceの動き</h3>

<p>
この仕様は、
空間における~deviceの動きを その［
加速~率と回転~率
］を測定することにより表出する
— それらは［
加速度計と~gyroscope
］から得される。
その~dataは、
前~節にて要約した`~device座標系$に相対的に供される。
◎
This specification expresses a device’s motion in space by measuring its acceleration and rotation rate, which are obtained from an accelerometer and a gyroscope. The data is provided relative to the device coordinate system summarized in the previous section.
</p>

<p>
加速度は、
~deviceの速度における時間に関する変化~率であり，
m/s~pow2（~meter / 秒の 2 乗）で表出される。
◎
Acceleration is the rate of change of velocity of a device with respect to time. Is is expressed in meters per second squared (m/s2).＼
</p>
<ul>
	<li>
`重力を伴う加速度@
（ `acceleration with gravity^en ）は、
重力の効果を含む加速度であり，
その値は固有-加速度 `PROPERACCELERATION$r を表現する。
それは、
~deviceが自由落下しているとき，
0 m/s~pow2 になる。
◎
When the acceleration includes gravity, its value includes the effect of gravity and represents proper acceleration ([PROPERACCELERATION]). When the device is in free-fall, the acceleration is 0 m/s2.
</li>
	<li>
他方，
`線形~加速度@
（ `linear acceleration^en ）は、
重力【！gravity force】による寄与が無い~deviceの加速~率を表現する。
それは、
当の~deviceが卓上に置かれているとき，
0 m/s~pow2 になる。
◎
Linear acceleration, on the other hand, represents the device’s acceleration rate without the contribution of the gravity force. When the device is laying flat on a table, its linear acceleration is 0 m/s2.
</li>
</ul>

<p class="note">注記：
実施においては、
`重力を伴う加速度$は，
`加速度計＠~MOTION-SENSORS#accelerometer$ `MOTION-SENSORS$r
から得された生な読取り
— または `G-FORCE$r 【 “G がかかる” の “G” （加速度）】 —
を表現する一方で、
`線形~加速度$は，
`線形~加速度~sensor＠~MOTION-SENSORS#linear-acceleration-sensor$ `MOTION-SENSORS$r
からの読取りを供する。
後者は、
`~sensor融合$になる見込みが高い。
測定し得る各種［
加速度計, 加速度
］についての より詳細な論は、
`MOTION-SENSORS$r, `ACCELEROMETER$r を見よ。
◎
Note: In practice, acceleration with gravity represents the raw readings obtained from an Motion Sensors Explainer § accelerometer, or the [G-FORCE] whereas linear acceleration provides the readings of a Motion Sensors Explainer § linear-acceleration-sensor and is likely a fusion sensor. [MOTION-SENSORS] and [ACCELEROMETER] both contain a more detailed discussion about the different types of accelerometers and accelerations that can be measured.
</p>

<p>
`回転~率@
は、［
`~device座標系$における指定された軸
］周りで~deviceが回転する率を測定する。
~device方位と同じく，
回転は，右手系を利用するモノトスル
— 軸~周りの正な回転は、
軸の正な方向に向かって眺めたとき，時計回りになるよう。
`回転~率$は、
deg/s （度d数 / 秒）で測定される。
◎
The rotation rate measures the rate at which the device rotates about a specified axis in the device coordinate system. As with device orientation, rotations must use the right-hand convention, such that positive rotation around an axis is clockwise when viewed along the positive direction of the axis. The rotation rate is measured in degrees per second (deg/s).
</p>

<p class="note">注記：
［
~gyroscope, 回転~率, 測定
］についての より詳細な論は、
`MOTION-SENSORS$r, `GYROSCOPE$r
を見よ。
◎
Note: [MOTION-SENSORS] and [GYROSCOPE] both contain a more detailed discussion of gyroscopes, rotation rates and measurements.
</p>

		</section>
	</section>
	<section id="description">
<h2 title="Description">5. 記述</h2>

		<section id="deviceorientation">
<h3 title="deviceorientation Event">5.1. `deviceorientation^et ~event</h3>

<p>
`ondeviceorientation$n 属性は、
名前 `ondeviceorientation^l を伴う`~event~handler$用の`~event~handler~IDL属性$である
— 対応する`~event~handler~event型$は、
`deviceorientation@et
である。
◎
The ondeviceorientation attribute is an event handler IDL attribute for the ondeviceorientation event handler, whose event handler event type is deviceorientation.
</p>

<pre class="idl">
partial interface `Window$I {
  [`SecureContext$] attribute `EventHandler$I `ondeviceorientation@n;
};

[`Exposed$=Window, `SecureContext$]
interface `DeviceOrientationEvent@I : `Event$I {
  `DeviceOrientationEvent@mc(DOMString %type, optional `DeviceOrientationEventInit$I %eventInitDict = {});
  readonly attribute double? `alpha$m;
  readonly attribute double? `beta$m;
  readonly attribute double? `gamma$m;
  readonly attribute boolean `absolute$m;

  static `Promise$&lt;`PermissionState$I&gt; `requestPermission$m();
};

dictionary `DeviceOrientationEventInit@I : `EventInit$I {
  double? `alpha@m = null;
  double? `beta@m = null;
  double? `gamma@m = null;
  boolean `absolute@m = false;
};
</pre>

<p class="trans-note">【
`ondeviceorientation$n は `Window$I ~interfaceに定義されているが、
なぜ， `Window^I 用の他の多くの`~event~handler~IDL属性$と同様に `WindowEventHandlers$I ~interface~mixinにて定義されないのかは不明。
以下の各節に定義される~event~handler~IDL属性も同様。
】</p>

`DeviceOrientationEvent^I0

<div class="algo">
`alpha@m
取得子~手続きは、
初期化-時の値を返す。
コレの作成-時には、
この属性は ~NULL に初期化するモノトスル。
◎
The alpha attribute must return the value it was initialized to. When the object is created, this attribute must be initialized to null.
</div>

<div class="algo">
`beta@m
取得子~手続きは、
初期化-時の値を返す。
コレの作成-時には、
この属性は ~NULL に初期化するモノトスル。
◎
The beta attribute must return the value it was initialized to. When the object is created, this attribute must be initialized to null.
</div>

<div class="algo">
`gamma@m
取得子~手続きは、
初期化-時の値を返す。
コレの作成-時には、
この属性は ~NULL に初期化するモノトスル。
◎
The gamma attribute must return the value it was initialized to. When the object is created, this attribute must be initialized to null.
</div>

<div class="algo">
`absolute@m
取得子~手続きは、
初期化-時の値を返す。
コレの作成-時には、
この属性は ~F に初期化するモノトスル。
◎
The absolute attribute must return the value it was initialized to. When the object is created, this attribute must be initialized to false.
</div>

<div class="algo">
<p>
`requestPermission()@m
静的~method手続きは：
◎
The static requestPermission() operation, when invoked, must run these steps:
</p>
<ol>
	<li>
%~promise ~LET 新たな~promise
◎
Let promise be a new promise.
</li>
	<li>
~RET %~promise
— ただし、
以降も`並列的$に走らす
◎
Run these steps in parallel:
</li>
	<li>
%生成元 ~LET コレに`関連な設定群~obj$の`生成元$enV
◎
↓</li>
	<li>
%許可 ~LET %生成元 用の`許可$
◎
Let permission be permission for relevant settings object’s origin.
</li>
	<li>
<p>
~IF［
%許可 ~EQ `default^l
］：
◎
↓</p>
		<ol>
			<li>
~IF［
コレに`関連な大域~obj$の`一過な作動化？$ ~EQ ~F
］
⇒＃
`~promiseを却下する$( %~promise, `NotAllowedError$E 例外 )；
~RET
◎
If permission is "default" and the relevant global object does not have transient activation, then reject promise with a NotAllowedError DOMException and abort these steps.
</li>
			<li>
［
%生成元 用に~deviceの方位を共有することは、
受容-可能かどうか
］を利用者に尋ねる
⇒
%許可 ~SET 利用者からの可否に応じて
⇒
可ならば `granted^l ／
否ならば `denied^l
◎
If permission is "default", ask the user whether sharing device orientation for the relevant settings object’s origin is acceptable. If it is, set permission to "granted", and "denied" otherwise.
</li>
		</ol>
	</li>
	<li>
<p>
次を走らす`~taskを~queueする$：
◎
Queue a task to run these steps:
</p>
		<ol>
			<li>
%生成元 用の`許可$ ~SET %許可
◎
Set permission for the relevant settings object’s origin to permission.
</li>
			<li>
`~promiseを解決する$( %~promise, %許可 )
◎
Fulfill promise with permission.
◎
↑↑Return promise.
</li>
		</ol>
	</li>
</ol>
</div>

<p>
~UAは、
方位における有意な変化が生じる度に，次を走らすモノトスル
⇒
`~eventを発火する$( 当の`~window$, `deviceorientation$et, `DeviceOrientationEvent$I )
◎
Whenever a significant change in orientation occurs, the User Agent must fire an event named deviceorientation using DeviceOrientationEvent on the window object.＼
</p>

<p>
この文脈における有意な変化の定義は、
実装に委ねられる
— 最大な閾値として，変化 1 度dが推奨されるが。
実装は~pageの~dataが新鮮でないと予見するに足る事由があるならば、
この~eventを発火してもヨイ。
◎
The definition of a significant change in this context is left to the implementation, though a maximum threshold for change of one degree is recommended. Implementations may also fire the event if they have reason to believe that the page does not have sufficiently fresh data.
</p>

<div class="p">
<p>
この~eventの［
`alpha$m, `beta$m, `gamma$m
］属性は、
次に従うモノトスル：
</p>
<ul>
	<li>
~deviceの`相対~方位$を`実装定義$な基準~座標~frameからの座標系変換により指定する。
</li>
	<li>
値を度d数で表出する。
</li>
	<li>
0.1 度dより精確にしない。
</li>
</ul>
◎
The alpha, beta and gamma attributes of the event＼
must specify the relative orientation of the device in terms of the transformation from an implementation-defined reference coordinate frame.
◎
The alpha, beta and gamma attributes must be expressed in degrees＼
and must not be more precise than 0.1 degrees.
</div>

<p>
実装は、［
`相対~方位$による~dataを得せない場合／
結果の~dataがより正確aになる場合
］には，代わりに`絶対~方位$による~dataを供することを選べる。
いずれの事例でも、
`absolute$m 属性【！~prop】は，
どちらを選んだかを反映するよう設定するモノトスル。
◎
If relative orientation data cannot be obtained or the resulting data is more accurate, the implementation can choose to provide absolute orientation data instead. In either case, the absolute property must be set accordingly to reflect the choice.
</p>

<p>
実装は、
3 個の角度うちいずれかを供せない場合は，
未知な角度~値を ~NULL に設定するモノトスル。
どれか一つでも角度を供する場合、
`absolute$m 属性【！~prop】を適切に設定するモノトスル。
実装は、
方位~情報をまったく供せない場合は，~eventの［
`alpha$m, `beta$m, `gamma$m
］属性をいずれも ~NULL に設定した上で発火するベキである。
◎
Implementations that are unable to provide all three angles must set the values of the unknown angles to null. If any angles are provided, the absolute property must be set appropriately. If an implementation can never provide orientation information, the event should be fired with the alpha, beta and gamma attributes set to null.
</p>

<p class="trans-note">【
“有意な変化が生じる度に発火される” ので、
“供せる” から “供せない”, またはその逆に変化したときも，
発火されることになろう（以下に定義される他の~eventも同様）。
】</p>

		</section>
		<section id="deviceorientationabsolute">
<h3 title="deviceorientationabsolute Event">5.2. `deviceorientationabsolute^et ~event</h3>

<p class="issue">
`deviceorientationabsolute$et ~eventと その `ondeviceorientationabsolute$n ~event~handler~IDL属性における`実装~経験は限られている＠https://wpt.fyi/results/orientation-event/ondeviceorientationabsolute.https.html$。
◎
The deviceorientationabsolute event and its ondeviceorientationabsolute event handler IDL attribute have limited implementation experience.
</p>

<div class="p">
<p>
~UAは、
方位における有意な変化が生じる度に，
次を走らすモノトスル
⇒
`~eventを発火する$( 当の`~window$, `deviceorientationabsolute$et, `DeviceOrientationEvent$I )
</p>
◎
User agents implementing this specification must fire an event named deviceorientationabsolute using DeviceOrientationEvent on the window object whenever a significant change in orientation occurs.
</div>

<p>
`ondeviceorientationabsolute$n 属性は、
名前 `ondeviceorientationabsolute^l を伴う`~event~handler$用の`~event~handler~IDL属性$である
— 対応する`~event~handler~event型$は、
`deviceorientationabsolute@et
である。
◎
The ondeviceorientationabsolute attribute is an event handler IDL attribute for the ondeviceorientationabsolute event handler, whose event handler event type is deviceorientationabsolute.
</p>

<pre class="idl">
partial interface `Window$I {
    [`SecureContext$] attribute `EventHandler$I `ondeviceorientationabsolute@n;
};
</pre>

<p>
`deviceorientationabsolute$et ~eventは、
常に`絶対~方位$による~dataを供することを除いて，
`deviceorientation$et ~eventに完全に相似的である。
◎
A "deviceorientationabsolute" event is completely analogous to the deviceorientation event, except that it must always provide absolute orientation data.
</p>

<p>
`absolute$m 属性【！~prop】は ~T に設定するモノトスル。
◎
The absolute property must be set to true.
</p>

<p>
実装は、
絶対~方位~情報をまったく供せない場合は，~eventの［
`alpha$m, `beta$m, `gamma$m
］属性をいずれも ~NULL に設定した上で発火するベキである。
◎
If an implementation can never provide absolute orientation information, the event should be fired with the alpha, beta and gamma attributes set to null.
</p>

		</section>
		<section id="devicemotion">
<h3 title="devicemotion Event">5.3. `devicemotion^et ~event</h3>

<p>
この仕様を実装する~UAは、
次を走らすモノトスル†
⇒
`~eventを発火する$( 当の`~window$, `devicemotion$et, `DeviceMotionEvent$I )
◎
User agents implementing this specification must fire an event named devicemotion using DeviceMotionEvent on the window object.
</p>

<p class="trans-note">【†
いつ，どの条件の下で発火するかについては、
この仕様には述べられていない。
~event名は、
“~deviceが動いたとき” を示唆しているが。
】</p>

<p>
`ondevicemotion$n 属性は、
名前 `ondevicemotion^l を伴う`~event~handler$用の`~event~handler~IDL属性$である
— 対応する`~event~handler~event型$は、
`devicemotion@et
である。
◎
The ondevicemotion attribute is an event handler IDL attribute for the ondevicemotion event handler, whose event handler event type is devicemotion.
</p>

<pre class="idl">
partial interface `Window$I {
  [`SecureContext$] attribute `EventHandler$I `ondevicemotion@n;
};

[`Exposed$=Window, `SecureContext$]
interface `DeviceMotionEventAcceleration@I {
  readonly attribute double? `x@m;
  readonly attribute double? `y@m;
  readonly attribute double? `z@m;
};

[`Exposed$=Window, `SecureContext$]
interface `DeviceMotionEventRotationRate@I {
  readonly attribute double? `alpha@m;
  readonly attribute double? `beta@m;
  readonly attribute double? `gamma@m;
};

[`Exposed$=Window, `SecureContext$]
interface `DeviceMotionEvent@I : `Event$I {
  `DeviceMotionEvent@mc(DOMString %type, optional `DeviceMotionEventInit$I %eventInitDict = {});
  readonly attribute `DeviceMotionEventAcceleration$I? `acceleration$m;
  readonly attribute `DeviceMotionEventAcceleration$I? `accelerationIncludingGravity$m;
  readonly attribute `DeviceMotionEventRotationRate$I? `rotationRate$m;
  readonly attribute double `interval$m;

  static `Promise$&lt;`PermissionState$I&gt; `requestPermission$m();
};

dictionary `DeviceMotionEventAccelerationInit@I {
  double? `x@m = null;
  double? `y@m = null;
  double? `z@m = null;
};

dictionary `DeviceMotionEventRotationRateInit@I {
  double? `alpha@m = null;
  double? `beta@m = null;
  double? `gamma@m = null;
};

dictionary `DeviceMotionEventInit@I : `EventInit$I {
  `DeviceMotionEventAccelerationInit$I `acceleration@m;
  `DeviceMotionEventAccelerationInit$I `accelerationIncludingGravity@m;
  `DeviceMotionEventRotationRateInit$I `rotationRate@m;
  double `interval@m = 0;
};
</pre>

`DeviceMotionEvent^I0

<div class="algo">
`acceleration@m
取得子~手続きは、
初期化-時の値を返す。
コレの作成-時には、
この属性は ~NULL に初期化するモノトスル。
◎
The acceleration attribute must return the value it was initialized to. When the object is created, this attribute must be initialized to null.
</div>

<div class="algo">
`accelerationIncludingGravity@m
取得子~手続きは、
初期化-時の値を返す。
コレの作成-時には、
この属性は ~NULL に初期化するモノトスル。
◎
The accelerationIncludingGravity attribute must return the value it was initialized to. When the object is created, this attribute must be initialized to null.
</div>

<div class="algo">
`rotationRate@m
取得子~手続きは、
初期化-時の値を返す。
コレの作成-時には、
この属性は ~NULL に初期化するモノトスル。
◎
The rotationRate attribute must return the value it was initialized to. When the object is created, this attribute must be initialized to null.
</div>

<div class="algo">
`interval@m
取得子~手続きは、
初期化-時の値を返す。
コレの作成-時には、
この属性は 0 に初期化するモノトスル。
◎
The interval attribute must return the value it was initialized to. When the object is created, this attribute must be initialized to 0.
</div>

<div class="algo">
<p>
`requestPermission()@m
静的~method手続きは：
◎
The static requestPermission() operation, when invoked, must run these steps:
</p>
<ol>
	<li>
%~promise ~LET 新たな~promise
◎
Let promise be a new promise.
</li>
	<li>
~RET %~promise
— ただし、
以降も`並列的$に走らす
◎
Run these steps in parallel:
</li>
	<li>
%生成元 ~LET コレに`関連な設定群~obj$の`生成元$enV
◎
↓</li>
	<li>
%許可 ~LET %生成元 用の`許可$
◎
Let permission be permission for relevant settings object’s origin.
</li>
	<li>
<p>
~IF［
%許可 ~EQ `default^l
］：
◎
↓</p>
		<ol>
			<li>
~IF［
コレに`関連な大域~obj$の`一過な作動化？$ ~EQ ~F
］
⇒＃
`~promiseを却下する$( %~promise, `NotAllowedError$E 例外 )；
~RET
◎
If permission is "default" and the relevant global object does not have transient activation, then reject promise with a NotAllowedError DOMException and abort these steps.
</li>
			<li>
［
%生成元 用に~deviceの動きを共有することは、
受容-可能かどうか
］を利用者に尋ねる
⇒
%許可 ~SET 利用者からの可否に応じて
⇒
可ならば `granted^l ／
否ならば `denied^l
◎
If permission is "default", ask the user whether sharing device motion for the relevant settings object’s origin is acceptable. If it is, set permission to "granted", and "denied" otherwise.
</li>
		</ol>
	</li>
	<li>
<p>
次を走らす`~taskを~queueする$：
◎
Queue a task to run these steps:
</p>
		<ol>
			<li>
%生成元 用の`許可$ ~SET %許可
◎
Set permission for the relevant settings object’s origin to permission.
</li>
			<li>
`~promiseを解決する$( %~promise, %許可 )
◎
Fulfill promise with permission.
◎
↑↑Return promise.
</li>
		</ol>
	</li>
</ol>
</div>

<p>
~UAが発火する `DeviceMotionEvent$I ~eventには、
以下に挙げる要件が適用される：
◎
In the DeviceMotionEvent events fired by the user agent, the following requirements must apply:
</p>
<ul>
	<li>
<p>
`acceleration$m 属性は、
当の~deviceの`線形~加速度$で初期化するモノトスル。
値は 0.1 m/s~pow2 より精確にしないモノトスル。
◎
The acceleration attribute must be initialized with the device’s linear acceleration. The value must not be more precise than 0.1 m/s2.
</p>

<p>
`DeviceMotionEvent^I0
実装は、
重力の効果を伴う加速度~dataしか供せない場合
（例えば~gyroscopeを欠くことに因り），
`重力を伴う加速度$を給してよい。
これは，多くの応用では有用さに劣るが、
最善な労による~supportを供する手段として供される。
この事例では、
`accelerationIncludingGravity$m 属性は，
`重力を伴う加速度$の測定で初期化するモノトスル。
ここでも、
値は 0.1 m/s~pow2 より精確にしないモノトスル。
◎
Implementations that are unable to provide acceleration data without the effect of gravity (due, for example, to the lack of a gyroscope) may instead supply acceleration with gravity. This is less useful in many applications but is provided as a means of providing best-effort support. In this case, the accelerationIncludingGravity attribute must be initialized with the acceleration with gravity measurements. Again, the value must not be more precise than 0.1 m/s2.
</p>
	</li>
	<li>
<p>
`rotationRate$m 属性は、
その値を成す［
`DeviceMotionEventRotationRate^I0
`alpha$m, `beta$m, `gamma$m
］属性が次に従うように，当の~deviceの`回転~率$で初期化するモノトスル：
</p>
		<ul>
			<li>
順に［
~x軸, ~y 軸, ~z軸
］における角度の変化~率として表出する。
</li>
			<li>
0.1 deg/s よりは精確にしない。
</li>
		</ul>
◎
The rotationRate attribute must be initialized with the device’s rotation rate. It must be expressed as the rate of change of the angles defined as alpha (x axis), beta (y axis), gamma (z axis). Each attribute must not be more precise than 0.1 degrees per second.
</li>
	<li>
<p>
`DeviceMotionEvent^I0
`interval$m 属性は、
次に従うモノトスル：
</p>
		<ul>
			<li>
下層の~hardwareから~dataが得される間隔【~~周期】に初期化する。
</li>
			<li>
~milli秒~数（ ms 単位）で表出する。
</li>
			<li>
~Web~appによる~dataの~filter法を単純~化するため、
間隔は【各~event間にわたって】定数にする。
</li>
		</ul>
◎
The interval attribute must be initialized with the interval at which data is obtained from the underlying hardware and must be expressed in milliseconds (ms). It must be a constant, to simplify filtering of the data by the Web application.
</li>
	<li>
実装は、［
`acceleration$m ／
`accelerationIncludingGravity$m ／
`rotationRate$m
］属性の値が未知なため供せない場合には，
~NULL に初期化するモノトスル。
実装は、
動き情報を まったく供せない場合でも，~eventを発火するベキである
— これらの属性をすべて ~NULL に設定した上で。
【この場合も，発火する時機については、この仕様には述べられていない。】
◎
Implementations that are unable to provide all attributes must initialize the values of the unknown attributes to null. If an implementation can never provide motion information, the event should be fired with the acceleration, accelerationIncludingGravity and rotationRate attributes set to null.
</li>
</ul>

		</section>
		<section id="id=permission-model">
<h3 title="Permission model">5.4. 許可~model</h3>

<p class="issue">
更なる実装~経験が許可~model用に集まってきており，
この経験から伝えられた仕様の明確化が
`課題 #74＠https://github.com/w3c/deviceorientation/issues/74$
にて論じられている。
◎
Further implementation experience is being gathered for the permission model and specification clarifications informed by this experience are being discussed in GitHub issue #74.
</p>

<p>
実装は、
利用者（または利用者に利する~UA）が
`許可@
を是認した場合に限り，~deviceの［
方位／動き
］を【~appの生成元が】共有することを選んでもヨイ。
所与の`生成元$用に，~deviceの［
方位／動き
］を共有する`許可$は、
次のいずれかの文字列になる：
◎
Implementations may choose to share device orientation &amp; motion only if the user (or user agent on behalf of the user) has granted permission. The permission to share device orientation &amp; motion for a given origin is one of three strings:
</p>

<dl>
	<dt>`default^l</dt>
	<dd>
`denied^l に等価であるが、
利用者は，まだ明示的に選んではいない。
◎
This is equivalent to "denied", but the user has made no explicit choice thus far.
</dd>

	<dt>`denied^l</dt>
	<dd>
利用者は、
~deviceの［
方位／動き
］を共有したいと求めていないことを意味する。
◎
This means the user does not want to share device orientation or motion.
</dd>

	<dt>`granted^l</dt>
	<dd>
~deviceの［
方位／動き
］を共有してもヨイことを意味する。
◎
This means device orientation or motion may be shared.
</dd>
</dl>

<p class="note">注記：
`granted^l を意味するような［
`default^l に~~相応する文字列
］は無い。
その事例では、
~appにとっては`許可$を尋ねる理由は無いので，単純に `granted^l が返される。
◎
There is no equivalent to "default" meaning "granted". In that case "granted" is simply returned as there would be no reason for the application to ask for permission.
</p>
		</section>
	</section>
	<section id="security-and-privacy">
<h2 title="Security and privacy considerations">6. ~security／~privacyの考慮点</h2>

<p>
この仕様に定義される~APIは、［
加速度計, ~gyroscope, 磁力計
］などの~hardware~sensorからの情報を得するために利用できる。
供される~dataは、
敏感であり，悪意的な~web~pageによる攻撃の~subjectになり得るものと考えられている。
［
加速度計, ~gyroscope, 磁力計
］の較正は、
特定0の~sensor~hardwareについての持続的な詳細を露呈し得る
`SENSORID$r
。
主な攻撃~行路は、
次に分類できる：
◎
The API defined in this specification can be used to obtain information from hardware sensors, such as accelerometer, gyroscope and magnetometer. Provided data may be considered as sensitive and could become a subject of attack from malicious web pages. The calibration of accelerometers, gyroscopes and magnetometers may reveal persistent details about the particular sensor hardware [SENSORID]. The main attack vectors can be categorized into following categories:
</p>

<ul>
	<li>
利用者~入力の監視
`TOUCH$r
◎
Monitoring of a user input [TOUCH]
</li>
	<li>
所在の追跡
`INDOORPOS$r
◎
Location tracking [INDOORPOS]
</li>
	<li>
利用者の識別
`FINGERPRINT$r
◎
User identification [FINGERPRINT]
</li>
</ul>

<p>
それを踏まえて、
実装は，［
当の~web~pageによる~sensorの利用に対する許可や，それを徴す視覚的な指示子
］を考慮してもヨイ。
加えて，［
~privacy~risk,
指紋収集,
その他の攻撃
］の機会cを最小限にするため、
実装が この仕様に定義される~eventを発火するのは，
~AND↓ が満たされる場合に限るモノトスル：
◎
In light of that, implementations may consider permissions or visual indicators to signify the use of sensors by the web page. Furthermore, to minimize privacy risks, the chance of fingerprinting and other attacks the implementations must:
</p>
<ul>
	<li>
<p>
~targetは［
~AND↓ を満たす`~navigable$ %~navigable
］にて`作動中な~window$navである
◎
↓</p>
		<ul>
			<li>
［
%~navigable にて`作動中な文書$nav ~NEQ ~NULL
］~AND［
%~navigable にて`作動中な文書$navの`可視性~状態$doc ~EQ `visible^l
］
◎
fire events only when a navigable's active document's visibility state is "visible",
</li>
			<li>
次の 2 つは`同一-生成元$である
（ %~navigable は`~top-level辿可能$であるならば常に満たされる）
⇒＃
%~navigable にて`作動中な~window$navに`関連な設定群~obj$の`生成元$enV,
%~navigable の`~top-level辿可能$navにて`作動中な~window$navに`関連な設定群~obj$の`生成元$enV
◎
fire events only on the top-level traversable's active window and child navigables' active windows whose relevant settings object's origin is same origin with the top-level traversable's active window's relevant settings object's origin.
</li>
			<li>
%~navigable に`関連な設定群~obj$は`~secureな文脈$enVである
◎
fire events on a navigable's active windows only when its relevant settings object is a secure context,
</li>
		</ul>
	</li>
	<li>
これまでの各節に述べたとおり，属性~値の精度を制限する。
◎
limit precision of attribute values as described in the previous sections.
</li>
</ul>

<p>
加えて、
そのように実装することは，
携帯~deviceの~battery寿命にも~~有益になろう。
◎
Additionally, implementing these items may also have a beneficial impact on the battery life of mobile devices.
</p>

	</section>
	<section id="use-cases-and-requirements">
<h2 title="Use-Cases and Requirements">7. 利用事例と要件</h2>

		<section id="use-cases">
<h3 title="Use-Cases">7.1. 利用事例</h3>

◎非規範的

<dl>
	<dt id="controlling-a-game">
~gameの制御-法
◎
7.1.1. Controlling a game
</dt>
	<dd>
~game用の~Web~appは、
~deviceの方位を監視して，ある種の方向への傾きを~screen~spriteを制御する手段として解釈する。
◎
A gaming Web application monitors the device’s orientation and interprets tilting in a certain direction as a means to control an on-screen sprite.
</dd>

	<dt id="gesture-recognition">
~gesture認識
◎
7.1.2. Gesture recognition
</dt>
	<dd>
~Web~appは、
~deviceの加速度を監視して，ある種の~gestureを認識するために信号~処理を適用する。
例えば、
`shaking^en ~gestureを利用して ~web~formを~clearするなど。
◎
A Web application monitors the device’s acceleration and applies signal processing in order to recognize certain specific gestures. For example, using a shaking gesture to clear a web form.
</dd>

	<dt id="mapping">
地図~用
◎
7.1.3. Mapping
</dt>
	<dd>
地図~用の~Web~appは、
~deviceの方位を利用して，地図が現実と正しく揃うようにする。
◎
A mapping Web application uses the device’s orientation to correctly align the map with reality.
</dd>
</dl>

		</section>
		<section id="requirements">
<h3 title="Requirements">7.2. 要件</h3>

◎非規範的

<p>
仕様は、
次に従わなければナラナイ：
◎
↓</p>

<ul>
	<li>
空間における~deviceの物理的な［
方位, 動き
］を述べる~dataを供する。
◎
The specification must provide data that describes the physical orientation in space of the device.
◎
The specification must provide data that describes the motion in space of the device.
</li>
	<li>
~deviceの方位~変化に応じれる~event~handlerを登録するのを，~Web~appに許容する。
◎
The specification must allow Web applications to register for changes in the device’s orientation.
</li>
	<li>
方位, 動きとも，下層の~data~sourceは問わないとする。
◎
The specification must be agnostic to the underlying sources of orientation and motion data.
</li>
	<li>
既存の~DOM~event~frameworkを利用する。
◎
The specification must use the existing DOM event framework.
</li>
</ul>

		</section>
	</section>
	<section id="examples">
<h2 title="A. Examples">A. 各種~例</h2>

◎非規範的

【！ All equations in this section are created using MathJAX and are provided @ http://jsfiddle.net/richtr/w7Xgu/ 】

		<section id="worked-example">
<h3 title="A.1 Calculating compass heading">A.1. ~compass-headingの計算-法</h3>

◎非規範的

<p>
以下に作業した例は、
`deviceorientation$et ~eventの利用者~向けの~~参考として意図されている。
◎
The following worked example is intended as an aid to users of the DeviceOrientation event.
</p>

<p>
`§ 序論＠#introduction$
では、
~deviceの~screenが水平なときに~compass-headingを得する，
`deviceorientation$et ~eventの用例を供した。
この例では、
利用者が対面して握っている~deviceの~screenが近似的に直立しているとき，
~deviceの~compass-headingを決定する方法を示す。
これの応用は、
現実拡張~systemである。
◎
Introduction section provided an example of using the DeviceOrientation event to obtain a compass heading when the device is held with the screen horizontal. This example shows how to determine the compass heading that the user is facing when holding the device with the screen approximately vertical in front of them. An application of this is an augmented-reality system.
</p>

<p>
ここでの~deviceの~compass-headingとは、
精確には，［
~deviceの~screenに~~直交し，~screenの背面から先を指す~vector
］の水平~成分である。
◎
More precisely, we wish to determine the compass heading of the horizontal component of a vector which is orthogonal to the device’s screen and pointing out of the back of the screen.
</p>

<p>
%v は、
回転された~device座標~frame【！device body frame】（~xyz）における，この~vectorを表現するとする：
◎
If v represents this vector in the rotated device body frame xyz, then v is as follows.
• v = [0; 0; -1]
</p>

<div class="_math-formula">
%v ~EQ `equation1^dgm
</div>

<p>
~z軸~周りの回転に因る座標系変換は、
次の回転~行列 %Z で表現できる：
◎
The transformation of v due to the rotation about the z axis can be represented by the following rotation matrix.
• Z = [cos(alpha) -sin(alpha) 0; sin(alpha) cos(alpha) 0; 0 0 1]
</p>

<div class="_math-formula">
`equation2^dgm
</div>

<p>
~x軸~周りの回転に因る座標系変換は、
次の回転~行列 %X で表現できる：
◎
The transformation of v due to the rotation about the x axis can be represented by the following rotation matrix.
• X = [1 0 0; 0 cos(beta) -sin(beta); 0 sin(beta) cos(beta)]"
</p>

<div class="_math-formula">
`equation3^dgm
</div>

<p>
~y軸~周りの回転に因る座標系変換は、
次の回転~行列 %Y で表現できる：
◎
The transformation of v due to the rotation about the y axis can be represented by the following rotation matrix.
• Y = [cos(gamma) 0 sin(gamma); 0 1 0; -sin(gamma) 0 cos(gamma)]
</p>

<div class="_math-formula">
`equation4^dgm
</div>

<p>
%R は、
基準~座標~frame【！earth frame】（~XYZ）における~deviceの全部的な回転~行列を表現するとする。
初期の~device座標~frame【！body frame】は基準~座標~frame【！earth frame】に揃えられているので、［
%R ~EQ %Z ~MUL %X ~MUL %Y
］であり，その結果は：
◎
If R represents the full rotation matrix of the device in the earth frame XYZ, then since the initial body frame is aligned with the earth, R is as follows.
• R = ZXY = [[cos(alpha) cos(gamma)-sin(alpha) sin(beta) sin(gamma), -cos(beta) sin(alpha), cos(gamma) sin(alpha) sin(beta)+cos(alpha) sin(gamma)], [cos(gamma) sin(alpha)+cos(alpha) sin(beta) sin(gamma), cos(alpha) cos(beta), sin(alpha) sin(gamma)-cos(alpha) cos(gamma) sin(beta)], [-cos(beta) sin(gamma), sin(beta), cos(beta) cos(gamma)]]
</p>

<div class="_math-formula">
`equation13a^dgm
</div>

<p>
%V は基準~座標~frame【！earth frame】（~XYZ）における~vector %v を表現するとする。
［
【！equation5a】
%V ~EQ %R ~MUL %v
］であり，その結果は：
◎
If v' represents the vector v in the earth frame XYZ, then since the initial body frame is aligned with the earth, v' is as follows.
• v' = Rv
• v' = [-cos(alpha)sin(gamma)-sin(alpha)sin(beta)cos(gamma); -sin(alpha)sin(gamma)+cos(alpha)sin(beta)cos(gamma); -cos(beta)cos(gamma)]
</p>

<div class="_math-formula">
`equation5e^dgm
</div>

<p>
%θ は~compass-headingを表すとするとき、［
%β, %γ とも 0
］ではないとするなら［
%θ ~EQ `arctan^op( ( %V の~x成分 ) ~DIV ( %V の~y成分 ) )
］であり，その結果は
【！equation6】
⇒
%θ ~EQ `arctan^op(
( −`cos^op(%α)`sin^op(%γ) − `sin^op(%α)`sin^op(%β)`cos^op(%γ) )
~DIV
( −`sin^op(%α)`sin^op(%γ) + `cos^op(%α)`sin^op(%β)`cos^op(%γ) )
)
◎
The compass heading θ is given by
• theta = atan((v’_x)/(v’_y)) = atan((-cos(alpha)sin(gamma)-sin(alpha)sin(beta)cos(gamma))/(-sin(alpha)sin(gamma)+cos(alpha)sin(beta)cos(gamma)))
◎
provided that β and γ are not both zero.
</p>

<div class="example">
<p>
上による~compass-headingの計算は、
~JSでは次のように表現できる
— 供された各~parameterが定義されていて（ ~NULLでない），かつ絶対~方位（ `absolute^m ~EQ ~T ）を表現するならば，正しい~compass-headingを返す。
◎
The compass heading calculation above can be represented in JavaScript as follows to return the correct compass heading when the provided parameters are defined, not null and represent absolute values.
</p>

<pre class="lang-js">
var %degtorad = Math.PI / 180; /* <span class="comment">
度d ↔ ~radian 間の換算~用
◎
Degree-to-Radian conversion
</span> */

function compassHeading( %alpha, %beta, %gamma ) {

  var %_x = %beta  ? %beta  * %degtorad : 0; // %β 値
  var %_y = %gamma ? %gamma * %degtorad : 0; // %γ 値
  var %_z = %alpha ? %alpha * %degtorad : 0; // %α 値

  var %cX = Math.cos( %_x );
  var %cY = Math.cos( %_y );
  var %cZ = Math.cos( %_z );
  var %sX = Math.sin( %_x );
  var %sY = Math.sin( %_y );
  var %sZ = Math.sin( %_z );

  /* <span class="comment">
%V の~x, ~y成分を計算する
◎
Calculate Vx and Vy components
</span> */
  var %Vx = - %cZ * %sY - %sZ * %sX * %cY;
  var %Vy = - %sZ * %sY + %cZ * %sX * %cY;

  /* <span class="comment">
~compass-headingを計算する
◎
Calculate compass heading
</span> */
  var %compassHeading = Math.atan( %Vx / %Vy );

  /* <span class="comment">
~compass-headingを， 0 以上 2 π 未満に換算する
◎
Convert compass heading to use whole unit circle
</span> */
  if( %Vy &lt; 0 ) {
    %compassHeading += Math.PI;
  } else if( %Vx &lt; 0 ) {
    %compassHeading += 2 * Math.PI;
  }

  return %compassHeading * ( 180 / Math.PI ); /* <span class="comment">
度dによる~compass-heading
◎
Compass Heading (in degrees)
</span> */

}
</pre>
</div>

<p>
整合性~検査として，
%γ を 0 に設定した場合、
%θ は，期待されるとおり
【！equation7】
⇒＃
%θ ~EQ `arctan^op( −`sin^op(%α)`sin^op(%β) ~DIV `cos^op(%α)`sin^op(%β) )
~EQ `arctan^op( −`sin^op(%α) ~DIV `cos^op(%α) ) ~EQ −%α
◎
As a consistency check, if we set γ = 0, then
• theta = atan(-sin(alpha)sin(beta)/cos(alpha)sin(beta)) = -alpha
◎
as expected.
</p>

<p>
代替の整合性~検査として，
%β を 90 に設定した場合【すなわち，本体は直立している】、
%θ は，期待されるとおり
【！equation8a, equation8b】
⇒＃
%θ ~EQ `arctan^op( ( −`cos^op(%α)`sin^op(%γ) − `sin^op(%α)`cos^op(%γ) ) ~DIV ( −`sin^op(%α)`sin^op(%γ) + `cos^op(%α)`cos^op(%γ) ) )
~EQ `arctan^op( −`sin^op(%α+%γ) ~DIV `cos^op(%α+%γ) )
~EQ −(%α+%γ)
◎
Alternatively, if we set β = 90, then
• theta = atan((-cos(alpha)sin(gamma)-sin(alpha)cos(gamma))/(-sin(alpha)sin(gamma)+cos(alpha)cos(gamma)))
• theta = atan(-sin(alpha+gamma)/cos(alpha+gamma)) = -(alpha+gamma)
◎
as expected.
</p>

		</section>
		<section id="worked-example-2">
<h3 title="A.2 Alternate device orientation representations">A.2. ~device方位の代替-表現</h3>

◎非規範的

<p>
オイラー角を利用して方位を述べることには、
~gimbal-lock `GIMBALLOCK$r を導入するなどの欠点もあり得る。
意図される応用に依存して，~device方位を表す値を他の回転~表現に換算する方が有用になり得る。
◎
Describing orientation using Tait-Bryan angles can have some disadvantages such as introducing gimbal lock [GIMBALLOCK]. Depending on the intended application it can be useful to convert the Device Orientation values to other rotation representations.
</p>

<p>
方位~用の代替-表現としては、
回転~行列を利用するものが先ず挙げられる。
`§~compass-headingの計算-法$にて供した，成分~回転~行列を組合せることにより、
~device座標~frame【！body frame】の方位を組合せた回転~行列
— その節に述べた %R —
【！equation13a】
として表現できる。
それは、
基準~座標~frame【！earth frame】（~XYZ）からの~deviceの回転~行列を表現する。
◎
The first alternate orientation representation uses rotation matrices. By combining the component rotation matrices provided in the worked example above we can represent the orientation of the device body frame as a combined rotation matrix.
◎
If R represents the rotation matrix of the device in the earth frame XYZ, then since the initial body frame is aligned with the earth, R is as follows.
• R = ZXY = [[cos(alpha) cos(gamma)-sin(alpha) sin(beta) sin(gamma), -cos(beta) sin(alpha), cos(gamma) sin(alpha) sin(beta)+cos(alpha) sin(gamma)], [cos(gamma) sin(alpha)+cos(alpha) sin(beta) sin(gamma), cos(alpha) cos(beta), sin(alpha) sin(gamma)-cos(alpha) cos(gamma) sin(beta)], [-cos(beta) sin(gamma), sin(beta), cos(beta) cos(gamma)]]
</p>

<div class="example">
<p>
この回転~行列は、
~JSでは，次のように表現できる
— 供された各~parameterが定義されていて, ~NULLでなく, `absolute^m 値を表現するならば：
◎
The above combined rotation matrix can be represented in JavaScript as follows provided passed parameters are defined, not null and represent absolute values.
</p>

<pre class="lang-js">
var %degtorad = Math.PI / 180; /* <span class="comment">
度d ↔ ~radian 間の換算~用
◎
Degree-to-Radian conversion
</span> */

function getRotationMatrix( alpha, %beta, %gamma ) {

  var %_x = %beta  ? %beta  * %degtorad : 0; // %β 値
  var %_y = %gamma ? %gamma * %degtorad : 0; // %γ 値
  var %_z = %alpha ? %alpha * %degtorad : 0; // %α 値

  var %cX = Math.cos( %_x );
  var %cY = Math.cos( %_y );
  var %cZ = Math.cos( %_z );
  var %sX = Math.sin( %_x );
  var %sY = Math.sin( %_y );
  var %sZ = Math.sin( %_z );

  /* <span class="comment">
ZXY 回転~行列の構築
◎
ZXY rotation matrix construction.
</span> */

  var %m11 = %cZ * %cY - %sZ * %sX * %sY;
  var %m12 = - %cX * %sZ;
  var %m13 = %cY * %sZ * %sX + %cZ * %sY;

  var %m21 = %cY * %sZ + %cZ * %sX * %sY;
  var %m22 = %cZ * %cX;
  var %m23 = %sZ * %sY - %cZ * %cY * %sX;

  var %m31 = - %cX * %sY;
  var %m32 = %sX;
  var %m33 = %cX * %cY;

  return [
    %m11,    %m12,    %m13,
    %m21,    %m22,    %m23,
    %m31,    %m32,    %m33
  ];

};
</pre>
</div>

<p>
~device方位~data用には、
四元数 `QUATERNIONS$r による代替-表現もある。
◎
Another alternate representation of device orientation data is as Quaternions. [QUATERNIONS]
</p>

<div>
<p>
%q ~EQ ( %w, %x, %y, %z ) は、
基準~座標~frame【！earth frame】（~XYZ） における~deviceの単位~四元数を表現するとする。
初期の~device座標~frame【！body frame】は基準~座標~frame【！earth】に揃えられているので、
%q は次のようになる
【！equation14】
⇒＃
%w ~EQ `cos^op( %b ) `cos^op( %c ) `cos^op( %a ) ~MINUS `sin^op( %b ) `sin^op( %c ) `sin^op( %a ),
%x ~EQ `sin^op( %b ) `cos^op( %c ) `cos^op( %a ) ~MINUS `cos^op( %b ) `sin^op( %c ) `sin^op( %a ),
%y ~EQ `cos^op( %b ) `sin^op( %c ) `cos^op( %a ) ~PLUS `sin^op( %b ) `cos^op( %c ) `sin^op( %a ),
%z ~EQ `cos^op( %b ) `cos^op( %c ) `sin^op( %a ) ~PLUS `sin^op( %b ) `sin^op( %c ) `cos^op( %a )
</p>

<p>
ここで
⇒＃
( %a, %b, %c ) ~EQ ( %α ~DIV 2, %β ~DIV 2, %γ ~DIV 2 )
</p>

◎
If q represents the unit quaternion of the device in the earth frame XYZ, then since the initial body frame is aligned with the earth, q is as follows.
• q = [[q_w], [q_x], [q_y], [q_z]] = [[cos(beta)cos(gamma)cos(alpha) - sin(beta)sin(gamma)sin(alpha)], [sin(beta)cos(gamma)cos(alpha) - cos(beta)sin(gamma)sin(alpha)], [cos(beta)sin(gamma)cos(alpha) + sin(beta)cos(gamma)sin(alpha)], [cos(beta)cos(gamma)sin(alpha) + sin(beta)sin(gamma)cos(alpha)]]
</div>

<div class="example">
<p>
上の四元数は、
~JSでは，次のように表現できる
— 供された~parameterが定義されていて, ~NULLでなく, `absolute^m 値を表現するならば。
◎
The above quaternion can be represented in JavaScript as follows provided the passed parameters are defined, are absolute values and those parameters are not null.
</p>

<pre class="lang-js">
var %degtorad = Math.PI / 180; /* <span class="comment">
度d ↔ ~radian 間の換算~用
◎
Degree-to-Radian conversion
</span> */

function getQuaternion( %alpha, %beta, %gamma ) {

  var %_x = %beta  ? %beta  * %degtorad : 0; // %β 値
  var %_y = %gamma ? %gamma * %degtorad : 0; // %γ 値
  var %_z = %alpha ? %alpha * %degtorad : 0; // %α 値

  var %cX = Math.cos( %_x/2 );
  var %cY = Math.cos( %_y/2 );
  var %cZ = Math.cos( %_z/2 );
  var %sX = Math.sin( %_x/2 );
  var %sY = Math.sin( %_y/2 );
  var %sZ = Math.sin( %_z/2 );

  /* <span class="comment">
ZXY 四元数の構築
◎
ZXY quaternion construction.
</span> */

  var %w = %cX * %cY * %cZ - %sX * %sY * %sZ;
  var %x = %sX * %cY * %cZ - %cX * %sY * %sZ;
  var %y = %cX * %sY * %cZ + %sX * %cY * %sZ;
  var %z = %cX * %cY * %sZ + %sX * %sY * %cZ;

  return [ %w, %x, %y, %z ];

}
</pre>
</div>

<p>
単位~四元数が正しく構築されたかどうかは、
`Lagrange^en の四平方定理を利用して検査できる
— 結果は，期待されるとおり 1 になる
【！equation18】
⇒
%w ~pow2 ~PLUS %x ~pow2 ~PLUS %y ~pow2 ~PLUS %z ~pow2
~EQ 1
◎
We can check that a Unit Quaternion has been constructed correctly using Lagrange’s four-square theorem
• q_w^2 * q_x^2 * q_y^2 * q_z^2 = 1
◎
as expected.
</p>

		</section>
	</section>
	<section id="acknowledgments">
<h2 title="Acknowledgments">謝辞</h2>

<p lang="en">
Lars Erik Bolstad, Dean Jackson, Claes Nilsson, George Percivall, Doug Turner, Matt Womer, Chris Dumez
</p>

	</section>
</main></div>
