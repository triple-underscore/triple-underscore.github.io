<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<title>CSS Color Module Level 5 （日本語訳）</title>

<link rel="stylesheet" href="common.css" type="text/css" />
<link rel="stylesheet" href="common-css.css" type="text/css" />

<style>
.swatch{
	display: inline-block;
	width: 1em;
	height: 1em;
	border: thin solid silver;
}

.contrast-ratio {
	font-family: sans-serif0, sans-serif;
}

</style>


<script src="common0.js" ></script>
<script src="common1.js" async></script>

<script>

Util.ready = function(){
	const source_data = {
		collectParts: Util.collectParts,
		generate: expand,
	};

	Util.switchWordsInit(source_data);

	return;
}

function expand(){
	const class_map = this.class_map;
	const tag_map = this.tag_map;
	const link_map = this.link_map;

	return this.html.replace(
		/%[\w\-~一-鿆あ-ん]+|`(.*?)([$@^])(\w*)/g,
		create_html
	);

	function create_html(match, key, indicator, klass){
if(!indicator) {//%
	return `<var>${match.slice(1)}</var>`;
}

let text = key;
let href = '';

switch(klass){
case 'r':
	text = `[${key}]`;
	href = `#biblio-${key.toLowerCase()}`;
	break;
case 't':
	text = `&lt;${key}&gt;`;
	key = key.replace(/\s?\[.+/, '');
	break;
case 'f':
	text = `${key}()`;
	break;
case 'at':
	text = `@${key}`;
	break;
case 'l':
	text = `"<code class="literal">${key}</code>"`;
	break;
case 'U':
	text = `U+${key}`;
	break;
case 'nc': // named color
	href = `~CSSCOLOR#valdef-color-${key}`;
	break;
case 'ck': // color channel keyword
	{
		const [func, k] = key.split('/');
		href = `#valdef-${func}-${k}`;
		text = k;
	}
	break;
case 'vc': // color value with swatch
	return `<span class="swatch" style="background: ${key};"></span> <code class="value">${key}</code>`;
	break;
case 'rgb': // rgb swatch
	return `<span class="swatch" style="background: rgb(${key});"></span>`;
	break;
case 'issue':
	href = `~CSSissue/${key}`;
	text = `課題 #${key}`;
	break;
case 'en':
	return `<span lang="en">${key}</span>`;
	break;
}

let tag = tag_map[klass];
if(tag) {
	let classname = class_map[klass];
	classname = classname ? ` class="${classname}"` : '';
	text = `<${tag}${classname}>${text}</${tag}>`;
}

if(indicator !== '^'){
	href = link_map[ klass ? `${klass}.${key}` : key ] || href;
	if(!href){
		console.log(match); // check error
		return match;
	}

	switch(indicator){
	case '$':
		text = `<a href="${href}">${text}</a>`;
		break;
	case '@':
		text = `<dfn id="${href.slice(1)}">${text}</dfn>`;
		break;
	default:
		console.log(match);
		return match;
	}
}

return text;

	}
}

</script>


<script type="text/plain" id="_source_data">


●●options

spec_title:CSS Color Module Level 5
spec_date:2021-10-30
trans_update:2021-10-31
source_checked:200301
page_state_key:CSS
original_url:https://drafts.csswg.org/css-color-5/
	abbr_url:CSSCOLOR5
spec_status:ED
ref_id_prefix:biblio-
ref_id_lowercase:true
site_nav:paint,css
conformance:css
copyright:2021,permissive
trans_1st_pub:2020-02-03

●●class_map
p:property
d:descriptor
at:at-rule
css:css
u:unit
f:func
t:type
v:value
nc:value
ck:value
cr:contrast-ratio
U:code-point
cn:cp-name

●●tag_map
p:code
d:code
at:code
t:var
css:code
c:code
f:code
v:code
nc:code
ck:code
u:code
p:code
em:em
i:i
cite:cite
cr:span
U:span
cn:span

●●original_id_map

●●mdn_urls

funcdef-color-mix:CSS/color_value/color-mix()
funcdef-color:CSS/color_value/color()
funcdef-hsl:CSS/color_value/hsl()
funcdef-hwb:CSS/color_value/hwb()
funcdef-lab:CSS/color_value/lab()
funcdef-lch:CSS/color_value/lch()
funcdef-rgb:CSS/color_value/rgb()
funcdef-color-contrast:CSS/color_value/color-contrast()


●●link_map

at.color-profile:~CSSCOLOR#at-ruledef-profile
d.components:~CSSCOLOR#descdef-color-profile-components
d.src:~CSSCOLOR#descdef-color-profile-src

t.color-space:#typedef-color-space
t.colorspace-params:#colorspace-params
t.custom-params:#custom-params
t.predefined-rgb-params:#predefined-rgb-params
t.predefined-rgb:#predefined-rgb
t.xyz-params:#xyz-params

t.alpha-value:#typedef-alpha-value
t.hue:~CSSCOLOR#typedef-hue

t.number:~CSSVAL#number-value
t.percentage:~CSSVAL#percentage-value
t.angle:~CSSVAL#angle-value
t.dashed-ident:~CSSVAL#typedef-dashed-ident
t.color:~CSSCOLOR#typedef-color
	t.color:~CSSWG/css-color-3/#valuea-def-color

t.hue-adjuster:#typedef-hue-adjuster

f.color-mix:#funcdef-color-mix
f.color-contrast:#funcdef-color-contrast

f.hsl:#funcdef-hsl
f.hwb:#funcdef-hwb
f.lab:#funcdef-lab
f.lch:#funcdef-lch
f.oklab:#funcdef-oklab
f.oklch:#funcdef-oklch
f.rgb:#funcdef-rgb

f.color:#funcdef-color
	f.color:~CSSCOLOR#funcdef-color
f.lch:~CSSCOLOR#funcdef-lch

v.srgb:#valdef-color-space-srgb
v.hsl:#valdef-color-space-hsl
v.hwb:#valdef-color-space-hwb
v.xyz:#valdef-color-space-xyz
v.lab:#valdef-color-space-lab
v.lch:#valdef-color-space-lch
v.oklab:#valdef-color-space-oklab
v.oklch:#valdef-color-space-oklch

v.AA:#valdef-color-contrast-aa
v.AAA:#valdef-color-contrast-aaa
v.AA-large:#valdef-color-contrast-aa-large
v.AAA-large:#valdef-color-contrast-aaa-large

	ck.hsl/alpha:#valdef-hsl-alpha
	ck.hsl/h:#valdef-hsl-h
	ck.hsl/l:#valdef-hsl-l
	ck.hsl/s:#valdef-hsl-s
	ck.hwb/alpha:#valdef-hwb-alpha
	ck.hwb/b:#valdef-hwb-b
	ck.hwb/h:#valdef-hwb-h
	ck.hwb/w:#valdef-hwb-w
	ck.lab/a:#valdef-lab-a
	ck.lab/alpha:#valdef-lab-alpha
	ck.lab/b:#valdef-lab-b
	ck.lab/l:#valdef-lab-l
	ck.lch/alpha:#valdef-lch-alpha
	ck.lch/c:#valdef-lch-c
	ck.lch/h:#valdef-lch-h
	ck.lch/l:#valdef-lch-l
	ck.rgb/alpha:#valdef-rgb-alpha
	ck.rgb/b:#valdef-rgb-b
	ck.rgb/g:#valdef-rgb-g
	ck.rgb/r:#valdef-rgb-r
	ck.oklab/alpha:#valdef-oklab-alpha
	ck.oklab/a:#valdef-oklab-a
	ck.oklab/b:#valdef-oklab-b
	ck.oklab/l:#valdef-oklab-l
	ck.oklch/alpha:#valdef-oklch-alpha
	ck.oklch/c:#valdef-oklch-c
	ck.oklch/h:#valdef-oklch-h
	ck.oklch/l:#valdef-oklch-l
	ck.color/r:#valdef-color-r
	ck.color/g:#valdef-color-g
	ck.color/b:#valdef-color-b
	ck.color/x:#valdef-color-x
	ck.color/y:#valdef-color-y
	ck.color/z:#valdef-color-z

	nc.X:~CSSCOLOR#valdef-color-X
	nc.currentcolor:~CSSCOLOR#valdef-color-currentcolor
	nc.none:~CSSCOLOR#valdef-color-none

	●用語（CSS
~channel~keyword:#channel-keyword
起点~色:#origin-color
相対~色:#relative-color
相対~色~構文:#relative-color
相対~色~関数:#relative-color

~D65:~CSSCOLOR#d65-whitepoint
色~空間:~CSSCOLOR#color-space
	~Lab色~空間:~CSSCOLOR#lab-colors
~LCH色~空間:~CSSCOLOR#lab-colors
円柱な極-座標:~CSSCOLOR#cylindrical-polar-color
矩形な直交-座標:~CSSCOLOR#rectangular-orthogonal-color
色~profile:~CSSCOLOR#css-color-profile

	#specifying-lab-lch
	~HSL:~CSSCOLOR#the-hsl-notation
	~sRGB:~CSSCOLOR#numeric-srgb
	~HWB:~CSSCOLOR#the-hwb-notation

~math関数:~CSSVAL#math-function

	●用語（外部
~contrast比:#_contrast-ratio
相対~輝度:#_relative-luminance
	相対~輝度:~TR/WCAG21/#dfn-relative-luminance
輝度~contrast比:~TR/WCAG21/#dfn-contrast-ratio
§ ~contrast（最小）:~TR/WCAG21/#contrast-minimum

●●words_table1

●●words_table

	●色
Lab:
HSL:
	hsl^v:``hsl()``
sRGB:
	~sRGB:srgb
	`srgb^v:srgb
	srgb$v:``srgb``
LCH:
	~LCH:``lch()``／:lch()／:lch
HWB:
RGB:
CIE:
CIELab:
OKLab:
OKLCH:
XYZ:
D50:
D65:
alpha:
red:
green:
white:
blue:
purple:
gray:
sky-blue:
blue-green:
	青みがかった:slightly-blueish
	^nc:blue
	^nc:yellow
	^nc:sienna
	^nc:wheat
	^nc:tan
	^nc:peru
	^nc:red
	^nc:purple
	^v:display-p3
	^v:rec2020
	currentcolor$nc:current color
	a:
	b:
	L:
	C:
	H:
	X:
	Y:
	Z:
	X／Y／Z:x, y and z
	LCG
	CH:
	ab:


色:color::~
色-:color-::~
有色:colored::~
色域:gamut::~
	色域~内:in-gamut
	色域~外:out of gamut
	色域~対応付けを施-:gamut-mapped
環:wheel:~
色度:chroma::~
	色度:Chroma
色相:hue::~
	色相:Hue
補色:complementary color::~
原色:primary color::~
二次色:secondary color::~
透明度:transparency::~
不透明度:opacity::~
黒度:blackness::~
白度:whiteness::~
白色点:whitepoint::~
暗な:darkな::暗い
	暗な方の:darker
暗化-:darken:暗く
明な:lightな::明るい
明に:lightに::明るく
	明な方の:lighter
明度:lightness::~
	明度（ L ）:Lightness
輝度:luminance::~
	輝度:Luminance
知覚的:perceptual:~
彩度:saturation::~
	同じ彩度:as saturated as
彩度な:saturatedな::~
	無~彩度な〜に:fully desaturating
	彩度が~~復活する:re-saturating again
contrast::::コントラスト
	~contrastが高い:contrasting
grayscale::::グレイスケール
	~grayscale化:grayscaling
背景:background:~
階調:scale:~
光:light::~
強度:intensity::~
	光~強度に線形な:linear-light-intensity
	光に線形:linear-light
profile::::プロファイル
観視:viewing:~
flare::::フレア

	°:degree
	~~鮮やかさ:how "colorful"
	~~中間的:moderate
	色~空間:color space／colorspace
	色度を保全する:chroma-preserving
	色度がごく高い:very high-chroma
	色相は 120° 相違する:triad (hue differs by 120 degrees)

	●算術／幾何
起点:origin::~
混合:mixture::~
混合-:mix::~
	混合した:mixed
	混合-法:mixing
	様々な比による混合:mixtures
	混合されない:unmixed
	内で混合した結果:The mix in
	`color-mix$f:mixing
	`color-mix$f:mix
比:ratio:~
分布-:distribute::~
	~~分布:spaced
実数:number:~
改変子:modifier::~
調整子:adjuster::~
一様:uniform:~
量:amount:~
変形-:transform::~
丸める:roundする:~
平面:plain::~
線形:linear::~
拡縮-:scale::~
拡縮率:scale::~
乗算子:multiplier::~
中間:intermediate:~
端点:endpoint:~
math:
近似:approximation:~
	およそ:approximately
半分:half:~
総和:sum:~
極-:polar::~
直交-:orthogonal::~
矩形な:rectangularな::~
円柱な:cylindricalな::~
順応-:adapt:~
	〜に順応された:〜-adapted
回転-:rotate::~
往来-:round-trip::~
円弧:arc:~
係数:factor:~
数量-:numeric:~

	〜内に~~収まる:no 〜 clipping
	最も高い:highest
	高い方／より高い／より高くない:higher
	ごく高い:very high
	均等:even
	均等に:evenly
	近い:close
	計算に先立って:early
	低-:lower
	低く:lower
	L 軸:central neutral axis
	曲線:curve
	点線:dashed curve
	より大きくない:not greater than
	〜上に乗る:lie along
	よりも:compared to
	より狭い:smaller
	0 化する:zeroes out
	抑えて:cut
	2 個目の 〜 占めるような:at 〜 along the progression
	50% ずつ:50-50
	変換した結果:after its conversion to
	大きく異なる:difference in 〜 is huge

	●仕様
支援-:assist:~
利用度:usage:~
前処理器:preprocessor:~
解決策:solution:~
元は:originalには:~
大規模適用:scaling::~::スケーリング
間違った:wrongな:~
説明用の:explanatory:~
収容-:accommodate:~
参照r:refer:参照
高度:advanced:~
際どい:corner:~
義務的:mandatory:~
目指す:aimする:~

	単に:merely
	他にも:besides
	関わらず:regardless
	対応する値〜限り:(provided the end result ...) and correspond to:
	以下では:henceforth
	称される:referred
	該当しない:not true
	現在では:currently
	可能でない:unable
	働かない:unable to work
	選ばれ:chosen
	増えて:increasing〜increased
	〜とする:suppose
	ためにも:even more
	書く:write
	助ける:helpする
	そうする必要はない:not necessarily
	`WCAG21$r:WCAG 2.1
	主に:mainly
	欲され:desirable
	綴り:spelling
	小さな:minor
	別法として:alternatively
	最大~化:maximizing
	選ぶ:choice
	どれを選ぶか:choice
	適する:a good choice for
	~~対処:deal with
	大まか:rough
	値をとれるようにする:so it has meaningful values for
	省略可能かどうか:whether 〜 required or optional
	選ばれ:chosen
	ので:due
	もっとも、:tho
	特に，:as a corrollary,
	（未策定）:tbd
	結果の効果を大きく左右する:large effect on the end result
	異なる:is not the same as
	戻した:Moved 〜 back to
	元在った:whee it belongs
	〜でも〜ですら:indeed 〜 even
	残して:keep
	他を満たしていない:unsatisfactory in other ways
	見て判るとおり:we see that

	●未分類
	^en:Dark-Mode
Sass:
PostCSS:
component::::コンポーネント
picker:::選択 UI
中立:neutral:~
階級区分図:chloropleth map:~
未解決:unresolved::~
theme::::テーマ
知覚:perception:~
保存-:save:~
locale::::ロケール
寄与-:contribute:~
	寄与-:contribution

	一定:constant
	~~情報は失われない:lossless
	-:second
	-:expand
	`number^t:plain number
	〜が~~保たれるよう:left unchanged
	-:and correspond to:
	とても:very
	詰め込まれ:bunched up
	保つ:keep
	保ちながら:keeping
	最初に与える色:firstly, a single color
	~~後続の 1 個以上:two or more
	~~方向から見た俯瞰図:top-down view, looking along
	:The colors in the list are tested sequentially, …
	-:six significant figures
	全部ではなく:Instead 〜 equally
	個別に:individual
	どこでも:everywhere
	~~周に沿う:follow along
	改変-:modification
	先頭:start
	取り込む:drawing
	基準~色:the single color／the background
	順に:firstly, 〜 secondly, 〜 thirdly,
	~GTE:meet or exceed
	~EACH:sequentially, from left to right／:traversal／:terminate／:end／:reach
	優先される:win
	最優先な~contrastを伴う:winning／:winner
	~IF／~RET／%:earlier／:win／:overall winner／:temporary winner
	少しだけ:slightly
	少し:bit
	かなり:quite
	ちょうど~~中間の:a perfect mid
	色~関数:color-function
	個数:the number
	操作した結果:manipulation
	乗る:lie
	合衆国:US
	円:circle
	小さな:small
	大きな:large
	赤く縁取られた灰色の円:grey fill and red border
	~~対比:vs
	戻し:back
	跳ね上が:shot up
	持ち込:bring
	得られ:yeild

●●images
＠css-color/
LC-picker-scale｜height:20rem｜｜.png
LC-picker-map2｜height:20rem｜｜.png
CH-mixing｜height:24rem｜｜.svg
CH-mixing3｜height:28rem｜｜.svg
LCH-rotation-oog｜height:32rem｜｜LCH-rotation-oog.svg

●●ref_normative

[CSS-COLOR-4]
    Tab Atkins Jr.; Chris Lilley. ＜CSS Color Module Level 4＞. 1 June 2021. WD. URL: https://www.w3.org/TR/css-color-4/
[CSS-VALUES-4]
    Tab Atkins Jr.; Elika Etemad. ＜CSS Values and Units Module Level 4＞. 16 October 2021. WD. URL: https://www.w3.org/TR/css-values-4/
[RFC2119]
    S. Bradner. ＜Key words for use in RFCs to Indicate Requirement Levels＞. March 1997. Best Current Practice. URL: https://datatracker.ietf.org/doc/html/rfc2119
[WCAG21]
    Andrew Kirkpatrick; et al. ＜Web Content Accessibility Guidelines (WCAG) 2.1＞. 5 June 2018. REC. URL: https://www.w3.org/TR/WCAG21/


●●trans_metadata
<p>
~THIS_PAGEは、~W3Cにより編集者草案として公開された
<a href="~SPEC_URL">CSS Color Module Level 5</a>
を日本語に翻訳したものです。
~PUB
</p>



●●spec_metadata

最新発行バージョン
	https://www.w3.org/TR/css-color-5/
以前のバージョン
	https://www.w3.org/TR/2021/WD-css-color-5-20210722/
テスト一式
	http://test.csswg.org/suites/css-color-5_dev/nightly-unstable/
課題追跡
	<a href="https://github.com/w3c/csswg-drafts/labels/css-color-5">CSSWG Issues Repository</a>

編集
	<a href="https://svgees.us/">Chris Lilley</a> (W3C)
	<a href="https://una.im">Una Kravets</a> (Google)
	<a href="http://lea.verou.me/about">Lea Verou</a> (Invited Expert)
	<a href="https://nerdy.dev">Adam Argyle</a> (Google)

Suggest an Edit for this Spec
	<a href="https://github.com/w3c/csswg-drafts/blob/main/css-color-5/Overview.bs">GitHub Editor</a>
差分仕様
	yes
commit 履歴
	https://github.com/w3c/csswg-drafts/commits/main/css-color-5
</script>

</head>
<body>

<header>
	<hgroup>
<h1>CSS Color Module Level 5</h1>
	</hgroup>
</header>

<div id="MAIN" hidden>

	<section id="abstract">
~ABSTRACT

<p>
この~moduleは、 `css-color-4$r を拡張して，色~改変~関数を追加する。
◎
This module extends CSS Color [css-color-4] to add color modification functions.
</p>

~CSSisaLANG

	</section>
	<section id="status">
~STATUSofTHIS

<p>
これは、編集者草案の公な複製です…
【以下，この節の他の内容は、<a href="css-common-ja.html#status">~CSS日本語訳~共通~page</a>／冒頭の仕様~metadataに移譲。】
</p>

	</section>

<main id="MAIN0">

	<section id="introduction">
<h2 title="Introduction">1. 序論</h2>

~INFORMATIVE

<p>
［
~web開発者／設計~tool／設計~system開発者
］は、［
自身の~componentにおける色~関係の設計
］の大規模適用を支援するために，色~関数を利用することが多い。
~UIにおける `暗な~mode^i （ `Dark-Mode^en ）能力の様な，複数の［
~platform／利用者~選好
］を~supportする設計~systemの利用度が増えてきている下では、これは［
色を手動で設定する必要なく，単独の~sourceから~schemeを計算するため
］ためにも有用になる。
◎
Web developers, design tools and design system developers often use color functions to assist in scaling the design of their component color relations. With the increasing usage of design systems that support multiple platforms and multiple user preferences, like the increased capability of Dark Mode in UI, this becomes even more useful to not need to manually set color, and to instead have a single source from which schemes are calculated.
</p>

<figure>
<p class="alt" hidden id="_dgm-LC-picker-scale">
L, C 成分による色~picker
◎
LC color picker
</p>
<p class="alt" hidden id="_dgm-LC-picker-map2">
合衆国の階級区分図
◎
chloropleth map of the US
</p>
<figcaption>
最初の図は、~CIE`~LCH色~空間$で演算している色~picker。
ここでは、2 つの色を利用して，
C 軸（色度）, L 軸（明度）が成す平面~上で一連の階調を成す色を定義している（ H = 色相は一定）。
その次の図では、その色~階調を階級区分図に利用している。
◎
Above, a color picker operating in CIE LCH space. Here, a pair of colors are being used to define a color scale on the Chroma-Lightness plane (constant Hue). Below, the color scale in use on a chloropleth map.
</figcaption></figure>

<p>
現在では、［
~Sass／~HSL値に対する `calc^f ／~PostCSS
］がこれを行うために利用されている。
しかしながら，前処理器は動的に調整される色には働かないので、現在の解決策はどれも，~sRGB色域に制約され, ~HSLの知覚的な制限にも制約されている（色は色~環~内に詰め込まれているため、視覚的な明度が異なる 2 個の色の~HSL明度は， `yellow^nc と `blue^nc の様に同じになり得る）。
◎
Currently Sass, calc() on HSL values, or PostCSS is used to do this. However, preprocessors are unable to work on dynamically adjusted colors, all current solutions are restricted to the sRGB gamut and to the perceptual limitations of HSL (colors are bunched up in the color wheel, and two colors with visually different lightness, like yellow and blue, can have the same HSL lightness).
</p>

<p>
この~moduleは
⇒＃
`color-mix$f 関数を追加する／
`color-contrast$f 関数を追加する／
既存の関数を<a href="#relative-colors">相対~色の構文</a>で拡張する
◎
This module adds two new functions: color-mix(), color-contrast(), and extends existing ones with relative color syntax.
</p>

<p>
混合するときに利用される【または？かつ？】推奨される【！used recommended】色~空間は、知覚的に一様な `lch$v である
— それは、色域の制約が無く，色は均等に分布するので。
しかしながら，欲されるなら、`hsl$v や `srgb$v も含め，他の色~空間も指定できる。
◎
The perceptually uniform ``lch()`` color space is used recommended for mixing, as this has no gamut restrictions and colors are evenly distributed. However, other color spaces can be specified, including ``hsl()`` or ``srgb`` if desired.
</p>

	</section>
	<section id="color-spaces">
<h2 title="Color spaces">2. 色~空間</h2>

<p>
色を混合した結果, あるいは結合した結果は、利用されている`色~空間$に依存して異なる。
一部の事例では、 2 つの有色な光を物理的に混合した結果が欲される（その事例では、光~強度に線形な，~CIE~XYZ色~空間が適切になる）。
他の事例では、色は，知覚的に均等な~~分布が欲される（その事例では、知覚的に一様になるよう設計された，~OKLab色~空間が適切になる）。
別法として、結果が色相~環の~~周に沿うように，色度を最大~化する【~~落とさない】混合が求まれることもある（これ用には、~OKLCHが，きちんと働く）。
最後に，旧来の~Web内容との互換性が最も重要な考慮になることもある（そこでは、光に線形でも 知覚的に一様でもない，~sRGB色~空間を選ぶことになる）。
◎
Mixing or otherwise combining colors has different results depending on the color space used. In some cases, the result of physically mixing two colored lights is desired (in that case, the CIE XYZ color space is appropriate, because it is linear in light intensity). In other cases, colors which are evenly spaced perceptually are desired (in which case, the OKLab color space is designed to be perceptually uniform). Alternatively, maximizing chroma so that color mixtures follow along the hue wheel is wanted (OKLCH works well for this). Lastly, compatibility with legacy Web content may be the most important consideration. (the sRGB color space, which is neither linear-light nor perceptually uniform, is the choice here).
</p>

<pre class="prod">
`color-space@t
    = `srgb$v
    | `hsl$v
    | `hwb$v
    | `xyz$v
    | `lab$v
    | `lch$v
    | `oklab$v
    | `oklch$v
</pre>

<p>
~keyword［
`srgb@v,
`hsl@v,
`hwb@v,
`xyz@v,
`lab@v,
`lch@v,
`oklab@v,
`oklch@v
］は、各自に対応する色~空間を参照rする。
◎
The srgb, hsl, hwb, xyz, lab, lch. oklab and oklch keywords each refer to their corresponding color space.
</p>

<p>
`color-space$t が指定されていない場合、
`oklch$v 色~空間~内で混合される。
`xyz$v 色~空間は、`~D65$白色点を伴う~CIE~XYZであり，光~強度に線形な空間~内での算出を許容する。
◎
When no &lt;color-space&gt; is specified, the mixing is done in the oklch color space. The xyz color space is CIE XYZ, with a D65 whitepoint, and allows computation to be done in a linear-light-intensity space.
</p>

<p class="trans-note">【
`color-space$t は、~level 4 による `color$f 関数~用の
<a href="~CSSCOLOR#predefined">定義済み色~空間</a>
を指定する~keywordとは別個な集合を成すことに注意。
】</p>

	</section>
	<section id="color-mix">
<h2 title="Mixing colors: the color-mix() function">3. 色の混合-法： `color-mix^f 関数</h2>

<p>
この関数は、
2 個の色~指定（ `color$t ）をとり，所与の`色~空間$（ `color-space$t ）内で指定した量により混合した結果を返す。
◎
This function takes two &lt;color&gt; specifications and returns the result of mixing them, in a given &lt;color-space&gt;, by a specified amount.
</p>

<pre class="prod">
`color-mix@f
    = color-mix(
        in `color-space$t,
        [ `color$t &amp;&amp; `percentage [0,100]$t? ]#{2}
        `hue-adjuster$t? )
`hue-adjuster@t
    = shorter
    | longer
    | increasing
    | decreasing
    | specified
</pre>

<p>
百分率は、
0% 以上 100% 以下の範囲に入ることが要求される
— 特定的に，負な百分率は許容されない†。
◎
Percentages are required to be in the range 0% to 100%. Negative percentages are specifically disallowed.＼
</p>

<p class="trans-note">【†
したがって、関数は無効な値を表現することになろう。
構文から， 100% を超える値も同様になろう。
（下の~algoには組入れられていないが。）
】</p>

<div class="algo">
<p>
百分率は、以下に従って正規化される：
◎
The percentages are normalized as follows:
</p>
<ol>
	<li>
%p1 ~LET ［
1 個目の色に百分率も供されたならば それ ／
~ELSE_ ε
］
◎
Let p1 be the first percentage＼
</li>
	<li>
%p2 ~LET ［
2 個目の色に百分率も供されたならば それ ／
~ELSE_ ε
］
◎
and p2 the second one.
</li>
	<li>
~IF［
%p1 ~EQ ε
］~AND［
%p2 ~EQ ε
］
⇒＃
%p1 ~SET 50%；
%p2 ~SET 50%
（これは 2 個の色を等しく混合する）
◎
If both percentages are omitted, they each default to 50% (an equal mix of the two colors).
</li>
	<li>
~ELIF［
%p2 ~EQ ε
］
⇒
%p2 ~SET 100% ~MINUS %p1
◎
Otherwise, if p2 is omitted, it becomes 100% - p1
</li>
	<li>
~ELIF［
%p1 ~EQ ε
］
⇒
%p1 ~SET 100% ~MINUS %p2
◎
Otherwise, if p1 is omitted, it becomes 100% - p2
</li>
	<li>
%総和 ~LET %p1 ~PLUS %p2
◎
↓</li>
	<li>
~IF［
%総和 ~EQ 0%
］
⇒
関数は妥当でない
◎
If the percentages sum to zero, the function is invalid.
</li>
	<li>
<p>
~ELSE：
</p>
		<ol>
			<li>
%拡縮率 ~LET 100% ~DIV %総和
</li>
			<li>
%p1 ~SET %p1 ~MUL %拡縮率
</li>
			<li>
%p2 ~SET %p2 ~MUL %拡縮率
</li>
			<li>
~IF［
%総和 ~LT 100%
］
⇒
%総和 を “~alpha乗算子” として保存する
【以下で利用される】
</li>
		</ol>
◎
Otherwise, if both are provided and add up to greater than 100%, they are scaled accordingly so that they add up to 100%.
◎
Otherwise, if both are provided and add up to less than 100%, the sum is saved as an alpha multiplier. They are then scaled accordingly so that they add up to 100%.
◎
This means that p1 becomes p1 / (p1 + p2) and p2 becomes p2 / (p1 + p2).
</li>
</ol>
</div>

<div class="example" id="ex-mix-syntactic">
<p>
したがって，次の各~構文-形は、互いに等価になる：
◎
These syntactic forms are thus all equivalent:
</p>

<pre class="lang-css">
color-mix(in lch, purple 50%, plum 50%)
color-mix(in lch, purple 50%, plum)
color-mix(in lch, purple, plum 50%)
color-mix(in lch, purple, plum)
color-mix(in lch, plum, purple)
color-mix(in lch, purple 80%, plum 80%)
</pre>

<p>
これらはどれも，~LCH内で［
`purple^vc, `plum^vc
］を 50% ずつ混合した結果を生産する
⇒
`lch(51.51% 52.21 325.8)^v
（ `rgb(68.51% 36.01% 68.29%)^vc ）
◎
All produce a 50-50 mix of purple and plum, in lch: lch(51.51% 52.21 325.8) which is rgb(68.51% 36.01% 68.29%).
</p>

<p>
しかしながら，次の形は、その~alphaは 1 未満になるので，`同じでない^em：
◎
However, this form is not the same, as the alpha is less than one:
</p>

<pre class="lang-css">
color-mix(in lch, purple 30%, plum 30%)
</pre>

<p>
これが生産する結果は
⇒
`lch(51.51% 52.21 325.8 / 0.6)^v
（ `rgb(68.51% 36.01% 68.29% / 0.6)^vc ）
◎
This produces lch(51.51% 52.21 325.8 / 0.6) which is rgb(68.51% 36.01% 68.29% / 0.6).
</p>
</div>

<div class="algo">
<p>
両~百分率とも正規化したなら、結果は，次の~algoにより生産される：
◎
After normalizing both percentages, the result is produced via the following algorithm:
</p>
<ol>
	<li>
両~色とも，
`color-space$t に指定された`色~空間$へ変換する
— 色~空間の色域が所与の色が属するそれより狭い場合、色域の対応付けが生じることになる。
◎
Both colors are converted to the specified &lt;color-space&gt;. If the specified color space has a smaller gamut than the one in which the color to be adjusted is specified, gamut mapping will occur.
</li>
	<li>
<p>
2 つの色を
<a href="~CSSCOLOR#interpolation">指定された色~空間~内で補間する</a>
— 指定された色~空間に応じて：
◎
Colors are then interpolated in the specified color space, as described in CSS Color 4 § 13 Interpolation.＼
</p>
		<ul>
			<li>
`円柱な極-座標$【！cylindrical-polar-color space】である場合、
`hue-adjuster$t は，
<a href="~CSSCOLOR#hue-interpolation">色相の補間</a>を制御する。
`hue-adjuster$t は指定されていない場合、
`shorter^v が指定されたかのようになる。
◎
If the specified color space is a cylindrical-polar-color space, then the &lt;hue-adjuster&gt; controls the interpolation of hue, as described in CSS Color 4 § 13.3 Hue interpolation.＼
If no &lt;hue-adjuster&gt; is specified, it is as if shorter had been specified.＼
</li>
			<li>
`矩形な直交-座標$【！rectangular-orthogonal-color space】である場合、
`hue-adjuster$t を指定しても~errorではないが，その効果は無い。
◎
If the specified colorspace is a rectangular-orthogonal-color space, then specifying a &lt;hue-adjuster&gt; is not an error, but has no effect.
</li>
		</ul>
	</li>
	<li>
百分率を正規化するときに “~alpha乗算子” が生産された場合、
補間した結果の~alpha成分を~alpha乗算子で乗算する。
◎
If an alpha multiplier was produced during percentage normalization, the alpha component of the interpolated result is multiplied by the alpha multiplier.
</li>
</ol>
</div>

<p>
混合した結果は、各~色が，それに指定された百分率を占めるような色になる。
◎
The result of mixing is the color at the specified percentage along the progression of the second color to the first color.
</p>

<p class="note">注記：
特に，［
0% ／ 100%
］は［
他方の色／当の色
］を指定された色~空間~内に変換した結果を返す。
◎
Note: As a corrollary, a percentage of 0% just returns the other color converted to the specified color space, and a percentage of 100% returns the same color converted to the specified color space.
</p>

<div class="example" id="ex-mix-lch-peru40">
<p>
この例は、
`peru^vc 40%,
`palegoldenrod^vc 60% による混合を生産する。
◎
This example produces a mixture of 40% peru and 60% palegoldenrod.
</p>

<pre class="lang-css">
color-mix(in lch, peru 40%, palegoldenrod)
</pre>

<p>
混合するときは、~LCH色~空間~内で行われる。
中立な L 軸~~方向から見た俯瞰図は：
◎
The mixing is done in lch() color space. Here is a top-down view, looking along the neutral L axis:
</p>

<figure>
<p class="alt" hidden id="_dgm-CH-mixing">
~CIE~Lab色~空間の L=50 平面を示す。
2 つの色は、この平面~上で混合され，視覚-化される
— 中間~色は、図に示される円弧~上に乗る。
◎
Show the L=50 plane of the CIE Lab colorspace. Two colors to be mixed are visualized on this plane, with an arc to show where the intermediate colors lie.
</p>

<figcaption>
`peru^nc と `palegoldenrod^nc の混合。
`peru^nc の色相は，正な `a^ 軸から測定される角度 63.677° になる一方、
`palegoldenrod^nc の色相は， 98.834° になる。
`peru^nc の色度（ L 軸からの距離）は， 54.011 になる一方、
`palegoldenrod^nc の色度は， 31.406 になる。
様々な比による混合は、図の曲線~上に乗る。
40% 対 60% による混合も，そこに示される。
◎
Mixtures of peru and palegoldenrod. Peru has a hue angle, measured from the positive a axis, of 63.677 degrees while palegoldenrod has a hue angle of 98.834 degrees. Peru has a chroma, or distance from the central neutral axis, of 54.011 while palegoldenrod has a chroma of 31.406. Mixtures lie along the curve. A 40%/60% mixture is shown.
</figcaption></figure>

<p>
計算は、次に従う：
◎
The calculation is as follows:
</p>
<ul>
	<li>
`peru^vc =
`lch(62.253% 54.011 63.677)^v
◎
peru is lch(62.253% 54.011 63.677)
</li>
	<li>
`palegoldenrod^vc =
`lch(91.374% 31.406 98.834)^v
◎
palegoldenrod is lch(91.374% 31.406 98.834)
</li>
	<li>
混合した明度 =
62.253 ~MUL 40 ~DIV 100 ~PLUS 91.374 ~MUL (100 ~MINUS 40) ~DIV 100 = 79.7256
◎
the mixed lightness is 62.253 * 40/100 + 91.374 * (100-40)/100 = 79.7256
</li>
	<li>
混合した色度 =
54.011 ~MUL 40 ~DIV 100 ~PLUS 31.406 ~MUL (100 ~MINUS 40) ~DIV 100 = 40.448
◎
the mixed chroma is 54.011 * 40/100 + 31.406 * (100-40)/100 = 40.448
</li>
	<li>
混合した色相 =
63.677 ~MUL 40 ~DIV 100 ~PLUS 98.834 ~MUL (100 ~MINUS 40) ~DIV 100 = 84.771
◎
the mixed hue is 63.677 * 40/100 + 98.834 * (100-40)/100 = 84.771
</li>
	<li>
混合した結果は
`87.41% 76.03% 47.64%^rgb
`lch(79.7256% 40.448 84.771)^v
◎
the mixed result is lch(79.7256% 40.448 84.771)
</li>
</ul>
</div>

<div class="example" id="ex-mix-lch-teal65">
<p>
この例は、
`lch$v 色~空間~内で
`teal^nc と `olive^nc の混合を生産する
— ~LCHの各~channelが `teal^nc は値の 65%, `olive^nc は値の 35% になるよう。
◎

This example produces the mixture of teal and olive, in lch color space, with each lch channel being 65% of the value for teal and 35% of the value for olive.
</p>

<p class="note">注記：
色相と色度に対する補間-法は、中間~色を端点~色と同じ彩度に保つ。
◎
Note: interpolating on hue and chroma keeps the intermediate colors as saturated as the endpoint colors.
</p>

<pre class="lang-css">
color-mix(in lch, teal 65%, olive);
</pre>

<figure>
<p class="alt" hidden id="_dgm-CH-mixing3">
~CIE~Lab色~空間の L=50 平面を示す。
2 つの色は、この平面~上で混合され，視覚-化される
— 中間~色は、図に示される円弧~上に乗る。
◎
Show the L=50 plane of the CIE Lab colorspace. Two colors to be mixed are visualized on this plane, with an arc to show where the intermediate colors lie.
</p>
<figcaption>
`teal^nc と `olive^nc の混合。
`teal^nc の色相は、正な `a^ 軸から測定される角度 196.4524° になる一方、
`olive^nc の色相は 99.5746° になる。
`teal^nc の色度（ L 軸からの距離）は 31.6903 になる一方、
`olive^nc の色度は 56.8124 になる。
様々な比による混合は、図の点線~上に乗る。
65% 対 35% による混合も，そこに示される。
◎
Mixtures of teal and olive. Teal has a hue angle, measured from the positive a axis, of 196.4524 degrees while olive has a hue angle of 99.5746 degrees. Teal has a chroma, or distance from the central neutral axis, of 31.6903 while olive has a chroma of 56.8124. Mixtures lie along the dashed curve. A 65%/35% mixture is shown.
</figcaption></figure>

<p>
計算は、次に従う：
◎
The calculation is as follows:
</p>
<ul>
	<li>
~sRGB `teal^vc （ `#008080^v ） =
`lch(47.9855% 31.6903 196.4524)^v
◎
sRGB teal (#008080) is lch(47.9855% 31.6903 196.4524)
</li>
	<li>
~sRGB `olive^vc （ `#808000^v ） =
`lch(52.1496% 56.8124 99.5746)^v
◎
sRGB olive (#808000) is lch(52.1496% 56.8124 99.5746)
</li>
	<li>
混合した明度 =
47.9855 ~MUL 0.65 ~PLUS 52.1496 ~MUL 0.35 = 49.4429
◎
mixed lightness is 47.9855 * 0.65 + 52.1496 * 0.35 = 49.4429
</li>
	<li>
混合した色度 =
31.6903 ~MUL 0.65 ~PLUS 56.8124 ~MUL 0.35 = 40.4830
◎
mixed chroma is 31.6903 * 0.65 + 56.8124 * 0.35 = 40.4830
</li>
	<li>
混合した色相 =
196.4524 ~MUL 0.65 ~PLUS 99.5746 ~MUL 0.35 = 162.5452
◎
mixed hue is 196.4524 * 0.65 + 99.5746 * 0.35 = 162.5452
</li>
	<li>
混合した結果は
`lch(49.4429% 40.4830 162.5452)^v
（青みがかった~green `rgb(7.7377% 52.5730% 37.3213%)^vc ）になる。
◎
mixed result is lch(49.4429% 40.4830 162.5452)
◎
which is a slightly-blueish green: rgb(7.7377% 52.5730% 37.3213%)
</li>
</ul>
</div>

<p>
混合する色~空間としてどれを選ぶかは、結果の効果を大きく左右する。
◎
The choice of mixing colorspace can have a large effect on the end result.
</p>

<div class="example" id="ex-mix-colorspaces-black-white">
<p>
この例では、
3 種の異なる色~空間~内で
`white^nc と `black^nc を 50% ずつ混合する。
◎
This example is a 50% mix of white and black, in three different color spaces.
</p>

<pre class="lang-css">
color-mix(in lch, white, black);
color-mix(in xyz, white, black);
color-mix(in srgb, white, black);
</pre>

<p>
計算は、次に従う：
◎
The calculation is as follows:
</p>
<ul>
	<li>
~sRGB `white^vc【！(#008080)】 = `lch(100% 0 0)^v
◎
sRGB white (#008080) is lch(100% 0 0)
</li>
	<li>
~sRGB `black^vc 【！(#808000)】 = `lch(0% 0 0)^v
◎
sRGB black (#808000) is lch(0% 0 0)
</li>
	<li>
~LCH内で混合した結果は
⇒
`47% 47% 47%^rgb
`lch(50% 0 0)^v
◎
The mix in LCH is lch(50% 0 0)
</li>
	<li>
~XYZ内で混合した結果は
⇒
`74% 74% 74%^rgb
`lch(76% 0 0)^v
◎
The mix in XYZ is lch(76% 0 0)
</li>
	<li>
~sRGB内で混合した結果は
⇒
`50% 50% 50%^rgb
`lch(53.4% 0 0)^v
◎
The mix in sRGB is lch(53.4% 0 0)
</li>
</ul>

<p>
~LCH内で混合した結果は、正確に期待されるとおり，
L 値 50% 
— ちょうど~~中間の~gray —
になる（
~Lab内で混合しても同じになる
— ~LCHと~Labの明度（ L ）軸は同じなので）。
◎
The mix in LCH gives an L value of 50%, a perfect mid gray, exactly as expected (mixing in Lab would do the same, as the Lightness axis is the same in LCH and Lab).
</p>

<p>
~XYZ内で混合した結果は，明になり過ぎる
— ~XYZは、光に線形だが知覚的に一様ではないので。
~sRGB内で混合した結果は，少し明になり過ぎる
— ~sRGBは、知覚的に一様でも光に線形でもない。
◎
The mix in XYZ gives a result that is too light; XYZ is linear-light but is not perceptually uniform. The mix in sRGB gives a result that is a bit too light; sRGB is neither perceptually uniform nor linear-light.
</p>
</div>

<div class="example">
<p>
この例は、
`xyz$v 色~空間~内で， 2 個の色 ~redと~sky-blue の混合を生産する
— その色相が ~redの色相の 75.23% （したがって，~blueの色相の 24.77% ）になるよう。
◎
This example produces the mixture of the a red and a sky blue, in xyz color space, with the mixture being 75.23% of that of the red (and thus, 24.77% of that of the blue).
</p>

<pre class="lang-css">
color-mix(in xyz, rgb(82.02% 30.21% 35.02%) 75.23%, rgb(5.64% 55.94% 85.31%));
</pre>

<p>
計算は、次に従う：
◎
The calculation is as follows:
</p>
<ul>
	<li>
~red
`rgb(82.02% 30.21% 35.02%)^vc
= `lch(52% 58.1 22.7)^v
は
⇒
X=0.3214, Y=0.2014, Z=0.0879
◎
rgb(82.02% 30.21% 35.02%) is lch(52% 58.1 22.7) which is X=0.3214, Y=0.2014, Z=0.0879.
</li>
	<li>
~sky-blue
`rgb(5.64% 55.94% 85.31%)^vc
= `lch(56% 49.1 257.1)^v
は
⇒
X=0.2070, Y=0.2391, Z=0.5249.
◎
rgb(5.64% 55.94% 85.31%) is lch(56% 49.1 257.1) which is X=0.2070, Y=0.2391, Z=0.5249.
</li>
	<li>
混合した結果の X
= (0.3214 ~MUL 0.7523) ~PLUS (0.2070 ~MUL (1 ~MINUS 0.7523))
= 0.29306
◎
mixed result X=(0.3214 * 0.7523) + (0.2070 * (1 - 0.7523)) = 0.29306.
</li>
	<li>
混合した結果の Y
= (0.2014 ~MUL 0.7523) ~PLUS (0.2391 ~MUL (1 ~MINUS 0.7523))
= 0.21074
◎
mixed result Y=(0.2014 * 0.7523) + (0.2391 * (1 - 0.7523)) = 0.21074.
</li>
	<li>
混合した結果の Z
= (0.0879 ~MUL 0.7523) ~PLUS (0.5249 ~MUL (1 ~MINUS 0.7523))
= 0.19614
◎
mixed result Z=(0.0879 * 0.7523) + (0.5249 * (1 - 0.7523)) = 0.19614.
</li>
	<li>
混合した結果は
⇒
`lch(53.0304% 38.9346, 352.8138)^v
（ `rgb(72.300% 38.639% 53.557%)^vc ）
◎
mix result is lch(53.0304% 38.9346, 352.8138) which is rgb(72.300% 38.639% 53.557%)
</li>
</ul>
</div>

<div class="example" id="ex-mix-blue-white">
<p>
この例は、
3 種の異なる色~空間~内で，~whiteと~blueを 50% ずつ混合する：
◎
This example is a 50% mix of white and blue, in three different color spaces.
</p>

<pre class="lang-css">
color-mix(in lch, white, blue);
color-mix(in oklch, white, blue);
color-mix(in srgb, white, blue);
</pre>

<p>
計算は次に従う：
◎
The calcuation is as follows:
</p>
<ul>
	<li>
`white^vc
= `rgb(100% 100% 100%)^v
= `lch(100% 0 none)^v
= `oklch(100% 0 none)^v
◎
white is rgb(100% 100% 100%) which is lch(100% 0 none) which is oklch(100% 0 none)
</li>
	<li>
`blue^vc
= `rgb(0% 0% 100)^v
= `lch(29.5683% 131.201 301.364)^v
= `oklch(45.201% 0.31321 264.052)^v
◎
blue is rgb(0% 0% 100%) which is lch(29.5683% 131.201 301.364) which is oklch(45.201% 0.31321 264.052)
</li>
	<li>
`lch^v 内で混合した結果は、かなり~purpleになる
⇒
`68.594% 53.794% 100%^rgb
`lch(64.7841% 65.6008 301.364)^v
◎
mix in lch is lch(64.7841% 65.6008 301.364) which is quite purple
</li>
	<li>
`oklch^v 内で混合した結果は
⇒
`45.304% 63.808% 100%^rgb
`oklch(72.601 0.15661 264.052)^v
◎
mix in oklch is oklch(72.601 0.15661 264.052)
</li>
	<li>
`srgb^v 内で混合した結果は、少し~purpleになる
⇒
`50% 50% 100%^rgb
`rgb(50% 50% 100)^v
◎
mix in srgb is rgb(50% 50% 100%) which is also a bit purple
</li>
</ul>
</div>

	</section>
	<section id="colorcontrast">
<h2 title="Selecting the most contrasting color: the color-contrast() function">4. 最も~contrastが高い色の選定-法： `color-contrast^f 関数</h2>

<p>
この関数は、順に，次に挙げる引数をとる：
◎
This function takes,＼
</p>
<ol>
	<li>
%基準~色
— 1 個の色（概して，背景~色が与えられるが、そうすることは必要とされない）。
◎
firstly, a single color (typically a background, but not necessarily),＼
</li>
	<li>
%色~list
— 2 個以上の色からなる~list。
◎
secondly, a list of two or more colors,＼
</li>
	<li>
省略可能な %~target~contrast
— 欲される `§ ~contrast（最小）$ `WCAG21$r を与える。
◎
and thirdly, an optional target luminance contrast [WCAG21].
</li>
</ol>

<p>
%色~list を成す各~色に対し、
その`相対~輝度$と`~contrast比$が計算される。
◎
For each color in the list,＼
</p>

<p>
所与の色の
`相対~輝度@
は、`~D65$に相対的に計算される~CIE輝度である。
【 `WCAG21$r に定義される<a href="~TR/WCAG21/#dfn-relative-luminance">相対~輝度</a>が意図される。】
◎
the CIE Luminance (Y) is calculated, relative to a D65 whitepoint.
</p>

<p>
所与の色の
`~contrast比@
は、
その色と %基準~色 の`輝度~contrast比$ `WCAG21$r を表す
— それは、次の~~式で計算される
⇒
`~contrast比$ ~EQ ( 明な方の色の輝度 ~PLUS 0.05 ) ~DIV ( 暗な方の色の輝度 ~PLUS 0.05 )
◎
For each pair of colors, the WCAG 2.1 contrast is calculated: contrast = (Yl + 0.05) / (Yd + 0.05) where Yd is the luminance of the darker color in the pair and Yl is the luminance of the lighter color.＼
</p>

<p>
この~~式の係数 0.05 は、観視~flare†が寄与する輝度を表現する。
【†表示~機器~表面の反射など，観視~条件により生じる光。】
◎
The factor 0.05 represents the luminance contribution of the viewing flare.
</p>

<div class="example">
<p>
%基準~色 は `color(display-p3 0.38 0.11 0.05)^v であったとする。
◎
Suppose that the single color was
• color(display-p3 0.38 0.11 0.05)
</p>

<p>
%色~list 内のある色が `yellow^nc ならば、
その`~contrast比$の計算は，次に従う:
◎
while the first color in the list was
• yellow
◎
The calculation is as follows:
</p>

<ul>
	<li>
`41.482% 7.941% 1.375%^rgb
`color(display-p3 0.38 0.11 0.05)^v
= `color(xyz 0.06191 0.03568 0.00463)^v
の`相対~輝度$は 0.03568
◎
color(display-p3 0.38 0.11 0.05) is color(xyz 0.06191 0.03568 0.00463) so the relative luminance is 0.03568
</li>
	<li>
`yellow^vc
= `rgb(100% 100% 0)^v
= `color(xyz 0.76998 0.92781 0.13853)^v
の相対~輝度は 0.92781
◎
yellow is rgb(100% 100% 0%) which is color(xyz 0.76998 0.92781 0.13853) so the relative luminance is 0.92781
</li>
	<li>
なので、`~contrast比$は
⇒
(0.92781 + 0.05) / (0.03568 + 0.05) = `11.4123^cr
◎
the contrast is (0.92781 + 0.05) / (0.03568 + 0.05) = 11.4123
</li>
</ul>
</div>

<p>
関数は、 %色~list 内の次を満たす色のうち，最初のものを選定する
【精確には、下に与える~algoに従う】：
◎
↓</p>
<ul class="switch">
	<li>
%~target~contrast が指定されている場合
⇒
`~contrast比$ ~GTE %~target~contrast
◎
It then selects from that list the first color to meet or exceed the target contrast.＼
</li>
	<li>
他の場合
⇒
`~contrast比$が %色~list 内で最も高い
◎
If no target is specified, it selects the first color with the highest contrast to the single color.
</li>
</ul>

<p>
%基準~色 と %色~list は~keyword `vs^v で分離される。
%色~list と %~target~contrast （もし在れば）は~keyword `to^v で分離される。
◎
The single color is separated from the list with the keyword vs and the target contrast, if present, is separated from the list with the keyword to.
</p>

<pre class="prod">
`color-contrast@f
    = color-contrast(
        `color$t vs `color$t#{2,}
        [ to [`number$t | `AA$v | `AA-large$v | `AAA$v | `AAA-large$v] ]? )
</pre>

<p>
~keyword［
`AA@v
は `4.5^v ／
`AA-large@v
は `3^v ／
`AAA@v
は `7^v ／
`AAA-large@v
は `4.5^v
］に等価。
◎
The keyword AA is equivalent to 4.5,＼
AA-large is equivalent to 3,＼
AAA is equivalent to 7,＼
and AAA-large is equivalent to 4.5 .
</p>

<p class="trans-note">【
“AA” は、
<a href="~TR/WCAG21/#wcag-2-layers-of-guidance">~accessibilityの達成基準（ `success criteria^en ）</a>としての
~level AA を表す。
`AA-large^v の `large^en は、
“大きい字” （
<a href="~TR/WCAG21/#dfn-large-scale">`large slace text^en</a>
）用を意味する。
（ “AAA” についても同様。）
】</p>

<div class="example">
<pre class="lang-css">
color-contrast(wheat vs tan, sienna, var(--myAccent), #d2691e)
</pre>

<p>
計算は、次に従う：
◎
The calculation is as follows:
</p>
<ul>
	<li>
%基準~色 `wheat^vc （ `#f5deb3^v ）の`相対~輝度$は 0.749 。
◎
wheat (#f5deb3), the background, has relative luminance 0.749
</li>
	<li>
`tan^vc （ `#d2b48c^v ）の相対~輝度は 0.482 なので、~contrast比は `1.501^cr になる。
◎
tan (#d2b48c) has relative luminance 0.482 and contrast ratio 1.501
</li>
	<li>
`sienna^vc （ `#a0522d^v ）の相対~輝度は 0.137 なので、~contrast比は `4.273^cr になる。
◎
sienna (#a0522d) has relative luminance 0.137 and contrast ratio 4.273
</li>
	<li>
ここでの `--myAccent^p の値は `#b22222^vc とする
— その相対~輝度は 0.107 なので、~contrast比は `5.081^cr になる。
◎
Suppose myAccent has the value #b22222:
◎
#b22222 has relative luminance 0.107 and contrast ratio 5.081
</li>
	<li>
`#d2691e^vc の相対~輝度は 0.305 なので、~contrast比は `2.249^cr になる。
◎
#d2691e has relative luminance 0.305 and contrast ratio 2.249
</li>
</ul>

<p>
最も高い~contrast比は `5.081^cr なので、
`var(--myAccent)^v が選定される。
◎
The highest contrast ratio is 5.081 so var(--myAccent) wins
</p>
</div>

<div class="example">
<pre class="lang-css">
color-contrast(wheat vs bisque, darkgoldenrod, olive, sienna, darkgreen, maroon to AA)
</pre>

<p>
計算は、次に従う：
◎
The calculation is as follows:
</p>

<ul>
	<li>
%基準~色 `wheat^vc （ `#f5deb3^v ）の`相対~輝度$は 0.749 である。
◎
wheat (#f5deb3), the background, has relative luminance 0.749
</li>
	<li>
`bisque^vc （ `#ffe4c4^v ）の相対~輝度は 0.807 なので、~contrast比は `1.073^cr になる。
◎
bisque (#ffe4c4) has relative luminance 0.807 and contrast ratio 1.073
</li>
	<li>
`darkgoldenrod^vc （ `#b8860b^v ）の相対~輝度は 0.273 なので、~contrast比は `2.477^cr になる。
◎
darkgoldenrod (#b8860b) has relative luminance 0.273 and contrast ratio 2.477
</li>
	<li>
`olive^vc （ `#808000^v ）の相対~輝度は 0.200 なので、~contrast比は `3.193^cr になる。
◎
olive (#808000 ) has relative luminance 0.200 and contrast ratio 3.193
</li>
	<li>
`sienna^vc （ `#a0522d^v ）の相対~輝度は 0.137 なので、~contrast比は `4.274^cr になる。
◎
sienna (#a0522d) has relative luminance 0.137 and contrast ratio 4.274
</li>
	<li>
`darkgreen^vc （ `#006400^v ）の相対~輝度は 0.091 なので、~contrast比は `5.662^cr になる。
◎
darkgreen (#006400 ) has relative luminance 0.091 and contrast ratio 5.662
</li>
	<li>
`maroon^vc （ `#800000^v ）の相対~輝度は 0.046 なので、~contrast比は `8.333^cr になる。
◎
maroon (#800000 ) has relative luminance 0.046 and contrast ratio 8.333
</li>
</ul>

<p>
`darkgreen^vc が，
欲される~contrast比 4.5 を満たす %色~list 内の最初の色を与える。
◎
The first color in the list which meets the desired contrast ratio of 4.5 is darkgreen.
</p>
</div>

<div class="example">
<pre class="lang-css">
color-contrast(wheat vs bisque, darkgoldenrod, olive, sienna, darkgreen, maroon to 5.8)
</pre>

<p>
各~色の`相対~輝度$と~contrast比は、前の例と同じ。
◎
The calculation is as follows:
• the relative luminances and contrast ratios are the same as the previous example.
</p>

<p>
`maroon^vc が，
欲される~contrast比 5.8 を満たす %色~list 内の最初の色を与える。
◎
The first color in the list which meets the desired contrast ratio of 5.8 is maroon.
</p>
</div>

<div class="algo">
<p>
`color-contrast$f 関数が表現する色は、次に従って決定される
【この訳では、原文による条項群を~algo化して述べる】
：
</p>
<ol>
	<li>
<p>
~IF［
%~target~contrast は指定されている
］：
</p>
		<ol>
			<li>
%色~list を成す
~EACH( %色 )
に対し
⇒
~IF［
%色 の`~contrast比$ ~GTE %~target~contrast
］
⇒
~RET %色
</li>
			<li>
~IF［
`black^nc の`~contrast比$ ~GT `white^v の`~contrast比$
］
⇒
~RET `black$nc
</li>
			<li>
~IF［
`white^nc の`~contrast比$ ~GT `black^nc の`~contrast比$
］
⇒
~RET `white$nc
</li>
			<li>
~RET ［
`black^nc ／ `white^nc
］どちらか
【どちらになるかは、原文には指定されていない。】
</li>
		</ol>
	</li>
	<li>
<p>
~ELSE：
</p>
		<ol>
			<li>
%選定される色 ~LET %色~list を成す最初の色
</li>
			<li>
%色~list を成す 2 個目以降の
~EACH( %色 )
に対し
⇒
~IF［
%色 の`~contrast比$ ~GT %選定される色 の`~contrast比$
］
⇒
%選定される色 ~SET %色
</li>
			<li>
~RET %選定される色
</li>
		</ol>
	</li>
</ol>

◎
The colors in the list (after the keyword vs) are tested sequentially, from left to right; a color is the temporary winner if it has the highest contrast of all those tested so far.
◎
List traversal is terminated once the target contrast has been met or exceeded.
◎
Once the end of the list is reached, if there is no target contrast, the current temporary winner is the overall winner. Thus, if two colors in the list happen to have the same contrast, the earlier in the list wins because the later one has the same contrast, not higher.
◎
If there is a target contrast, and the end of the list is reached without meeting that target, either white or black is returned, whichever has the higher contrast.
</div>

<div class="example">
<pre class="lang-css">
color-contrast(wheat vs bisque, darkgoldenrod, olive to AA)
</pre>

<p>
各~色の`相対~輝度$と~contrast比は、前の例と同じ。
◎
The calculation is as follows:
• the relative luminances and contrast ratios are the same as the previous example.
</p>

<p>
%色~list 内に欲される~contrast比 4.5 を満たす色は無いので、
`black^vc が返される
— その~contrast（ 15.982 ）は `white^vc（ 1.314 ）のそれより高いので。
◎
No color in the list meets the desired contrast ratio of 4.5, so black is returned as the contrast (15.982) is higher than that of white (1.314).
</p>
</div>

<div class="example">
<pre class="lang-css">
foo {
  --bg: hsl(200 50% 80%);
  --purple-in-hsl: hsl(300 100% 25%);
  color: color-contrast(var(--bg) vs hsl(200 83% 23%), purple, var(--purple-in-hsl));
}
</pre>


<p>
計算は、次に従う：
◎
The calculation is as follows:
</p>
<ul>
	<li>
`--bg^p の値 `hsl(200 50% 80%)^vc （ `rgb(179 213 230)^v ）の`相対~輝度$は 0.628835 である。
◎
--bg is rgb(179 213 230) which has relative luminance 0.628835
</li>
	<li>
`hsl(200 83% 23%)^vc （ `rgb(10 75 107)^v ）の相対~輝度は 0.061575 なので、~contrast比は `6.08409^cr になる。
◎
hsl(200 83% 23%) is rgb(10 75 107) which has relative luminance 0.061575 and contrast ratio 6.08409
</li>
	<li>
`purple^vc （ `rgb(128 0 128)^v ）の相対~輝度は 0.061487 なので、~contrast比は `6.08889^cr になる。
◎
purple is rgb(128 0 128) which has relative luminance 0.061487 and contrast ratio 6.08889
</li>
	<li>
`--purple-in-hsl^p の値 `hsl(300 100% 25%)^vc （ `rgb(128 0 128)^vc ）の相対~輝度は 0.061487 なので、~contrast比は `6.08889^cr になる。
これは， `purple^nc に対する~contrastより大きくないので、
`purple^nc が優先される。
◎
--purple-in-hsl is also rgb(128 0 128) which has relative luminance 0.061487 and contrast ratio 6.08889. This is not greater than the contrast for purple, so purple wins.
</li>
</ul>

<p>
【！are shown to six significant figures？】
この例は、［
計算に先立って低-精度に丸めると，間違った結果を与える
］ことをデモる（ `0.061575^cr は `0.061487^cr に, `6.08409^cr は `6.08889^cr にとても近い）。
◎
The calculated values here are shown to six significant figures, to demonstrate that early rounding to a lower precision would have given the wrong result (0.061575 is very close to 0.061487; 6.08409 is very close to 6.08889).
</p>
</div>

		<section id="resolving-contrast">
<h3 title="Resolving color-contrast() values">4.1. `color-contrast^f 値の解決-法</h3>

<p>
`color-contrast$f 関数の算出d値は、
指定された関数に次を適用した結果になる：
◎
The computed value is the specified color-contrast() function with＼
</p>
<ul>
	<li>
各 `color$t ~parameterは、
~level 4 の
<a href="~CSSCOLOR#resolving-color-values">§ `color^t 値の解決-法</a>
に則って解決する。
◎
each &lt;color&gt; parameter resolved according to CSS Color 4 § 4.6 Resolving &lt;color&gt; Values,＼
</li>
	<li>
~keyword［
`AA$v ／ `AA-large$v ／ `AAA$v ／ `AAA-large$v
］は、
各自に対応する数量-値に置換する。
◎
and the keywords AA, AA-large, AAA, AAA-large replaced with their corresponding numeric value.
</li>
</ul>

<p>
使用~値は、最優先な~contrastを伴う色を，~level 4 の
<a href="~CSSCOLOR#resolving-color-values">§ `color^t 値の解決-法</a>
に則って解決した結果になる。
◎
The used value is the winning color resolved according to CSS Color 4 § 4.6 Resolving &lt;color&gt; Values.
</p>

<div class="example">
<p>
例えば，
`currentcolor$nc の値【使用~値】は
`rgb(179 213 230)^vc
であったとするなら、
指定された
⇒
`color-contrast(currentcolor vs hsl(200 83% 23%), purple to AA)^v
◎
For example, given a current color value of rgb(179 213 230), the value
• color-contrast(currentColor vs hsl(200 83% 23%), purple to AA)
</p>

<p>
の算出d値, 使用~値は、順に
⇒＃
`color-contrast(currentcolor vs rgb(10 75 107), rgb(128 0 128) to 4.5)^v ／
`rgb(128 0 128)^v
◎
has the computed value
• color-contrast(currentColor vs rgb(10 75 107), rgb(128 0 128) to 4.5)
◎
and the used value
• rgb(128 0 128)
</p>
</div>

		</section>
	</section>
	<section id="relative-colors">
<h2 title="Relative color syntax">5. 相対~色~構文</h2>

<p>
この仕様の以前の~levelでは、色~関数は，絶対的な方式でしか色を指定できなかった
— すべての色~channelを直に指定することにより。
◎
In previous levels of this specification, the color functions could only specify colors in an absolute manner, by directly specifying all of the color channels.
</p>

<p>
新たな
`相対~色@
（ `relative color^en ）構文は、色~関数を利用して既存の色を改変することを許容する。
それは、
`起点~色@
（ `origin color^en ）を指定する
— その場合，各~色~channelは、直に指定することも，起点~色から（場合によっては、`~math関数$で改変した上で）とることもできる。
【そのような構文を利用する色~関数は、 “相対~色~関数” と総称される。】
◎
The new relative color syntax allows existing colors to be modified using the color functions: if an origin color is specified, then each color channel can either be directly specified, or taken from the origin color (and possibly modified with math functions).
</p>

<p>
各~関数において`相対~色$を収容するための変更点を成す精確な詳細は，以下に挙げられるが、いずれも，共通な構造に従う：
◎
The precise details of each function’s changes to accomodate relative colors are listed below, but they all follow a common structure:
</p>

<ul>
	<li>
関数の先頭に，`起点~色$を次の~~形で指定できる
⇒
<code class="prod">from `color$t</code>
◎
An origin color can be specified with a ''from &lt;color&gt;'' value at the start of the function.
</li>
	<li>
`起点~色$を指定した場合、残りの引数は，通常通り直に指定することも，
`起点~色$を成す ある~channelを参照rしている
`~channel~keyword@
として指定することもできる。
これらの~keywordは、`~math関数$内でも利用でき，`起点~色$の各~channelを動的に改変する。
◎
If an origin color is specified, the remaining arguments can either be specified directly, as normal, be specified as a channel keyword referring to one of the channels of the origin color. Math functions can also use these keywords to do dynamic modifications of the origin color’s channels.
</li>
	<li>
`相対~色~構文$においても、【元の構文における】引数が省略可能かどうかは，変化しない。
しかしながら，~alpha値については、省略された場合の既定は，`起点~色$からとられる（絶対的な構文のときのように， `100%^v が既定にはならない）。
◎
Relative color syntax doesn’t change whether an argument is required or optional. If the alpha value is omitted, however, it defaults to taking from the origin color (rather than defaulting to 100%, as it does in the absolute syntax).
</li>
</ul>

<p>
`起点~色$が当の色~関数と異なる色~関数で指定された場合、各~channelから値をとれるようにするため，最初に当の色~関数の色~空間へ変換される。
◎
If the origin color was originally specified with a different color function, it’s first converted into the chosen color function, so it has meaningful values for the channels.
</p>

<div class="example">
<p>
例えば，ある~theme色が不透明として指定されているが、特定0の~instanceに限り，部分的に透明にする必要がある場合：
◎
For example, if a theme color is specified as opaque, but in a particular instance you need it to be partially transparent:
</p>

<pre class="lang-css">
html { --bg-color: blue; }
.overlay {
  background: rgb(from var(--bg-color) r g b / 80%);
}
</pre>

<p>
この例では、`起点~色$の［
`r^, `g^, `b^
］~channelは変更されない
— そのことは、それらの値を`起点~色$から取り込む~keywordを指定することにより指示される。
一方で，不透明度は、`起点~色$の不透明度に関わらず，少しだけ透明な `80%^v に設定される。
◎
In this example, the r, g, and b channels of the origin color are unchanged, indicated by specifying them with the keywords drawing their values from the origin color, but the opacity is set to 80% to make it slightly transparent, regardless of what the origin color’s opacity was.
</p>
</div>

<div class="example">
<p>
`~math関数$内で`~channel~keyword$を利用すれば、もっと高度な仕方で`起点~色$を操作できる。
◎
By using the channel keywords in a math function, an origin color can be manipulated in more advanced ways.
</p>

<pre class="lang-css">
html { --color: green; }
.foo {
  --darker-accent: lch(from var(--color) calc(l / 2) c h);
}
</pre>

<p>
この例では、`起点~色$を その明度を半分に抑えて暗化する
— 当の色の他の側面を変更することなく。
◎
In this example, the origin color is darkened by cutting its lightness in half, without changing any other aspect of the color.
</p>

<p>
`起点~色$は（実質的には~RGB内の）色~keywordであるが、
`lch$f 関数~内で利用されているので，自動的に~LCH色として解釈されることにも注意。
◎
Note as well that the origin color is a color keyword (effectively RGB), but it’s automatically interpreted as an LCH color due to being used in the lch() function.
</p>
</div>

<div class="example">
<p>
`~channel~keyword$は、ほとんどの`相対~色~構文$の利用においては，対応する引数において利用することになろうが、どの位置でも利用できる。
◎
While most uses of relative color syntax will use the channel keywords in their corresponding argument, you can use them in any position.
</p>
<p>
例えば，色を~grayscale化する大まかな近似を行うなら：
◎
For example, to do a rough approximation of grayscaling a color:
</p>

<pre class="lang-css">
--blue-into-gray: rgb(from var(--color)
                    calc(r * .3 + g * .59 + b * .11)
                    calc(r * .3 + g * .59 + b * .11)
                    calc(r * .3 + g * .59 + b * .11));
</pre>

<p>
これを利用すれば、［
`red$nc は `rgb(30% 30% 30%)^v ／
`green$nc は `rgb(59% 59% 59%)^v ／
`blue$nc は `rgb(11% 11% 11%)^v
］になる。
`darkolivegreen$nc （~RGB値 `rgb(85 107 47)^v ）の様な より~~中間的な色は、およそ `rgb(37% 37% 37%)^v になる。
◎
Using this, red would become rgb(30% 30% 30%), green would become rgb(59% 59% 59%), and blue would become rgb(11% 11% 11%). A more moderate color, like darkolivegreen, which has RGB values rgb(85 107 47), would become approximately rgb(37% 37% 37%).
</p>

<p>
（もっとも， `lch$f 関数を利用すれば、
もっと容易かつ正確aに色を~grayscale化できることに注意
— その色~空間は、ヒトの知覚において より正確aなので：
`lch(from var(--color) l 0 h)^v
は、明度を保全しつつ，色の “~~鮮やかさ” を決定する色度を 0 化する。）
◎
(Note, though, that an easier and more accurate way to grayscale a color is to use the lch() function, as that color space is more accurate to human perception: lch(from var(--color) l 0 h) preserves the lightness, but zeroes out the chroma, which determines how "colorful" the color is.)
</p>
</div>

		<section id="relative-RGB">
<h3 title="Relative RGB colors">5.1. 相対~RGB色</h3>

<p>
`rgb$f 関数の文法は、次のように拡張される：
◎
The grammar of the rgb() function is extended as follows:
</p>

<pre class="prod">
`rgb@f
    = rgb(
        [`percentage$t | `none$nc]{3}
        [ / [`alpha-value$t | `none$nc] ]? )
    | rgb(
        [`number$t{3} | `none$nc]
        [ / [ [`alpha-value$t | `none$nc] ]? )
    | rgb(
        [ from `color$t ]?
        [ [`number$t | `percentage$t | `none$nc] ]{3}
        [ / `alpha-value$t ]? )
`alpha-value@t
    = `number$t
    | `percentage$t
</pre>

<p>
`相対~色~構文$による `rgb$f 関数の中で許容される`~channel~keyword$は：
◎
Within a relative color syntax rgb() function, the allowed channel keywords are:
</p>

<ul>
	<li>
`rgb/r@ck
／
`rgb/g@ck
／
`rgb/b@ck
⇒
`起点~色$を~sRGBへ変換した結果の［
~red／~green／~blue
］~channelに対応する
`percentage$t を与える。
◎
r, g, and b are all &lt;percentage&gt;s that correspond to the origin color’s red, green, and blue channels after its conversion to sRGB
</li>
	<li>
`rgb/alpha@ck
⇒
`起点~色$の~alpha透明度に対応する
`percentage$t を与える。
【 “~alpha透明度（ `alpha transparency^en ）” は、その字義に反して，実際には不透明度（ `opacity^en ）を表す（以下同様）。】
◎
alpha is a &lt;percentage&gt; that corresponds to the origin color’s alpha transparency
</li>
</ul>

<div class="example">
<p>
~sRGB色~空間~内で色~channelを操作するには：
◎
To manipulate color channels in the sRGB color space:
</p>
<pre class="lang-css">
rgb(from indianred 255 g b)
</pre>

<p>
これは、~sRGB値 `indianred^vc（ `rgb(205 92 92)^v ）をとり，~red~channelを 255 に置換する。
その結果は、 `rgb(255 92 92)^vc になる。
◎
This takes the sRGB value of indianred (205 92 92) and replaces the red channel with 255 to give rgb(255 92 92).
</p>
</div>

		</section>
		<section id="relative-HSL">
<h3 title="Relative HSL colors">5.2. 相対~HSL色</h3>

<p>
`hsl$f 関数の文法は、次のように拡張される：
◎
The grammar of the hsl() function is extended as follows:
</p>

<pre class="prod">
`hsl@f
    = hsl(
        [from `color$t]?
        [`hue$t | `none$nc]
        [`percentage$t | `none$nc]
        [`percentage$t | `none$nc]
        [ / [`alpha-value$t | `none$nc] ]? )
</pre>

<p>
`相対~色~構文$による `hsl$f 関数の中で許容される`~channel~keyword$は：
◎
Within a relative color syntax hsl() function, the allowed channel keywords are:
</p>

<ul>
	<li>
`hsl/h@ck
⇒
`起点~色$を~sRGBへ変換した結果の~HSL色相に対応する
`angle$t を与える
— 値は、範囲 [0°, 360°) に正規化される。
◎
h is an &lt;angle&gt; that corresponds to the origin color’s HSL hue after its conversion to sRGB, normalized to a [0deg, 360deg) range
</li>
	<li>
`hsl/s@ck
／
`hsl/l@ck
⇒
`起点~色$を~sRGBへ変換した結果の~HSL［
彩度／明度
］に対応する
`percentage$t を与える。
◎
s and l are &lt;percentage&gt;s that correspond to the origin color’s HSL saturation and lightness after its conversion to sRGB
</li>
	<li>
`hsl/alpha@ck
⇒
`起点~色$の~alpha透明度に対応する
`percentage$t を与える。
◎
alpha is a &lt;percentage&gt; that corresponds to the origin color’s alpha transparency
</li>
</ul>

<div class="example">
<p>
これは、色相~角度に 180° を加算して，補色を与える：
◎
This adds 180 degrees to the hue angle, giving a complementary color.
</p>

<pre class="lang-css">
--accent: lightseagreen;
--complement: hsl(from var(--accent) calc(h + 180deg) s l);
</pre>

<p>
`--accent^p の値 `lightseagreen^nc は
`hsl(177deg 70% 41%)^vc
なので、
`--complement^p は
`hsl(357deg 70% 41%)^vc
になる。
◎
lightseagreen is hsl(177deg 70% 41%), so --complement is hsl(357deg 70% 41%)
</p>
</div>

		</section>
		<section id="relative-HWB">
<h3 title="Relative HWB colors">5.3. 相対~HWB色</h3>

<p>
`hwb$f 関数の文法は、次のように拡張される：
◎
The grammar of the hwb() function is extended as follows:
</p>

<pre class="prod">
`hwb@f
    = hwb(
        [from `color$t]?
        [`hue$t | `none$nc]
        [`percentage$t | `none$nc]
        [`percentage$t | `none$nc]
        [ / [`alpha-value$t | `none$nc] ]? )
</pre>

<p>
`相対~色~構文$による `hwb$f 関数の中で許容される`~channel~keyword$は：
◎
Within a relative color syntax hwb() function, the allowed channel keywords are:
</p>

<ul>
	<li>
`hwb/h@ck
⇒
`起点~色$を~sRGBへ変換した結果の~HWB色相に対応する
`angle$t を与える
— 値は、範囲 [0°, 360°) に正規化される。
◎
h is an &lt;angle&gt; that corresponds to the origin color’s HWB hue after its conversion to sRGB, normalized to a [0deg, 360deg) range
</li>
	<li>
`hwb/w@ck
／
`hwb/b@ck
⇒
`起点~色$を~sRGBへ変換した結果の~HWB［
白度／黒度
］に対応する
`percentage$t を与える。
◎
w and b are &lt;percentage&gt;s that correspond to the origin color’s HWB whiteness and blackness after its conversion to sRGB
</li>
	<li>
`hwb/alpha@ck
⇒
`起点~色$の~alpha透明度に対応する
`percentage$t を与える。
◎
alpha is a &lt;percentage&gt; that corresponds to the origin color’s alpha transparency
</li>
</ul>

		</section>
		<section id="relative-Lab">
<h3 title="Relative Lab colors">5.4. 相対~Lab色</h3>

<p>
`lab$f 関数の文法は、次のように拡張される：
◎
The grammar of the lab() function is extended as follows:
</p>

<pre class="prod">
`lab@f
    = lab(
        [from `color$t]?
        [`percentage$t | `none$nc]
        [`number$t | `none$nc]
        [`number$t | `none$nc]
        [ / [`alpha-value$t | `none$nc] ]? )
</pre>

<p>
`相対~色~構文$による `lab$f 関数の中で許容される`~channel~keyword$は：
◎
Within a relative color syntax lab() function, the allowed channel keywords are:
</p>

<ul>
	<li>
`lab/l@ck
⇒
起点~色の~CIE明度（ L【！Lightness】 ）に対応する
`percentage$t を与える。
◎
l is a &lt;percentage&gt; that corresponds to the origin color’s CIE Lightness
</li>
	<li>
`lab/a@ck
／
`lab/b@ck
⇒
`起点~色$の~CIELab［
`a^ ／ `b^
］軸に対応する
`number$t を与える。
◎
a and b are &lt;number&gt;s that correspond to the origin color’s CIELab a and b axises
</li>
	<li>
`lab/alpha@ck
⇒
`起点~色$の~alpha透明度に対応する
`percentage$t を与える。
◎
alpha is a &lt;percentage&gt; that corresponds to the origin color’s alpha transparency
</li>
</ul>

<div class="example">
<p>
基底~色の透明度を調整する複数の仕方：
◎
Multiple ways to adjust the transparency of a base color:
</p>
<ul>
	<li>
`lab(from var(--mycolor) l a b / 100%)^v
は、
`var(--mycolor)^v の~alphaを 100% に設定する
— 元は何であったかに関わらず。
◎
lab(from var(--mycolor) l a b / 100%) sets the alpha of var(--mycolor) to 100% regardless of what it originally was.
</li>
	<li>
`lab(from var(--mycolor) l a b / calc(alpha * 0.8))^v
`var(--mycolor)^v の~alphaを元の値の 20% に抑制する。
◎
lab(from var(--mycolor) l a b / calc(alpha * 0.8)) reduces the alpha of var(--mycolor) by 20% of its original value.
</li>
	<li>
`lab(from var(--mycolor) l a b / calc(alpha - 20%))^v
`var(--mycolor)^v の~alphaを 100% の 20% だけ抑制する。
◎
lab(from var(--mycolor) l a b / calc(alpha - 20%)) reduces the alpha of var(--mycolor) by 20% of 100%.
</li>
</ul>

<p>
~Labは，可視なすべての色を包摂するので、すべての調整は色域~内に~~収まり，そのイミで~~情報は失われないことに注意。
これは、~sRGBに基づく関数（ `rgb^f, `hsl^f, `hwb^f など）における~alpha調整には該当しない
— それは、~alpha透明度を調整することに加え，~sRGBへ変換することになるので。
◎
Note that all the adjustments are lossless in the sense that no gamut clipping occurs, since lab() encompasses all visible color. This is not true for the alpha adjustments in the sRGB based functions (such as 'rgb()', 'hsl()', or 'hwb()'), which would also convert to sRGB in addition to adjusting the alpha transparency.
</p>
</div>

<div class="example">
<p>
正確に同じ明度を保ちながら，色を無~彩度な~grayにする：
◎
Fully desaturating a color to gray, keeping the exact same lightness:
</p>
<pre class="lang-css">
--mycolor: `orchid^nc;
/* <span class="comment">
`orchid^vc は `lab(62.753% 52.460 -34.103)^v
◎
orchid is lab(62.753% 52.460 -34.103)
</span> */
--mygray: lab(from var(--mycolor) l 0 0);
/* <span class="comment">
`--mygray^p は `lab(62.753% 0 0)^v
（ `rgb(59.515% 59.515% 59.515%)^vc ）になる
◎
mygray is lab(62.753% 0 0) which is rgb(59.515% 59.515% 59.515%)
</span> */
</pre>
</div>

		</section>
		<section id="relative-OKLab">
<h3 title="Relative OKLab colors">5.5. 相対~OKLab色</h3>

<p>
`oklab$f 関数の文法は、次のように拡張される：
◎
The grammar of the oklab() function is extended as follows:
</p>

<pre class="prod">
`oklab@f
    = oklab(
        [from `color$t]?
        [`percentage$t | `none$nc]
        [`number$t | `none$nc]
        [`number$t | `none$nc]
        [ / [`alpha-value$t | `none$nc] ]? )
</pre>

<p>
`相対~色~構文$による `oklab$f 関数の中で許容される`~channel~keyword$は：
◎
Within a relative color syntax oklab() function, the allowed channel keywords are:
</p>

<ul>
	<li>
`oklab/l@ck
⇒
起点~色の~OKLab明度（ L【！Lightness】 ）に対応する
`percentage$t を与える。
◎
l is a &lt;percentage&gt; that corresponds to the origin color’s OKLab Lightness
</li>
	<li>
`oklab/a@ck
／
`oklab/b@ck
⇒
`起点~色$の~OKLab［
`a^ ／ `b^
］軸に対応する
`number$t を与える。
◎
a and b are &lt;number&gt;s that correspond to the origin color’s OKLab a and b axes
</li>
	<li>
`oklab/alpha@ck
⇒
`起点~色$の~alpha透明度に対応する
`percentage$t を与える。
◎
alpha is a &lt;percentage&gt; that corresponds to the origin color’s alpha transparency
</li>
</ul>

		</section>
		<section id="relative-LCH">
<h3 title="Relative LCH colors">5.6. 相対~LCH色</h3>

<p>
`lch$f 関数の文法は、次のように拡張される：
◎
The grammar of the lch() function is extended as follows:
</p>

<pre class="prod">
`lch@f
    = lch(
        [from `color$t]?
        [`percentage$t | `none$nc]
        [`number$t | `none$nc]
        [`hue$t | `none$nc]
        [ / [`alpha-value$t | `none$nc] ]? )
</pre>

<p>
`相対~色~構文$による `lch$f 関数の中で許容される`~channel~keyword$は：
◎
Within a relative color syntax lch() function, the allowed channel keywords are:
</p>

<ul>
	<li>
`lch/l@ck
⇒
起点~色の~CIE【~LCH？】明度（ L【！Lightness】 ）に対応する
`percentage$t を与える。
◎
l is a &lt;percentage&gt; that corresponds to the origin color’s CIE Lightness
</li>
	<li>
`lch/c@ck
⇒
起点~色の~LCH色度（ C ）に対応する
`number$t を与える。
◎
c is a &lt;number&gt; that corresponds to the origin color’s LCH chroma
</li>
	<li>
`lch/h@ck
⇒
`起点~色$の~LCH色相（ H ）に対応する
`angle$t を与える
— 値は、範囲 [0°, 360°) に正規化される。
◎
h is an &lt;angle&gt; that corresponds to the origin color’s LCH hue, normalized to a [0deg, 360deg) range.
</li>
	<li>
`lch/alpha@ck
⇒
`起点~色$の~alpha透明度に対応する。
◎
alpha is a &lt;percentage&gt; that corresponds to the origin color’s alpha transparency
</li>
</ul>

<p>
~LCHは、［
知覚的に一様かつ色度を保全することに加え，その各~軸は容易に理解される色の属性に対応する
］ので，色~操作に適する。
◎
Because LCH is both perceptually uniform and chroma-preserving, and because the axes correspond to easily understood attributes of a color, LCH is a good choice for color manipulation.
</p>

<div class="example">
<p>
`lch(from peru calc(l * 0.8) c h)^v
は、
`peru^vc （ `lch(62.2532% 54.0114 63.6769)^v ）より 20% 暗な色を生産する
— その色度と色相が~~保たれるよう。
結果は
`57.58% 32.47% 3.82%^rgb
`lch(49.80256% 54.0114 63.6769)^v
になる
◎
lch(from peru calc(l * 0.8) c h) produces a color that is 20% darker than peru or lch(62.2532% 54.0114 63.6769), with its chroma and hue left unchanged. The result is lch(49.80256% 54.0114 63.6769)
</p>
</div>

<div class="example">
<p>
これは、色相~角度に 180° を加算して，補色を与える：
◎
This adds 180 degrees to the hue angle, giving the complementary color.
</p>
<pre class="lang-css">
--accent: lightseagreen;
--complement: lch(from var(--accent) l c calc(h + 180deg));
</pre>

<p>
`lightseagreen^vc は
`lch(65.4937% 39.4484 190.1013)^v
なので、
`--complement^p は
`88.2814% 51.1047% 58.3039%^rgb
`lch(65.4937% 39.4484 370.1013)^v
になる。
◎
lightseagreen is LCH(65.4937% 39.4484 190.1013), so --complement is LCH(65.4937% 39.4484 370.1013)
</p>
</div>

<div class="example">
<p>
正確に同じ明度を保ちながら，色を無~彩度な~grayにする：
◎
Fully desaturating a color to gray, keeping the exact same lightness:
</p>

<pre class="lang-css">
--mycolor: `orchid^nc;
/* <span class="comment">
`orchid^vc は `lch(62.753% 62.571 326.973)^v
◎
orchid is lch(62.753% 62.571 326.973)
</span> */
--mygray: lch(from var(--mycolor) l 0 h);
/* <span class="comment">
`--mygray^p は `lch(62.753% 0 326.973)^v
（ `rgb(59.515% 59.515% 59.515%)^vc ）になる
◎
mygray is lch(62.753% 0 326.973) which is rgb(59.515% 59.515% 59.515%)
</span> */
</pre>

<p>
次の結果は、彩度が`~~復活する^em（色相は保全されているので）：
◎
But now (since the hue was preserved) re-saturating again
</p>

<pre class="lang-css">
--mymuted: lch(from var(--mygray) l 30 h);
/* <span class="comment">
`--mymuted^p は `lch(62.753% 30 326.973)^v
（ `rgb(72.710% 53.293% 71.224%)^vc ）になる
◎
mymuted is lch(62.753% 30 326.973) which is rgb(72.710% 53.293% 71.224%)
</span> */
</pre>
</div>

<p>
しかしながら，~HSLと違って、
操作した結果が色域~内に入ることは保証されない。
◎
However, unlike HSL, manipulations are not guaranteed to be in-gamut.
</p>

<div class="example" id="ex-wildly-oog">

<p>
この例では、
新たな色
— 同じ明度, 色度を伴いつつ，色相は 120° 相違する色 —
を生産することを目指す。
`起点~色$は~RGB色域の内側にあるが，~LCH内で色相を回転すると色域~外の色を生産する。
◎
In this example, the aim is to produce a new color with the same Lightness and Chroma, but the triad (hue differs by 120 degrees). The origin color is inside the RGB gamut, but rotating the hue in LCH produces an out of gamut color.
</p>

<pre class="lang-css">
--mycolor: `86.1% 33.4% 97.6%^rgb lch(60% 90 320);
lch(from var(--mycolor) l c calc(h - 120));
</pre>

<p>
これは、色度がごく高い~blue-green
`lch(60% 90 200)^v
= `color(srgb -0.6 0.698 0.772)^v
を与えるので，~sRGBの色域~外になる（負な~red値）。
それは、
`display-p3^v でも `rec2020^v ですら色域~外になる（順に，
`color(display-p3 -0.46 0.68 0.758)^v,
`color(rec2020 -0.14 0.623 0.729)^v
になる）。
◎
This gives a very high-chroma blue-green, lch(60% 90 200) which is color(srgb -0.6 0.698 0.772) and thus out of gamut (negative red value) for sRGB. Indeed, it is out of gamut for display-p3: color(display-p3 -0.46 0.68 0.758) and even rec2020: color(rec2020 -0.14 0.623 0.729).
</p>

<p>
~sRGB色域の内側で最も近い色は、
`lch(60.71% 37.56 201.1)^v
— すなわち `rgb(0% 64.2% 66.3%)^vc —
になり、色度は大きく異なる（ `90^v ではなく `37.56^v ）。
◎
The closest color inside the sRGB gamut would be lch(60.71% 37.56 201.1) which is rgb(0% 64.2% 66.3%). The difference in chroma (37.5, instead of 90) is huge.
</p>

<figure>
<p class="alt" hidden id="_dgm-LCH-rotation-oog">
相対~色の操作を示している CH 平面の図式
◎
Diagram of CH plane showing relative color manipulation
</p>

<figcaption>
<p>
この図式は、~CIE ab 平面~内の~sRGB色域を示す。
小さな円は、原色と二次色を指示する。
大きい円として示される
`86.1% 33.4% 97.6%^rgb 起点~色は、
~sRGB用の色域~内にあるが，
~LCH色相が −120° 回転されたときは，色域~外になる（赤く縁取られた灰色の円）。
色域~対応付けを施した
`0% 64.2% 66.3%^rgb 結果の色度は、ずっと低くなる。
◎
This diagram shows the sRGB gamut, in the CIE ab plane. Small circles indicate the primary and secondary color. The origin color, shown as a large circle, is in gamut for sRGB; becomes out of gamut (shown as a grey fill and red border) when the LCH hue is rotated -120°. The gamut-mapped result has much lower chroma.
</p>
</figcaption></figure>

<p>
同じ演算を~HSL内で遂行すると，色域~内の結果を返すことになる。
が、それは他を満たしていない：
◎
Performing the same operation in HSL will return an in-gamut result. But it is unsatisfactory in other ways:
</p>

<pre class="lang-css">
--mycolor: `86.1% 33.4% 97.6%^rgb lch(60% 90 320);
hsl(from var(--mycolor) calc(h - 120) s l);
</pre>

<p>
~HSLにおいては、
`--mycolor^p は
`86.1% 33.4% 97.6%^rgb `hsl(289.18 93.136% 65.531%)^v
になるので，
120° 減算した結果は
`33.428% 97.634% 86.056%^rgb `hsl(169.18 93.136% 65.531%)^v 
を与える。
その結果を変換して~LCHに戻した結果は、
`33.428% 97.634% 86.056%^rgb `lch(89.0345% 49.3503 178.714)^v
になる
— 見て判るとおり、~HSLにおける色相~回転-に因り，
明度は 60% から 89% に跳ね上がり,
色度は 90 から 49 へ落とされ,
色相は 実際には 141° 変化する
— 120° ではなく。
◎
In HSL, --mycolor is hsl(289.18 93.136% 65.531%) so subtracting 120 degrees gives hsl(169.18 93.136% 65.531%). Converting that result back to LCH lch(89.0345% 49.3503 178.714) we see that, due to the hue rotate in HSL, Lightness shot up from 60% to 89%, the Chroma has dropped from 90 to 49, and the Hue actually changed by 141 degrees not 120.
</p>
</div>

		</section>
		<section id="relative-OKLCH">
<h3 title="Relative OKLCH colors">5.7. 相対~OKLCH色</h3>

<p>
`oklch$f 関数の文法は、次のように拡張される：
◎
The grammar of the oklch() function is extended as follows:
</p>

<pre class="prod">
`oklch@f
    = oklch(
        [from `color$t]?
        [`percentage$t | `none$nc]
        [`number$t | `none$nc]
        [`hue$t | `none$nc]
        [ / [`alpha-value$t | `none$nc] ]? )
</pre>

<p>
`相対~色~構文$による `oklch$f 関数の中で許容される`~channel~keyword$は：
◎
Within a relative color syntax oklch() function, the allowed channel keywords are:
</p>

<ul>
	<li>
`oklch/l@ck
⇒
起点~色の~OKLab明度（ L【！Lightness】 ）に対応する
`percentage$t を与える。
◎
l is a &lt;percentage&gt; that corresponds to the origin color’s OKLab Lightness
</li>
	<li>
`oklch/c@ck
⇒
起点~色の~OKLCH色度（ C ）に対応する
`number$t を与える。
◎
c is a &lt;number&gt; that corresponds to the origin color’s OKLCH chroma
</li>
	<li>
`oklch/h@ck
⇒
`起点~色$の~OKLCH色相（ H ）に対応する
`angle$t を与える
— 値は、範囲 [0°, 360°) に正規化される。
◎
h is an &lt;angle&gt; that corresponds to the origin color’s OKLCH hue, normalized to a [0deg, 360deg) range.
</li>
	<li>
`oklch/alpha@ck
⇒
`起点~色$の~alpha透明度に対応する。
◎
alpha is a &lt;percentage&gt; that corresponds to the origin color’s alpha transparency
</li>
</ul>

<div class="example" id="ex-oklch-wildly-oog">
<p>
この例では再び、
新たな色
— 同じ明度, 色度を伴いつつ，色相は 120° 相違する色 —
を生産することを目指す。
この例では、~OKLCH内で操作を行う。
`起点~色$は，~RGB色域の内側にあるが、
ここでも，~OKLCH内で色相を回転すると色域~外の色を生産する。
◎
In this example, the aim is again to produce a new color with the same Lightness and Chroma, but the triad (hue differs by 120 degrees). In this example, we will do the manipulation in OKLCH. The origin color is inside the RGB gamut, but rotating the hue in OKLCH again produces an out of gamut color.
</p>

<pre class="lang-css">
--mycolor: `86.1% 33.4% 97.6%^rgb lch(60% 90 320);
oklch(from var(--mycolor) l c calc(h - 120));
</pre>

<p>
~OKLCHにおいては、
`--mycolor^p は
`86.1% 33.4% 97.6%^rgb `oklch(69.012% 0.25077 319.893)^v
になる。
色相から 120 を減算した結果は、
色度がごく高い~blue-green
`oklch(69.012% 0.25077 199.893)^v
になる。
それは，~sRGBにおいては
`color(srgb -0.6018 0.7621 0.8448)^v
であり、
負な~red成分が指示するとおり，~sRGBの色域~外になる。
~OKLCH色度を抑制してこれを色域の中へ持ち込むと
`0.079% 69.282% 72.067%^rgb `oklch(69.012% 0.1173 199.893)^v
が得られる。
~OKLCH色度は、
0.251 から 0.117 へ落とされる。
◎
--mycolor is oklch(69.012% 0.25077 319.893). Subtracting 120 from the Hue gives a very high-chroma blue-green, oklch(69.012% 0.25077 199.893) which is out of sRGB gamut, color(srgb -0.6018 0.7621 0.8448) as the negative red component indicates. Bring this into gamut by reducing OKLCH Chroma, yeilds oklch(69.012% 0.1173 199.893). The OKLCH chroma has dropped from 0.251 to 0.117.
</p>
</div>

		</section>
		<section id="relative-color-function">
<h3 title="Relative color-function colors">5.8. 相対~色~関数による色</h3>

<p>
`color$f 関数の文法は、次のように拡張される：
◎
The grammar of the color() function is extended as follows:
</p>

<pre class="prod">
`color@f
    = color(
        [from `color$t]?
        `colorspace-params$t
        [ / `alpha-value$t ]? )
`colorspace-params@t
    = [`custom-params$t | `predefined-rgb-params$t | `xyz-params$t]
`custom-params@t
    = `dashed-ident$t [`number$t | `percentage$t | `none$nc]#
`predefined-rgb-params@t
    = `predefined-rgb$t [`number$t | `percentage$t | `none$nc]{3}
`predefined-rgb@t
    = srgb
    | display-p3
    | a98-rgb
    | prophoto-rgb
    | rec2020
`xyz-params@t
    = xyz [`number$t | `none$nc]{3}
</pre>

<p>
`相対~色~構文$による `color$f 関数のうち［
`custom-params$t を利用しているもの
］の中で許容される`~channel~keyword$の個数と名前は：
◎
Within a relative color syntax color() function using &lt;custom-params&gt;, the number and name of the allowed channel keywords are:
</p>
<ul>
	<li>
【 `dashed-ident$t に指定される名前に】
対応する `color-profile$at 規則は在るならば，その `components$d 記述子により定義される。
他の場合，当の相対~色~操作は妥当でない。
いずれも，`起点~色$を［
【当の規則の `src$d 記述子に指定された】
`色~profile$の色~空間
］へ変換した結果の各~channelに対応する
`percentage$t を与える。
◎
defined by the components descriptor on the corresponding @color-profile, if present; otherwise, no relative color manipulation is valid. They are &lt;percentage&gt;s that correspond to the origin color’s channels after its conversion to the color space of the color profile.
</li>
</ul>

<p>
`相対~色~構文$による `color$f 関数のうち［
`predefined-rgb-params$t を利用しているもの
］の中で許容される`~channel~keyword$は：
◎
Within a relative color syntax color() function using &lt;predefined-rgb-params&gt;, the allowed channel keywords are:
</p>

<ul>
	<li>
`color/r@ck
／
`color/g@ck
／
`color/b@ck
⇒
`起点~色$を［
【 `predefined-rgb$t が指示する】
<a href="~CSSCOLOR#predefined">定義済みな~RGB色~空間</a>
］へ変換した結果の［
~red／~green／~blue
］~channelに対応する
`percentage$t を与える。
◎
r, g, and b are all &lt;percentage&gt;s that correspond to the origin color’s red, green, and blue channels after its conversion to the predefined RGB color space.
</li>
</ul>

<p>
`相対~色~構文$による `color$f 関数のうち［
`xyz-params$t を利用しているもの
］の中で許容される`~channel~keyword$は：
◎
Within a relative color syntax color() function using &lt;xyz-params&gt;, the allowed channel keywords are:
</p>
<ul>
	<li>
`color/x@ck
／
`color/y@ck
／
`color/z@ck
⇒
`起点~色$を［
相対的な, ~D50に順応された, ~CIE~XYZ色~空間
］へ変換した結果の［
X ／ Y ／ Z
］~channelに対応する
`number$t を与える。
◎
x, y, z are all &lt;number&gt;s that correspond to the origin color’s X, Y and Z channels after its conversion to relative, D50-adapted CIE XYZ color space.
</li>
</ul>

		</section>
	</section>
	<section id="serial">
<h2 title="Serialization">6. 直列化</h2>

<p>
この節は、~level 4 の
<a href="~CSSCOLOR#serializing-color-values">§ `color^t 値の直列化-法</a>
を拡張して，［
`color-mix$f,
`color-contrast$f,
`相対~色~関数$
］の結果【を成す `color^t 】の直列化を追加する。
◎
This section extends CSS Color 4 § 4.7 Serializing &lt;color&gt; Values to add serialization of the results of the color-mix(), color-contrast(), and relative color functions.
</p>

<p>
この節に利用される...
【以下、 § `color^t 値の直列化-法に記された規約と同じなので和訳は省略する。】
◎
In this section, the strings used in the specification and the corresponding characters are as follows.
String 	Character
" " 	U+0020 SPACE
"," 	U+002C COMMA
"-" 	U+002D HYPHEN-MINUS
"." 	U+002E FULL STOP
"/" 	U+002F SOLIDUS 
◎
The string "." shall be used as a decimal separator, regardless of locale, and there shall be no thousands separator.
</p>

<p>
結果を成す~alphaは、正確に 1 になる場合は，通例通り直列化から省略される
— それは、暗黙的な既定の値 1 （全部的に不透明）を表す。
◎
As usual, if the alpha of the result is exactly 1, it is omitted from the serialization; an implicit value of 1 (fully opaque) is the default.
</p>

		<section id="serial-color-mix">
<h3 title="Serializing color-mix()">6.1. `color-mix^f の直列化-法</h3>

<p>
`color-mix$f 関数の結果は、
`color$t であり，~level 4 の
<a href="~CSSCOLOR#serializing-color-values">§ `color^t 値の直列化-法</a>
にて定義されるとおりに直列化される。
利用される形は、 `in^v に伴って指定された色~空間に依存する：
◎
The serialization of the result of a color-mix() function is a &lt;color&gt;, as defined in CSS Color 4 § 4.7 Serializing &lt;color&gt; Values. The form used depends on the color space specified with "in".
</p>

<p>
往来するための`最小^emな精度は、
~level 4 の
<a href="~CSSCOLOR#serializing-color-values">§ `color^t 値の直列化-法</a>
にて指定されたそれと同じとする。
◎
The minimum precision for round-tripping is the same as that specified in CSS Color 4 § 4.7 Serializing &lt;color&gt; Values.
</p>

<table>
<thead>
<tr><th>色~空間
<th>形
</thead><tbody>

<tr><td>`srgb$v
<td>`color(srgb r g b)^v

<tr><td>`hsl$v
<td>`hsl(h s l)^v

<tr><td>`hwb$v
<td>`hwb(h w b)^v

<tr><td>`xyz$v
<td>`color(xyz x y z)^v

<tr><td>`lab$v
<td>`lab(l a b)^v

<tr><td>`lch$v
<td>`lch(l c h)^v

<tr><td>`oklab$v
<td>`oklab(l a b)^v

<tr><td>`oklch$v
<td>`oklch(l c h)^v

</tbody></table>

<div class="example">
<p>
次の色~混合の結果を：
◎
The result of this color mixture
</p>

<pre class="lang-css">
color-mix(in lch, peru 40%, palegoldenrod)
</pre>

<p>
直列化した結果は、次の文字列になる
⇒
`87.416% 76.036% 47.637%^rgb `lch(79.7256% 40.448 84.771)^l
◎
is serialized as the string "lch(79.7256% 40.448 84.771)"＼
</p>

<p>
一方で，次の結果を：
◎
while the result of
</p>

<pre class="lang-css">
color-mix(in srgb, peru 40%, palegoldenrod)
</pre>

<p>
直列化した結果は、次の文字列になる
⇒
`88.16% 75.45% 49.88%^rgb `color(srgb 0.8816 0.7545 0.4988)^l
◎
while the result of
• color-mix(in srgb, peru 40%, palegoldenrod)
is serialized as the string "color(srgb 0.8816 0.7545 0.4988)".
</p>
</div>

		</section>
		<section id="serial-color-contrast">
<h3 title="Serializing color-contrast()">6.2. `color-contrast^f の直列化-法</h3>

<p>
`color-contrast$f 関数の結果は、
`color$t であり，~level 4 の
<a href="~CSSCOLOR#serializing-color-values">§ `color^t 値の直列化-法</a>
にて定義されるとおりに直列化される。
利用される形は、［
最優先な~contrastを伴う色を指定するために利用されたもの
］と同じになる。
◎
The serialization of the result of a color-contrast() function is a &lt;color&gt;, as defined in CSS Color 4 § 4.7 Serializing &lt;color&gt; Values. The form used is the same as that used to specify the winning color.
</p>

<p>
往来するための`最小^emな精度は、
~level 4 の 
<a href="~CSSCOLOR#serializing-color-values">§ `color^t 値の直列化-法</a>
にて指定されたそれと同じとする。
◎
The minimum precision for round-tripping is the same as that specified in CSS Color 4 § 4.7 Serializing &lt;color&gt; Values.
</p>

<div class="example">
<p>
次において最優先な~contrastを伴う色は
◎
The winner of this contrast choice
</p>
<pre class="lang-css">
color-contrast(wheat vs olive, sienna, maroon)
</pre>

<p>
`maroon^nc なので、直列化した結果は，次の文字列になる
⇒
`128 0 0^rgb `rgb(128 0 0)^l
◎
is maroon, so the result is serialized as "rgb(128 0 0)".
</p>

<p>
一方、次において最優先な~contrastを伴う色は
◎
While the winner of
</p>

<pre class="lang-css">
color-contrast(wheat vs color(prophoto-rgb 0.4 0.4 0.2), color(display-p3 0.45 0.08 0.05))
</pre>

<p>
`color(display-p3 0.45 0.08 0.05)^v
なので、直列化した結果は，次の文字列になる
⇒
`49.277% 0.414% 0.524%^rgb
`color(display-p3 0.45 0.08 0.05)^l
◎
is color(display-p3 0.45 0.08 0.05), so the result is serialized as "color(display-p3 0.45 0.08 0.05)".
</p>
</div>

		</section>
		<section id="serial-relative-color">
<h3 title="Serializing relative color functions">6.3. 相対~色~関数の直列化-法</h3>

<p>
`相対~色~関数$の結果の直列化は、
`color$t であり，~level 4 の
<a href="~CSSCOLOR#serializing-color-values">§ `color^t 値の直列化-法</a>
にて定義されるとおりに直列化される。
利用される形は、`起点~色$と同じになる。
【！絶対~形を利用することを除けば，相対~色を指定するために利用されたものと同じになる】
◎
The serialization of the result of a relative color function is a &lt;color&gt;, as defined in CSS Color 4 § 4.7 Serializing &lt;color&gt; Values. The form used is the same as that used to specify the relative color, but using the absolute form.
</p>

<p>
往来するための `最小^em精度は、
~level 4 の
<a href="~CSSCOLOR#serializing-color-function-values">§ `color^f 関数の直列化-法</a>
にて指定されたそれと同じとする。
◎
The minimum precision for round-tripping is the same as that specified in CSS Color 4 § 4.7.4 Serializing values of the color() function.
</p>

<div class="example">
<p>
次を直列化した結果は
◎
The result of serializing
</p>
<pre class="lang-css">
lch(from peru calc(l * 0.8) calc(c * 0.7) calc(h + 180))
</pre>

<p>
次の文字列になる
⇒
`3.12% 50.352% 68.894%^rgb
`lch(49.80224% 37.80819 243.6803)^l
◎
is the string "lch(49.80224% 37.80819 243.6803)"
</p>
</div>

		</section>
	</section>
	<section id="security">
<h2 title="Security Considerations">~securityの考慮点</h2>

<p>
この仕様に対し報告された，新たな~securityの考慮点は、無い。
◎
No new security considerations have been reported on this specification.
</p>

	</section>
	<section id="privacy">
<h2 title="Privacy Considerations">~privacyの考慮点</h2>

<p>
この仕様に対し報告された，新たな~privacyの考慮点は、無い。
◎
No new privacy considerations have been reported on this specification.
</p>

	</section>
	<section id="a11y">
<h2 title="Accessibility Considerations">~accessibilityの考慮点</h2>

<p>
この仕様は、~stylesheet作者が
`WCAG21$r による `§ ~contrast（最小）$に適合する~stylesheetを書くのを助ける，新たな特能を導入する。
◎
This specification introduces a new feature to help stylesheet authors write stylesheets which conform to WCAG 2.1 section 1.4.3 Contrast (Minimum).
</p>

	</section>
	<section id="changes">
<h2 title="Changes">変更点</h2>

<dl>
	<dt id="changes-20210601">
<a href="~TR/2021/WD-css-color-5-20210601/">2021 年 6 月 1日 作業草案</a>
からの変更点
◎
10.1. Since the Working Draft of 1 June 2021
</dt>
	<dd>
`color-mix$f の直列化に［
`oklab$f, `oklch$f
］を追加した。
◎
Added oklab() and oklch() to serialization of color-mix()
</dd>
	<dd>
`相対~色~構文$に［
`oklab$f, `oklch$f
］を追加した。
◎
Added oklab() and oklch() relative color syntax
</dd>
	<dd>
`lch$v で混合したとき, `oklch$v で混合したときを~~対比する例を追加した。
◎
Added lch vs. oklch mixing example
</dd>
	<dd>
混合-法には［
`oklab$v ／ `oklch$v
］が選好されるようにした。
◎
Prefer oklab and oklch for mixing
</dd>
	<dd>
~level 4 に従って，
`xyz$v は~D65に相対的とするよう変更した。
◎
Changed xyz to D65-reative, following CSS Color 4
</dd>
	<dd>
色~空間として［
`oklab$v, `oklch$v
］を追加した。
◎
Added oklab and oklch colorspaces
</dd>
	<dd>
`color-contrast$f の解決-法を定義した。
◎
Defined how to resolve color-contrast())
</dd>
	<dd>
直列化された形における最小な精度を明確化した。
◎
Clarified minimum precision of serialized forms
</dd>
	<dd>
【~LCHは】~CIE~LCHが意味されることを明確化した。
◎
Clarified that CIE LCH is meant
</dd>
	<dd>
いくつか例を追加した。
◎
Added some more examples
</dd>
	<dd>
<p>
`color-adjust^f を除去した（`相対~色~構文$の方を残した）。
◎
Removed color-adjust(), keeping relative color syntax
</p>

<p class="trans-note">【
以下に現れる “調整子（ `adjuster^en ）”, `*-adjuster^t （ `hue-adjuster$t 以外）も，今や除去された。
】</p>
	</dd>
	<dd>
［
`color-mix$f,
`color-contrast$f,
`相対~色~構文$
］の結果の直列化を定義した。
◎
Defined serialization of the results of the color-mix, color-contrast, and relative color syntaxes
</dd>

	<dt id="changes-20200303">
<a href="~TR/2020/WD-css-color-5-20200303/">2020年 6 月 10日 最初の公な作業草案</a>
からの変更点
◎
10.1. Since the FPWD of 10 June 2020
</dt>
	<dd>
`color$f 関数~用の相対~色~構文を追加した。
◎
Added relative color syntax for the color() function
</dd>
	<dd>
`color-adjuster^t は省略可能でないことを明確化した。
◎
Clarified that the color-adjuster is not optional
</dd>
	<dd>
`color-mix$f における百分率は義務的であることを明確化した。
◎
Clarified that the percentage in color-mix is mandatory
</dd>
	<dd>
`hue-adjuster$t を元在った `color-mix$f に戻した【！whee】。
◎
Moved hue-adjuster back to color-mix whee it belongs
</dd>
	<dd>
異なる色~空間どうしで混合する【！mxing】例を追加した。
◎
Added example with different mxing color spaces
</dd>
	<dd>
`color-mix$f における百分率の正規化に関する例を追加した。
◎
Added examples of percentage normalization in color-mix()
</dd>
	<dd>
`color-mix$f における負な百分率は明示的に除外した。
◎
Explicitly excluded negative percentages in color-mix()
</dd>
	<dd>
`color-mix$f における百分率の総和が 100% 未満になるときは、
1【！100%】 未満の~alpha透明度を生産するようにした。
◎
Percentages in color-mix() summing to less than 100% produce an alpha transparency less than 100%
</dd>
	<dd>
用語 `color space^en （色~空間）を一貫して利用するようにした
— `colorspace^en ではなく。
◎
Consistently used the term color space rather than colorspace,＼
</dd>
	<dd>
`color-space$t ~tokenを定義した。
◎
defined &lt;color-space&gt; token
</dd>
	<dd>
`color-contrast$f の文法を正した。
◎
Corrected color-contrast grammar
</dd>
	<dd>
`color-contrast$f に省略可能な~target~contrast比を追加した。
◎
Added an optional target contrast ratio to color-contrast()
</dd>
	<dd>
調整子の文法を正した。
◎
Corrected adjuster grammar
</dd>
	<dd>
百分率の総和が 0 になる際どい事例を取扱う必要があることを注記した。
◎
Noted that the corner case of percentages summing to zero needs to be handled
</dd>
	<dd>
`color-mix$f における演算の順序を明確化した。
◎
Clarified order of operations in color-mix()
</dd>
	<dd>
各~例を現在の文法に合致するよう更新した。
◎
Updated examples to match current grammar
</dd>
	<dd>
百分率がどう正規化されるかを定義した。
◎
Defined how percentages are normalized
</dd>
	<dd>
`color-mix$f における［
0% ／ 100%
］の意味を明確化した。
◎
Clarify meaning of 0% and 100% in color-mix()
</dd>
	<dd>
調整子の定義を `color-mix$f から `color-adjust^f へ移動した。
◎
Definition of adjusters moved from color-mix() to color-adjust()
</dd>
	<dd>
`color-mix$f に与える引数には任意の順序を許容した。
◎
Allow arguments to color-mix() to be in any order
</dd>
	<dd>
`color-mix$f 用の色~空間は義務的とした。
◎
Mandatory color space for color-mix()
</dd>
	<dd>
`color-mix$f における百分率は、色より前に来ることを許容した。
◎
Allowed the percentage in color-mix() to come before the color
</dd>
	<dd>
`color-mix$f 用の明示的な~algoを追加した。
◎
Added explicit algorithm for color-mix()
</dd>
	<dd>
`color-mix$f から調整子を除去して，文法を単純~化した。
◎
Removed adjusters from color-mix() and simplified the grammar
</dd>
	<dd>
混合するために利用される色~空間を指定するための `in^v ~keywordを追加した。
◎
Added the "in" keyword to specify the color space used for mixing
</dd>
	<dd>
`color-contrast$f ~listには 2 個以上の~itemが要求されるようにした。
◎
Required color-contrast() list to have at least two items
</dd>
	<dd>
相対-色~構文の説明を改善した。
◎
Improved explanation of the relative color syntax
</dd>
	<dd>
~level 4 による，色の直列化の定義へ~linkした。
◎
Link to CSS 4 definition of color serialization
</dd>
	<dd>
色~空間~用に別々な節を追加した。
◎
Added separate section for color spaces
</dd>
	<dd>
`color-adjust^f の例を更新した。
◎
Updated color-adjust example
</dd>
	<dd>
説明用の図式を追加した。
◎
Added explanatory diagrams
</dd>
	<dd>
未解決な百分率への~~対処。【？】
◎
Deal with unresolved percentages
</dd>
	<dd>
`color-mix$f 用の引数を正規化するようにした。
◎
Normalize arguments to color-mix
</dd>
	<dd>
調整子に百分率を許容した。
◎
Allow percentages for adjusters
</dd>
	<dd>
~linkを修正した。
◎
Link fixes
</dd>
	<dd>
`color-mix$f の文法を更新した
— 調整子を許容するようにして，~alpha調整子を追加した。
◎
Updated color-mix grammar, allowing adjusters, add alpha adjuster
</dd>
	<dd>
いくつかの例を正した。
◎
Corrections to some examples
</dd>
	<dd>
<a href="#security">§ ~securityの考慮点</a>,
<a href="#privacy">§ ~privacyの考慮点</a>
を更新した。
◎
Updated Security and Privacy section
</dd>
	<dd>
`color-contrast$f に `vs^v ~keywordを追加した。
◎
added vs keyword to color-contrast
</dd>
	<dd>
文法に `xyz$v 用の調整子（ `xyz-adjuster^t ）を追加した。
◎
added xyz adjuster to grammar
</dd>
	<dd>
色相~調整子（ `hue-adjuster^t ）用の各種~keywordを追加した。
◎
added hue adjuster keywords
</dd>
	<dd>
`color-mix$f 用に，~XYZ色~空間として `xyz$v を追加した。
◎
add XYZ color space for mixing
</dd>
	<dd>
色~調整子（ `color-adjuster^t ）と色~空間（ `color-space$t ）を定義した。
◎
defined color-adjuster and color space
</dd>
	<dd>
`color-mix$f 用に，省略-時の既定（ `50%^v ）を許容した。
◎
allowed mix percent to default to 50%
</dd>
	<dd>
作業した例と図式を追加した。
◎
added worked examples and diagrams
</dd>
	<dd>
［
綴り／構文／整形
］に関する小さな課題を正した。
◎
corrected minor spelling, syntax and formatting issues
</dd>
	<dd>
`color-contrast^f 値の解決-法を与える節を追加した。
◎
Added section on resolving color-contrast() values
</dd>
</dl>

	</section>
</main></div>
