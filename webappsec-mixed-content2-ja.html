<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<title>Mixed Content Level 2（日本語訳）</title>

<link rel="stylesheet" href="common.css" type="text/css" />
<link rel="stylesheet" href="common-w3c.css" type="text/css" />

<style>

.report {
	color: green;
}

.scheme {
	color: #006633;
}

samp {
	white-space: nowrap;
	background: #F0F0F0;
	margin-left: 0.5em;
	margin-right: 0.5em;
}

pre.http-code {
	background: #EEE;
}
pre.html-code {
	background: #FFE;
}

i {
	color: purple;
}

</style>

<script src="common0.js" ></script>
<script src="common1.js" async></script>

<script>

Util.ready = function(){
	const source_data = {
		toc_main: 'MAIN0',
		generate: expand
	};
	Util.switchWordsInit(source_data);
}

function expand(){
	const class_map = this.class_map;
	const tag_map = this.tag_map;
	const link_map = this.link_map;

	return this.html.replace(
		/%[\w\-~一-鿆]+|`(.*?)([$@^])(\w*)/g,
		create_html
	);

	function create_html(match, key, indicator, klass){

if(!indicator) {//%
	return `<var>${match.slice(1)}</var>`;
}

let text = key;
let href = '';

switch(klass){
case 'r':
	text = `[${key}]`;
	href = `#biblio-${key.toLowerCase()}`;
	break;
case 'l':
	return `"<code class="literal">${key}</code>"`;
	break;
case 'en':
	return `<span lang="en-x-a0">${key}</span>`;
	break;
}

let tag = tag_map[klass];
if(tag) {
	let classname = class_map[klass];
	classname = classname ? ` class="${classname}"` : '';
	text = `<${tag}${classname}>${text}</${tag}>`;
}

if(indicator !== '^'){
	href = link_map[ klass ? `${klass}.${key}` : key ] || href;
	if(!href){
		console.log(match); // check error
		return match;
	}

	switch(indicator){
	case '$':
		text = `<a href="${href}">${text}</a>`;
		break;
	case '@':
		text = `<dfn id="${href.slice(1)}">${text}</dfn>`;
		break;
	}
}

return text;

	}
}
</script>


<script type="text/plain" id="_source_data">


●●options

spec_date:2019-09-06
trans_update:2019-09-12
source_checked:190906
page_state_key:WEBAPPSEC
original_url:https://w3c.github.io/webappsec-mixed-content/level2.html
	abbr_url:
spec_status:ED
ref_id_prefix:biblio-
ref_id_lowercase:true
conformance:w3c
copyright:2019,use
trans_1st_pub:2019-09-12


●●class_map
dir:directive
h:header
e:element
a:attr
E:error

●●tag_map
dir:code
h:code
e:code
a:code
et:code
E:code
c:code
s:samp
i:i
em:em


●●original_id_map



●●link_map

要請:~FETCH#concept-request
rq.~URL:~FETCH#concept-request-url
rq.~client:~FETCH#concept-request-client
rq.~mode:~FETCH#concept-request-mode
rq.行先:~FETCH#concept-request-destination
rq.起動元:~FETCH#concept-request-initiator
url.~scheme:~URL1#concept-url-scheme

dir.block-all-mixed-content:~MIXED-CONTENT#block-all-mixed-content
dir.upgrade-insecure-requests:~UPGRADE-INSECURE-REQUESTS#upgrade-insecure-requests

先天的に認証-済み~URL:~MIXED-CONTENT#a-priori-authenticated-url
設定群は混在~security文脈を禁制するか？:~MIXED-CONTENT#categorize-settings-object
要請の~fetchingは混在~内容として阻止されるべきか？:~MIXED-CONTENT#should-block-fetch
要請に対する応答は混在~内容として阻止されるべきか？:~MIXED-CONTENT#should-block-response

~main~fetch:~FETCH#main-fetch

	混在~内容:~MIXED-CONTENT#mixed-content
阻止-可能:~MIXED-CONTENT#blockable-mixed-content
随意に阻止-可能:~MIXED-CONTENT#optionally-blockable-mixed-content
	未認証な応答:~MIXED-CONTENT#unauthenticated-response
	未認証:~MIXED-CONTENT#unauthenticated-response

	指令:~CSP3#directives

●●words_table1
UPGRADE-INSECURE-REQUESTS:webappsec-upgrade-insecure-requests-ja.html


●●words_table


	●network
Fetch:
redirect::::リダイレクト
実体:entity:~
	越しに:over
	~web~site:website
	~web~page:webpage

	●mixed／CSP
混在:mixed::~
先天的:a priori:~
阻止d:Blocked::阻止される::ブロックされる
随意:optional::~
	随意に:optionally-
昇格-:upgrade::~
自動昇格:autoupgrading::~
自動昇格-:autoupgrade::~
禁制-:prohibit:~
	禁制しない:Does Not Restrict Mixed Security Contents

	古過ぎて:out-of-dateで
	先天的に認証-済み~URL:a-priori-authenticated-url
	阻止-可能:blockable
	阻止-法:blocking

	●保安
弱めら:weakenさ:~
暗号化-:encrypt::~
盗聴-:eavesdrop:~
改竄-:tamper:改ざん
認証-:authenticate::~
	認証-済み:authenticated
未認証:unauthenticated::~
	未認証な:unauthenticated
機密性:confidentiality::~
脆弱:vulnerable::~
誘導-:induce:~
錠前:padlock:~
同意t:consent:［同意または黙認］
読取る:readする::読み取る
偽造-:fabricate:~

	差し障りない:innocuous
	非~secureに:insecure
	~secureでない:insecure

	●仕様
今日:today:~
機能-:function:~
非互換性:breakage:~
最小化-:minimize:~
廃用化:obsolescences:~
心的:mental:~

	利する:on behalf of
	さらには:moreover
	勧める:advise
	区別:distinction
	半端な:in-between
	現時点:currently
	この~level 2 仕様:Mixed Content Level 2
	~level:Level
	総じて:overall
	とする:suppose
	ごくまれにしかない:exceedingly rare
	まだ:not already
	駆り立てるほどのもの:proved a sufficient incentive
	~~向上させ:-positive
	向かって進む:advances us towards
	主要な:key

	●未分類
UX:
書直す:rewriteする:書き直す
main:
株価図表:stock chart:~:::株価チャート
	~~費やす:amount
	ある:present
	量:amount
	-:render
	一定の:certain

	●指示語

	側:-side
	他にも:more


●●ref_normative

[FETCH]
    Anne van Kesteren. Fetch Standard. Living Standard. URL: https://fetch.spec.whatwg.org/ 
[MIXED-CONTENT]
    Mike West. Mixed Content. 2 August 2016. CR. URL: https://www.w3.org/TR/mixed-content/ 
[RFC2119]
    S. Bradner. Key words for use in RFCs to Indicate Requirement Levels. March 1997. Best Current Practice. URL: https://tools.ietf.org/html/rfc2119 
[URL]
    Anne van Kesteren. URL Standard. Living Standard. URL: https://url.spec.whatwg.org/ 

●●ref_informative

[UPGRADE-INSECURE-REQUESTS]
    Mike West. Upgrade Insecure Requests. 8 October 2015. CR. URL: https://www.w3.org/TR/upgrade-insecure-requests/ 


●●trans_metadata
<p>
~THIS_PAGEは、~W3Cにより編集者草案として公開された
<a href="~SPEC_URL">Mixed Content Level 2</a>
を日本語に翻訳したものです。
~PUB
</p>


●●spec_metadata

バージョン履歴
	https://github.com/w3c/webappsec-mixed-content/commits/master/level2.src.html
フィードバック
	<a href="mailto:public-webappsec@w3.org?subject=%5Bmixed-content-2%5D%20YOUR%20TOPIC%20HERE">public-webappsec@w3.org</a> with subject line “<kbd>[mixed-content-2] <i>… message topic …</i></kbd>” (<a href="https://lists.w3.org/Archives/Public/public-webappsec/" rel="discussion">archives</a>)
	<a href="https://github.com/w3c/webappsec-mixed-content/issues/new">File an issue</a> (<a href="https://github.com/w3c/webappsec-mixed-content/issues">open issues</a>)
編集
	<a href="mailto:estark@google.com">Emily Stark</a> (Google Inc.)
	<a href="mailto:mkwst@google.com">Mike West</a> (Google Inc.)
Participate
	<a href="https://github.com/w3c/webappsec-mixed-content/issues/new">File an issue</a> (<a href="https://github.com/w3c/webappsec-mixed-content/issues">open issues</a>)

この文書に対する変更点
	https://github.com/w3c/webappsec
制作
	<a href="https://www.w3.org/2011/webappsec/">Web Application Security Working Group</a>

</script>

</head>
<body>

<header>
	<hgroup>
<h1>混在内容（レベル 2 ） — Mixed Content Level 2</h1>
	</hgroup>
</header>

<div id="MAIN" hidden>

	<section id="abstract">
~ABSTRACT

<p>
この仕様は、［
暗号化され かつ認証-済み
］な文書の文脈において，［
暗号化されない または未認証な
］接続~越しの内容~fetchingを，~UAがどう取扱うベキかについて述べる。
◎
This specification describes how a user agent should handle fetching of content over unencrypted or unauthenticated connections in the context of an encrypted and authenticated document.
</p>

	</section>
	<section id="status">
~STATUSofTHIS

<p>
この節では、発行時点における…
【以下、この節の他の内容は <a href="w3c-common-ja.html#status" >W3C 日本語訳 共通~page</a>／冒頭の仕様~metadataに委譲。】
</p>

	</section>

<main id="MAIN0">

	<section id="intro">
<h2 title="Introduction">1. 序論</h2>

~INFORMATIVE

<p>
利用者が
`example.com^s
から~secure~channel越しに（例えば，~HTTPS）~web~pageを成功裡に読込んだとき、~UAと `example.com^s の間で伝送される~dataを［
盗聴する／改竄する
］実体は無いことが，利用者に保証される。
しかしながら，この保証は、当の~web~pageが［
~scriptや画像などの下位資源
］を~secureでない接続~越しに読込む場合には，弱められる。
例えば，非~secureに読込まれた~scriptは、利用者に利する~dataを［
読取る／改変する
］ことを攻撃者に許容し得る。
非~secureに読込まれた画像は、攻撃者に次を許容し得る：
不正な情報を利用者へ通信する（例：株価図表を偽造する）／
~client側の状態を変異する（例： ~cookieを設定する）／
意図しない動作をとるよう利用者を誘導する（例：~buttonの~labelを変更する）。
これらの要請は、混在~内容として知られている。
◎
When a user successfully loads a webpage from example.com over a secure channel (HTTPS, for example), the user is guaranteed that no entity between the user agent and example.com eavesdropped on or tampered with the data transmitted between them. However, this guarantee is weakened if the webpage loads subresources such as script or images over an insecure connection. For example, an insecurely-loaded script can allow an attacker to read or modify data on behalf of the user. An insecurely-loaded image can allow an attacker to communicate incorrect information to the user (e.g., a fabricated stock chart), mutate client-side state (e.g., set a cookie), or induce the user to take an unintended action (e.g., changing the label on a button). These requests are known as mixed content.
</p>

<p>
これらの~riskを~UAが［
一定の型の混在~内容を阻止する／
何らかの文脈において，もっと厳密に挙動する
］ことにより，どう軽減できるかは、
`MIXED-CONTENT$r に詳細がある。
◎
[MIXED-CONTENT] details how a user agent can mitigate these risks by blocking certain types of mixed content, and behaving more strictly in some contexts.
</p>

<p>
しかしながら，今日の~web~browserにて実装された
`MIXED-CONTENT$r は、利用者の~dataの機密性と完全性を全部的には保護していない。
現時点では，~secureでない［
画像, 音声, 動画
］などの内容は、既定では~secureな文脈~内に読込める。
◎
However, as implemented in today’s web browsers, [MIXED-CONTENT] does not fully protect the confidentiality and integrity of users' data. Insecure content such as images, audio, and video can currently be loaded by default in secure contexts.
</p>

<p>
さらには，利用者にとっては、混在~内容が読込まれたことを表す明瞭な~security指示子が無い。
~web~pageが混在~内容を読込んだとき、~browserは “半端な” ~security指示子を表示する（錠前~iconを除去するなど）。
それは、~pageを信用するベキかどうかについての明瞭な指示を，利用者に与えていない。
この~UXはまた、開発者にとっては，混在~内容を避けたいと駆り立てるほどのものになっていない
— ~web~page用に混在~内容を読込むことは、依然として共通的にあることなので。
混在~内容をすべて阻止すれば、もっと単純な心的~model
— ~web~pageは、~secureな~transport越しに読込まれたか, そうでないか，どちらかである —
を利用者に供することになり、［
~web~pageが適正に機能するために必要とされる混在~内容
］を~secureに読込むことを，開発者に奨励する。
◎
Moreover, users do not have a clear security indicator when mixed content is loaded. When a webpage loads mixed content, browsers display an "in-between" security indicator (such as removing the padlock icon), which does not give users a clear indication of whether they should trust the page. This UX has also not proved a sufficient incentive for developers to avoid mixed content, since it is still common for webpages to load mixed content. Blocking all mixed content would provide the user with a simpler mental model -- the webpage is either loaded over a secure transport or it isn’t -- and encourage developers to securely load any mixed content that is necessary for their webpage to function properly.
</p>

<p>
したがって，この~level 2 仕様では、非互換性は最小化しつつ，より良い［
~security／~privacy
］保証の下に より良い~security~UXを利用者に供するため，~level 1 `MIXED-CONTENT$r を更新して拡張する。
~level 2 の中核を成す案は，`混在~内容の自動昇格^emであり、単純に すべての混在~内容を厳密に阻止するよう，~browserに勧めるわけではない。
すなわち，~UAがまだ阻止していない混在~内容は、~secure~transportに自動昇格されるベキである。
自動昇格できない要請は、阻止されることになる。
自動昇格は、非互換性を避けるために必要な開発者が~~費やす労を最小化しつつ，~secureな~web~page上で~secureでない資源を読込むのを避ける。
◎
Mixed Content Level 2 therefore updates and extends [MIXED-CONTENT] to provide users with better security and privacy guarantees and a better security UX, while minimizing breakage. Instead of advising browsers to simply strictly block all mixed content, the core idea of Level 2 is mixed content autoupgrading. That is, mixed content that user agents are not already blocking should be autoupgraded to a secure transport. If the request cannot be autoupgraded, it will be blocked. Autoupgrading avoids loading insecure resources on secure webpages, while minimizing the amount of developer effort needed to avoid breakage.
</p>

<p>
この~level 2 仕様は、［
現時点では，既定では阻止されていない型の混在~内容
］に限り，自動昇格を推奨する
— すでに阻止されている型の内容に自動昇格を推奨するものではない。
これは、~webに可視になる変化の量を最小化する
— 内容を自動昇格するよう求めるのは、すべての混在~内容を既定で阻止する目標に向かって進む場合に限られる。
◎
This specification (Level 2) only recommends autoupgrading types of mixed content that are not currently blocked by default, and does not recommend autougprading types of content that are already blocked. This is to minimize the amount of web-visible change; we only want to autoupgrade content if it advances us towards the goal of blocking all mixed content by default.
</p>

	</section>
	<section id="terms">
<h2 title="Key Concepts and Terminology">2. 主要な概念と各種用語</h2>

<p>
【未策定】
◎
TODO
</p>

	</section>
	<section id="algorithms">
<h2 title="Algorithms">3. ~algo</h2>

		<section id="upgrade-algorithm">
<h3 title="Upgrade request to an a priori authenticated URL as mixed content, if appropriate">3.1. 適切になるなら， %要請 を混在~内容として先天的に認証-済みな~URLへ昇格する</h3>

<p class="note">注記：
~Fetch仕様は、この~algoの中へ~hookして，`随意に阻止-可能$な混在~内容を~HTTPSへ昇格することになる。
◎
Note: The Fetch specification will hook into this algorithm to upgrade optionally-blockable mixed content to HTTPS.
</p>

<p>
この~algoは、所与の
( `要請$ %要請 )
に対し，
%要請 は`随意に阻止-可能$な混在~内容と判断されるならば、その`~URL$rqを書直す：
◎
Given a Request request, this algorithm will rewrite its url if the request is deemed to be optionally-blockable mixed content, via the following algorithm:
</p>

<ol>
	<li>
<p>
~IF［
次に挙げる条件のうち，いずれかが満たされる
］…：
◎
If one or more of the following conditions is met, return without modifying request:
</p>
		<ul>
			<li>
%要請 の`~URL$rqは`先天的に認証-済み~URL$である
◎
request’s url is an Mixed Content §a-priori-authenticated-url.
</li>
			<li>
`設定群は混在~security文脈を禁制するか？$( %要請 の`~client$rq ) ~EQ `禁制しない^i
◎
Mixed Content §categorize-settings-object returns "Does Not Restrict Mixed Security Contents" when applied to request’s client.
</li>
			<li>
%要請 の`~mode$rq ~EQ `cors^l【！`CORS^i】
◎
request’s mode is CORS.
</li>
			<li>
%要請 の`行先$rq ~NIN { `image^l, `audio^l, `video^l }
◎
request’s destination is not "image", "audio", or "video".
</li>
			<li>
［
%要請 の`行先$rq ~EQ  `image^l
］~AND［
%要請 の`起動元$rq ~EQ `imageset^l
］
◎
request’s destination is "image" and request’s initiator is "imageset".
</li>
			</ul>
<p>
…ならば
⇒
~RET
（ %要請 は改変されない）
◎
↑</p>
		</li>
		<li>
<p>
~IF［
%要請 の`~URL$rq の`~scheme$url ~EQ `http^l
］
⇒
%要請 の`~URL$rq の`~scheme$url ~SET `https^l
◎
If request’s url’s scheme is http, set request’s url’s scheme to https, and return.
</p>

<p class="note">注記：
`URL$r に従い、ここでは~portは改変しない
— それは、 ~scheme ~EQ `http^l のときには ~NULL に設定され，~schemeが `https^l に変更されたなら 443 として解釈されることになるので。
◎
Note: Per [url], we do not modify the port because it will be set to null when the scheme is http, and interpreted as 443 once the scheme is changed to https
</p>
	</li>
</ol>

		</section>
		<section id="modifications">
<h3 title="Modifications to existing algorithms">3.2. 既存の~algoに対する改変</h3>

<p class="note">注記：
この節では、既存の混在~内容~algoに対し，［
`随意に阻止-可能$, `阻止-可能$
］の区別を無視するための改変を指定する
— 前者の混在~内容は、今や，すべて自動昇格されることになるので。
◎
Note: This section specifies modifications to existing mixed content algorithms to ignore the distinction between optionally-blockable and blockable mixed content, since all optionally-blockable mixed content will now be autoupgraded.
</p>

<p>
`要請の~fetchingは混在~内容として阻止されるべきか？$は、次のように改変されるベキである
⇒
段 3, 4, 5 【すなわち，最後の 3 段】を除去して，次を行う単独の段に置換する
⇒
~RET `阻止d^i
◎
Mixed Content §should-block-fetch should be modified to remove Steps 3, 4, and 5, replacing them with a single step "Return blocked".
</p>

<p>
`要請に対する応答は混在~内容として阻止されるべきか？$
は、次のように改変されるベキである
⇒
段 2, 3, 4 【すなわち，最後の 3 段】を除去して，次を行う単独の段に置換する
⇒
~RET `阻止d^i
◎
Mixed Content §should-block-response should be modified to remove Steps 2, 3, and 4, replacing them with a single step "Return blocked".
</p>

		</section>
	</section>
	<section id="integration">
<h2 title="Integrations">4. 統合</h2>

		<section id="fetch">
<h3 title="Modifications to Fetch">4.1. ~fetchに対する改変</h3>

<p>
`~main~fetch$ `FETCH$r
は、次のように改変されるベキである
⇒
【段 2 を成す下位手続きの中の】段 3, 4 の合間で次を~callする
⇒
<a href="#upgrade-algorithm">適切になるなら， %要請 を混在~内容として先天的に認証-済みな~URLへ昇格する</a>
◎
Fetch Standard §4.1 Main fetch should be modified to call § 3.1 Upgrade request to an a priori authenticated URL as mixed content, if appropriate on request between steps 3 and 4.＼
</p>

<p>
すなわち，`随意に阻止-可能$な混在~内容は、混在~内容の阻止-法を適用する前に，~HTTPSに自動昇格されるベキである。
◎
That is, optionally-blockable mixed content should be autoupgraded to HTTPS before applying mixed content blocking.
</p>

		</section>
	</section>
	<section id="obsolescences">
<h2 title="Obsolescences">5. 廃用化</h2>

		<section id="block-all-mixed-content">
<h3 title="block-all-mixed-content">5.1. `block-all-mixed-content^dir</h3>

<p>
この仕様は、 `block-all-mixed-content$dir ~CSP 指令を廃用にする
— 自動昇格できない混在~内容は、今やすべて阻止されるので。
◎
This specification renders the Mixed Content §block-all-mixed-content CSP directive obsolete, because all mixed content is now blocked if it can’t be autoupgraded.
</p>

<p class="note">注記：
`upgrade-insecure-requests$dir 指令 `UPGRADE-INSECURE-REQUESTS$r
は、廃用にされない。
それは、`阻止-可能$な内容を昇格することを開発者に許容する。
この仕様は、`随意に阻止-可能$な内容に限り，既定で昇格する。
◎
Note: The upgrade-insecure-requests ([upgrade-insecure-requests]) directive is not obsolete because it allows developers to upgrade blockable content. This specification only upgrades optionally-blockable content by default.
</p>

		</section>
	</section>
	<section id="security-considerations">
<h2 title="Security and Privacy Considerations">6. ~securityと~privacyの考慮点</h2>

<p>
`随意に阻止-可能$な混在~内容の自動昇格は、総じて，~security, ~privacyを~~向上させると期待される
— 利用者の流通を~network上で［
盗聴する／改竄する
］ことから より保護するので。
◎
Overall, autoupgrading optionally-blockable mixed content is expected to be security- and privacy-positive, by protecting more user traffic from network eavesdropping and tampering.
</p>

<p>
開発者が意図しなかった資源を読込むことには、~web~page内に［
~security／~privacy
］課題を導入する~riskがある。
例えば、ある~web~siteが
`http://www.example.com/image.jpg^s
から差し障りない画像を含めていて，それが何らかの理由で追跡~siteへ~redirectされた場合など。
~browserは、今や［
開発者／利用者
］の明示的な同意tなしに~privacy課題を導入することになる。
しかしながら，これらの事例は、ごくまれにしかないと期待される。
この~riskは
— `阻止-可能$な内容は自動昇格することなく —
`随意に阻止-可能$な内容に限り自動昇格することで，軽減される。
`阻止-可能$な内容には、他にも~riskがあり得る
— 例えば、古過ぎて脆弱な~JS~libraryを読込む~riskなど。
◎
There is a risk of introducing a security or privacy issue in a webpage by loading a resource that the developer did not intend. For example, suppose that a website includes an innocuous image from http://www.example.com/image.jpg, and for some reason https://www.example.com/image.jpg redirects to a tracking site. The browser will now have introduced a privacy issue without the developer’s or user’s explicit consent. However, these cases are expected to be exceedingly rare. The risk is mitigated by autoupgrading only optionally-blockable content, not blockable content as well. Blockable content could present more risk, for example the risk of loading an out-of-date and vulnerable JavaScript library.
</p>

	</section>
<!-- 
	<section id="acknowledgements">
<h2 title="Acknowledgements">7. 謝辞</h2>
	</section>
 -->
</main>
