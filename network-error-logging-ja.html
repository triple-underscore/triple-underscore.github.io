<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<title>Network Error Loggingï¼ˆæ—¥æœ¬èªè¨³ï¼‰</title>

<link rel="stylesheet" href="common.css" type="text/css" />
<link rel="stylesheet" href="common-w3c.css" type="text/css" />
<style>
.report {
	color: green;
}

.status {
	color: green;
}

.js-value, .js-type {
	color: green;
}

samp {
	white-space: nowrap;
	background: #F0F0F0;
	margin-left: 0.5em;
	margin-right: 0.5em;
}

.annoying-warning {
	border: solid 3px red;
	padding: 0.5em;
}

</style>

<script src="common0.js" ></script>
<script src="common1.js" async></script>

<script>
Util.ready = function(){
	const source_data = {
		toc_main: 'MAIN0',
		generate: expand
	};
	Util.switchWordsInit(source_data);
}

function expand(){

	const class_map = {
		h: 'header',
		e: 'element',
		st: 'status',
		P: 'production',
		jt: 'js-type',
		jv: 'js-value',
	};

	const tag_map = {
		c: 'code',
		m: 'code',
		st: 'code',
		jt: 'code',
		jv: 'code',
		h: 'code',
		e: 'code',
		P: 'var',
		v: 'var',
		i: 'i',
		s: 'samp',
	};

	const link_map = this.link_map;


	return this.html.replace(
		/%[\w\-~ä¸€-é¿†ã‚-ã‚“]+|`(.*?)([$@^])(\w*)/g,
		create_html
	);

	function create_html(match, key, indicator, klass){
if(!indicator) {//%
	return '<var>' + match.slice(1) + '</var>';
}

let text = key;
let href = '';
let classname = class_map[klass];
let tag = tag_map[klass];

switch(klass){
case 'r': // ref
	text = '[' + key + ']';
	href = '#bib-' + key.toLowerCase();
	break;
case 'l': // literal
	text = '"<code class="literal">' + text + '</code>"'
	break;
case 'en': // english words
	return '<span lang="en-x-a0">' + key + '</span>'
	break;
}

if(tag) {
	text = '<' + tag + (
		classname ? ' class="' + classname + '"' : ''
	) + '>' + text + '</' + tag + '>';
}


if(indicator !== '^'){
	href = link_map[klass ? (klass + '.' + key) : key] || href;
	if(!href){
		console.log(match); // check error
		return match;
	}

	switch(indicator){
	case '$':
		text = '<a href="' + href + '">' + text + '</a>';
		break;
	case '@':
		text = '<dfn id="' + href.slice(1) + '">' + text + '</dfn>';
		break;
	}
}

return text;

	}
}
</script>

<script type="text/plain" id="_source_data">


â—â—options

spec_date:2018-07-26
trans_update:2018-07-28
source_checked:180718
page_state_key:WEBAPPSEC
original_url:https://w3c.github.io/network-error-logging/
page_state_key:WEBAPPSEC
site_nav:network,security,performance
spec_status:ED
ref_id_prefix:bib-
ref_id_lowercase:true
	conformance:w3c
copyright:2018,permissive
trans_1st_pub:2015-04-11


â—â—original_id_map


â—â—link_map

st.4xx:~RFC7231#section-6.5
st.5xx:~RFC7231#section-6.6
st.200:~RFC7231#section-6.3.1

h.NEL:#dfn-nel
h.Set-Cookie:~HTTPcookie#section-4.1
	~IETF/rfc6265#section-4.1
h.Report-To:~REPORTING#report-to
h.Content-Length:~RFC7230#section-3.3.2


P.json-field-value:~IETF/draft-reschke-http-jfv#json-field-value

c.failure_fraction:#dfn-failure_fraction
c.include_subdomains:#dfn-include_subdomains
c.max_age:#dfn-max_age
c.success_fraction:#dfn-success_fraction
c.report_to:#dfn-report_to



	â—ç”¨èª

~networkè¦è«‹:#dfn-network-requests
ç›¸:#dfn-phase
~DNSè§£æ±º:#dfn-dns-resolution
~secureæ¥ç¶šã®ç¢ºç«‹:#dfn-secure-connection-establishment
è¦è«‹ã¨å¿œç­”ã®ä¼é€:#dfn-transmission-of-request-and-response


~NELæ–½ç­–:#dfn-nel-policies
nP.å—ä¿¡ã—ãŸ~IP~address:#dfn-received-ip-address
nP.ç”Ÿæˆå…ƒ:#dfn-policy-origin
nP.æ–½ç­–~ç”Ÿæˆå…ƒ:#dfn-policy-origin
nP.ä¸‹ä½domain~flag:#dfn-subdomains
nP.å ±å‘Šç”¨~group:#dfn-reporting-group
nP.æœ‰åŠ¹ç§’æ•°:#dfn-ttl
nP.ä½œæˆæ™‚åˆ»:#dfn-creation

å¤±åŠ¹ã—ãŸ:#dfn-expired
å¤±åŠ¹ã—ã¦:#dfn-expired

è¦‹æœ¬æŠ½å‡ºç‡:#dfn-sampling-rate
æˆåŠŸ~æ™‚ã®è¦‹æœ¬æŠ½å‡ºç‡:#dfn-successful-sampling-rate
å¤±æ•—~æ™‚ã®è¦‹æœ¬æŠ½å‡ºç‡:#dfn-failure-sampling-rate

æˆåŠŸ-:#dfn-succeed
æˆåŠŸã—ãŸ:#dfn-succeed
å¤±æ•—-:#dfn-fail
å¤±æ•—ã—ãŸ:#dfn-fail
	~fail:#dfn-fail
	~failures:#dfn-fail
	~succeeded:#dfn-succeed


~network~error:#dfn-network-errors
~network~errorå ±å‘Š:#dfn-network-error-reports
nE.ç¨®åˆ¥:#dfn-types
nE.ç›¸:#dfn-type-phase

æ–½ç­–~cache:#dfn-policy-cache

ç”Ÿæˆå…ƒ~ç”¨ã®æ–½ç­–ã‚’é¸ã¶:#choose-a-policy-for-an-origin
	Â§~Predefined~network~error~types:#predefined-network-error-types
	Â§~DNSç’°å¢ƒè¨­å®šã®èª¤ã‚Š:#dns-misconfiguration
	Â§~Origins~with~multiple~IP~address:#origins-with-multiple-ip-addresses
	Â§~Privacy~Considerations:#privacy-considerations


~CORSäºˆè¡Œ~è¦è«‹:~FETCH#cors-preflight-request
~HTTP~network~fetch:~FETCH#http-network-fetch
rq.~client:~FETCH#concept-request-client
	rq.~referrer:~FETCH#concept-request-referrer
~redirect:~FETCH#redirect-status
å¿œç­”:~FETCH#concept-response

eG.æœ‰åŠ¹ç§’æ•°:~REPORTING#dom-endpoint-group-ttl
å ±å‘Šå…ˆ~groupç”¨ã«~dataã‚’~queueã™ã‚‹:~REPORTING#queue-report
å ±å‘Šå…ˆ~group:~REPORTING#endpoint-group
å ±å‘Š~æœ¬ä½“:~REPORTING#report-body
å ±å‘Š~ç¨®åˆ¥:~REPORTING#report-type
å ±å‘Š:~REPORTING#report
å ±å‘Šç”¨~è¦³æ¸¬å™¨ã‹ã‚‰å¯è¦–:~REPORTING#visible-to-reportingobservers
	å ±å‘Šç”¨~è¦³æ¸¬å™¨ã‹ã‚‰å¯è¦–:~REPORTING#visible-to-reporting-observers


~domainå:~IETF/rfc1034#section-3.1
~domainåå‰ç©ºé–“~æœ¨:~IETF/rfc1034#section-3.1
~DNSè§£æ±ºå™¨:~IETF/rfc1034#section-5

ç’°å¢ƒ~è¨­å®šç¾¤~obj:~WAPI#environment-settings-object


~navi:~NAVI#navigate
ç”Ÿæˆå…ƒ:~ORIGIN#origin

m.navigator.onLine:~HTMLLS/offline.html#dom-navigator-online
	m.navigator.onLine:https://html.spec.whatwg.org/multipage/#navigator.online

	~network~protocol:~RTIMING#dom-performanceresourcetiming-nexthopprotocol
	m.nextHopProtocol:~RTIMING#dom-performanceresourcetiming-nexthopprotocol


	SECURE-CONTEXT:https://www.w3.org/TR/secure-contexts/
ç”Ÿæˆå…ƒã¯ä¿¡ç”¨ã«ä¾¡ã—å¾—ã‚‹ã‹ï¼Ÿ:~SECURE-CONTEXT#is-origin-trustworthy
ä¿¡ç”¨ã«ä¾¡ã—å¾—ã‚‹ç”Ÿæˆå…ƒ:~SECURE-CONTEXT#potentially-trustworthy-origin

~referreræ–½ç­–:~REFERRER-POLICY#referrer-policy
	https://www.w3.org/TR/referrer-policy/#referrer-policy
	enV.~referreræ–½ç­–:~WAPI#concept-settings-object-referrer-policy

å±€æ‰€~cache:~RFC7234
æŒç¶šçš„~æ¥ç¶š:~RFC7230#section-6.3
è¦è«‹:#_request
	~RFC7230#section-2.1
è¦è«‹~method:~RFC7231#section-4
	:~RFC7230#section-2.1
~server:~RFC7230#section-2.1
å¿œç­”~header:~RFC7231#section-7
çŠ¶æ…‹s~code:~RFC7231#section-6

ä¸Šä½domainåˆè‡´-:~IETF/rfc6797#section-8.2

	â—è£œå®Œ
~map:~INFRA#ordered-map
æ··åœ¨~å†…å®¹:~MIXED-CONTENT#mixed-content
	~payloadæœ¬ä½“:~RFC7230#section-3.3
	h.Content-Length
	å†…å®¹~ç¬¦å·æ³•
	è¦è«‹ã®~referrerã‚’æ±ºå®šã™ã‚‹~algo:~REFERRER-POLICY#determine-requests-referrer

â—â—words_table1
REPORTING:reporting1-ja.html
RTIMING:resource-timing-ja.html
	https://www.w3.org/TR/resource-timing-2/
NAV-TIMING:navigation-timing-ja.html
	https://w3c.github.io/navigation-timing/

â—â—words_table

	â—netowork
HTTP:
	~HTTP~network:HTTP-network
TLS:
TCP:
DNS:
IP:
IPv4:
IPv6:
CORS:
open:
channel::::ãƒãƒ£ãƒãƒ«
header::::ãƒ˜ãƒƒãƒ€
field::::ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
server::::ã‚µãƒ¼ãƒ
	serverå´:server-side
service::::ã‚µãƒ¼ãƒ“ã‚¹
serve::::ã‚µãƒ¼ãƒ–
host::::ãƒ›ã‚¹ãƒˆ
domain::::ãƒ‰ãƒ¡ã‚¤ãƒ³
åå‰ç©ºé–“:namespace::~
ä¸Šä½domain:superdomain::ä¸Šä½ domain:ä¸Šä½ãƒ‰ãƒ¡ã‚¤ãƒ³
ä¸‹ä½domain:subdomain::ä¸‹ä½ domain:ä¸‹ä½ãƒ‰ãƒ¡ã‚¤ãƒ³
message::::ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
transport::::ãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ãƒˆ
close::::
referrer::::ãƒªãƒ•ã‚¡ãƒ©
address::::ã‚¢ãƒ‰ãƒ¬ã‚¹
client::::ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
	content-length
network::::ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯
error::::ã‚¨ãƒ©ãƒ¼
	errorãªã error-free:::
äº¤æ›:exchange:~
protocol::::ãƒ—ãƒ­ãƒˆã‚³ãƒ«
redirect::::ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
loop::::ãƒ«ãƒ¼ãƒ—
method::::ãƒ¡ã‚½ãƒƒãƒ‰
cookie::::ã‚¯ãƒƒã‚­ãƒ¼
upload::::ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
payload::::ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰
web::::
site::::ã‚µã‚¤ãƒˆ
routing:::çµŒè·¯åˆ¶å¾¡:ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
node::::ãƒãƒ¼ãƒ‰
page::::ãƒšãƒ¼ã‚¸
offline::::ã‚ªãƒ•ãƒ©ã‚¤ãƒ³
downtime::::ç¨¼åƒåœæ­¢æœŸé–“:ãƒ€ã‚¦ãƒ³æœŸé–“
navigate::::ãƒŠãƒ“ã‚²ãƒ¼ãƒˆ
navi:navigation:::ãƒŠãƒ“
fetching:::fetch å‡¦ç†
fetch::::
pinning:
pinned:

èª­è¾¼-:load::èª­ã¿è¾¼ã¿::ãƒ­ãƒ¼ãƒ‰
èª­è¾¼ã¿:loading::èª­ã¿è¾¼ã¿::ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°

ç¢ºç«‹-:establish::~
ç¢ºç«‹:establishment::~

ä¼é€:transmission::~
ä¼é€-:transmit::~
å¿œç­”-:respond::~::ãƒ¬ã‚¹ãƒãƒ³ãƒ‰
å¿œç­”:response::~::ãƒ¬ã‚¹ãƒãƒ³ã‚¹
è¦è«‹:request::~::ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
è³‡æº:resource::~:ãƒªã‚½ãƒ¼ã‚¹
äºˆè¡Œ:preflight::~
ä¸‹ä½è³‡æº:subresource::~:ä¸‹ä½ãƒªã‚½ãƒ¼ã‚¹
æœ¬ä½“:body::~::ãƒœãƒ‡ã‚£
é€é”-:deliver::~
é€é”:delivery::~
æ¥ç¶šæ€§:connectivity::~
æ¥ç¶š:connection::~
é€ä¿¡-:send::~
å—ä¿¡-:receive::~
	ã«é€ä¿¡ã—ãŸ:received response from
é€šä¿¡-:communicate::~
åˆ°é”-:reach::~
	åˆ°é”-ä¸èƒ½:unreachable
ç¬¦å·åŒ–æ³•:encoding::~::ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°
ç¬¦å·æ³•:coding::~::ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°
è§£æ±ºå™¨:resolver::~
è§£æ±º:resolution::~
è§£æ±º-:resolve::~
è¿½å¾“-:follow::~
æ¤œç´¢å–å¾—-:retrieve:~
æ¤œç´¢:lookup::~
æµé€š:traffic::~
é…å‚™-:deploy::~
é‹ç”¨-:operate::~
ç™ºè¡Œ-:make::~
	åˆ†æ•£-:balance across:~
åŸºç›¤:infrastructure::~
è¡Œå…ˆ:destination::~

	ALPN Protocol ID


	â—NELï¼æ–½ç­–ï¼å‡¦ç†model
NEL:
cache::::ã‚­ãƒ£ãƒƒã‚·ãƒ¥
log::::ãƒ­ã‚°
ç”Ÿæˆå…ƒ:origin::~::ã‚ªãƒªã‚¸ãƒ³
éåŒä¸€ç”Ÿæˆå…ƒ:cross-origin::~::ã‚¯ãƒ­ã‚¹ã‚ªãƒªã‚¸ãƒ³
åé›†-:collect::~
åé›†å™¨:collector::~
	`REPORTING$r:Reporting
å ±å‘Š:report::~::ãƒ¬ãƒãƒ¼ãƒˆ
å ±å‘Š-:report::~::ãƒ¬ãƒãƒ¼ãƒˆ
	å ±å‘Š-æ³•:reporting
å ±å‘Šå‡¦ç†:reporting::~::ãƒ¬ãƒãƒ¼ãƒˆå‡¦ç†
å ±å‘Šç”¨:reporting::~::ãƒ¬ãƒãƒ¼ãƒˆç”¨
å ±å‘Šå…ˆ:endpoint::~
	å ±å‘Šå…ˆ:Reporting endpoint
è¦³æ¸¬-:observe::~
è¦³æ¸¬å™¨:observer::~::ã‚ªãƒ–ã‚¶ãƒ¼ãƒ
å¯è¦–:visible::~
æ–½ç­–:policy::~:ãƒãƒªã‚·ãƒ¼
ç™»éŒ²-:register::~
	ç™»éŒ²-æ¸ˆã¿:registered
ç™»éŒ²:registration::~
æ›´æ–°-:update::~
æ ¼ç´-:store:~
æ—¢çŸ¥:known::~
æˆåŠŸ-:succeed::~
æˆåŠŸ:success::~
æˆåŠŸè£¡:successful::~
	æˆåŠŸã—ãŸ:successful
å¤±æ•—-:fail::~
å¤±æ•—:failure::~
queue::::ã‚­ãƒ¥ãƒ¼

çŠ¶æ…‹s:status::çŠ¶æ…‹Â°::ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
ç›¸:phase::~


å¤±åŠ¹-:expire::~
å­˜ç¶šæœŸé–“:lifetime::~
æœ‰åŠ¹ç§’æ•°:ttl::~
å®Ÿæ™‚é–“:real-time::~::ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ 
æ™‚é–“åˆ‡ã‚Œ:timeout::~::ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
	æ™‚é–“åˆ‡ã‚Œã«:timed out
æ™‚åˆ»:time::~
ä½œæˆæ™‚åˆ»:creation::~
æ™‚åˆ»å°:timestamp::~
çµŒé-:elapse:~
æ¸¬å®š-:instrument:~
è¨ˆæ¸¬-:measure:~
age:::
milli::::ãƒŸãƒª
	milliseconds:::ãƒŸãƒªç§’
æœªæ¥:future:~
éå»:past:~
è¿‘éå»:recent:~
	æ—¥é–“:days
	ç§’é–“:seconds
	ç§’æ•°:number of seconds
	ç§’:seconds

random::::ãƒ©ãƒ³ãƒ€ãƒ 
æ¯”ç‡:rate::~
è¦‹æœ¬æŠ½å‡ºç‡:sampling rate::~


	â—ä¿å®‰ï¼privacy
scan::::ã‚¹ã‚­ãƒ£ãƒ³
å¢ƒç•Œ:boundary::~
scripting::::
malware::::ãƒãƒ«ã‚¦ã‚§ã‚¢
privacy::::ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼
æŒç¶šçš„:persistent::~
è¿½è·¡å™¨:tracker::~
å…¬é–‹-:expose::~
è‡ªæ˜:trivial::~
æ”»æ’ƒè€…:attacker::~
æ”»æ’ƒ:attack::~
ä¹—å–ã‚Š:hijacking::~
æš—å·:cipher::~
è¨¼æ˜æ›¸:certificate::~
æ¨©é™:authority::~
æ¢æŸ»-:probe::~
	åˆ¥å€‹ã®distinct
risk::::ãƒªã‚¹ã‚¯
é–²è¦§:browsing::~
å±¥æ­´:history::~
secure::::ã‚»ã‚­ãƒ¥ã‚¢
é•å:violation::~
ç©¶æ˜-:investigate::~
å½“äº‹è€…ä¸»ä½“:first-party::~
ç¬¬ä¸‰è€…ä¸»ä½“:third-party::~
ä¸»ä½“:party::~
è»½æ¸›-:mitigate::~
å½±éŸ¿i:implications:å½±éŸ¿
æ¤œè¨¼y:verify::æ¤œè¨¼
	æ¤œè¨¼yã—ãªã„:Without ã€œ verification
ä¿è­·:protection::~
ä¿¡ç”¨-:trust::~
ä¿¡ç”¨ã«:trust ã«::~
	ä¿¡ç”¨ã«ä¾¡ã—å¾—ã‚‹:potentially-trustworthy
æ‚ªæ„çš„:malicious::~
æ¤œæŸ»-:check::~
æ¼æ´©-:leak::~
æ¼æ´©:leakage::~
	~supercookie
é˜»æ­¢-:block::~::ãƒ–ãƒ­ãƒƒã‚¯
é™æ ¼-:downgrade::~

è¨ªå•-:visit:~
é˜²ã:prevent ã™ã‚‹:~
	é˜²æ­¢-:prevent:~
äºˆé˜²ç­–:precautions:~
	collectors
æ•æ„Ÿ:sensitive::~::ã‚»ãƒ³ã‚·ãƒ†ã‚£ãƒ–
æ··åœ¨:mixed:~
	MITM
	^en:rebinding
	^en:Capability
	HSTS, HPKP, ~pinned CSP


	â—æ§‹æ–‡ï¼data
URL:
	~URL:URI
ABNF:
entry::::ã‚¨ãƒ³ãƒˆãƒª
flag::::ãƒ•ãƒ©ã‚°
list::::ãƒªã‚¹ãƒˆ
item::::ã‚¢ã‚¤ãƒ†ãƒ 
member::::ãƒ¡ãƒ³ãƒ
map::::ãƒãƒƒãƒ—
prop:property:::ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
è¨˜éŒ²-:record::~
record::::ãƒ¬ã‚³ãƒ¼ãƒ‰
pattern::::ãƒ‘ã‚¿ãƒ³
group:::ã‚°ãƒ«ãƒ¼ãƒ—
ä¸‹ä½group:subgroup::ä¸‹ä½ã‚°ãƒ«ãƒ¼ãƒ—
JSON:
æ•´æ•°:integer:~
çœŸå½å€¤:boolean::~
æ–‡å­—åˆ—:string::~
å®Ÿæ•°:number::~
	`Boolean^jt:boolean
	`String^jt:string
	`Number^jt:number
	`number^jt:number

å®£è¨€-:declare::~
å½¢å¼:format::~
ç©º:empty:~
	~NIN ç©º `string^jt:non-empty
é›†åˆ:set:~
å‹:type:~
ç¨®åˆ¥:type:~
é…åˆ—:array:~
	ä¸¦ã³:sequence
é †åº:order:~
é †åºä»˜ã‘ã‚‰:order ã•:~
æ§‹æ–‡è§£æ-:parse:~
key:::
å€¤:value:~
	å€¤ãªã—ã®:valueless:~
åå‰:name:~
å:name:~
dot::::ãƒ‰ãƒƒãƒˆ
	dot-delimited
	dotted-decimal
è¡¨è¨˜æ³•:notation:~
ç¯„å›²:range:~
	10 é€²:decimal:~
	ä¸¦ã³:sequence
	16 é€²æ•°å­—:hexadecimal-digit:~
ç”Ÿæˆ-:generate::~

ç„¡åŠ¹:invalid:~
	å¦¥å½“ã§ãªã„:invalid
æœ‰åŠ¹:valid:~
å¦¥å½“:valid:~
æ§‹æ–‡:syntax:~
åˆè‡´-:match:~
ä¸ä¸€è‡´:mismatch:~
æ—¥ä»˜:date:~
	åŒºåˆ‡ã£ãŸ:separate
	åŒºåˆ‡ã‚Šã®:-delimited:~
	ç‰‡:piece
	è² ã§ãªã„:non-negative


	â—ä»•æ§˜
API:
vendor:::ãƒ™ãƒ³ãƒ€
version::::ãƒãƒ¼ã‚¸ãƒ§ãƒ³
algo:algorithm:::ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
app:application:::ã‚¢ãƒ—ãƒª
UA:user agent:UA
custom::::ã‚«ã‚¹ã‚¿ãƒ 
comment::::ã‚³ãƒ¡ãƒ³ãƒˆ
scenario::::ã‚·ãƒŠãƒªã‚ª
å‡¦ç†èƒ½:performance::~::ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
ä»•çµ„ã¿:mechanism:~
æœ‰æ„:significant:~
é‡è¦:important:~
å´é¢:aspect:~
äº‹ä¾‹:case:~
æœ«ç«¯åˆ©ç”¨è€…:end-user:~
å¯ç”¨:available:~
å¯ç”¨æ€§:availability:~
ä»»æ„é¸æŠ:optional:~
ä»»æ„é¸æŠ-:opt in:ä»»æ„ã«é¸æŠ
	OPTIONAL
å¿…é ˆ:required:~
	å¿…é ˆ~REQUIRED:
	æ•´åˆã™ã‚‹:consistent
å•é¡Œ:problem:~
æ®µ:step:~
è¦‹æœ¬:sample:~
ä»•äº‹:work:~
text::::ãƒ†ã‚­ã‚¹ãƒˆ
license::::
æ¦‚å¿µ:concept:~
ä»•æ§˜:spec:~
ç‰¹åˆ¥:special:~
ç‰¹å®šã®:specific ãª:~
ç‰¹æœ‰:specific:~
	ã«ç‰¹æœ‰:-specific
	ç‰¹ã«:specifically
è©³ç´°:details:~
è©³ç´°ãª:detailed:~
å˜ç´”:simple:~
æ¦‚ã—ã¦:typical ã«:~
å…¸å‹çš„:typical:~
æ‰‹æ³•:method:~
æ–‡æ›¸:document:~
ä»£æ›¿:alternative:~
é–¢é€£ã™ã‚‹:relevant ãª:~
æƒ…å ±:information:~
æœ€æ‚ª:worst:~
ç›´æ¥çš„:direct:~
å…¥åŠ›:input:~
é›†å›£:populations:~
ç´”ç²‹:pure:~
å®Ÿéš›:actual:~
å®Ÿéš›ã®:actual ãª:~
æ˜ç¤ºçš„:explicit:~
æ¨™æº–:standard:~
é©æ­£:proper:~
	é©æ­£ã§ãªã„:improper
æ’ä¹…çš„:permanent:~
ä¾å­˜é–¢ä¿‚:dependencies:~
äº‹å®Ÿ:fact:~
	ç¨®é¡:kind:~

	æ˜“ãã™ã‚‹:facilitate
	å®Ÿè·µçš„ãª:hands-on
	become:::
	ä¾‹ï¼š:e.g.
	ä¾‹:example
	ä¾‹ãˆã°:for example
	ä¾ç„¶ã¨ã—ã¦:still
	å…·ä½“ä¾‹ã¨ã—ã¦:for instance
	ååˆ†:enough
	åŒæ§˜ã«:similarlyï¼:similar
	å•ã‚ãš:regardless of
	å› ã‚Š:due
	å¿…è¦æ€§:need
	å¿…è¦:need
	æ‰±ã„:treatment
	ã¹ã:should
	ä¸è¦ã«ãªã‚‹:eliminating
	å…¨èˆ¬:overall
	ç¯€:section
	ã¹ã:should
	å•ã‚ãš:regardless
	è¬è¾:acknowledgment
	~~æœ‰ç›Šãª:helpful
	ã•ã‚‚ãªã‘ã‚Œã°:otherwise
	ã—ã‹ã—ãªãŒã‚‰ï¼Œ:however
	ã—ãŸãŒã£ã¦ï¼ã®ã§:therefore
	ã™ãªã‚ã¡:i.e.,
	ã™ã‚‹ãŸã‚:in order to
	ã«å‰‡ã£ã¦:accordingï¼:accordingly
	ãªãœ:why
	ä»Šæ—¥ã®:today
	å¿…è¦ã¨ã•ã‚Œã‚‹:necessary
	ã—ã‹ã—ãªãŒã‚‰:however
	è£œåŠ©:helping
	sincere
	thank
	ã§ããªã„:unable
	-å¯èƒ½ï¼ã§ãã‚‹:able
	-:we
	ã—ãŸã„æ‰€:ideally
	ç¾©å‹™ä»˜ã‘ã‚‰ã‚Œ:mandatory
	ä»¥ä¸‹ã§ã¯:This rationale
	ã¯ãšã§ã‚ã‚‹:must
	å‡ºæ¥äº‹:event
	çœŸã«:truly
	å¿…è¦ãŒã‚ã‚‹:must
	~~è¦å› :cause
	å¯¾è±¡:subject
	åºè«–:introduction

	â—ä»•æ§˜ï¼ˆå‹•è©
è€ƒæ…®-:consider:~
è¦‹ãªã•:considere ã•:~
è€ƒãˆã‚‹:consider ã™ã‚‹:~
è€ƒæ…®ç‚¹:considerations:~
å¯„ä¸:contribution:~
å†åˆ©ç”¨-:reuse:~
	å†åˆ©ç”¨-å¯èƒ½:reusable
åˆ©ç”¨è€…:user:~
åˆ©ç”¨:use:~
åˆ©ç”¨-:use:~
æ°—ä»˜ã:aware ã™ã‚‹:~
æ°—ä»˜ã‹ãª:aware ã—ãª:~
	æ°—ä»˜ã‹ãªã„ã¾ã¾:left unaware
äº‹å‰æ±ºå®š-:predetermine:~
æŒ‡å®š-:specify:~
ç„¡è¦–-:ignore:~
åˆ¶ç´„:restriction:~
åˆ¶ç´„-:restrict:~
å¯èƒ½åŒ–-:enable:~
å®šç¾©:definition:~
å®šç¾©-:define:~
å®šç¾©æ¸ˆã¿ã®:predefined ãª:~
æ„å›³-:intend:~
æ„å›³:intent:~
å¤‰æ›´:change:~
	åºè«–:introduction:~
é–‹ç™ºè€…:developer:~
æ”¹å–„-:improve:~
è§£-:understand:~
è¦æ±‚-:require:~
è§£æ¶ˆ-:solve:~
è§£æ±ºç­–:solution:~
çµ¦-:supply:~
ä¾›-:provide:~
ä¾›ã•:provide ã—:~
ä¾›ã›:provide ã§ã:~
	ä¾›ã™ã‚‹å´:provider:~
è¿½åŠ ã®:additional:~æ‹¡å¼µ-:extend:~
ç™»è¨˜ç°¿:registry:::ãƒ¬ã‚¸ã‚¹ãƒˆãƒª
è¨±å®¹-:allow:~
	è¨±å®¹ã—ãªã„ã‚ˆã†ã«ã™ã‚‹:disallow
æŒ‡ç¤º-:indicate:~
æŒ‡å›³-:instruct:~
å–çµ„ã‚€:address ã™ã‚‹:å–ã‚Šçµ„ã‚€
æ”¯æ´:assistance:~
é©åˆ-:conform:~
é©åˆçš„:conformant:é©åˆ
è¦ä»¶:requirements:~
æœªçŸ¥ã®:unknown:~
é©å¿œ-:accommodate:~
æ¿«ç”¨-:abuse:~
èª¬æ˜:explanation:~
èª¬æ˜-:explain:~
é©ç”¨-:apply:~
å¼·ã„ã‚‰:force ã•:~

äºˆæœŸ-:expect:~
åˆ¶å¾¡:control:~
åˆ¶å¾¡-:control:~
æ±ºå®š-:determine:~
ç¢ºä¿-:ensure:~
è§£é‡ˆ-:interpret:~

è¨˜è¿°:description:~
è¨˜è¿°-:describe:~
è¿°ã¹ã‚‹:describe ã™ã‚‹:~
è©¦ã¿ã‚‹:attempt ã™ã‚‹:~
è©¦ã¿ã¦:attempt ã—ã¦:~
è©¦ã¿ãŸ:attempt ã—ãŸ:~
å–æ‰±ã£ã¦:handle ã—ã¦:~
å–æ‰±ã‚ã‚Œ:handle ã•ã‚Œ:~
è©¦è¡Œ-:try:~
	ã¨ã™ã‚‹:assume ã™ã‚‹
æ¬²ã•ã‚Œ:desire ã•ã‚Œ:~
å«æ„-:imply:~
å¢—è£œ-:augment:~
ä¾æ‹ -:rely:~
è£å®š-:decide:~
	æ˜ã‚Šä¸‹ã’ã‚‹:Plumb this through
	å¿˜ã‚ŒãŸ:forget ã—ãŸ
	ã«æ³¨æ„:Note that
	çŸ¥ã‚‹:know
	ä¸»ç”¨é€”:primarily used to
	è¦‹ã‚ˆ:see
	~~ç™ºè¡Œ-:publish
	åŠ ãˆã¦:Additionally
	ã«åŠ ãˆã¦:in addition to
	å–ã‚Šè¾¼ã‚€:ingest
	å‚™ãˆ:equipped
	-:help
	ã§ã‚ã‚Šç¶šã‘ã‚‹:remains
	å¾“ã†:follow
	é¸ã¶:choose


	â—æœªåˆ†é¡ï¼ˆå‹•è©
access::::ã‚¢ã‚¯ã‚»ã‚¹
click::::ã‚¯ãƒªãƒƒã‚¯
ä½œæˆ-:create:~
å…±æœ‰-:share:~
åˆ¶é™-:limit:~
å¤‰åŒ–-:change:~
å®Ÿè¡Œ-:execute:~
å®Ÿè¡Œ:execution:~
å°å‡º-:derive:~
æŠ½å‡º-:extract:~
æŒ¿å…¥-:insert:~
æå‡º-:submit:~
ç§»å‹•-:move:~
è¿½åŠ -:add:~
å¯¾è©±:interaction::~
æ ¼ç´-:store:~
è­˜åˆ¥-:identify:~
è­˜åˆ¥å­:identifier::~
å†è¨­å®š-:reset:~
è¨­å®š-:set:~
åŒ…å«-:contain:~
é™¤å»-:remove:~
çµä»˜ã‘ã‚‰:associate ã•:çµã³ä»˜ã‘ã‚‰
è¡¨ç¾-:represent:~
å­˜åœ¨-:exist:~
èµ·å‹•-:initiate:~
	ã«ã‚ˆã‚Šèµ·å‹•ã•ã‚ŒãŸ:-initiated
èµ·å‹•å…ƒ:originator:~

æ‹’å¦-:refuse::~
ç ´æ£„-:revoke::~
	ç ´æ£„-æ¸ˆã¿:revoked
ä¸‹å±¤ã®:underlying::~
ç’°å¢ƒè¨­å®š:configuration:~
ç’°å¢ƒè¨­å®š-:configure:~
	ç’°å¢ƒè¨­å®šã®èª¤ã‚Š:misconfiguration
	ç’°å¢ƒè¨­å®šã‚’èª¤ã£ãŸ:misconfigure
ä¸€éæ€§ã®:transient ãª:~

å•é¡Œi:issue::å•é¡Œ
ç™ºè¡Œi:issuing::ç™ºè¡Œ
è“„ç©:storage::~::ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
å±€æ‰€:local::~::ãƒ­ãƒ¼ã‚«ãƒ«
å±€æ‰€çš„:local::~::ãƒ­ãƒ¼ã‚«ãƒ«
æ‰€æœ‰è€…:owner::~
	æ‰€æœ‰è€…ãŒèª°ã‹:ownership
ç®¡ç†è€…:administrator::~
æ‰€æœ‰-:own::~
ä¿å®ˆ-:maintain::~
å‰Šé™¤-:delete::~
æ¡æ…‹:condition::~
å®Œäº†-:complete::~
å†…å®¹:content::~
é­é‡-:encounter:~

é›†ç´„-:aggregate::~
é›†ç´„:aggregation::~
æ”¾æ£„-:abandon::~
é–‹å§‹-:start::~
ä¸­æ­¢-:abort::~
å‡¦ç†-:process:~
	å‡¦ç†-æ³•:processing
çµ„åˆã›:combination:~
å‹•ä½œ-:act:~
æ¶ˆå»-:clear::~
äº‹ç”±:reason::~
æ¤œå‡º-:detect::~
ç›£è¦–:monitoring::~
	^en:synthetic monitoring
é…ç½®-:place:~
åŸ‹è¾¼ã‚“ã§:embed ã—ã¦:åŸ‹ã‚è¾¼ã‚“ã§
åŸ‹è¾¼ã¾ã‚Œ:embed ã•ã‚Œ:åŸ‹ã‚è¾¼ã¾ã‚Œ

	ç”Ÿã˜-:occur
	åœ¨ã‚‹:present ã™ã‚‹
	å«-:include
	å«ã‚ã¦:including
	`å«ã‚€^i:include
	`å«ã¾ãªã„^i:exclude
	è¿”ã™:return
	å±-:belong
	ã¾ã¾left
	è©¦ã¿-:attempt
	å†ã³è©¦ã¿ã‚‹:reattempting
	å¯¾å¿œ-:correspond
	åœ¨ã‚‹ï¼åœ¨ã£ã¦:present
	ç„¡ã„:not present
	ç”Ÿã˜:occur
	ç¤ºã™:show
	é•·ç”Ÿãã™ã‚‹:long-lived

	â—æœªåˆ†é¡
link::::ãƒªãƒ³ã‚¯
location-bar:location bar:::ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼
script::::ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
data::::ãƒ‡ãƒ¼ã‚¿
è³½:rollğŸ²:ã‚µã‚¤ğŸ²
	opt:::
category::::ã‚«ãƒ†ã‚´ãƒª
code::::ã‚³ãƒ¼ãƒ‰
callback::::
æ­£ç¢ºa:accurate:æ­£ç¢º
obj:object:::ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ

ç™»éŒ²:registration:~
è¦ç´ :element:~
æœ¨:tree::~::ãƒ„ãƒªãƒ¼
è¦ª:parent::~
é€£é–:chain::~
éƒ¨ä½:portion:~
ç’°å¢ƒ:environment::~
è¨­å®šç¾¤:settings::~
ä¸é€æ˜:opaque::~
å†…éƒ¨:internal:~
ç‰¹æ€§:characteristic:~
å®Ÿåœ¨ã®:real:~
å…¨åŸŸçš„:global:~
æŠ•è³‡:investment:~
åœ°ç†çš„:geographic:~
æ‰€åœ¨:location:~
	è¿‘ã„:near
	ååˆ†é«˜ã„:sufficiently high
	HTMLï¼CSSï¼JavaScript
	ECMAScript
	IANA
	ç¯€:section
	~NIN:equal
	~consist

	Îµ:no policy
	æ¸›ã‚‰ã™:less
	ã“ã¨ã‚‚ã‚ã‚‹:sometimes
	end:
	~RET:skip the remaining stepsï¼abort these steps


	â—æŒ‡ç¤ºèª
	æ‰€ä¸ã®:given
ç¾åœ¨ã®:current:~
æ–°ãŸãª:new:~
æ—¢å­˜ã®:existing:~
è‡ªå‰ã®:own:~
	ãã‚Œã ã‘ã§:own
ç‰¹å®š0ã®:particular:ã‚ã‚‹ç‰¹å®šã®
éƒ¨åˆ†çš„:partial:~
å…¨éƒ¨çš„:full:~
å¤–å´:outside:~
	å˜ç‹¬ã®:single
	ä»–ã®:other
	æ®‹ã‚Šã®:additional
	ã€œä»¥ä¸Šã¯:at least
	ã€œä»¥ä¸Šã¯:at a minimum
	ã‚ã‚‹æ™‚ç‚¹ã§:at some point
	ç›´å¾Œ:immediately after
	ã„ãã¤ã‹ã®:several
	ã“ã®:this
	ã“ã‚Œã‚‰ã®:these
	ã™ã§ã«:already
	ã™ã¹ã¦ã®:all
	ãã®:that
	ãã®ã‚ˆã†ãª:such
	ãã‚Œã‚‰:they
	ãã‚Œã‚‰ã®:their
	ãã‚Œã‚‰ã‚’:them
	æ•°å¤šãã®:dozens of
	ã©ã‚Œã ã‘:how many
	ãã‚Œã‚‰ã®:those
	ä¸€éƒ¨:part-of
	ã®ã¿ãªã‚‰ãš:not just
	ä¸Š:above
	ä»‹:via
	ä»–ã®:other
	ä»£ãˆã¦:instead
	ä»¥å‰ã«:previously
	ä»¥å‰ã®:previous
	å€‹ã®:oneï¼:threeï¼:fourï¼:eight
	å€‹æ•°:number of
	åˆ¥ã€…ã®:separate
	åˆ¥ã®:another
	åˆ¥å€‹ã®:distinct
	å„:each
	åŒã˜:same
	ç­‰ã€…:and so on
	ç­‰ã€…:etc
	çµæœ:result
	æœ€åˆã®:first
	å¤šé‡ã®:large volume of
	å‰:before
	å¾Œ:after
	æ¬¡ã®:the following
	è‡ªèº«:itself
	è¤‡æ•°ã®:multiple
	é€š:through
	ç•°ãªã‚‹:different
	ä»–ã®å ´åˆ:otherwise
	ä¸¡è€…:both
	ä»¥å¤–ã®:not covered
	æœ€å¾Œã«:finally
	ã¾ãŸã‚‚ã‚„:once again
	é–“:during
	ãšã£ã¨å¤šã„:greatly outnumber
	ã‚ãŸã£ã¦:across
	éš”ãŸã‚ŒãŸ:not coupled with
	ã«å¯¾ã™ã‚‹:against
	æœ€ã‚‚ï¼å¤§æ¦‚ã¯:most
	-:if ever
	ã”ã¨ã«:per-
	ãŒå¤šã„:often
	ã‚ã‚‰ã‚†ã‚‹:every
	åˆ¥ã®:second
	ã€œã‹ã‚‰:out of


â—â—ref_normative
[CAPABILITY-URLS]
    Good Practices for Capability URLs. Jeni Tennison. W3C. 18 February 2014. W3C Working Draft. URL: https://www.w3.org/TR/capability-urls/
[FETCH]
    Fetch Standard. Anne van Kesteren. WHATWG. Living Standard. URL: https://fetch.spec.whatwg.org/
[HTML]
    HTML Standard. Anne van Kesteren; Domenic Denicola; Ian Hickson; Philip JÃ¤genstedt; Simon Pieters. WHATWG. Living Standard. URL: https://html.spec.whatwg.org/multipage/
[HTTP-JFV]
    A JSON Encoding for HTTP Header Field Values. J. Reschke. IETF. 24 October 2017. Active Internet-Draft. URL: https://tools.ietf.org/html/draft-reschke-http-jfv
[REFERRER-POLICY]
    Referrer Policy. Jochen Eisinger; Emily Stark. W3C. 26 January 2017. W3C Candidate Recommendation. URL: https://www.w3.org/TR/referrer-policy/
[REPORTING]
    Reporting API. WICG. Living Standard. URL: https://wicg.github.io/reporting/
[RESOURCE-TIMING-2]
    Resource Timing Level 2. Todd Reifsteck; Ilya Grigorik; Arvind Jain; Jatinder Mann; Zhiheng Wang; Anderson Quach. W3C. 18 May 2018. W3C Working Draft. URL: https://www.w3.org/TR/resource-timing-2/
[RFC1034]
    Domain names - concepts and facilities. P.V. Mockapetris. IETF. November 1987. Internet Standard. URL: https://tools.ietf.org/html/rfc1034
[RFC2119]
    Key words for use in RFCs to Indicate Requirement Levels. S. Bradner. IETF. March 1997. Best Current Practice. URL: https://tools.ietf.org/html/rfc2119
[RFC6797]
    HTTP Strict Transport Security (HSTS). J. Hodges; C. Jackson; A. Barth. IETF. November 2012. Proposed Standard. URL: https://tools.ietf.org/html/rfc6797
[RFC7159]
    The JavaScript Object Notation (JSON) Data Interchange Format. T. Bray, Ed.. IETF. March 2014. Proposed Standard. URL: https://tools.ietf.org/html/rfc7159
[RFC7230]
    Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing. R. Fielding, Ed.; J. Reschke, Ed.. IETF. June 2014. Proposed Standard. URL: https://tools.ietf.org/html/rfc7230
[RFC7231]
    Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content. R. Fielding, Ed.; J. Reschke, Ed.. IETF. June 2014. Proposed Standard. URL: https://tools.ietf.org/html/rfc7231
[RFC7234]
    Hypertext Transfer Protocol (HTTP/1.1): Caching. R. Fielding, Ed.; M. Nottingham, Ed.; J. Reschke, Ed.. IETF. June 2014. Proposed Standard. URL: https://tools.ietf.org/html/rfc7234
[SECURE-CONTEXTS]
    Secure Contexts. Mike West. W3C. 15 September 2016. W3C Candidate Recommendation. URL: https://www.w3.org/TR/secure-contexts/
[URL]
    URL Standard. Anne van Kesteren. WHATWG. Living Standard. URL: https://url.spec.whatwg.org/

â—â—ref_informative

[CSP]
    Content Security Policy Level 3. Mike West. W3C. 13 September 2016. W3C Working Draft. URL: https://www.w3.org/TR/CSP3/
[ECMA-262]
    ECMAScript Language Specification. Ecma International. URL: https://tc39.github.io/ecma262/
[RFC1123]
    Requirements for Internet Hosts - Application and Support. R. Braden, Ed.. IETF. October 1989. Internet Standard. URL: https://tools.ietf.org/html/rfc1123
[RFC3864]
    Registration Procedures for Message Header Fields. G. Klyne; M. Nottingham; J. Mogul. IETF. September 2004. Best Current Practice. URL: https://tools.ietf.org/html/rfc3864
[RFC4291]
    IP Version 6 Addressing Architecture. R. Hinden; S. Deering. IETF. February 2006. Draft Standard. URL: https://tools.ietf.org/html/rfc4291


â—â—trans_metadata
<p>
~THIS_PAGEã¯ã€~W3Cã«ã‚ˆã‚Šï¼Œå‰¯é¡Œã«æ—¥ä»˜ã«ã¦ç·¨é›†è€…è‰æ¡ˆã¨ã—ã¦å…¬é–‹ã•ã‚ŒãŸ
<a href="~SPEC_URL">Network Error Logging</a>
ã‚’æ—¥æœ¬èªã«ç¿»è¨³ã—ãŸã‚‚ã®ã§ã™ã€‚
~PUB
</p>


â—â—spec_metadata

æœ€æ–°ç™ºè¡Œãƒãƒ¼ã‚¸ãƒ§ãƒ³
	http://www.w3.org/TR/network-error-logging/

ç·¨é›†è€…è‰æ¡ˆ
	https://w3c.github.io/network-error-logging/

ç·¨é›†
	<a href="dcreager@google.com">Douglas Creager</a> (Google)
	<a href="igrigorik@gmail.com">Ilya Grigorik</a> (Google)
	<a href="alois.reitbauer@compuware.com">Alois Reitbauer</a> (Compuware Corp.)
	<a href="juliatuttle@chromium.org">Julia Tuttle</a> (Google)
	Arvind Jain  (Google) (Until January 2015)
	<a href="jmann@microsoft.com">Jatinder Mann</a> (Microsoft) (Until February 2014)

ãƒªãƒã‚¸ãƒˆãƒª
	<a href="https://github.com/w3c/network-error-logging/">We are on Github.</a>
	<a href="https://github.com/w3c/network-error-logging/issues">File a bug.</a>
	<a href="https://github.com/w3c/network-error-logging/commits/gh-pages/index.html">Commit history.</a>

Mailing list:
	<a href="https://lists.w3.org/Archives/Public/public-web-perf/">public-web-perf@w3.org</a>


</script>




</head>

<body>

<header>
	<hgroup>
<h1 id="title">Network Error Logging</h1>
	</hgroup>

</header>

<div id="MAIN" style="display:none;">

	<section id="abstract">
<h2 title="Abstract">è¦ç´„</h2>

<p>
ã“ã®æ–‡æ›¸ã¯ï¼»
é–‹ç™ºè€…ãŒï¼Œ~web~appç”¨ã«~network~errorã‚’å ±å‘Šã™ã‚‹æ–½ç­–ã‚’å®£è¨€ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
ï¼½ãŸã‚ã®ä»•çµ„ã¿ã‚’å®šç¾©ã™ã‚‹ã€‚
~UAã¯ã€ã“ã®æ–½ç­–ã‚’ï¼»
è¦è«‹ã•ã‚ŒãŸè³‡æºã‚’æˆåŠŸè£¡ã«~fetchã§ããªãã™ã‚‹~network~errorã«é­é‡ã—ãŸã¨ãã«
å ±å‘Šã™ã‚‹
ï¼½ãŸã‚ã«åˆ©ç”¨ã§ãã‚‹ã€‚
â—
This document defines a mechanism that enables developers to declare a network error reporting policy for a web application. A user agent can use this policy to report encountered network errors that prevented it from successfully fetching requested resources.
</p>

	</section>
	<section id="sotd">
<h2 title="Status of this document">ã“ã®æ–‡æ›¸ã®ä½ç½®ä»˜ã‘</h2>

<p>
<em>ã“ã®ç¯€ã§ã¯ã€ç™ºè¡Œæ™‚ç‚¹ã«ãŠã‘ã‚‹â€¦</em>
ã€ä»¥ä¸‹ã€ã“ã®ç¯€ã®ä»–ã®å†…å®¹ã¯ <a href="w3c-common-ja.html#status" >W3C æ—¥æœ¬èªè¨³ å…±é€šãƒšãƒ¼ã‚¸</a>ã«å§”è­²ã€‚ã€‘
</p>

<p>
ã“ã®æ–‡æ›¸ã¯
<a href="https://www.w3.org/webperf/">Web Performance Working Group</a>
ã«ã‚ˆã‚Š~~ç™ºè¡Œã•ã‚Œã¾ã—ãŸã€‚
â—
This document was published by the Web Performance Working Group as an Editor's Draft.
</p>

	</section>

<main id="MAIN0">

	<section id="introduction">
<h2 title="Introduction">1. åºè«–</h2>

<p>
~web~appã®å‡¦ç†èƒ½~ç‰¹æ€§ã‚’æ­£ç¢ºaã«è¨ˆæ¸¬ã™ã‚‹ã“ã¨ã¯ã€~siteé–‹ç™ºè€…ãŒï¼Œ~web~appã‚’æ”¹å–„ã™ã‚‹æ–¹æ³•ã‚’è§£ã™ã‚‹è£œåŠ©ã¨ã—ã¦é‡è¦ãªå´é¢ã‚’æˆã™ã€‚
~network~errorã«å› ã‚‹ï¼»
~appï¼ç‰¹å®š0ã®è³‡æº
ï¼½èª­è¾¼-ã®å¤±æ•—ã¯ã€æœ€æ‚ªã®~scenarioã§ã‚ã‚‹ã€‚
é–‹ç™ºè€…ãŸã¡ãŒãã®ã‚ˆã†ãªå¤±æ•—ã«å–çµ„ã‚€ãŸã‚ã«ã¯ã€ãã®ã‚ˆã†ãªå¤±æ•—ãŒï¼»
ã„ã¤ï¼Œã©ã“ã§ï¼Œãªãœ
ï¼½ç”Ÿã˜ãŸã‹ã‚’è­˜åˆ¥ã™ã‚‹ãŸã‚ã«ï¼Œ~UAã‹ã‚‰ã®æ”¯æ´ã‚’è¦ã™ã‚‹ã€‚
â—
Accurately measuring performance characteristics of web applications is an important aspect in helping site developers understand how to improve their web applications. The worst case scenario is the failure to load the application, or a particular resource, due to a network error, and to address such failures the developer requires assistance from the user agent to identify when, where, and why such failures are occurring.
</p>

<p>
ä»Šæ—¥ã®~appé–‹ç™ºè€…ã¯ã€ï¼»
æœ«ç«¯åˆ©ç”¨è€…ã‹ã‚‰ã®ï¼Œ~web~appã®å¯ç”¨æ€§
ï¼½ã«ã¤ã„ã¦ã®~dataã‚’å®Ÿæ™‚é–“ã«å¾—ã‚‹ã“ã¨ã¯ã§ããªã„ã€‚
ä¾‹ãˆã°ã€åˆ©ç”¨è€…ãŒ~network~errorã«å› ã‚Š ~pageã®èª­è¾¼ã¿ã«å¤±æ•—ã—ãŸå ´åˆ
â€” ï¼»
~DNSæ¤œç´¢ã«å¤±æ•—ã—ãŸ, æ¥ç¶šãŒæ™‚é–“åˆ‡ã‚Œã«ãªã£ãŸ, æ¥ç¶šã®å†è¨­å®š-, ãã®ä»–ã®äº‹ç”±
ï¼½ãªã© â€”
~siteé–‹ç™ºè€…ã¯ï¼Œãã®å•é¡Œiã‚’æ¤œå‡ºã—ã¦å–çµ„ã‚€ã“ã¨ã¯ã§ããªã„ã€‚
ã“ã‚Œã‚‰ã®ç¨®é¡ã®~network~errorã¯ã€ç´”ç²‹ã«~serverå´ã®ã¿ã‹ã‚‰ã¯ï¼Œæ¤œå‡ºã§ããªã„ã“ã¨ã«æ³¨æ„
â€” å®šç¾©ã«ã‚ˆã‚Šï¼Œ~clientã¯ ~serverã¨ã®æ¥ç¶šã‚’æˆåŠŸè£¡ã«ç¢ºç«‹ã§ããªã„ã‹ã‚‚ã—ã‚Œãªã„ã®ã§ã€‚
â—
Today, application developers do not have real-time web application availability data from their end users. For example, if the user fails to load the page due to a network error, such as a failed DNS lookup, a connection timeout, a reset connection, or other reasons, the site developer is unable to detect and address this issue. Note that these kinds of network errors cannot be detected purely server-side, since by definition the client might not have been able to successfully establish a connection with the server.
</p>

<p>
æ—¢å­˜ã®æ‰‹æ³•ï¼ˆäººå·¥çš„ãªç›£è¦–
ã€`<a href="https://en.wikipedia.org/wiki/Synthetic_monitoring">synthetic monitoring</a>^enã€‘
ãªã©ï¼‰ã¯ã€äº‹å‰æ±ºå®šã•ã‚ŒãŸåœ°ç†çš„~æ‰€åœ¨ã«ç›£è¦–~nodeã‚’é…ç½®ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šï¼Œéƒ¨åˆ†çš„ãªè§£æ±ºç­–ã‚’ä¾›ã™ã‚‹ãŒã€è¿½åŠ ã®åŸºç›¤~æŠ•è³‡ãŒè¦æ±‚ã•ã‚Œï¼Œï¼»
å®Ÿåœ¨ã®æœ«ç«¯åˆ©ç”¨è€…ã«ã¨ã£ã¦ã®å¯ç”¨æ€§ã«ã¤ã„ã¦ï¼ŒçœŸã«å…¨åŸŸçš„ã‹ã¤å®Ÿæ™‚é–“ã«è¿‘ã„~data
ï¼½ã¯ä¾›ã›ãªã„ã€‚
â—
Existing methods (such as synthetic monitoring) provide a partial solution by placing monitoring nodes in predetermined geographic locations, but require additional infrastructure investments, and cannot provide truly global and near real-time availability data for real end users.
</p>

<p>
<abbr>~NEL</abbr>ï¼ˆ `Network Error Logging^en ï¼‰ã¯ã€ï¼»ï¼»ï¼»ï¼»
~UAãŒï¼»
æ‰€ä¸ã®ç”Ÿæˆå…ƒã«å¯¾ã™ã‚‹~network~errorã‚’å ±å‘Šã™ã‚‹
ï¼½ã¨ãã«åˆ©ç”¨ã§ãã‚‹å ±å‘Šç”¨~æ–½ç­–
ï¼½ã‚’ï¼Œ~web~appãŒå®£è¨€ã™ã‚‹ã“ã¨
ï¼½ã‚’å¯èƒ½åŒ–ã™ã‚‹ä»•çµ„ã¿
ï¼½ã‚’å®šç¾©ã™ã‚‹
ï¼½ã“ã¨ã«ã‚ˆã‚Šï¼Œã“ã®å¿…è¦æ€§ã«å–çµ„ã‚€ã€‚
~web~appã¯ã€ï¼»
æ¬²ã•ã‚Œã‚‹`~NELæ–½ç­–$ã‚’è¿°ã¹ã‚‹ `NEL$h ~HTTPå¿œç­”~headerã‚’çµ¦ã™ã‚‹
ï¼½ã“ã¨ã«ã‚ˆã‚Šï¼Œ~NELã®åˆ©ç”¨ã‚’ä»»æ„é¸æŠã§ãã‚‹ã€‚
ã“ã®æ–½ç­–ã¯ã€ãã®ç”Ÿæˆå…ƒã¸ã®è¦è«‹ã«ã¤ã„ã¦ã®æƒ…å ±ã‚’~logã—ã¦ã‹ã‚‰,
ãã®æƒ…å ±ã‚’ `REPORTING$r ~APIã‚’åˆ©ç”¨ã—ã¦ ä»¥å‰ã«ç’°å¢ƒè¨­å®šã•ã‚ŒãŸ`å ±å‘Šå…ˆ~group$ã¸é€é”ã—ã‚ˆã†ã¨è©¦ã¿ã‚‹ã‚ˆã†ã€~UAã«æŒ‡å›³ã™ã‚‹ã€‚
ãã®åãŒå«æ„ã™ã‚‹ã‚ˆã†ã«ï¼Œ~NELå ±å‘Šã®ä¸»ç”¨é€”ã¯ <em>~error</em>ã‚’è¿°ã¹ã‚‹ã“ã¨ã«ã‚ã‚‹ãŒã€ç•°ãªã‚‹~clienté›†å›£ã«ã‚ãŸã‚‹~errorã®<em>æ¯”ç‡</em>ã‚’æ±ºå®šã™ã‚‹ãŸã‚ã«ã¯ï¼Œ<em>æˆåŠŸã—ãŸ</em>è¦è«‹ãŒ ã©ã‚Œã ã‘ç”Ÿã˜ã¦ã„ã‚‹ã‹ã‚‚çŸ¥ã‚‹å¿…è¦ãŒã‚ã‚‹
â€” ã“ã‚Œã‚‰ã®æˆåŠŸã—ãŸè¦è«‹ã‚‚ï¼Œ~NELã®ä»•çµ„ã¿ã‚’ä»‹ã—ã¦å ±å‘Šã§ãã‚‹ã€‚
â—
Network Error Logging (NEL) addresses this need by defining a mechanism enabling web applications to declare a reporting policy that can be used by the user agent to report network errors for a given origin. A web application opts into using NEL by supplying a NEL HTTP response header field that describes the desired NEL policy. This policy instructs the user agent to log information about requests to that origin, and to attempt to deliver that information to a group of endpoints previously configured using the Reporting API [REPORTING]. As the name implies, NEL reports are primarily used to describe errors. However, in order to determine rates of errors across different client populations, we must also know how many successful requests are occurring; these successful requests can also be reported via the NEL mechanism.
</p>


<div class="example">
<p>
ä¾‹ãˆã°ã€~TCPæ¥ç¶šãŒä¸­æ­¢ã•ã‚ŒãŸã“ã¨ã«å› ã‚Šï¼Œ
~UAãŒ `https://www.example.com^s ã‹ã‚‰è³‡æºã®~fetchã«å¤±æ•—ã—ãŸå ´åˆã€~UAã¯ï¼Œ
`REPORTING$r ~APIã‚’ä»‹ã—ã¦æ¬¡ã®æ§˜ãªå ±å‘Šã‚’~queueã™ã‚‹ã“ã¨ã«ãªã‚‹ï¼š
â—
For example, if the user agent fails to fetch a resource from https://www.example.com due to an aborted TCP connection, the user agent would queue the following report via the Reporting API:
</p>

<dl>
	<dt>`ç¨®åˆ¥$nE</dt>
	<dd>`network-error^l
</dd>
	<dt>
`å ±å‘Šç”¨~group$nP
â—
endpoint group
</dt>
	<dd>
`report_to$c ~fieldã«ã‚ˆã‚Šç’°å¢ƒè¨­å®šã•ã‚ŒãŸ`å ±å‘Šå…ˆ~group$
â—
the endpoint group configured by the report_to field
</dd>
	<dt>è¨­å®šç¾¤</dt>
	<dd>TODO</dd>
	<dt>~data</dt>
	<dd>
<pre class="json-code">
{
  "referrer": "https://referrer.com/",
  "sampling_fraction": 1.0,
  "server_ip": "123.122.121.120",
  "protocol": "http/1.1",
  "elapsed_time": 321,
  "type": "tcp.aborted"
}
</pre>
	</dd>
</dl>

</div>

<p>
é€šä¿¡ã•ã‚Œã‚‹å ±å‘Šã‚’æˆã™å„~field, ãŠã‚ˆã³å ±å‘Šã®å½¢å¼ã«ã¤ã„ã¦ã®èª¬æ˜ã¯ã€
<a href="#generate-a-network-error-report">Â§ ~network~errorå ±å‘Šã®ç”Ÿæˆ-æ³•</a>
ã«è¦‹ã‚‰ã‚Œã‚‹ã€‚
ã‚ˆã‚Š~~å®Ÿè·µçš„ãªï¼Œ~NELç™»éŒ²ã¨å ±å‘Š-æ™‚ã®å‡¦ç†-ä¾‹ã¯ã€
<a href="#examples">Â§ ä¾‹</a>
ã«è¦‹ã‚‰ã‚Œã‚‹ã€‚
â—
See 5.2 Generate a network error report for an explanation of the communicated fields and format of the report, and 7. Examples for more hands-on examples of NEL registration and reporting process.
</p>

	</section>
	<section id="_conventions">
<h2>ã€ã“ã®è¨³ã«å›ºæœ‰ã®è¡¨è¨˜è¦ç´„ã€‘</h2>

<p>
ã“ã®è¨³ã®~algoã‚„å®šç¾©ã®è¨˜è¿°ã«åˆ©ç”¨ã•ã‚Œã¦ã„ã‚‹å„ç¨®è¨˜å·ï¼ˆ ~LET, ~IF, ~EACH(â€¦), ç­‰ã€…ï¼‰ã®æ„å‘³ã‚„å®šç¾©ã®è©³ç´°ã¯ã€~SYMBOL_DEF_REFã‚’~~å‚ç…§ã•ã‚ŒãŸã—ã€‚
</p>

<p>
ã“ã®ä»•æ§˜ã«ç¾ã‚Œã‚‹
`è¦è«‹@
ï¼ˆ `request^en ï¼‰ã¯ã€ï¼»
<a href="~RFC7230#section-2.1">~HTTPè¦è«‹</a> `RFC7230$r
ï¼ˆ<a href="~RFC7231#introduction">ãã®æ„å‘³è«–</a> `RFC7231$r ï¼‰,
`FETCH$r ãŒå®šç¾©ã™ã‚‹
<a href="~FETCH#concept-request">è¦è«‹</a>
ï¼½ã„ãšã‚Œã‹ã‚’æŒ‡ã™ã€‚
ã©ã¡ã‚‰ã‚’æŒ‡ã™ã‹ã¯ã€æŸ”è»Ÿã«è§£é‡ˆã™ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼ˆåŸæ–‡ã§ã¯ã€ä¸€å¾‹ã«~HTTPè¦è«‹ã«ãƒªãƒ³ã‚¯ã•ã‚Œã¦ã„ã‚‹ï¼‰ã€‚
</p>


	</section>
	<section id="conformance-requirements">
<h2 title="Conformance requirements">2. é©åˆæ€§~è¦ä»¶</h2>

ã€ã“ã®ç¯€ã®å†…å®¹ã¯ã€<a href="w3c-common-ja.html#conformance">W3C æ—¥æœ¬èªè¨³ å…±é€šãƒšãƒ¼ã‚¸</a>ã«å§”è­²ã€‚ã€‘


		<section id="dependencies">
<h3 title="Dependencies">2.1. ä¾å­˜é–¢ä¿‚</h3>

ã€ã“ã®ç¯€ã®å†…å®¹ï¼ˆä»–ã®ä»•æ§˜ã«å®šç¾©ã•ã‚Œã‚‹ç”¨èªã®ä¸€è¦§ï¼‰ã¯ã€çœç•¥ã™ã‚‹ã€‚ã€‘

		</section>
	</section>
	<section id="concepts">
<h2 title="Concepts">3. æ¦‚å¿µ</h2>

		<section id="network-requests">
<h3 title="Network requests">3.1. ~networkè¦è«‹</h3>


<p>
`~networkè¦è«‹@
ï¼ˆ `network request^en ï¼‰ã¯ã€~UAãŒå˜ç‹¬ã®`è¦è«‹$ã‚’~serviceã™ã‚‹ã¨ãã«~networkã‚’åˆ©ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã¨ãã«ç”Ÿã˜ã‚‹ï¼š
â—
A network request occurs when the user agent must use the network to service a single request.
</p>

<ul>
	<li>
~UAãŒ`å±€æ‰€~cache$ã‹ã‚‰~serviceã§ãã‚‹`è¦è«‹$ã¯ã€`~networkè¦è«‹$ã‚’æˆã—ã¦ã¯~MUST_NOTã€‚
â—
If the user agent can service a request out of a local cache, that request MUST NOT result in a network request.
</li>
	<li>
~UAãŒ`~navi$ã®ä¸€éƒ¨ã¨ã—ã¦`~redirect$ã«è¿½å¾“ã™ã‚‹å ´åˆã€~redirecté€£é–ã‚’æˆã™å„`è¦è«‹$ã”ã¨ã« åˆ¥ã€…ã®`~networkè¦è«‹$ã‚’æˆã—ã¦ã„~MUSTã€‚
â—
If the user agent follows redirects as part of a navigation, there MUST be separate network requests for each request in the redirect chain.
</li>
	<li>
<p>
æ¬¡ã®ã„ãšã‚Œã‹ã«è©²å½“ã™ã‚‹`è¦è«‹$ã¯ã€`~networkè¦è«‹$ã‚’æˆã—ã¦ã¯~MUST_NOTï¼š
</p>

		<ul>
			<li>
~UAã¯~offlineã«ã‚ã‚‹ã“ã¨ãŒæ—¢çŸ¥ã§ã‚ã‚‹ã‚‚ã®ï¼ˆã™ãªã‚ã¡ `navigator.onLine$m ãŒ ~F ã‚’è¿”ã™ã¨ãï¼‰ã€‚
â—
A request MUST NOT result in a network request if the user agent is known to be offline (i.e., when navigator.onLine returns false).
</li>
			<li>
`æ··åœ¨~å†…å®¹$ã‚„
<a href="~FETCH#cors-protocol">~CORS</a>
ã®å¤±æ•—ã«å› ã‚Šï¼Œé˜»æ­¢ã•ã‚ŒãŸã‚‚ã®ã€‚
â—
A request MUST NOT result in a network request if it is blocked due to mixed content or CORS failures.ï¼¼
</li>
		</ul>
	</li>
	<li>
å„`~CORSäºˆè¡Œ~è¦è«‹$ã¯ã€ãã‚Œã ã‘ã§`~networkè¦è«‹$ã‚’æˆã—ã¦ã„~MUSTã€‚
â—
Any CORS-preflight request MUST result in its own network request.
</li>
</ul>

<p class="note">æ³¨è¨˜ï¼š
`FETCH$r æ¨™æº–ã«å‰‡ã£ã¦`è¦è«‹$ã‚’~serviceã™ã‚‹~UAã«ãŠã„ã¦ã¯ã€å„`~networkè¦è«‹$ã¯ï¼Œ`~HTTP~network~fetch$ ~algoã® 1 å›ã®å®Ÿè¡Œã«å¯¾å¿œã™ã‚‹ã€‚
â—
Note
For user agents that service requests according to the [FETCH] standard, a network request corresponds to one execution of the HTTP-network fetch algorithm.
</p>

<p>
ã©ã®ï¼»
~fetch~algo, ä¸‹å±¤ã®~app, ~transport~protocol
ï¼½ã‚’åˆ©ç”¨ã™ã‚‹ã‹ã‚’å•ã‚ãšã€`~networkè¦è«‹$ã‚’~serviceã™ã‚‹~~éç¨‹ã¯ï¼Œæ¬¡ã«æŒ™ã’ã‚‹
`ç›¸@
ï¼ˆ `phase^en ï¼‰ã‹ã‚‰ãªã‚‹ï¼š
â—
Regardless of which fetch algorithm and which underlying application and transport protocols are used, servicing a network request consists of the following phases:
</p>

<ol>
	<li>
`~DNSè§£æ±º@
â‡’
~UAãŒ~DNSï¼ˆ Domain Name System `RFC1034$r ï¼‰ã‚’åˆ©ç”¨ã—ã¦ã€~domainåã‚’ï¼»
ãã®~domainã¸å‘ã‘ãŸ~HTTPè¦è«‹ã«å¯¾ã—~serviceã§ãã‚‹`~server$
ï¼½ã®~IP~addressã«è§£æ±ºã™ã‚‹ã¾ã§ã®é–“ã€‚
â—
DNS resolution: The user agent uses the Domain Name System [RFC1034] to resolve a domain name into an IP address of a server can that service HTTP requests to that domain.
</li>
	<li>
`~secureæ¥ç¶šã®ç¢ºç«‹@
â‡’
~UAãŒ`~server$ã¸ã®æ¥ç¶šã‚’~openã—ã¦ã€ãã®æ¥ç¶š~è¶Šã—ã«~secure~channelã‚’ç¢ºç«‹ã™ã‚‹ã¾ã§ã®é–“ã€‚
â—
Secure connection establishment: The user agent opens a connection to the server, and establishes a secure channel over this connection.
</li>
	<li>
`è¦è«‹ã¨å¿œç­”ã®ä¼é€@
â‡’
~secure~channelãŒç¢ºç«‹ã•ã‚ŒãŸãªã‚‰ã€~UAã¯ï¼Œ~HTTPè¦è«‹ã‚’ä¼é€ã—ã¦`~server$ã‹ã‚‰ã®å¿œç­”ã‚’å—ä¿¡ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚
â—
Transmission of request and response: Once the secure channel is established, the user agent can transmit the HTTP request, and receive the response from the server.
</li>
</ol>

<p>
`~networkè¦è«‹$ã‚’æˆã™ãŸã‚ã«ç¾©å‹™ä»˜ã‘ã‚‰ã‚Œã‚‹`ç›¸$ã¯ï¼Œã“ã‚Œã‚‰ã®ã†ã¡`è¦è«‹ã¨å¿œç­”ã®ä¼é€$ã®ã¿ã§ã‚ã‚Šã€ä»–ã®ç›¸ã¯ï¼Œ
å¿…è¦ãªã„ã‹ã‚‚ã—ã‚Œãªã„ã€‚
å…·ä½“ä¾‹ã¨ã—ã¦ï¼Œ~DNSã®çµæœã¯ã€~UAã«ãŠã„ã¦å±€æ‰€çš„ã«~cacheã§ãã‚‹
â€” ãã®å ´åˆã€åŒã˜~domainå‘ã‘ã®æœªæ¥ã®è¦è«‹ã«å¯¾ã™ã‚‹`~DNSè§£æ±º$ã¯ä¸è¦ã«ãªã‚‹ã€‚
åŒæ§˜ã«ï¼Œ~HTTPã®`æŒç¶šçš„~æ¥ç¶š$ã¯ã€åŒã˜`ç”Ÿæˆå…ƒ$ã¸ã®è¤‡æ•°ã®è¦è«‹ãŒåŒã˜~openæ¥ç¶šã‚’å…±æœ‰ã™ã‚‹ã“ã¨ã‚’è¨±å®¹ã™ã‚‹ã€‚
ã—ã‹ã—ãªãŒã‚‰ï¼Œè¤‡æ•°ã®`ç›¸$ãŒç”Ÿã˜ã‚‹å ´åˆã€ä¸Šã®é †åºã§ç”Ÿã˜ã‚‹ã“ã¨ã«ãªã‚‹ã€‚
â—
The only mandatory phase is the transmission of request and response; the other phases might not be needed for every network request. For instance, DNS results can be cached locally in the user agent, eliminating DNS resolution for future requests to the same domain. Similarly, HTTP persistent connections allow open connections to be shared for multiple requests to the same origin. However, if multiple phases occur, they will occur in the above order.
</p>

<p class="note">ç·¨é›†è€…æ³¨è¨˜ï¼š
ã“ã‚Œã‚‰ã®ç›¸ã®å®šç¾©ã¯ã€ã‚‚ã£ã¨å†åˆ©ç”¨ã§ãã‚‹ã‚ˆã† `FETCH$r ã«ç§»å‹•ã—ãŸã„æ‰€ã€‚
â—
We would like to move the definition of these phases into [FETCH] so that they are more reusable.
</p>


<p>
`~networkè¦è«‹$ã¯ã€æ¬¡ãŒ~~åˆ¤æ˜ã—ãŸæ™‚ç‚¹ã§
`æˆåŠŸã—ãŸ@
ï¼ˆ `successful^en ï¼‰ã¨ã•ã‚Œã‚‹
â‡’
ï¼»
~UAã¯ã€~serverã‹ã‚‰å¦¥å½“ãª~HTTPå¿œç­”ã‚’å—ä¿¡ã§ããŸ
ï¼½~ANDï¼»
ãã®å¿œç­”ã®çŠ¶æ…‹s~codeã¯ï¼»
`4xx$st ï¼ `5xx$st
ï¼½ã§ãªã„
ï¼½
â—
A network request is successful if the user agent is able to receive a valid HTTP response from the server, and that response does not have a 4xx or 5xx status code.
</p>

<p>
`~networkè¦è«‹$ã¯ã€`æˆåŠŸ-$ã—ãªã‹ã£ãŸã“ã¨ãŒ~~åˆ¤æ˜ã—ãŸæ™‚ç‚¹ã§
`å¤±æ•—ã—ãŸ@
ï¼ˆ `failed^en ï¼‰ã¨ã•ã‚Œã‚‹ã€‚
â—
A network request is failed if it is not successful.
</p>

<p class="note">æ³¨è¨˜ï¼š
~HTTP~errorå¿œç­”ï¼ˆã™ãªã‚ã¡ çŠ¶æ…‹s~codeã«ï¼»
`4xx$st ï¼ `5xx$st
ï¼½ã‚’ä¼´ã†ã‚‚ã®ï¼‰ã¯ã€ãã‚ŒãŒ `~NELæ–½ç­–$ã®`æˆåŠŸ~æ™‚ã®è¦‹æœ¬æŠ½å‡ºç‡$ã«ä»£ãˆã¦`å¤±æ•—~æ™‚ã®è¦‹æœ¬æŠ½å‡ºç‡$ã®å¯¾è±¡ã«ãªã‚‹ã‚ˆã†ï¼Œ`å¤±æ•—ã—ãŸ$ã‚‚ã®ã¨è¦‹ãªã•ã‚Œã‚‹ã“ã¨ã«æ³¨æ„ã€‚
â—
Note
Note that HTTP error responses (i.e., those with a 4xx or 5xx status code) are considered failures, so that they are subject to a NEL policy's failure sampling rate instead of its successful sampling rate.
</p>

		</section>
		<section id="network-errors">
<h3 title="Network errors">3.2. ~network~error</h3>

<p>
`~networkè¦è«‹$ã‚’ `å¤±æ•—-$ã•ã›ãŸ~erroræ¡æ…‹ã‚’
`~network~error@
ã¨ã„ã†ã€‚
â—
A network error is the error condition that caused a network request to fail.
</p>


<p>
å„`~network~error$ã«ã¯ã€æ–‡å­—åˆ—ã¨ã—ã¦ä¸ãˆã‚‰ã‚Œã‚‹
`ç¨®åˆ¥@nE
ï¼ˆ `type^en ï¼‰ãŒã‚ã‚‹ã€‚
â—
Each network error has a type, which is a string.
</p>

<p>
å„`~network~error$ã«ã¯ã€å½“ã®~errorã¯ã©ã®`ç›¸$ã§ç”Ÿã˜ãŸã‹ã‚’è¿°ã¹ã‚‹
`ç›¸@nE
ï¼ˆ `phase^en ï¼‰ãŒã‚ã‚‹ï¼š
â—
Each network error has a phase, which describes which phase the error occurred in:
</p>

<dl>
	<dt>`dns^l</dt>
	<dd>
å½“ã®~errorã¯ã€`~DNSè§£æ±º$ã®é–“ã«ç”Ÿã˜ãŸ
â—
the error occurred during DNS resolution
</dd>

	<dt>`connection^l</dt>
	<dd>
å½“ã®~errorã¯ã€`~secureæ¥ç¶šã®ç¢ºç«‹$ã®é–“ã«ç”Ÿã˜ãŸ
â—
the error occurred during secure connection establishment
</dd>

	<dt>`application^l</dt>
	<dd>
å½“ã®~errorã¯ã€`è¦è«‹ã¨å¿œç­”ã®ä¼é€$ã®é–“ã«ç”Ÿã˜ãŸ
â—
the error occurred during the transmission of request and response
</dd>

</dl>

<p>
`~network~error$ã®`ç¨®åˆ¥$nEã¨ã—ã¦å®šç¾©æ¸ˆã¿ã®ã‚‚ã®ãŒã„ãã¤ã‹ã‚ã‚Šã€
<a href="#predefined-network-error-types">å®šç¾©æ¸ˆã¿ã®~network~errorç¨®åˆ¥</a>
ã«ã¦å®šç¾©ã•ã‚Œã‚‹ã€‚
â—
There are several predefined network error types defined in 6. Predefined network error types.
</p>

		</section>
		<section id="network-error-reports">
<h3 title="Network error reports">3.3. ~network~errorå ±å‘Š</h3>

<p>
`~network~error$ã‚’è¿°ã¹ã‚‹`å ±å‘Š$ `REPORTING$r ã¯ã€
`~network~errorå ±å‘Š@
ï¼ˆ `network error report^en ï¼‰ã¨å‘¼ã°ã‚Œã‚‹ã€‚
â—
A network error report is a Reporting API report that describes a network error.
</p>

<p>
`~network~errorå ±å‘Š$ã®`å ±å‘Š~ç¨®åˆ¥$ã¯ã€ `network-error^l ã¨ã™ã‚‹ã€‚
â—
Network error reports have a report type of network-error.
</p>

<p>
`~network~errorå ±å‘Š$ã¯ã€`å ±å‘Šç”¨~è¦³æ¸¬å™¨ã‹ã‚‰å¯è¦–$ã§ãªã„ã€‚
â—
Network error reports are NOT visible to ReportingObservers.
</p>

<p class="note">æ³¨è¨˜ï¼š
`å ±å‘Šç”¨~è¦³æ¸¬å™¨ã‹ã‚‰å¯è¦–$ã§ãªã„ã¨ã•ã‚Œã¦ã„ã‚‹ã®ã¯ã€`~network~errorå ±å‘Š$ã¯ï¼Œè¦è«‹ã‚’<em>å—ä¿¡ã—ã¦ã„ã‚‹</em>~serverã®ï¼»
ç®¡ç†è€…ï¼æ‰€æœ‰è€…
ï¼½ã‹ã‚‰ã«é™ã‚Šå¯è¦–ã«ãªã‚‹ã“ã¨ãŒæ„å›³ã•ã‚Œã¦ã„ã‚‹ã‹ã‚‰ã§ã‚ã‚‹ã€‚
å ±å‘ŠãŒ`å ±å‘Šç”¨~è¦³æ¸¬å™¨ã‹ã‚‰å¯è¦–$ã«ã•ã‚ŒãŸãªã‚‰ã€è¦è«‹ã®<em>èµ·å‹•å…ƒ</em>ã‹ã‚‰ã‚‚å¯è¦–ã«ãªã‚‹ã€‚
ãã®çµæœï¼ŒéåŒä¸€ç”Ÿæˆå…ƒ~è¦è«‹ã«å¯¾ã—ã¦ã¯ã€ãã®~serverã®åˆ¶å¾¡ã®å¤–å´ã«ã‚ã‚‹ä¸»ä½“ã«ã‚‚ï¼Œ~serverã®~networkç’°å¢ƒè¨­å®šã«ã¤ã„ã¦ã®æƒ…å ±ãŒæ¼æ´©ã•ã‚Œå¾—ã‚‹ã“ã¨ã«ã‚‚ãªã‚‹ã€‚
â—
Note
Network error reports are not visible to ReportingObservers because they are only intended to be visible to the administrator or owner of the server receiving the requests. If they were visible to ReportingObservers, then the reports would also be visible to the originator of the request. For cross-origin requests, this could leak information about the server's network configuration to parties outside of its control.
</p>

		</section>
		<section id="nel-policies">
<h3 title="NEL policies">3.4. ~NELæ–½ç­–</h3>

<p>
`~NELæ–½ç­–@
ï¼ˆ `NEL policy^en ï¼‰ã¯ã€`ç”Ÿæˆå…ƒ$ã¸ã®`~networkè¦è«‹$ã«ã¤ã„ã¦ã®å ±å‘Šã‚’åé›†ã™ã‚‹ã‹ã©ã†ã‹ï¼Œåé›†ã—ãŸå ±å‘Šã¯ã©ã“ã¸é€ä¿¡ã™ã‚‹ã‹ã‚’ã€~UAã«æŒ‡å›³ã™ã‚‹ã€‚
`~NELæ–½ç­–$ã¯ï¼Œ `NEL$h ~HTTP`å¿œç­”~header$ã‚’ä»‹ã—ã¦~UAã«é€é”ã•ã‚Œã‚‹ã€‚
â—
A NEL policy instructs a user agent whether to collect reports about network requests to an origin, and if so, where to send them. NEL policies are delivered to the user agent via HTTP response headers.
</p>

<p>
å„`~NELæ–½ç­–$ã¯ã€æ¬¡ã®ã‚‚ã®ã‚’æŒã¤ï¼š
â—
â†“</p>

<dl>
	<dt>
`å—ä¿¡ã—ãŸ~IP~address@nP
â—
Each NEL policy has a received IP address,ï¼¼
</dt>
	<dd>
~UAãŒã“ã®`~NELæ–½ç­–$ã‚’å—ä¿¡ã—ãŸ `~server$ã®~IP~addressã€‚
â—
which is the IP address of the server that the user agent received this NEL policy from.
</dd>

	<dt>
`æ–½ç­–~ç”Ÿæˆå…ƒ@nP
ï¼ˆ `policy origin^en ï¼‰
â—
Each NEL policy has an origin.
</dt>
	<dd>
`ç”Ÿæˆå…ƒ$
â—
</dd>

	<dt>
`ä¸‹ä½domain~flag@nP
ï¼ˆ `subdomains flag^en ï¼‰
â—
Each NEL policy has a subdomains flag,ï¼¼
</dt>
	<dd>
æ¬¡ã®ã„ãšã‚Œã‹
â‡’
`å«ã‚€^i ï¼ `å«ã¾ãªã„^i
â—
which is either include or exclude.
</dd>

	<dt>
`å ±å‘Šç”¨~group@nP
ï¼ˆ `reporting group^en ï¼‰
â—
Each NEL policy has a reporting group,ï¼¼
</dt>
	<dd>
ã“ã®æ–½ç­–~ç”¨ã®å ±å‘Šã®é€ä¿¡-å…ˆã«ãªã‚‹`å ±å‘Šå…ˆ~group$ã®åå‰ã‚’ä¸ãˆã‚‹ã€‚
â—
which is the name of the Reporting endpoint group that reports for this policy will be sent to.
</dd>

	<dt>
`æœ‰åŠ¹ç§’æ•°@nP
ï¼ˆ `ttl^en ï¼‰
â—
Each NEL policy has a ttlï¼¼
</dt>
	<dd>
æ–½ç­–ãŒæœ‰åŠ¹ã§ã‚ã‚Šç¶šã‘ã‚‹ç§’æ•°ã‚’è¡¨ç¾ã™ã‚‹ã€‚
â—
representing the number of seconds the policy remains valid.
</dd>

	<dt>
`ä½œæˆæ™‚åˆ»@nP
ï¼ˆ `creation^en ï¼‰
â—
Each NEL policy has a creationï¼¼
</dt>
	<dd>
~UAãŒã“ã®æ–½ç­–ã‚’å—ä¿¡ã—ãŸã¨ãã®æ™‚åˆ»å°ã€‚
â—
which is the timestamp when the user agent received the policy.
</dd>
</dl>

<p>
`~NELæ–½ç­–$ã¯ã€æ‰€ä¸ã®æ™‚ç‚¹ã§
( `ä½œæˆæ™‚åˆ»$nP ~PLUS `æœ‰åŠ¹ç§’æ•°$nP )
ãŒéå»ã®æ™‚åˆ»ã‚’è¡¨ç¾ã™ã‚‹ãªã‚‰ã°ï¼Œ
`å¤±åŠ¹ã—ãŸ@
ï¼ˆ `expired^en ï¼‰ã¨ã•ã‚Œã‚‹ã€‚
â—
A NEL policy is expired if its creation plus its ttl represents a time in the past.
</p>


		</section>
		<section id="sampling-rates">
<h3 title="Sampling rates">3.5. è¦‹æœ¬æŠ½å‡ºç‡</h3>

<p>
å¤šé‡ã®æµé€šã‚’~serveã™ã‚‹ã“ã¨ãŒäºˆæœŸã•ã‚Œã‚‹`ç”Ÿæˆå…ƒ$ã¯ã€ãã®ç”Ÿæˆå…ƒã«å‘ã‘ã¦ç™ºè¡Œã•ã‚ŒãŸ ã‚ã‚‰ã‚†ã‚‹`~networkè¦è«‹$ã«å¯¾ã™ã‚‹~NELå ±å‘Šã‚’å–ã‚Šè¾¼ã‚€å‚™ãˆã¯ãªã„ã‹ã‚‚ã—ã‚Œãªã„ã€‚
ç”Ÿæˆå…ƒã¯ã€
`è¦‹æœ¬æŠ½å‡ºç‡@
ï¼ˆ `sampling rate^en ï¼‰ã‚’å®šç¾©ã—ã¦ï¼Œå„~UAãŒæå‡ºã™ã‚‹ ~NELå ±å‘Šã®å€‹æ•°ã‚’åˆ¶é™ã§ãã‚‹ã€‚
æ¦‚ã—ã¦ï¼Œ`æˆåŠŸã—ãŸ$è¦è«‹ã®æ–¹ãŒ`å¤±æ•—ã—ãŸ$è¦è«‹ã‚ˆã‚Š ãšã£ã¨å¤šã„ã¯ãšãªã®ã§ã€ç”Ÿæˆå…ƒã¯ ãã‚Œãã‚Œã«ç•°ãªã‚‹è¦‹æœ¬æŠ½å‡ºç‡ã‚’æŒ‡å®šã§ãã‚‹ã€‚
â—
An origin that expects to serve a large volume of traffic might not be equipped to ingest NEL reports for every network request made to the origin. The origin can define sampling rates to limit the number of NEL reports that each user agent submits. Since successful requests should typically greatly outnumber failed requests, the origin can specify different sampling rates for each.
</p>


<p>
å„ `~NELæ–½ç­–$ã¯
`æˆåŠŸ~æ™‚ã®è¦‹æœ¬æŠ½å‡ºç‡@,
`å¤±æ•—~æ™‚ã®è¦‹æœ¬æŠ½å‡ºç‡@
ã‚’æŒã¤
â€” ä¸¡è€…ã¨ã‚‚ 0.0 ä»¥ä¸Š 1.0 ä»¥ä¸‹ã®å®Ÿæ•°ã¨ã™ã‚‹ã€‚
â—
Each NEL policy has a successful sampling rate, which is a number between 0.0 and 1.0 inclusive.
â—
Each NEL policy has a failure sampling rate, which is a number between 0.0 and 1.0 inclusive.
</p>


		</section>
		<section id="policy-cache">
<h3 title="Policy cache">3.6. æ–½ç­–~cache</h3>


<p>
é©åˆçš„~UAã¯ã€`~NELæ–½ç­–$ã®é›†åˆã‚’ä¿å®ˆã™ã‚‹è“„ç©ã®ä»•çµ„ã¿ã‚’æˆã™
`æ–½ç­–~cache@
ï¼ˆ `policy cache^en ï¼‰ã‚’ä¾›ã•~MUSTã€‚
ãã‚Œã¯ã€`ç”Ÿæˆå…ƒ$nPã‚’~keyã«ï¼Œæ–½ç­–ã‚’æ ¼ç´ã™ã‚‹ã€‚
â—
A conformant user agent MUST provide a policy cache, which is a storage mechanism that maintains a set of NEL policies, keyed by their origins.
</p>

<p class="trans-note">ã€
ã“ã®è¨³ã§ã¯ã€`æ–½ç­–~cache$ã¯ï¼»
å„ `æ–½ç­–~ç”Ÿæˆå…ƒ$nPã‚’`~NELæ–½ç­–$ã«å¯¾å¿œä»˜ã‘ã‚‹`~map$
ï¼½ã§ã‚ã‚‹ã¨è¦‹ãªã—ãŸä¸Šã§ï¼Œ`~map$ç”¨ã«å®šç¾©ã•ã‚ŒãŸå„ç¨®~æ¼”ç®—ï¼è¡¨è¨˜æ³•ã‚’åˆ©ç”¨ã™ã‚‹ã€‚
ä»¥ä¸‹ã®è¦ä»¶ã‚’æº€ãŸã™ã«ã¯ã€~mapã§è¶³ã‚Šã‚‹ã®ã§ï¼ˆã¾ãŸã€ã“ã®~mapã«ãŠã„ã¦ã¯ï¼Œé †åºã‚‚æœ‰æ„ã§ãªã„ï¼‰ã€‚
ã€‘</p>

<p>
ã“ã®è“„ç©ã®ä»•çµ„ã¿ã¯ã€ä¸é€æ˜ã‹ã¤~vendorã«ç‰¹æœ‰ã§ã‚ã‚Šï¼Œ~webã«ã¯å…¬é–‹ã•ã‚Œãªã„ãŒã€æ¬¡ã®~methodã‚’ä¾›ã•~MUST
â€” ãã‚Œã¯ã€ã“ã®æ–‡æ›¸ãŒå®šç¾©ã™ã‚‹å„ç¨®~algoã‹ã‚‰åˆ©ç”¨ã•ã‚Œã‚‹ã“ã¨ã«ãªã‚‹ï¼š
â—
This storage mechanism is opaque, vendor-specific, and not exposed to the web, but it MUST provide the following methods which will be used in the algorithms this document defines:
</p>

<ul>
	<li>
`~NELæ–½ç­–$ã‚’ï¼»
æŒ¿å…¥- ï¼ æ›´æ–°- ï¼ å‰Šé™¤-
ï¼½ã™ã‚‹ã€‚
â—
Insert, update, and delete NEL policies.
</li>
	<li>
æ‰€ä¸ã®`ç”Ÿæˆå…ƒ$ç”¨ã®`~NELæ–½ç­–$ãŒã‚ã‚Œã° ãã‚Œã‚’æ¤œç´¢å–å¾—ã™ã‚‹ã€‚
â—
Retrieve the NEL policy, if any, for an origin.
</li>
	<li>
~cacheã®ä¸­ã‚’æ¶ˆå»ã™ã‚‹ã€‚
â—
Clear the cache.
</li>
</ul>


		</section>
	</section>
	<section id="policy-delivery">
<h2 title="Policy delivery">4. æ–½ç­–ã®é€é”</h2>

<p>
`~server$ã¯ã€è‡ªèº«ãŒåˆ¶å¾¡ã™ã‚‹ç”Ÿæˆå…ƒ~ç”¨ã®`~NELæ–½ç­–$ã‚’ï¼Œ`NEL$h ~HTTP `å¿œç­”~header$ã‚’ä»‹ã—ã¦å®šç¾©ã—ã¦~MAYã€‚
â—
A server MAY define a NEL policy for an origin it controls via the NEL HTTP response header.
</p>

		<section id="nel-response-header">
<h3 title="NEL response header">4.1. `NEL^h å¿œç­”~header</h3>


<p>
`ç”Ÿæˆå…ƒ$ã®`~NELæ–½ç­–$ã‚’~UAã«å‘ã‘ã¦é€šä¿¡ã™ã‚‹ãŸã‚ã«ã¯ã€
`NEL@h
`å¿œç­”~header$ãŒåˆ©ç”¨ã•ã‚Œã‚‹ã€‚
ãã®~ABNFæ§‹æ–‡ã¯ï¼š
â—
The NEL response header is used to communicate an origin's NEL policy to the user agent. The ABNF (Augmented Backus-Naur Form) syntax for the NEL header is as follows:
</p>

<pre class="ABNF">
NEL = json-field-value
</pre>

<p>
ã“ã®~headerã®å€¤ã¯ã€~JSON~objã®é…åˆ—ã¨ã—ã¦ï¼Œ `json-field-value$P ã«å®šç¾©ã•ã‚Œã‚‹ã‚ˆã†ã«è§£é‡ˆã•ã‚Œã‚‹ã€‚
ã“ã®é…åˆ—~å†…ã®å„~objã¯ã€ã‚ã‚‹`~NELæ–½ç­–$ã‚’ç”Ÿæˆå…ƒ~ç”¨ã«å®šç¾©ã™ã‚‹ã€‚
~UAã¯ã€é…åˆ—~å†…ã®æœ€åˆã®å¦¥å½“ãªæ–½ç­–â€ ã‚’å‡¦ç†ã—ãŸä¸Šã§ã€æ®‹ã‚Šã®æ–½ç­–ã¯ç„¡è¦–ã—~MUSTã€‚
ã€â€  â€œå¦¥å½“ãªæ–½ç­–ã®ã†ã¡æœ€åˆã®ã‚‚ã®â€ ã¨è§£é‡ˆã§ãã¦ã—ã¾ã†ãŒã€<a href="#process-policy-headers">å®Ÿéš›ã®å®šç¾©</a>ã§ã¯ï¼Œé…åˆ—~å†…ã®æœ€åˆã®~itemä»¥å¤–ã¯ã™ã¹ã¦ç„¡è¦–ã—ã¦ã„ã‚‹ã€‚ã€‘
â—
The header's value is interpreted as an array of JSON objects, as defined by json-field-value. Each object in the array defines an NEL policy for the origin. The user agent MUST process the first valid policy in the array and ignore any additional policies in the array.
</p>


<p>
~UAã¯ã€ï¼»
ã“ã®ä»•æ§˜ã«å®šç¾©ã™ã‚‹æ§‹æ–‡ã«é©åˆã—ãªã„ï¼ŒæœªçŸ¥ã®, ã‚ã‚‹ã„ã¯å¦¥å½“ã§ãªã„~fieldã‚„å€¤
ï¼½ã‚’ç„¡è¦–ã—~MUSTã€‚
å¦¥å½“ãª `NEL$h ~headerã¯ã€ï¼»
ã“ã®ä»•æ§˜ãŒå¿…é ˆã§ã‚ã‚‹ã¨å®šç¾©ã™ã‚‹~field
ï¼½ã™ã¹ã¦ã‚’ä¼´ã†~objã‚’ï¼Œ 1 å€‹~ä»¥ä¸Šã¯åŒ…å«ã—~MUSTã€‚
â—
User agents MUST ignore any unknown or invalid field(s) or value(s) that do not conform to the syntax defined in this specification. A valid NEL header field MUST, at a minimum, contain one object with all of the "REQUIRED" fields defined in this specification.
</p>

<p>
ï¼»
~scripting ã€ XSS ã€‘ æ”»æ’ƒã«ã‚ˆã‚‹ï¼Œ~errorå ±å‘Šå‡¦ç†ã®ä¹—å–ã‚Š
ï¼½ã‚’è»½æ¸›ã™ã‚‹ãŸã‚ã€~UAã¯ï¼Œ
`meta^e è¦ç´ ã‚’ä»‹ã—ã¦æŒ‡å®šã•ã‚ŒãŸ `NEL$h ~headerã¯ï¼Œç„¡è¦–ã—~MUSTã€‚
`~NELæ–½ç­–$ã¯ã€ `NEL$h `å¿œç­”~header$ã‚’ä»‹ã—ã¦é€é”ã•ã‚Œ~MUSTã€‚
â—
The user agent MUST ignore the NEL header specified via a meta element to mitigate hijacking of error reporting via scripting attacks. The NEL policy MUST be delivered via the NEL response header.
</p>

<p class="note">æ³¨è¨˜ï¼š
`meta^e è¦ç´ ã«å¯¾ã™ã‚‹åˆ¶ç´„ã¯ã€ `CSP$r ä»•æ§˜ã«æ•´åˆã™ã‚‹
â€” ãã‚Œã‚‚ã€åŒã˜äº‹ç”±ã‹ã‚‰ï¼Œå ±å‘Šå‡¦ç† ç™»éŒ²ã‚’~HTTP~headerã®ã¿ã«åˆ¶ç´„ã—ã¦ã„ã‚‹ã€‚
â—
Note
The restriction on meta element is consistent with the [CSP] specification, which restricts reporting registration to HTTP header fields only for the same reasons.
</p>


			<section id="the-report_to-member">
<h4 title="The report_to member">4.1.1. `report_to^c ~member</h4>

<p>
`report_to@c
~memberã¯ã€ã“ã®`~NELæ–½ç­–$ç”¨ã®å ±å‘Šã®é€ä¿¡-å…ˆã«ãªã‚‹`å ±å‘Šå…ˆ~group$ã‚’æŒ‡å®šã™ã‚‹ã€‚
`report_to$c ~memberã¯ã€`~NELæ–½ç­–$ã‚’ç™»éŒ²ã™ã‚‹ã¨ãã«ã¯å¿…é ˆã§ã‚ã‚Šã€ä»¥å‰ã®ç™»éŒ²ã‚’é™¤å»ã™ã‚‹ã“ã¨ãŒæ„å›³ã«ã‚ã‚‹ãªã‚‰ã°ä»»æ„é¸æŠã§ã‚ã‚‹
â€” `max_age$c ã‚’è¦‹ã‚ˆã€‚
åœ¨ã‚‹å ´åˆã€ãã®å€¤ã¯æ–‡å­—åˆ—ï¼ˆ `String^jt å‹ï¼‰ã§~MUST
â€” ä»–ã®å‹ã¯ã€æ§‹æ–‡è§£æ-~errorã«ãªã‚‹ã¨ã™ã‚‹ã€‚
â—
The report_to member specifies the endpoint group that reports for this NEL policy will be sent to. The report_to member is REQUIRED to register a NEL policy, and OPTIONAL if the intent is to remove a previous registration â€“ see max_age. If present, its value MUST be a string; any other type will result in a parse error.
</p>

<p class="note">æ³¨è¨˜ï¼š
~NELå ±å‘Šã®é€é”ã‚’æ”¹å–„ã™ã‚‹ãŸã‚ã€`~server$ã¯ `report_to^c ã«è¨­å®šã™ã‚‹`å ±å‘Šå…ˆ~group$ã«ï¼»
~fetchã—ãŸè³‡æºã®ç”Ÿæˆå…ƒã¨ã¯éš”ãŸã‚ŒãŸåŸºç›¤ã«å±ã™ã‚‹ï¼Œä»£æ›¿~ç”Ÿæˆå…ƒ
ï¼½å†…ã«ã‚ã‚‹å ±å‘Šå…ˆã‚’ 1 å€‹~ä»¥ä¸Šã¯åŒ…å«ã•ã›ã‚‹ã¹ãã§ã‚ã‚‹
ãƒ¼ ã•ã‚‚ãªã‘ã‚Œã°ã€å•é¡ŒãŒè§£æ¶ˆã•ã‚Œã‚‹ã¾ã§~network~errorã‚’å ±å‘Šã—å¾—ãªããªã‚‹ã®ã§ã€‚
åŠ ãˆã¦ã€ä¸€éƒ¨ã®å ±å‘Šå…ˆã«åˆ°é”-ä¸èƒ½ãªå ´åˆã®ä»£æ›¿ã¨ã—ã¦è¤‡æ•°ã®å ±å‘Šå…ˆã‚’ä¾›ã™ã‚‹ã¹ãã§ã‚ã‚‹ã€‚
â—
Note
To improve delivery of NEL reports, the server should set report_to to an endpoint group containing at least one endpoint in an alternative origin whose infrastructure is not coupled with the origin from which the resource is being fetched â€” otherwise network errors cannot be reported until the problem is solved, if ever â€” and provide multiple endpoints to provide alternatives if some endpoints are unreachable.
</p>


			</section>
			<section id="the-max_age-member">
<h4 title="The max_age member">4.1.2. `max_age^c ~member</h4>


<p>
`max_age@c
~memberã¯ã€å¿…é ˆã§ã‚ã‚Šï¼Œã“ã®`~NELæ–½ç­–$ã®å­˜ç¶šæœŸé–“ã‚’ç§’æ•°ã§æŒ‡å®šã™ã‚‹ã€‚
ãã®å€¤ã¯ã€è² ã§ãªã„æ•´æ•°ã§~MUST
â€” ä»–ã®å‹ã¯ã€æ§‹æ–‡è§£æ-~errorã«ãªã‚‹ã¨ã™ã‚‹ã€‚
â—
The REQUIRED max_age member specifies the lifetime of this NEL policy, as a non-negative integer number of seconds. Its value MUST be an non-negative integer; any other type will result in a parse error.
</p>


<p>
å€¤ 0 ã«ã™ã‚‹ã¨ã€ã“ã®`ç”Ÿæˆå…ƒ$ç”¨ã®`~NELæ–½ç­–$ã¯ï¼Œã™ã¹ã¦`æ–½ç­–~cache$ã‹ã‚‰é™¤å»ã•ã‚Œã‚‹ã“ã¨ã«ãªã‚‹ã€‚
â—
A value of 0 will cause any NEL policy for this origin to be removed from the policy cache.
</p>

<p class="note">æ³¨è¨˜ï¼š
~NELå ±å‘Šã®é€é”ã‚’ç¢ºä¿ã™ã‚‹ãŸã‚ã€`~server$ã¯ï¼Œï¼»
`å ±å‘Šå…ˆ~group$ã€ã®`æœ‰åŠ¹ç§’æ•°$eGã€‘ã‚‚ï¼Œååˆ†é«˜ã„ `max_age^c ã§ç’°å¢ƒè¨­å®šã•ã‚Œã‚‹
ï¼½ã“ã¨ã‚’ç¢ºä¿ã™ã‚‹ã¹ãã§ã‚ã‚‹ã€‚
<!-- ~Reportingæ–½ç­– -->
ã“ã®ç”Ÿæˆå…ƒ~ç”¨ã®`å ±å‘Šå…ˆ~group$ãŒå¤±åŠ¹ã—ãŸå ´åˆã€~NELæ–½ç­–ãŒå¤±åŠ¹ã—ã¦ã„ãªãã¨ã‚‚ï¼Œ~NELå ±å‘Šã¯é€é”ã•ã‚Œãªããªã‚‹ã€‚
â—
Note
To ensure delivery of NEL reports, the server should ensure that the Reporting endpoint group is also configured with a sufficiently high max_age. If the Reporting policy expires, NEL reports will not be delivered, even if the NEL policy has not expired.
</p>

			</section>
			<section id="the-include_subdomains-member">
<h4 title="The include_subdomains member">4.1.3. `include_subdomains^c ~member</h4>

<p>
`include_subdomains@c
~memberã¯ã€ä»»æ„é¸æŠã§ã‚ã‚Šï¼Œï¼»
~objå†…ã«ã“ã®~memberãŒåœ¨ã£ã¦, ã‹ã¤ ãã®å€¤ã¯çœŸå½å€¤ï¼ˆ `Boolean^jt å‹ ï¼‰ `true^jv
ï¼½ãªã‚‰ã°ï¼Œã“ã®`~NELæ–½ç­–$ã‚’ï¼Œã“ã®ç”Ÿæˆå…ƒã®ã™ã¹ã¦ã®ä¸‹ä½domainç”¨ã«ã‚‚å¯èƒ½åŒ–ã™ã‚‹
â€” ä»–ã®å ´åˆã€ã“ã®`~NELæ–½ç­–$ã¯ä¸‹ä½domainç”¨ã«ã¯å¯èƒ½åŒ–ã•ã‚Œãªã„ã€‚
â—
The OPTIONAL include_subdomains member is a boolean that enables this NEL policy for all subdomains of this origin. If no member named include_subdomains is present in the object, or its value is not true, the NEL policy will not be enabled for subdomains.
</p>

<p class="note">æ³¨è¨˜ï¼š
~appã¯ã€ä¸‹ä½domainç”¨ã®~NELå ±å‘Šã®é€é”ã‚’ç¢ºä¿ã™ã‚‹ãŸã‚ã«ã¯ã€ï¼»
ãã®`å ±å‘Šå…ˆ~group$ã‚‚ï¼Œ `include_subdomains^c ãŒå¯èƒ½åŒ–ã•ã‚Œã‚‹ã‚ˆã†ç’°å¢ƒè¨­å®šã•ã‚Œã‚‹
ï¼½ã“ã¨ã‚’ç¢ºä¿ã™ã‚‹ã¹ãã§ã‚ã‚‹ã€‚
<!-- ~Reportingæ–½ç­– -->
ã“ã®ç”Ÿæˆå…ƒ~ç”¨ã®`å ±å‘Šå…ˆ~group$ãŒç„¡ã„ã‹ï¼Œæ‰€ä¸ã®ä¸‹ä½domainç”¨ã«åˆ¥ã€…ã®`å ±å‘Šå…ˆ~group$ã¯ç„¡ã„å ´åˆã€ãã®ä¸‹ä½domainç”¨ã®~NELå ±å‘Šã¯é€é”ã•ã‚Œãªããªã‚‹
â€” ~NELæ–½ç­–ã«ã¦ä¸‹ä½domainã‚’å«ã‚“ã§ã„ãŸã¨ã—ã¦ã‚‚ã€‚
â—
Note
To ensure delivery of NEL reports for subdomains, the application should ensure that the Reporting endpoint group is also configured with include_subdomains enabled. If the Reporting policy is not, and there is not a separate Reporting policy for a given subdomain, NEL reports for that subdomain will not be delivered, even if the NEL policy includes the subdomain.
</p>
			</section>
			<section id="the-success_fraction-member">
<h4 title="The success_fraction member">4.1.4. `success_fraction^c ~member</h4>


<p>
`success_fraction@c
~memberã¯ã€ä»»æ„é¸æŠã§ã‚ã‚Šï¼Œï¼»
ã“ã®ç”Ÿæˆå…ƒ~ç”¨ã®`~networkè¦è«‹$ã®ã†ã¡`æˆåŠŸã—ãŸ$ã‚‚ã®
ï¼½ã«ã¤ã„ã¦ã®å ±å‘Šã«é©ç”¨ã•ã‚Œã‚‹ã¹ãã§ã‚ã‚‹`è¦‹æœ¬æŠ½å‡ºç‡$ã‚’å®šç¾©ã™ã‚‹ã€‚
åœ¨ã‚‹å ´åˆã®å€¤ã¯ 0.0 ä»¥ä¸Š 1.0 ä»¥ä¸‹ã®å®Ÿæ•°ï¼ˆ `Number^jt å‹ï¼‰ã§~MUST
â€” ä»–ã®å€¤ã¯ã€æ§‹æ–‡è§£æ-~errorã«ãªã‚‹ã¨ã™ã‚‹ã€‚
ã“ã®~memberãŒç„¡ã„å ´åˆã€~UAã¯ï¼»
ã“ã®ç”Ÿæˆå…ƒ~ç”¨ã®`~networkè¦è«‹$ã®ã†ã¡`æˆåŠŸã—ãŸ$ã‚‚ã®
ï¼½ã«ã¤ã„ã¦ã¯~NELå ±å‘Šã‚’<em>åé›†ã—ãªã„</em>ã“ã¨ã«ãªã‚‹ã€‚
â—
The OPTIONAL success_fraction member defines the sampling rate that should be applied to reports about successful network requests for this origin. If present, its value MUST be a number between 0.0 and 1.0, inclusive; any other value will result in a parse error. If this member is not present, the user agent will not collect NEL reports about successful network requests for this origin.
</p>

			</section>
			<section id="the-failure_fraction-member">
<h4 title="The failure_fraction member">4.1.5. `failure_fraction^c ~member</h4>

<p>
`failure_fraction@c
~memberã¯ã€ä»»æ„é¸æŠã§ã‚ã‚Šï¼Œï¼»
ã“ã®ç”Ÿæˆå…ƒ~ç”¨ã®`~networkè¦è«‹$ã®ã†ã¡`å¤±æ•—ã—ãŸ$ã‚‚ã®
ï¼½ã«ã¤ã„ã¦ã®å ±å‘Šã«é©ç”¨ã•ã‚Œã‚‹ã¹ãã§ã‚ã‚‹`è¦‹æœ¬æŠ½å‡ºç‡$ã‚’å®šç¾©ã™ã‚‹ã€‚
åœ¨ã‚‹å ´åˆã®å€¤ã¯ 0.0 ä»¥ä¸Š 1.0 ä»¥ä¸‹ã®å®Ÿæ•°ï¼ˆ `Number^jt å‹ï¼‰ã§~MUST
â€” ä»–ã®å€¤ã¯ã€æ§‹æ–‡è§£æ-~errorã«ãªã‚‹ã¨ã™ã‚‹ã€‚
ã“ã®~memberãŒç„¡ã„å ´åˆã€~UAã¯ï¼»
ã“ã®ç”Ÿæˆå…ƒ~ç”¨ã®`~networkè¦è«‹$ã®ã†ã¡`å¤±æ•—ã—ãŸ$ã‚‚ã®
ï¼½<em>all</em>ã«ã¤ã„ã¦ã®~NELå ±å‘Šã‚’åé›†ã™ã‚‹ã“ã¨ã«ãªã‚‹ã€‚
â—
The OPTIONAL failure_fraction member defines the sampling rate that should be applied to reports about failed network requests for this origin. If present, its value MUST be a number between 0.0 and 1.0, inclusive; any other value will result in a parse error. If this member is not present, the user agent will collect NEL reports about all failed network requests for this origin.
</p>

			</section>
		</section>
		<section id="process-policy-headers">
<h3 title="Process policy headers">4.2. æ–½ç­–~headerã®å‡¦ç†-æ³•</h3>

<p>
ã“ã®~algoã¯ã€æ‰€ä¸ã®
( `~networkè¦è«‹$ %è¦è«‹, ãã®è¦è«‹ã«å¯¾ã™ã‚‹`å¿œç­”$ %å¿œç­” )
ã«å¯¾ã—ï¼Œï¼»
%è¦è«‹ ã®`ç”Ÿæˆå…ƒ$ç”¨ã®`~NELæ–½ç­–$ã‚’æŠ½å‡ºã—ãŸçµæœ
ï¼½ã«å‰‡ã£ã¦`æ–½ç­–~cache$ã‚’æ›´æ–°ã™ã‚‹ï¼š
â—
Given a network request (request) and its corresponding response (response), this algorithm extracts a NEL policy for request's origin, and updates the policy cache accordingly.
</p>

<ol class="algorithm">
	<li>
%ç”Ÿæˆå…ƒ ~LET %è¦è«‹ ã®`ç”Ÿæˆå…ƒ$
â—
â†“</li>
	<li>
~IFï¼»
`ç”Ÿæˆå…ƒã¯ä¿¡ç”¨ã«ä¾¡ã—å¾—ã‚‹ã‹ï¼Ÿ$( %ç”Ÿæˆå…ƒ ) ~EQ `ä¾¡ã—ãªã„^i
ï¼½
â‡’
~RET
â—
Abort these steps if any of the following conditions are true:
â—
The result of executing the "Is origin potentially trustworthy?" algorithm on request's origin is not Potentially Trustworthy.
</li>
	<li>
~IFï¼»
%å¿œç­” ã¯ `NEL^h ã‚’åå‰ã«æŒã¤`å¿œç­”~header$ã‚’åŒ…å«ã—ãªã„
ï¼½
â‡’
~RET
â—
response does not contain a response header whose name is NEL.
â—
â†‘Let origin be request's origin.
</li>
	<li>
%~header ~LET  å `NEL^h ã®`å¿œç­”~header$ã®å€¤
â—
Let header be the value of the response header whose name is NEL.
</li>
	<li>
%~list ~LET 
%~header ã‚’ä¸ãˆã‚‹ä¸‹ã§
`HTTP-JFV$r ã® 4 ç¯€ã«å®šç¾©ã•ã‚Œã‚‹~algoã‚’å®Ÿè¡Œã—ãŸçµæœ
â—
Let list be the result of executing the algorithm defined in Section 4 of [HTTP-JFV] on header.ï¼¼
</li>
	<li>
~IFï¼»
%~list ã¯~errorã§ã‚ã‚‹
ï¼½~ORï¼»
%~list ã¯ç©ºã§ã‚ã‚‹
ï¼½
â‡’
~RET
â—
If that algorithm results in an error, or if list is empty, abort these steps.
</li>
	<li>
%~item ~LET %~list[ 0 ]
â—
Let item be the first element of list.
</li>
	<li>
%max_age ~LET %~item å†…ã« `max_age$c ~memberã¯åœ¨ã‚‹ãªã‚‰ã° ãã®å€¤ ï¼
ç„¡ã„ãªã‚‰ã° Îµ
â—
â†“</li>
	<li>
%report_to ~LET %~item å†…ã« `report_to$c ~memberã¯åœ¨ã‚‹ãªã‚‰ã° ãã®å€¤ ï¼
ç„¡ã„ãªã‚‰ã° Îµ
â—
â†“</li>
	<li>
%success_fraction ~LET %~item å†…ã« `success_fraction$c ~memberã¯åœ¨ã‚‹ãªã‚‰ã° ãã®å€¤ ï¼
ç„¡ã„ãªã‚‰ã° 0.0
â—
â†“</li>
	<li>
%failure_fraction ~LET %~item å†…ã« `failure_fraction$c ~memberã¯åœ¨ã‚‹ãªã‚‰ã° ãã®å€¤ ï¼
ç„¡ã„ãªã‚‰ã° 1.0
â—
â†“</li>
	<li>
%include_subdomains ~LET %~item å†…ã« `include_subdomains$c ~memberã¯åœ¨ã£ã¦ ãã®å€¤ ~EQ `true^jv ãªã‚‰ã°  `å«ã‚€^i ï¼
~ELSE_ `å«ã¾ãªã„^i
â—
â†“</li>
	<li>
~IFï¼»
%max_age ã¯å®Ÿæ•°ã§ãªã„
ï¼½~ORï¼»
%max_age ~LT 0 ã€ã“ã®æ¡ä»¶ã¯ã€ã“ã®è¨³ã«ã‚ˆã‚‹è£œå®Œã€‘
ï¼½
â‡’
~RET
â—
If item has no member named max_age, or that member's value is not a number, abort these steps.
</li>
	<li>
<p>
~IFï¼»
%max_age ~EQ 0
ï¼½ï¼š
</p>
		<ol>
			<li>
`æ–½ç­–~cache$[ %ç”Ÿæˆå…ƒ ] ~SET Îµ
</li>
			<li>
~RET
</li>
		</ol>
â—
If the value of item's max_age member is 0, then remove any NEL policy from the policy cache whose origin is origin, and skip the remaining steps.
</li>
	<li>
~IFï¼»
%report_to ã¯æ–‡å­—åˆ—ã§ãªã„
ï¼½
â‡’
~RET
â—
If item has no member named report_to, or that member's value is not a string, abort these steps.
</li>
	<li>
~IFï¼»
%success_fraction ã¯ 0.0 ä»¥ä¸Š 1.0 ä»¥ä¸‹ã®å®Ÿæ•°ã§ãªã„
ï¼½
â‡’
~RET
â—
If item has a member named success_fraction, whose value is not a number in the range 0.0 to 1.0, inclusive, abort these steps.
</li>
	<li>
~IFï¼»
%failure_fraction ã¯ 0.0 ä»¥ä¸Š 1.0 ä»¥ä¸‹ã®å®Ÿæ•°ã§ãªã„
ï¼½
â‡’
~RET
â—
If item has a member named failure_fraction, whose value is not a number in the range 0.0 to 1.0, inclusive, abort these steps.
</li>
	<li>
<p>
%æ–½ç­– ~LET å„ç¨®~propãŒæ¬¡ã®ã‚ˆã†ã«è¨­å®šã•ã‚ŒãŸï¼Œæ–°ãŸãª`~NELæ–½ç­–$
â‡’ï¼ƒ
`å—ä¿¡ã—ãŸ~IP~address$nP ~SET ~UAã« %å¿œç­” ã‚’é€ä¿¡ã—ãŸ`~server$ã®~IP~addressâ€ ,
`ç”Ÿæˆå…ƒ$ ~SET %ç”Ÿæˆå…ƒ,
`ä¸‹ä½domain~flag$nP ~SET %include_subdomains,
`å ±å‘Šç”¨~group$nP ~SET %report_to,
`æœ‰åŠ¹ç§’æ•°$nP ~SET %max_age,
`ä½œæˆæ™‚åˆ»$nP ~SET ç¾åœ¨ã®æ™‚åˆ»å°,
`æˆåŠŸ~æ™‚ã®è¦‹æœ¬æŠ½å‡ºç‡$ ~SET %success_fraction,
`å¤±æ•—~æ™‚ã®è¦‹æœ¬æŠ½å‡ºç‡$ ~SET %failure_fraction
â—
Let policy be a new NEL policy whose properties are set as follows:
â—
received IP address
â€¢ the IP address of the server that the user agent received response from
â€¢ Editor's note
â€¢ Plumb this through more explicitly in [FETCH].
origin
â€¢ origin
subdomains flag
â€¢ include if item has a member named include_subdomains whose value is true, exclude otherwise 
reporting group
â€¢ the value of item's report_to member
ttl
â€¢ the value of item's max_age member
creation
â€¢ the current timestamp
successful sampling rate
â€¢ the value of item's success_fraction member, if present; 0.0 otherwise 
failure sampling rate
â€¢ the value of item's failure_fraction member, if present; 1.0 otherwise 
</p>

<p class="note">â€ ç·¨é›†è€…æ³¨è¨˜ï¼š
ã“ã‚Œã‚’ `FETCH$r ã«ãŠã„ã¦ï¼Œã‚ˆã‚Šæ˜ç¤ºçš„ã«æ˜ã‚Šä¸‹ã’ã‚‹ã€‚
â—
â†‘</p>

	</li>
	<li>
`æ–½ç­–~cache$[ %ç”Ÿæˆå…ƒ ] ~SET %æ–½ç­–
â—
If there is already an entry in the policy cache for origin, replace it with policy; otherwise, insert policy into the policy cache for origin.
</li>
</ol>


		</section>
	</section>
	<section id="report-delivery">
<h2 title="Report delivery">5. å ±å‘Šã®é€é”</h2>

		<section id="choose-a-policy-for-an-origin">
<h3 title="Choose a policy for an origin">5.1. ç”Ÿæˆå…ƒ~ç”¨ã®æ–½ç­–ã‚’é¸ã¶</h3>


<p>
ã“ã®~algoã¯æ‰€ä¸ã®
( `ç”Ÿæˆå…ƒ$ %ç”Ÿæˆå…ƒ )
ã«å¯¾ã—ï¼Œ`æ–½ç­–~cache$å†…ã®ã©ã®`~NELæ–½ç­–$ãŒï¼»
%ç”Ÿæˆå…ƒ ã¸ã®`~networkè¦è«‹$ç”¨ã®å ±å‘Š
ï¼½ã‚’ç”Ÿæˆã™ã‚‹ã¨ãã«åˆ©ç”¨ã•ã‚Œã‚‹ã¹ãã‹ã‚’æ±ºå®šã™ã‚‹ã€‚
â—
Given an origin (origin), this algorithm determines which NEL policy in the policy cache should be used to generate reports for network requests to origin.
</p>

<ol class="algorithm">
	<li>
%æ–½ç­– ~LET `æ–½ç­–~cache$[ %ç”Ÿæˆå…ƒ ]
â—
â†“</li>
	<li>
~IFï¼»
%æ–½ç­– ~NEQ Îµ
ï¼½~ANDï¼»
%æ–½ç­– ã¯`å¤±åŠ¹ã—ã¦$ã„ãªã„
ï¼½
â‡’
~RET %æ–½ç­–
â—
If there is an entry in the policy cache for origin:
â€¢ Let policy be that entry.
â€¢ If policy is not expired, return it.
</li>
	<li>
<p>
%ç”Ÿæˆå…ƒ ã«`ä¸Šä½domainåˆè‡´-$ã™ã‚‹
~EACH( %è¦ª~ç”Ÿæˆå…ƒ )
ã«å¯¾ã—ï¼š
â—
For each parent origin that is a superdomain match of origin:
</p>
		<ol>
			<li>
%æ–½ç­– ~LET `æ–½ç­–~cache$[ %è¦ª~ç”Ÿæˆå…ƒ ]
â—
â†“</li>
			<li>
~IFï¼»
%æ–½ç­– ~NEQ Îµ
ï¼½~ANDï¼»
%æ–½ç­– ã¯`å¤±åŠ¹ã—ã¦$ã„ãªã„
ï¼½~ANDï¼»
%æ–½ç­– ã®`ä¸‹ä½domain~flag$nP ~EQ `å«ã‚€^i
ï¼½
â‡’
~RET %æ–½ç­–
â—
If there is an entry in the policy cache for parent origin:
â—
Let policy be that entry.
â—
If policy is not expired, and its subdomains flag is include, return it.
</li>
		</ol>
	</li>
	<li>
~RET Îµ
â—
Return no policy.
</li>
</ol>

		</section>
		<section id="generate-a-network-error-report">
<h3 title="Generate a network error report">5.2. ~network~errorå ±å‘Šã®ç”Ÿæˆ-æ³•</h3>


<p>
ã“ã®~algoã¯ã€æ‰€ä¸ã®
( `~networkè¦è«‹$ %è¦è«‹, ãã®è¦è«‹ã«å¯¾ã™ã‚‹`å¿œç­”$ %å¿œç­” )
ã«å¯¾ã—ï¼Œ %è¦è«‹ ã«ã¤ã„ã¦ã®å ±å‘Šã‚’ç”Ÿæˆã—ã¦ï¼Œé€é”~ç”¨ã«~queueã™ã‚‹
â€” åˆè‡´ã—ã¦ã„ã‚‹`~NELæ–½ç­–$ãŒåœ¨ã£ã¦ ãã†ã™ã‚‹ã‚ˆã†æŒ‡å›³ã•ã‚ŒãŸãªã‚‰ã°ï¼š
â—
Given a network request (request) and its corresponding response (response), this algorithm generates a report about request if instructed to by any matching NEL policy, and queues it for delivery.
</p>

<ol class="algorithm">
	<li>
~IFï¼»
`ç”Ÿæˆå…ƒã¯ä¿¡ç”¨ã«ä¾¡ã—å¾—ã‚‹ã‹ï¼Ÿ$( %è¦è«‹ ã®`ç”Ÿæˆå…ƒ$ ) ~EQ `ä¾¡ã—ãªã„^i
ï¼½
â‡’
~RET
â—
If the result of executing the "Is origin potentially trustworthy?" algorithm on request's origin is not Potentially Trustworthy, abort these steps.
</li>
	<li>
%ç”Ÿæˆå…ƒ ~LET %è¦è«‹ ã®`ç”Ÿæˆå…ƒ$
â—
Let origin be request's origin.
</li>
	<li>
%æ–½ç­– ~LET `ç”Ÿæˆå…ƒ~ç”¨ã®æ–½ç­–ã‚’é¸ã¶$( %ç”Ÿæˆå…ƒ )
â—
Let policy be the result of executing 5.1 Choose a policy for an origin on origin.ï¼¼
</li>
	<li>
~IFï¼»
%æ–½ç­– ~EQ Îµ
ï¼½
â‡’
~RET
â—
If policy is no policy, abort these steps.
</li>

	<li>
%è¦‹æœ¬æŠ½å‡ºç‡ ~LET ï¼»
%è¦è«‹ ã¯`æˆåŠŸã—ãŸ$ãªã‚‰ã° %æ–½ç­– ã®`æˆåŠŸ~æ™‚ã®è¦‹æœ¬æŠ½å‡ºç‡$ ï¼
%è¦è«‹ ã¯`å¤±æ•—ã—ãŸ$ãªã‚‰ã° %æ–½ç­– ã®`å¤±æ•—~æ™‚ã®è¦‹æœ¬æŠ½å‡ºç‡$
ï¼½
â—
Determine the active sampling rate for this request:
â€¢ If request succeeded, let sampling rate be policy's successful sampling rate.
â€¢ If request failed, let sampling rate be policy's failure sampling rate.
</li>
	<li>
%è³½ ~LET 0.0 ä»¥ä¸Š 1.0 ä»¥ä¸‹ã®~randomãªå®Ÿæ•°ï¼ˆã“ã®è¦è«‹ã‚’å ±å‘Šã™ã‚‹ã‹ã©ã†ã‹è£å®šã™ã‚‹ï¼‰
â—
Decide whether or not to report on this request. Let roll be a random number between 0.0 and 1.0, inclusive.ï¼¼
</li>
	<li>
~IFï¼»
%è³½ ~GTE %è¦‹æœ¬æŠ½å‡ºç‡
ï¼½
â‡’
~RET
â—
If roll â‰¥ sampling rate, abort these steps.
</li>
	<li>
<p>
%å ±å‘Š~æœ¬ä½“ ~LET æ¬¡ã®~propã‚’ä¼´ã†ï¼Œæ–°ãŸãª ECMAScript ~obj `ECMA-262$r 
ï¼š
â—
Let report body be a new ECMAScript object with the following properties: [ECMA-262]
</p>
		<dl>
			<dt>`referrer^c</dt>
			<dd>
%è¦è«‹ ã®`~client$rqã«çµä»˜ã‘ã‚‰ã‚Œã¦ã„ã‚‹`~referreræ–½ç­–$ã«ã‚ˆã‚Šæ±ºå®šã•ã‚Œã‚‹ï¼Œ %è¦è«‹ ã®~referrer
â—
request's referrer, as determined by the referrer policy associated with its client.
</dd>
			<dd class="trans-note">ã€
<a href="~WAPI#concept-settings-object-referrer-policy">~clientã®~referreræ–½ç­–</a> ï¼
<a href="~REFERRER-POLICY#determine-requests-referrer">è¦è«‹ã®~referrerã‚’æ±ºå®šã™ã‚‹~algo</a> ï¼
<a href="~FETCH#concept-request-referrer">è¦è«‹ã®~referrer</a>
ã€‘</dd>

			<dt>`sampling_fraction^c</dt>
			<dd>
%è¦‹æœ¬æŠ½å‡ºç‡
â—
sampling rate
</dd>

			<dt>`server_ip^c</dt>
			<dd>
<p>
~UAãŒ %è¦è«‹ ã‚’é€ä¿¡ã—ãŸå…ˆã®`~server$ã®~IP~address
â€” å¯ç”¨ã§ãªã‘ã‚Œã°ã€ç©º~æ–‡å­—åˆ—
â—
The IP address of the server to which the user agent sent the request, if available. Otherwise, an empty string.
</p>
				<ul>
					<li>
~IPv4~addressã§è­˜åˆ¥ã•ã‚Œã‚‹~hostã¯ã€ï¼»
ç¯„å›² 0 ã€œ 255 ã® 4 å€‹ã® 10 é€²~æ•°ã‚’ "." ã§åŒºåˆ‡ã£ãŸä¸¦ã³
ï¼½ï¼ˆ `dotted-decimal^en è¡¨è¨˜æ³•ï¼‰
`RFC1123$r ã§è¡¨ç¾ã•ã‚Œã‚‹ã€‚
â—
A host identified by an IPv4 address is represented in dotted-decimal notation (a sequence of four decimal numbers in the range 0 to 255, separated by "."). [RFC1123]
</li>
	<li>
~IPv6~addressã§è­˜åˆ¥ã•ã‚Œã‚‹~hostã¯ã€é †åºä»˜ã‘ã‚‰ã‚ŒãŸ
8 å€‹ã® 16-bit ç‰‡ãŒæˆã™~list ï¼ˆ `x:x:x:x:x:x:x:x^c ã®å½¢ã«ã‚ˆã‚‹ä¸¦ã³ï¼‰ã¨ã—ã¦è¡¨ç¾ã•ã‚Œã‚‹
â€” ã“ã“ã§ã€å„ "x" ã¯ã€ 16-bit ç‰‡ã‚’è¡¨ã™ï¼»
1 ã€œ 4 å€‹ã® 16 é€²æ•°å­—
ï¼½ã‹ã‚‰ãªã‚‹ï¼‰
`RFC4291$r
â—
A host identified by an IPv6 address is represented as an ordered list of eight 16-bit pieces (a sequence of `x:x:x:x:x:x:x:x`, where the 'x's are one to four hexadecimal digits of the eight 16-bit pieces of the address). [RFC4291]
</li>
				</ul>
			</dd>

			<dt>`protocol^c</dt>
			<dd>
å½“ã®è³‡æºã‚’~fetchã™ã‚‹ã¨ãã«åˆ©ç”¨ã—ãŸ
<abbr title="Application Layer Protocol Negotiation">ALPN</abbr> Protocol ID
ã«ã‚ˆã‚Šè­˜åˆ¥ã•ã‚Œã‚‹
<a href="~RTIMING#dom-performanceresourcetiming-nexthopprotocol">~network~protocol</a>
â€” å¯ç”¨ã§ãªã‘ã‚Œã°ã€ç©º~æ–‡å­—åˆ—ã€‚
â—
The network protocol used to fetch the resource as identified by the ALPN Protocol ID, if available. Otherwise, "".
</dd>

			<dt>`method^c</dt>
			<dd>
%è¦è«‹ ã®`è¦è«‹~method$
â—
request's request method.
</dd>

			<dt>`status_code^c</dt>
			<dd>
~HTTPå¿œç­”ã®`çŠ¶æ…‹s~code$
â€” å¯ç”¨ã§ãªã‘ã‚Œã°ã€ 0 ã€‚
ã€ã—ãŸãŒã£ã¦ã€å¯ç”¨ãªã¨ãã‚‚~dataå‹ã¯ï¼ˆæ–‡å­—åˆ—ã§ã¯ãªãï¼‰ `Number^jt ã«ãªã‚‹ã§ã‚ã‚ã†ã€‘
â—
The status code of the HTTP response, if available. Otherwise, 0.
</dd>

			<dt>`elapsed_time^c</dt>
			<dd>
~UAãŒï¼»
å½“ã®è³‡æº~fetchã‚’é–‹å§‹ã—ã¦ã‹ã‚‰ï¼Œå®Œäº†ã—ãŸã‹ä¸­æ­¢ã—ãŸã¨ã
ï¼½ã¾ã§ã«çµŒéã—ãŸ~milliç§’æ•°
â—
The elapsed number of milliseconds between the start of the resource fetch and when it was completed or aborted by the user agent.
</dd>

			<dt>`phase^c</dt>
			<dd>
%è¦è«‹ ã¯`å¤±æ•—ã—ãŸ$ãªã‚‰ã° ãã®`~network~error$ã®`ç›¸$nE ï¼
%è¦è«‹ ã¯`æˆåŠŸã—ãŸ$ãªã‚‰ã° `application^l
â—
If request failed, the phase of its network error. If request succeeded, "application".
</dd>

			<dt>`type^c</dt>
			<dd>
%è¦è«‹ ã¯`å¤±æ•—ã—ãŸ$ãªã‚‰ã° ãã®`~network~error$ã®`ç¨®åˆ¥$nE ï¼
%è¦è«‹ ã¯`æˆåŠŸã—ãŸ$ãªã‚‰ã° `ok^l
â—
If request failed, the type of its network error. If request succeeded, "ok".
</dd>
		</dl>
	</li>
	<li>
<p>
~IFï¼»
%å ±å‘Š~æœ¬ä½“ ã® `server_ip^c ~prop ~NIN { ç©º~æ–‡å­—åˆ—, %æ–½ç­– ã®`å—ä¿¡ã—ãŸ~IP~address$nP }
ï¼½ï¼š
â—
If report body's server_ip property is non-empty, and not equal to policy's received IP address:
</p>
		<ol>
			<li>
%å ±å‘Š~æœ¬ä½“ ã® `phase^c ~SET `dns^l
â—
Set report body's phase to dns.
</li>
			<li>
%å ±å‘Š~æœ¬ä½“ ã® `type^c ~SET `dns.address_changed^l
â—
Set report body's type to dns.address_changed.
</li>
			<li>
%å ±å‘Š~æœ¬ä½“ ã‹ã‚‰ï¼»
`status_code^c, `elapsed_time^c
ï¼½~propã‚’æ¶ˆå»ã™ã‚‹
â—
Clear report body's status_code and elapsed_time properties.
</li>
			<li>
~Assertï¼š
`~DNSè§£æ±º$ã®é–“ã«å¯ç”¨ã§ãªã„æƒ…å ±ã‹ã‚‰å°å‡ºã•ã‚ŒãŸ %å ±å‘Š~æœ¬ä½“ å†…ã®~fieldã¯ã€ã™ã¹ã¦æ¶ˆå»ã•ã‚Œã¦ã„ã‚‹ã€‚
â—
Assert: All fields in report body that are derived from information not available during DNS resolution have been cleared.
</li>
		</ol>

<p class="note">æ³¨è¨˜ï¼š
ã“ã®æ®µã¯ã€`~server$ã®~IP~addressã¨`~NELæ–½ç­–$ %æ–½ç­– ãŒåˆè‡´ã—ãªã„å ´åˆã«ï¼Œ~NELå ±å‘Šã‚’ â€œé™æ ¼ã™ã‚‹â€ ã€‚
ã“ã‚Œã¯ã€ï¼»
~NELå ±å‘Šã¯ï¼Œãã‚ŒãŒè¿°ã¹ã‚‹ï¼»
~serviceã®æ‰€æœ‰è€…
ï¼½ã®ã¿ã«é€ä¿¡ã•ã‚Œã‚‹
ï¼½ã“ã¨ã‚’ç¢ºä¿ã™ã‚‹ãŸã‚ã®ï¼Œ~privacyä¿è­·ã§ã‚ã‚‹ã€‚
~IP~addressãŒåˆè‡´ã—ãªã„å ´åˆã€~UAã¯ï¼»
%æ–½ç­– ãŒ`ç”Ÿæˆå…ƒ$ã®`~domainå$ã®æ‰€æœ‰è€…ã«ã‚ˆã‚Šé€ä¿¡ã•ã‚ŒãŸã‹
ï¼½ã ã‘ã‚’æ¤œè¨¼yã§ãï¼Œï¼»
%æ–½ç­– ã¯ï¼»
ã“ã®`~domainå$ã‚’è§£æ±ºã—ã¦å¾—ã‚‰ã‚ŒãŸ`~server$
ï¼½ã®æ‰€æœ‰è€…ã‹ã‚‰é€ä¿¡ã•ã‚ŒãŸ
ï¼½ã‹ã¯æ¤œè¨¼yã§ããªã„ã€‚
ã—ãŸãŒã£ã¦ã€`~DNSè§£æ±º$ã«ã¤ã„ã¦ã®æƒ…å ±ã®ã¿åŒ…å«ã™ã‚‹ã‚ˆã†ï¼Œå ±å‘Šã‚’é™æ ¼ã™ã‚‹ã€‚
ã‚ˆã‚Šè©³ç´°ã¯ã€
<a href="#privacy-considerations">Â§~privacyè€ƒæ…®ç‚¹</a>,
<a href="#origins-with-multiple-ip-addresses">Â§ è¤‡æ•°ã®~IP~addressã‚’ä¼´ã†ç”Ÿæˆå…ƒ</a>
ã‚’è¦‹ã‚ˆã€‚
â—
Note
This step "downgrades" a NEL report if the IP addresses of the server and the policy don't match. This is a privacy protection, ensuring that NEL reports are only sent to the owner of the service that the report describes. If the IP addresses don't match, then the user agent can only verify that the NEL policy was sent by the owner of the origin's domain name; it cannot verify that the policy was sent by the owner of the server this domain name resolves to. We therefore downgrade the report to only contain information about DNS resolution. See 9. Privacy Considerations and 7.4 Origins with multiple IP addresses for more details.
</p>
	</li>
	<li>
~IFï¼»
%æ–½ç­– ã®`ä¸‹ä½domain~flag$nP ~EQ `å«ã‚€^i
ï¼½~ANDï¼»
%å ±å‘Š~æœ¬ä½“ ã® `phase^c ~prop ~NEQ `dns^l
<!-- ï¼Šrequest body -->
ï¼½
â‡’
~RET
â—
If policy's subdomains flag is include, and request body's phase property is not dns, abort these steps.
</li>

	<li>
`å ±å‘Šå…ˆ~groupç”¨ã«~dataã‚’~queueã™ã‚‹$(
%å ±å‘Š~æœ¬ä½“,
`network-error^l,
%æ–½ç­– ã®`å ±å‘Šç”¨~group$nP,
%è¦è«‹ ã®`ç’°å¢ƒ~è¨­å®šç¾¤~obj$ã€`~client$rqï¼Ÿã€‘,
%è¦è«‹ ã®~URL
)
`REPORTING$r
â—
Queue the report for delivery via the Reporting API. [REPORTING]
â—
type
â€¢ network-error
data
â€¢ report body
endpoint group
â€¢ policy's reporting group
settings
â€¢ request's environment settings object
url
â€¢ request's URL 
</li>
</ol>



		</section>
	</section>
	<section id="predefined-network-error-types">
<h2 title="Predefined network error types">6. å®šç¾©æ¸ˆã¿ã®~network~errorç¨®åˆ¥</h2>

<p>
`~network~error$ã®`ç¨®åˆ¥$nEã«ã¯ã€å®šç¾©æ¸ˆã¿ã®ã‚‚ã®ãŒã„ãã¤ã‹ã‚ã‚‹ã€‚
â—
There are several predefined network error types.
</p>

<p>
~UAã¯ã€ä»¥ä¸‹ã®~listã‚’~custom`~network~error$`ç¨®åˆ¥$nEã§æ‹¡å¼µã—ã¦~MAY
â€” ä¾‹ï¼šæ–°ãŸãª~protocolã«é©å¿œã™ã‚‹ãŸã‚ï¼æ—¢å­˜ã®ã‚‚ã®ã‚’ã‚ˆã‚Šè©³ç´°ã«è¨˜è¿°ã™ã‚‹ãŸã‚ãªã©ã€‚
ãã†ã™ã‚‹å ´åˆã€~errorå ±å‘Šã®å‡¦ç†-æ³•ã‚’å˜ç´”ã‹ã¤ä¸€è²«ã•ã›æ˜“ãã™ã‚‹ãŸã‚ã€~UAã¯ï¼Œ`ç¨®åˆ¥$nEåã¯~dotåŒºåˆ‡ã‚Šã®~patternï¼ˆ
<code>`[group]^v.`[optional-subgroup]^v.`[error-name]^v</code>
ï¼‰ã«å¾“ã†ã‚ˆã†ã«ã™ã‚‹ã¹ãã§ã‚ã‚‹
â€” ä¾‹ãˆã°ã€
ã€å ±å‘Šã®ã€‘
åé›†å™¨ãŒä¾›ã™ã‚‹é›†ç´„ã¯ã€~categoryã”ã¨ã«, ã‚ã‚‹ã„ã¯
ã„ãã¤ã‹ã®ä¸‹ä½groupã«~~åˆ†åˆ¥ã•ã‚Œã¦ã‚ˆã„ã€‚
â—
The user agent MAY extend this list with custom network error types â€” e.g. to accommodate new protocols, or more detailed error descriptions of existing ones. When doing so, the user agent SHOULD follow the dot-delimited pattern ([group].[optional-subgroup].[error-name]) for the type names to facilitate simple and consistent processing of the error reports â€” e.g. the collector may provide aggregation by category and/or one or multiple subgroups.
</p>


		<section id="dns-resolution-errors">
<h3 title="DNS resolution errors">6.1. ~DNSè§£æ±º~error</h3>

<p>
ã“ã®ç¯€ã«æŒ™ã’ã‚‹ã™ã¹ã¦ã®`~network~error$ã¯ã€`~DNSè§£æ±º$ã®é–“ã«ç”Ÿã˜ã‚‹ã®ã§ï¼Œãã®`ç›¸$nEã¯ `dns^l ã«ãªã‚‹ã€‚
â—
All of the network errors in this section occur during DNS resolution, and therefore have a phase of dns.
</p>


<dl class="reportTypeGroup">
	<dt>`dns.unreachable^l</dt>
	<dd>
~DNS~serverã«åˆ°é”-ä¸èƒ½ã€‚
â—
DNS server is unreachable
</dd>

	<dt>`dns.name_not_resolved^l</dt>
	<dd>
~DNS~serverã¯å¿œç­”ã—ã¦ããŸãŒï¼Œ~addressã¯è§£æ±ºã§ããªã‹ã£ãŸã€‚
â—
DNS server responded but is unable to resolve the address
</dd>

	<dt>`dns.failed^l</dt>
	<dd>
ä¸Šã®å„é …ã«æŒ™ã’ãŸ~errorã«å› ã‚‹äº‹ç”±ã‚’é™¤ãï¼Œ
~DNS~serverã¸ã®è¦è«‹ã«éš›ã—ã¦ã®å¤±æ•—ã€‚
â—
Request to the DNS server failed due to reasons not covered by previous errors
</dd>

	<dt>`dns.address_changed^l</dt>
	<dd>
è¦è«‹ã®`ç”Ÿæˆå…ƒ$ç”¨ã«è§£æ±ºã•ã‚ŒãŸ~IP~addressã¯ã€å¯¾å¿œã™ã‚‹`~NELæ–½ç­–$ã‚’å—ä¿¡ã—ãŸã¨ãã‹ã‚‰å¤‰åŒ–ã—ãŸã“ã¨ã‚’
æŒ‡ç¤ºã™ã‚‹ã€‚
â—
Indicates that the resolved IP address for a request's origin has changed since the corresponding NEL policy was received
</dd>
</dl>

		</section>
		<section id="secure-connection-establishment-errors">
<h3 title="Secure connection establishment errors">6.2. ~secureæ¥ç¶š~ç¢ºç«‹ã®~error</h3>

<p>
ã“ã®ç¯€ã«æŒ™ã’ã‚‹ã™ã¹ã¦ã®`~network~error$ã¯ã€`~secureæ¥ç¶šã®ç¢ºç«‹$ã®é–“ã«ç”Ÿã˜ã‚‹ã®ã§ï¼Œãã®`ç›¸$nEã¯ `connection^l ã«ãªã‚‹ã€‚
â—
All of the network errors in this section occur during secure connection establishment, and therefore have a phase of connection.
</p>


<dl class="reportTypeGroup">
	<dt>`tcp.timed_out^l</dt>
	<dd>
~serverã¸ã®~TCPæ¥ç¶šãŒæ™‚é–“åˆ‡ã‚Œã«ãªã£ãŸã€‚
â—
TCP connection to the server timed out
</dd>

	<dt>`tcp.closed^l</dt>
	<dd>
~TCPæ¥ç¶šãŒ~serverã«ã‚ˆã‚Š~closeã•ã‚ŒãŸã€‚
â—
The TCP connection was closed by the server
</dd>

	<dt>`tcp.reset^l</dt>
	<dd>
~TCPæ¥ç¶šãŒå†è¨­å®šã•ã‚ŒãŸã€‚
â—
The TCP connection was reset
</dd>

	<dt>`tcp.refused^l</dt>
	<dd>
~TCPæ¥ç¶šã¯
~serverã«ã‚ˆã‚Šæ‹’å¦ã•ã‚ŒãŸã€‚
â—
The TCP connection was refused by the server
</dd>

	<dt>`tcp.aborted^l</dt>
	<dd>
~TCPæ¥ç¶šã¯ä¸­æ­¢ã•ã‚ŒãŸã€‚
â—
The TCP connection was aborted
</dd>

	<dt>`tcp.address_invalid^l</dt>
	<dd>
ç„¡åŠ¹ãª~IP~addressã€‚
â—
The IP address is invalid
</dd>

	<dt>`tcp.address_unreachable^l</dt>
	<dd>
~IP~addressã«åˆ°é”-ä¸èƒ½ã€‚
â—
The IP address is unreachable
</dd>

	<dt>`tcp.failed^l</dt>
	<dd>
ä¸Šã®å„é …ã«æŒ™ã’ãŸ~errorã«ã‚ˆã‚‹ã‚‚ã®ä»¥å¤–ã®äº‹ç”±ã«å› ã‚Šï¼Œ
~TCPæ¥ç¶šã«å¤±æ•—ã—ãŸã€‚
â—
The TCP connection failed due to reasons not covered by previous errors
</dd>
</dl>

<dl class="reportTypeGroup">
	<dt>`tls.version_or_cipher_mismatch^l</dt>
	<dd>
~versionã¾ãŸã¯æš—å·ã®ä¸ä¸€è‡´ã«å› ã‚Šï¼Œ
~TLSæ¥ç¶šã¯ä¸­æ­¢ã•ã‚ŒãŸã€‚
â—
The TLS connection was aborted due to version or cipher mismatch
</dd>

	<dt>`tls.bad_client_auth_cert^l</dt>
	<dd>
ç„¡åŠ¹ãª~clientè¨¼æ˜æ›¸ã«å› ã‚Šï¼Œ
~TLSæ¥ç¶šã¯ä¸­æ­¢ã•ã‚ŒãŸã€‚
â—
The TLS connection was aborted due to invalid client certificate
</dd>

	<dt>`tls.cert.name_invalid^l</dt>
	<dd>
ç„¡åŠ¹ãªåå‰ã«å› ã‚Šï¼Œ
~TLSæ¥ç¶šã¯ä¸­æ­¢ã•ã‚ŒãŸã€‚
â—
The TLS connection was aborted due to invalid name
</dd>

	<dt>`tls.cert.date_invalid^l</dt>
	<dd>
ç„¡åŠ¹ãªè¨¼æ˜æ›¸~æ—¥ä»˜ã«å› ã‚Šï¼Œ
~TLSæ¥ç¶šã¯ä¸­æ­¢ã•ã‚ŒãŸã€‚
â—
The TLS connection was aborted due to invalid certificate date
</dd>

	<dt>`tls.cert.authority_invalid^l</dt>
	<dd>
ç„¡åŠ¹ãªç™ºè¡Œiæ¨©é™ã«å› ã‚Šï¼Œ
~TLSæ¥ç¶šã¯ä¸­æ­¢ã•ã‚ŒãŸã€‚
â—
The TLS connection was aborted due to invalid issuing authority
</dd>

	<dt>`tls.cert.invalid^l</dt>
	<dd>
ç„¡åŠ¹ãªè¨¼æ˜æ›¸ã«å› ã‚Šï¼Œ
~TLSæ¥ç¶šã¯ä¸­æ­¢ã•ã‚ŒãŸã€‚
â—
The TLS connection was aborted due to invalid certificate
</dd>

	<dt>`tls.cert.revoked^l</dt>
	<dd>
ç ´æ£„-æ¸ˆã¿ã®~serverè¨¼æ˜æ›¸ã«å› ã‚Šï¼Œ
~TLSæ¥ç¶šã¯ä¸­æ­¢ã•ã‚ŒãŸã€‚
â—
The TLS connection was aborted due to revoked server certificate
</dd>

	<dt>`tls.cert.pinned_key_not_in_cert_chain^l</dt>
	<dd>
~key~pinning~errorã«å› ã‚Šï¼Œ
~TLSæ¥ç¶šã¯ä¸­æ­¢ã•ã‚ŒãŸã€‚
â—
The TLS connection was aborted due to a key pinning error
</dd>

	<dt>`tls.protocol.error^l</dt>
	<dd>
~TLS~protocol~errorã«å› ã‚Šï¼Œ
~TLSæ¥ç¶šã¯ä¸­æ­¢ã•ã‚ŒãŸã€‚
â—
The TLS connection was aborted due to a TLS protocol error
</dd>

	<dt>`tls.failed^l</dt>
	<dd>
ä¸Šã®å„é …ã«æŒ™ã’ãŸ~errorã«ã‚ˆã‚‹ã‚‚ã®ä»¥å¤–ã®äº‹ç”±ã«å› ã‚Šï¼Œ
~TLSæ¥ç¶šã«å¤±æ•—ã—ãŸã€‚
â—
The TLS connection failed due to reasons not covered by previous errors
</dd>
</dl>


		</section>
		<section id="transmission-of-request-and-response-errors">
<h3 title="Transmission of request and response errors">6.3. è¦è«‹ï¼å¿œç­” ~errorã®ä¼é€</h3>

<p>
ã“ã®ç¯€ã«æŒ™ã’ã‚‹ã™ã¹ã¦ã®`~network~error$ã¯ã€`è¦è«‹ã¨å¿œç­”ã®ä¼é€$ã®é–“ã«ç”Ÿã˜ã‚‹ã®ã§ï¼Œãã®`ç›¸$nEã¯ `application^l ã«ãªã‚‹ã€‚
â—
All of the network errors in this section occur during the transmission of request and response, and therefore have a phase of application.
</p>

<dl class="reportTypeGroup">
	<dt>`http.error^l</dt>
	<dd>
~UAã¯å¿œç­”ã‚’æˆåŠŸè£¡ã«å—ä¿¡ã—ãŸãŒï¼Œãã®çŠ¶æ…‹s~codeã¯ï¼»
`4xx$st ï¼ `5xx$st
ï¼½ã§ã‚ã£ãŸã€‚
â—
The user agent successfully received a response, but it had a 4xx or 5xx status code
</dd>

	<dt>`http.protocol.error^l</dt>
	<dd>
~HTTP~protocol~errorã«å› ã‚Šï¼Œ
æ¥ç¶šã¯ä¸­æ­¢ã•ã‚ŒãŸã€‚
â—
The connection was aborted due to an HTTP protocol error
</dd>

	<dt>`http.response.invalid^l</dt>
	<dd>
å¿œç­”ãŒç©ºã§ã‚ã‚‹â€  ï¼
`content-length^en â€ â€ ã«ä¸ä¸€è‡´ãŒã‚ã‚‹ ï¼
ç¬¦å·åŒ–æ³•â€ â€ â€ ãŒé©æ­£ã§ãªã„ ï¼
~UAãŒå¿œç­”ã‚’å‡¦ç†ã§ããªãã•ã›ã‚‹ã‚ˆã†ãªä»–ã®æ¡æ…‹ã€‚
â—
Response is empty, has a content-length mismatch, has improper encoding, and/or other conditions that prevent user agent from processing the response
</dd>
	<dd class="trans-note">ã€â€ 
å¿œç­”ã®<a href="~RFC7231#section-3.3">~payloadæœ¬ä½“</a>ãŒï¼Ÿ
ã€‘ã€â€ â€ 
`Content-Length$h
ã€‘ã€â€ â€ â€ 
<a href="~RFC7231#section-3.1.2.1">å†…å®¹~ç¬¦å·æ³•</a>ï¼Ÿ
ã€‘</dd>

	<dt>`http.response.redirect_loop^l</dt>
	<dd>
~redirect~loopãŒæ¤œå‡ºã•ã‚ŒãŸã“ã¨ã«å› ã‚Šï¼Œ
è¦è«‹ã¯ä¸­æ­¢ã•ã‚ŒãŸã€‚
â—
The request was aborted due to a detected redirect loop
</dd>

	<dt>`http.failed^l</dt>
	<dd>
ä¸Šã®å„é …ã«æŒ™ã’ãŸ~HTTP~protocolã«ãŠã‘ã‚‹~errorã«å› ã‚‹ã‚‚ã®ä»¥å¤–ã®äº‹ç”±ã«å› ã‚Šï¼Œ
æ¥ç¶šã«å¤±æ•—ã—ãŸã€‚
â—
The connection failed due to errors in HTTP protocol not covered by previous errors
</dd>
</dl>


<dl class="reportTypeGroup">

	<dt>`abandoned^l</dt>
	<dd>
åˆ©ç”¨è€…ãŒï¼Œè³‡æº~fetchã‚’å®Œäº†ã™ã‚‹å‰ã«ä¸­æ­¢ã—ãŸã€‚
â—
User aborted the resource fetch before it is complete
</dd>

	<dt>`unknown^l</dt>
	<dd>
æœªçŸ¥ã®~errorç¨®åˆ¥ã€‚
â—
error type is unknown
</dd>
</dl>


		</section>
	</section>
	<section id="examples">
<h2 title="Examples">7. ä¾‹</h2>

		<section id="sample-policy-definitions">
<h3 title="Sample Policy Definitions">7.1. æ–½ç­–~å®šç¾©ã®è¦‹æœ¬</h3>

<p class="trans-note">ã€
ä»¥ä¸‹ã«ç¤ºã•ã‚Œã‚‹~codeå†…ã®è¡Œé ­ã«ç¾ã‚Œã‚‹ï¼»
"&gt;" ï¼ "&lt;"
ï¼½ã¯ã€ï¼»
è¦è«‹ï¼å¿œç­”
ï¼½ã®~dataã‚’è¡¨ã™ï¼ˆãã‚Œã‚‰ã®æ–‡å­—~è‡ªä½“ã¯~dataã®ä¸€éƒ¨ã‚’æˆã•ãªã„ï¼‰ã€‚
ãã‚Œãã‚Œï¼Œä»¥é™ã«é€£ãªã‚‹ï¼»
"&gt;" ï¼ "&lt;"
ï¼½ãŒç„¡ã„è¡Œã¨ã¨ã‚‚ã« â€œå˜ç‹¬ã®è¡Œâ€ ã‚’æˆã™ï¼ˆãã‚Œã‚‰ã®ä¸­ã®æ”¹è¡Œã¯ã€è¦‹æ˜“ãã™ã‚‹ãŸã‚ã®æ•´å½¢ï¼‰ã€‚
ã€‘</p>

<div class="example">

<pre class="http-code">
&gt; GET / HTTP/1.1
&gt; Host: example.com

&lt; HTTP/1.1 200 OK
&lt; ...
&lt; `Report-To$h: {
    "group": "network-errors",
    "max_age": 2592000,
    "endpoints": [{"url": "https://example.com/upload-reports"}]
}
&lt; `NEL$h: {
    "report_to": "network-errors",
    "max_age": 2592000
}
</pre>

<p>
ã“ã® `NEL^h ~headerãŒå®šç¾©ã™ã‚‹`~NELæ–½ç­–$ã¯ã€ï¼»
`example.com^s ã«ã¤ã„ã¦ã®~network~errorã‚’ï¼Œåå‰ `network-errors^l ã®`å ±å‘Šå…ˆ~group$ã«å ±å‘Šã™ã‚‹
ï¼½ã‚ˆã†ï¼Œ~UAã«æŒ‡å›³ã™ã‚‹ã€‚
ã“ã®æ–½ç­–ã¯ 2592000 ç§’é–“ï¼ˆ 30 æ—¥é–“ï¼‰é©ç”¨ã•ã‚Œã‚‹ã€‚
â—
This NEL header defines a NEL policy, instructing the user agent to report network errors about example.com to the endpoint group named network-errors. The policy applies for 2592000 seconds (30 days).
</p>

<p>
ä¸Šã®ç™»éŒ²ã¯ã€å½“ã®å¿œç­”ãŒ`ä¿¡ç”¨ã«ä¾¡ã—å¾—ã‚‹ç”Ÿæˆå…ƒ$ã‹ã‚‰é€šä¿¡ã•ã‚ŒãŸå ´åˆã«é™ã‚ŠæˆåŠŸã™ã‚‹ã“ã¨ã«æ³¨æ„ã€‚
â—
Note that above registration will only succeed if the response is communicated from a potentially trustworthy origin.
</p>

</div>

<div class="example">

<pre class="http-code">
&gt; GET / HTTP/1.1
&gt; Host: example.com

&lt; HTTP/1.1 200 OK
&lt; ...
&lt; `NEL$h: {"max_age": 0}
</pre>

<p>
ã“ã® `NEL^h ~headerã¯ã€ï¼»
`example.com^s ç”¨ã®`~NELæ–½ç­–$ãŒå­˜åœ¨ã™ã‚‹ãªã‚‰ã°ï¼Œãã‚Œã‚’é™¤å»ã™ã‚‹
ï¼½ã‚ˆã†ï¼Œ~UAã«æŒ‡å›³ã™ã‚‹ã€‚
â—
This NEL header instructs the user agent to remove any existing NEL policy for example.com.
</p>

</div>

		</section>
		<section id="sample-network-error-reports">
<h3 title="Sample Network Error Reports">7.2. ~network~errorå ±å‘Šã®è¦‹æœ¬</h3>

<p>
ã“ã®ç¯€ã§ã¯ã€~UAãŒï¼»
`~NELæ–½ç­–$ãŒç™»éŒ²ã•ã‚Œã¦ã„ã‚‹`ç”Ÿæˆå…ƒ$ã«å¯¾ã—ï¼Œ~network~errorã«é­é‡ã—ãŸ
ï¼½ã¨ãã«~queueã—å¾—ã‚‹ï¼Œ`~network~error$`å ±å‘Š$ã®ä¾‹ã‚’ç¤ºã™ã€‚
ã“ã“ã§ã¯ã€å ±å‘Šã‚’~uploadã™ã‚‹ã¨ã `REPORTING$r ~APIã«ã‚ˆã‚Šä½œæˆã•ã‚Œã‚‹å…¨éƒ¨çš„ãªå ±å‘Š~payloadã‚’ç¤ºã™ã€‚
~payloadã® `body^c ~fieldãŒ`~network~error$ã®`å ±å‘Š~æœ¬ä½“$ã‚’åŒ…å«ã™ã‚‹ã€‚
â—
This section contains example network error reports the user agent might queue when a network error is encountered for an origin with a registered NEL policy. We show the full report payload that would be created by the [REPORTING] API when uploading the report; the payload's body field contains the network error report body.
</p>

<p class="trans-note">ã€
ä»–ã®~fieldã«é–¢ã™ã‚‹è¨˜è¿°ã¯ã€ `REPORTING$r ã®
<a href="~REPORTING#try-delivery">å ±å‘Šå…ˆã¸å ±å‘Šã‚’é€é”ã™ã‚‹æ‰‹ç¶šã</a>
ã«ã‚ã‚‹ã€‚
ã€‘</p>

<div class="example">

<pre class="json-code">
{
  "age": 0,
  "type": "network-error",
  "url": "https://www.example.com/",
  "body": {
    "sampling_fraction": 0.5,
    "referrer": "http://example.com/",
    "server_ip": "123.122.121.120",
    "protocol": "h2",
    "method": "GET",
    "status_code": 200,
    "elapsed_time": 823,
    "type": "http.protocol.error"
  }
}
</pre>

<div class="p">
<p>
ä¸Šã®å ±å‘Šã¯ã€~UAãŒæ¬¡ã‚’è¡Œã£ãŸã“ã¨ã‚’æŒ‡ç¤ºã™ã‚‹ï¼š
</p>

<ol>
	<li>
`example.com^s
ã‹ã‚‰
`www.example.com^s
ã¸~navigateã—ã‚ˆã†ã¨è©¦ã¿ã¦ã€
</li>
	<li>
ãã®~IP~addressã¯
`123.122.121.120^s
ã«æˆåŠŸè£¡ã«è§£æ±ºã•ã‚Œã€
</li>
	<li>
HTTP/2ï¼ˆ `h2^s ï¼‰~protocolã‚’ä»‹ã—ã¦~serverã‹ã‚‰ `200$st å¿œç­”ã‚’å—ä¿¡ã—ãŸãŒã€
</li>
	<li>
äº¤æ›ã«éš›ã—~protocol~errorã«é­é‡ã—ãŸãŸã‚ï¼ˆ `http.protocol.error^l ï¼‰ï¼Œ~naviã‚’æ”¾æ£„ã™ã‚‹ã‚ˆã†å¼·ã„ã‚‰ã‚ŒãŸã€‚
</li>
	<li>
~naviã‚’é–‹å§‹ã—ã¦ã‹ã‚‰ä¸­æ­¢ã™ã‚‹ã¾ã§ï¼Œ 823 ~milliç§’ çµŒéã—ã€
</li>
	<li>
æœ€å¾Œã«ï¼Œã“ã®å ±å‘Šã‚’~network~errorã«é­é‡ã—ãŸç›´å¾Œã«é€ä¿¡ã—ãŸ
â€” ã™ãªã‚ã¡ã€å ±å‘Š~ageã¯ 0
</li>
</ol>

â—
This report indicates that the user agent attempted to navigate from example.com to www.example.com, which successfully resolved to 123.122.121.120. However, while the user agent received a 200 response from the server via the HTTP/2 (h2) protocol, it encountered a protocol error in the exchange and was forced to abandon the navigation. The user agent aborted the navigation 823 milliseconds after it started. Finally, the user agent sent this report immediately after the network error was encountered â€“ i.e. the report age is 0.
</div>

</div>

<div class="example">

<pre class="json-code">
{
  "age": 0,
  "type": "network-error",
  "url": "https://widget.com/thing.js",
  "body": {
    "sampling_fraction": 1.0,
    "referrer": "https://www.example.com/",
    "server_ip": "",
    "protocol": "",
    "method": "GET",
    "status_code": 0,
    "elapsed_time": 143,
    "type": "dns.name_not_resolved"
  }
}
</pre>

<div class="p">
<p>
ä¸Šã®å ±å‘Šã¯ã€~UAãŒæ¬¡ã‚’è¡Œã£ãŸã“ã¨ã‚’æŒ‡ç¤ºã™ã‚‹ï¼š
</p>
<ol>
	<li>
`https://www.example.com/^s ã‹ã‚‰ `https://widget.com/thing.js^s ã‚’~fetchã—ã‚ˆã†ã¨è©¦ã¿ãŸãŒã€
</li>
	<li>
~DNSåï¼ˆ `widget.com^s ï¼‰ã‚’è§£æ±ºã§ããªã‹ã£ãŸãŸã‚ã€ 143 ~milliç§’å¾Œã«è¦è«‹ã‚’ä¸­æ­¢ã—ãŸã€‚
</li>
	<li>
`widget.com^s ã¸ã®ä»¥å‰ã®è¦è«‹ã¯ å¦¥å½“ãª`~NELæ–½ç­–$ã‚’é€é”ã—ãŸã®ã§ã€ã“ã®è¦è«‹~ç”¨ã«`~network~error$`å ±å‘Š$ã‚’ç”Ÿæˆã—ãŸã€‚
</li>
	<li>
ãã®å ±å‘Šã¯`~network~error$ã«é­é‡ã—ãŸç›´å¾Œã«~uploadã•ã‚ŒãŸ
â€” ã™ãªã‚ã¡ã€å ±å‘Š~ageã¯ 0
</li>
</ol>
â—
The above report indicates that the user agent attempted to fetch https://widget.com/thing.js from https://www.example.com/. However, the user agent was unable to resolve the DNS name (widget.com) and the request was aborted by the user agent after 143 milliseconds. Because a previous request to widget.com delivered a valid NEL policy, the user agent generates a network error report for this request. The report was uploaded immediately after the network error was encountered â€“ i.e. the report age is 0.
</div>

</div>

		</section>
		<section id="dns-misconfiguration">
<h3 title="DNS misconfiguration">7.3. ~DNSç’°å¢ƒè¨­å®šã®èª¤ã‚Š</h3>

<div class="example">

<pre class="http-code">
&gt; GET / HTTP/1.1
&gt; Host: example.com

&lt; HTTP/1.1 200 OK
&lt; ...
&lt; `Report-To$h: {
    "group": "network-errors",
    "max_age": 2592000,
    "endpoints": [{"url": "https://example.com/upload-reports"}]
}
&lt; `NEL$h: {
    "report_to": "network-errors",
    "max_age": 2592000,
    "include_subdomains": true
}
</pre>

<p>
ã“ã® `NEL^h ~headerã¯ã€~DNS~serverã®ç’°å¢ƒè¨­å®šã‚’èª¤ã£ãŸã¨ãï¼Œãã‚Œã‚’æ¤œå‡ºã™ã‚‹ã“ã¨ã‚’ `example.com^s ã®æ‰€æœ‰è€…ã«è¨±å®¹ã™ã‚‹
â€” å…·ä½“ä¾‹ã¨ã—ã¦,
`new-subdomain.example.com^s ã‚’~IP~addressã«è§£æ±ºã™ã‚‹ãŸã‚ã®æ–°ãŸãªè³‡æº~recordã‚’è¿½åŠ ã—å¿˜ã‚ŒãŸã¨ããªã©ã€‚
~UAã¯ã€ `new-subdomain.example.com^s ã¸ã®è¦è«‹ã‚’ç™ºè¡Œã—ã‚ˆã†ã¨è©¦è¡Œã—ãŸå ´åˆï¼Œæ¬¡ã®ã‚ˆã†ãªå ±å‘Šã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ã«ãªã‚ã†ï¼š
â—
This NEL header allows the owner of example.com to detect when they have misconfigured their DNS servers â€” for instance, when they have forgotten to add a new resource record resolving new-subdomain.example.com to an IP address. If a user agent tries to make a request to new-subdomain.example.com, it might generate the following report:
</p>

<pre class="json-code">
{
  "age": 0,
  "type": "network-error",
  "url": "https://new-subdomain.example.com/",
  "body": {
    "sampling_fraction": 1.0,
    "server_ip": "",
    "protocol": "http/1.1",
    "method": "GET",
    "status_code": 0,
    "elapsed_time": 48,
    "type": "dns.name_not_resolved"
  }
}
</pre>

</div>

		</section>
		<section id="origins-with-multiple-ip-addresses">
<h3 title="Origins with multiple IP addresses">7.4. è¤‡æ•°ã®~IP~addressã‚’ä¼´ã†ç”Ÿæˆå…ƒ</h3>


<p>
`ç”Ÿæˆå…ƒ$ã®ã†ã¡ï¼Œãã®`~domainå$ãŒè¤‡æ•°ã®~IP~addressã«è§£æ±ºã•ã‚Œã‚‹ã‚‚ã®ã«å¯¾ã—ã¦ã¯ã€~NELã¯ï¼Œ~errorå ±å‘Šã‚’ â€œé™æ ¼ã—ã¦â€ ~error~~è¦å› ã«ã¤ã„ã¦ä¾›ã™ã‚‹æƒ…å ±ã‚’æ¸›ã‚‰ã™ã“ã¨ã‚‚ã‚ã‚‹
â€” ï¼»
`ç”Ÿæˆå…ƒ$ã®æ‰€æœ‰è€…ãŒï¼Œ`è¦è«‹$ã‚’å–æ‰±ã£ã¦ã„ã‚‹`~server$ã®æ‰€æœ‰è€…ã¨åŒã˜ã‹ã©ã†ã‹
ï¼½ã‚’æ¤œè¨¼yã§ããªã„å ´åˆã«ã€‚
â—
For origins whose domain name resolves to multiple IP addresses, NEL will sometimes "downgrade" an error report, providing less information about the cause of the error, since it cannot verify that the owner of the origin is the same as the owner of the server handling the request.
</p>

<div class="example">

<p>
ä¾‹ã¨ã—ã¦ã€
`example.com^s ã¯ï¼Œäº’ã„ã«~IP~addressãŒç•°ãªã‚‹ 3 ã¤ã®`~server$ã§å–æ‰±ã‚ã‚Œã¦ã„ã¦ã€ãã®~serviceã®æ‰€æœ‰è€…ã¯
`example.com^s ã¯ï¼»
`192.0.2.1^s ï¼ `192.0.2.2^s ï¼ `192.0.2.3^s
ï¼½ã«è§£æ±ºã•ã‚Œã‚‹ã‚ˆã†~DNSã‚’ç’°å¢ƒè¨­å®šã—ã¦ã„ã¦ã€å„~UAãŒ ãã‚Œã‚‰ã®è¦è«‹ã‚’ ã“ã‚Œã‚‰ã® 3 ã¤ã®~IP~addressã«åˆ†æ•£ã™ã‚‹ã“ã¨ã«ä¾æ‹ ã—ã¦ã„ã¦ã‚‹ã¨ã™ã‚‹ã€‚
~serviceã®æ‰€æœ‰è€…ã¯ã€æ¬¡ã®`~NELæ–½ç­–$ã‚’é€é”ã™ã‚‹ã‚ˆã†ã«ã—ãŸã¨ã™ã‚‹ï¼š
â—
As an example, assume that example.com is handled by three servers, each with a different IP address. The owner of the service configures DNS to resolve example.com to 192.0.2.1, 192.0.2.2, and 192.0.2.3, and relies on user agents to balance their requests across these three IP addresses. The service owner delivers the following NEL policy:
</p>

<pre class="http-code">
&gt; GET / HTTP/1.1
&gt; Host: example.com

&lt; HTTP/1.1 200 OK
&lt; ...
&lt; `Report-To$h: {
    "group": "network-errors",
    "max_age": 2592000,
    "endpoints": [{"url": "https://example.com/upload-reports"}]
}
&lt; `NEL$h: {
    "report_to": "network-errors",
    "max_age": 2592000,
    "success_fraction": 1.0,
    "failure_fraction": 1.0
}
</pre>

<p>
ä¸ŠãŒä¸ãˆã‚‰ã‚ŒãŸä¸‹ã§ã€ä»¥ä¸‹ã®é †ã«ç”Ÿã˜ã‚‹å‡ºæ¥äº‹ã‚’è€ƒãˆã‚‹ï¼š
â—
Given the above, consider the following sequence of events:
</p>

<ol>
	<li>
<p>
~UAã¯ã€`è¦è«‹$ã‚’ `192.0.2.1^s ã«å‘ã‘ã¦é€ä¿¡ã—ã¦ï¼Œ`~server$ã‹ã‚‰`å¿œç­”$ã‚’æˆåŠŸè£¡ã«å—ä¿¡ã—ãŸã€‚
ã“ã®å¿œç­”ã¯ï¼Œä¸Šã®`~NELæ–½ç­–$ã‚’å«ã‚€ã®ã§ã€~UAã¯ï¼Œæ–½ç­–ã®`å—ä¿¡ã—ãŸ~IP~address$nPã‚’ `192.0.2.1^s ã«è¨­å®šã™ã‚‹ã€‚
`å—ä¿¡ã—ãŸ~IP~address$nPã¯`~server$ã®~IP~addressã«åˆè‡´ã™ã‚‹ã®ã§ï¼ˆæˆåŠŸã—ãŸã©ã®è¦è«‹ã‚‚ï¼Œãã†ãªã‚‹ã¯ãšã§ã‚ã‚‹ï¼‰ã€æ¬¡ã®~NELå ±å‘Šã‚’ç”Ÿæˆã™ã‚‹ï¼š
â—
The user agent sends a request to 192.0.2.1, and receives a successful response from the server. This response includes the above NEL policy, and the user agent sets the policy's received IP address to 192.0.2.1. Since the received IP address matches the server's IP address (which it must for any successful request), it generates the following NEL report:
</p>

<pre class="json-code">
{
  "age": 0,
  "type": "network-error",
  "url": "https://example.com/",
  "body": {
    "sampling_fraction": 1.0,
    "server_ip": "192.0.2.1",
    "protocol": "http/1.1",
    "method": "GET",
    "status_code": 200,
    "elapsed_time": 57,
    "type": "ok"
  }
}
</pre>

	</li>
	<li>


<p>
~UAã¯ã€æ–°ãŸãª`è¦è«‹$ã‚’ `192.0.2.2^s ã¸é€ä¿¡ã—ã¦ï¼Œåˆ¥ã®`å¿œç­”$ã‚’æˆåŠŸè£¡ã«å—ä¿¡ã—ãŸã€‚
ã“ã®å¿œç­”ã‚‚åŒã˜`~NELæ–½ç­–$ã‚’å«ã‚€ã€‚
~UAã¯ã€æ–½ç­–ã®`å—ä¿¡ã—ãŸ~IP~address$nPã‚’ `192.0.2.2^s ã«æ›´æ–°ã™ã‚‹ã€‚
`å—ä¿¡ã—ãŸ~IP~address$nPã¯ï¼Œ`~server$ã®~IP~addressã«åˆè‡´ã™ã‚‹ã®ã§ï¼ˆæˆåŠŸã—ãŸã©ã®è¦è«‹ã‚‚ï¼Œãã†ãªã‚‹ã¯ãšã§ã‚ã‚‹ï¼‰ã€æ¬¡ã®~NELå ±å‘Šã‚’ç”Ÿæˆã™ã‚‹ï¼š
â—
The user agent sends a new request to 192.0.2.2, and receives another successful response. This response also includes the NEL policy, and the user agent updates the policy's received IP address to 192.0.2.2. Since the received IP address matches the server's IP address (which it must for any successful request), it generates the following NEL report:
</p>

<pre class="json-code">
{
  "age": 0,
  "type": "network-error",
  "url": "https://example.com/",
  "body": {
    "sampling_fraction": 1.0,
    "server_ip": "192.0.2.2",
    "protocol": "http/1.1",
    "method": "GET",
    "status_code": 200,
    "elapsed_time": 34,
    "type": "ok"
  }
}
</pre>

	</li>
	<li>
<p>
~UAã¯ã€`è¦è«‹$ã‚’ `192.0.2.3^s ã¸é€ä¿¡ã—ã‚ˆã†ã¨è©¦è¡Œã—ãŸãŒï¼Œ~serverã¸ã®æ¥ç¶šã¯ç¢ºç«‹ã§ããªã‹ã£ãŸã€‚
~UAã®`æ–½ç­–~cache$å†…ã«ã¯ï¼Œä¾ç„¶ã¨ã—ã¦`~NELæ–½ç­–$ãŒã‚ã‚‹ã®ã§ã€ã“ã®æ–½ç­–ã‚’åˆ©ç”¨ã—ã¦ï¼Œ`å¤±æ•—ã—ãŸ$`~networkè¦è«‹$ã«ã¤ã„ã¦ã®å ±å‘Šã‚’
â€” ãã®`ç¨®åˆ¥$nEã‚’ `tcp.timed_out^l ã«ã—ã¦ â€”
ç”Ÿæˆã—ãŸã„æ‰€ã ãŒâ€¦
å½“ã®æ–½ç­–ã®`å—ä¿¡ã—ãŸ~IP~address$nPï¼ˆ `192.0.2.2^s ï¼‰ã¯ï¼Œã“ã®`è¦è«‹$ã‚’é€ä¿¡-å…ƒ~ã®~IP~addressã«åˆè‡´ã—ãªã„ãŸã‚ï¼Œ `192.0.2.3^s ã«ã‚ã‚‹~serverãŒå®Ÿéš›ã« `example.com^s ã®æ‰€æœ‰è€…ãŒæ‰€æœ‰ã—ã¦ã„ã‚‹ã‹æ¤œè¨¼yã§ããªã„ã€‚
ã—ãŸãŒã£ã¦ï¼Œ~UAã¯ã€å ±å‘Šã‚’ `dns.address_changed^l ã«é™æ ¼ã—~MUSTï¼š
â—
The user agent then tries to send a request to 192.0.2.3, but isn't able to establish a connection to the server. The user agent still has the NEL policy in the policy cache, and would ideally use this policy to generate a tcp.timed_out report about the failed network request. However, the because policy's received IP address (192.0.2.2) doesn't match the IP address that this request was sent to, the user agent cannot verify that the server at 192.0.2.3 is actually owned by the owners of example.com. The user agent must therefore downgrade the report to dns.address_changed:
</p>

<pre class="json-code">
{
  "age": 0,
  "type": "network-error",
  "url": "https://example.com/",
  "body": {
    "sampling_fraction": 1.0,
    "server_ip": "192.0.2.3",
    "protocol": "http/1.1",
    "method": "GET",
    "status_code": 0,
    "elapsed_time": 0,
    "type": "dns.address_changed"
  }
}
</pre>

	</li>
	<li>
<p>
~UAã¯ã€åˆ¥ã®`è¦è«‹$ã‚’ `192.0.2.1^s ã¸é€ä¿¡ã—ã‚ˆã†ã¨è©¦è¡Œã—ãŸãŒï¼Œã¾ãŸã‚‚ã‚„~serverã¸ã®æ¥ç¶šã¯ç¢ºç«‹ã§ããªã‹ã£ãŸã€‚
~UAã¯éå»ã®ã‚ã‚‹æ™‚ç‚¹ã§ `192.0.2.1^s ã‹ã‚‰`~NELæ–½ç­–$ã‚’å—ä¿¡ã—ã¦ã„ãŸã¨ã—ã¦ã‚‚ã€æ–½ç­–ã®`å—ä¿¡ã—ãŸ~IP~address$nPã«ã¯ï¼Œãã“ã€ã™ãªã‚ã¡ `https://example.com^s ï¼ˆã‹ã‚‰å°å‡ºã•ã‚Œã‚‹ç”Ÿæˆå…ƒï¼‰ã€‘ã‹ã‚‰<em>æœ€ã‚‚è¿‘éå»</em>ã«å—ä¿¡ã—ãŸãã‚Œ
â€” ã“ã®äº‹ä¾‹ã§ã¯ `192.0.2.2^s â€”
ã—ã‹è¨˜éŒ²ã•ã‚Œãªã„ã€‚
ã—ãŸãŒã£ã¦ï¼Œ~UAã¯ã€å ±å‘Šã‚’ `dns.address_changed^l ã«é™æ ¼ã—~MUSTï¼š
â—
The user agent then tries to send another request to 192.0.2.1, but once again isn't able to establish a connection to the server. Even though the user agent received the NEL policy from 192.0.2.1 at some point in the past, the policy's received IP address only records where it was most recently received from â€” in this case, 192.0.2.2. The user agent must therefore downgrade the report to dns.address_changed:
</p>

<pre class="json-code">
{
  "age": 0,
  "type": "network-error",
  "url": "https://example.com/",
  "body": {
    "sampling_fraction": 1.0,
    "server_ip": "192.0.2.1",
    "protocol": "http/1.1",
    "method": "GET",
    "status_code": 0,
    "elapsed_time": 0,
    "type": "dns.address_changed"
  }
}
</pre>
	</li>
</ol>

</div>


		</section>
	</section>
	<section id="use-cases">
<h2 title="Use cases">8. åˆ©ç”¨~äº‹ä¾‹</h2>

		<section id="reporting-of-navigation-failures">
<h4 title="Reporting of Navigation Failures">8.1. ~naviå¤±æ•—~æ™‚ã®å ±å‘Š-æ³•</h4>

<p>
åˆ©ç”¨è€…ã«ã‚ˆã‚Šèµ·å‹•ã•ã‚Œã‚‹~naviè¦è«‹ï¼ˆä¾‹ï¼š
~linkã®~click ï¼
~location-barã‚’ä»‹ã™ã‚‹ç›´æ¥çš„ãªå…¥åŠ› ï¼
åˆ©ç”¨è€…ã¨ã®å¯¾è©±ã«å› ã‚Š~scriptã‹ã‚‰èµ·å‹•ã•ã‚ŒãŸã‚‚ã® ï¼
ç­‰ã€…ï¼‰ã¯ã€ã„ãã¤ã‚‚ã®æ¥ç¶šæ€§ã®äº‹ç”±ã«å› ã‚Šå¤±æ•—ã—å¾—ã‚‹
â€” ~DNSã«ãŠã‘ã‚‹å¤±æ•—, ~TCP~error, ~TLS~protocolé•å, ç­‰ã€…ã€‚
ã“ã‚Œã‚‰ã®~errorã¯ã€ï¼»
~networkç’°å¢ƒè¨­å®šã®èª¤ã‚Š,
ä¸€éæ€§ã®~routingã®å•é¡Œi,
~serverã®~downtime,
~malware,
åˆ©ç”¨è€…ã«å¯¾ã™ã‚‹ä»–ã®æ”»æ’ƒ,
ç­‰ã€…
ï¼½ã«ã‚ˆã‚Š~~ç”Ÿã˜å¾—ã‚‹ã€‚
â—
A navigation request initiated by the user (e.g. via a click on a link, direct input via the location bar, script-initiated due to user interaction, etc.) may fail due any number of connectivity reasons: DNS failure, TCP error, TLS protocol violation, and so on. These errors may be caused by network misconfiguration, transient routing issues, server downtime, malware or other attacks against the user, etc.
</p>

<p>
ãã®ã‚ˆã†ãªäº‹ä¾‹ã§ã¯ã€è¡Œå…ˆã®~hostã¯ï¼Œå¤±æ•—ã—ãŸ~naviã«æ°—ä»˜ã‹ãªã„ã¾ã¾ã«ãªã‚‹ã“ã¨ãŒå¤šã„
â€” å®šç¾©ã«ã‚ˆã‚Šã€è¦è«‹ãŒ~hostã®åŸºç›¤ã¾ã§åˆ°é”ã—ãŸã‹ã©ã†ã‹ã‚’è¦‹ã‚Œãšï¼Œå•é¡Œã‚’ç©¶æ˜ã§ããªã„ã®ã§ã€‚
ã“ã‚Œã«å–çµ„ã‚€ãŸã‚ã€~hostã¯ï¼Œï¼»
ãã®ã‚ˆã†ãªç©¶æ˜ã§ããªã„å¤±æ•—~å ±å‘Šã‚’ ã©ã“ã¸é€é”ã™ã‚‹ã¹ãã‹ã‚’æŒ‡å®šã™ã‚‹ï¼Œ`~NELæ–½ç­–$
ï¼½ã‚’~UAã«ç™»éŒ²ã§ãã‚‹ã€‚
â—
In such cases the destination host is often left unaware of the failed navigation since, by definition, it cannot see the request reach its infrastructure and it is unable to investigate the problem. To address this, the host can register an NEL policy with the user agent, which specifies where reports of such failures should be delivered such that they can be investigated.
</p>

		</section>
		<section id="reporting-of-first-party-subresource-fetch-failures">
<h3 title="Reporting of First-party Subresource Fetch Failures">8.2. å½“äº‹è€…ä¸»ä½“ã«å±ã™ã‚‹ä¸‹ä½è³‡æºã«å¯¾ã™ã‚‹~fetchå¤±æ•—~æ™‚ã®å ±å‘Š-æ³•</h3>

<p>
å…¸å‹çš„ãª~appã¯ã€æ•°å¤šãã®è³‡æºã‚’è¦æ±‚ã™ã‚‹ã€‚
ãã®~fetchingã¯ã€æ¦‚ã—ã¦ï¼»
HTMLï¼CSSï¼JavaScript
ï¼½ã‚’ä»‹ã—ã¦èµ·å‹•ã•ã‚Œã‚‹ã€‚
ãã®ã‚ˆã†ãªè³‡æºã‚’è¦è«‹ã—ã¦ã„ã‚‹~appã¯ã€å¤§æ¦‚ã¯ï¼Œãã®~fetchã®å¤±æ•—ã‚’è¦³æ¸¬ã§ãã‚‹ãŒï¼ˆä¾‹ãˆã°ã€ `onerror^c ~callbackã‚’ä»‹ã—ã¦ï¼‰ã€å¤±æ•—ãŒãªãœç”Ÿã˜ãŸã‹ã«ã¤ã„ã¦ã®ï¼Œè©³ç´°ãª~network~errorå ±å‘Š
â€” ä¾‹ï¼š ~DNSå¤±æ•—, ~TCP~error, ~TLS~protocolé•å, ç­‰ã€… â€”
ã«ã¯~accessã§ããªã„ã€‚
â—
A typical application requires dozens of resources, the fetching of which is typically initiated via HTML, CSS, or JavaScript. The application requesting such resources can observe failures of most such fetches (e.g. via `onerror` callbacks), but it does not have access to the detailed network error report of why the failure has occurred - e.g. DNS failure, TCP error, TLS protocol violation, etc.
</p>

<p>
ã“ã‚Œã«å–çµ„ã‚€ãŸã‚ã€~appã¯ï¼Œï¼»
~fetchä¸­ã«ã‚ã‚‹ä¸‹ä½è³‡æºãŒå±ã™ã‚‹å½“äº‹è€…ä¸»ä½“~hostç”¨ã®ï¼Œé–¢é€£ã™ã‚‹`~NELæ–½ç­–$
ï¼½ã‚’~UAã«ç™»éŒ²ã§ãã‚‹ã€‚
ãã®ã‚ˆã†ãª`~NELæ–½ç­–$ãŒåœ¨ã‚‹ä¸‹ã§ã¯ã€
ãã‚ŒãŒç™»éŒ²ã•ã‚ŒãŸ`ç”Ÿæˆå…ƒ$ã‹ã‚‰ã®è³‡æºã«å¯¾ã—~network~errorã«é­é‡ã—ãŸå ´åˆï¼Œ~UAã¯è©³ç´°ãª~network~errorå ±å‘Šã‚’å ±å‘Šã™ã‚‹ã“ã¨ã‚’å¯èƒ½åŒ–ã™ã‚‹ã“ã¨ã«ãªã‚Šã€~appé–‹ç™ºè€…ã¯ï¼Œ~errorã«ã¤ã„ã¦ç©¶æ˜ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚
â—
To address this, the application can register relevant NEL policies with the user agent for the first-party hosts from which the subresources are being fetched. Then, if such a policy is present and a network error is encountered for a resource from an origin with a registered NEL policy, the user agent will report the detailed network error report and enable the application developers to investigate the error.
</p>

		</section>
		<section id="reporting-of-third-party-subresource-fetch-failures">
<h3 title="Reporting of Third-party Subresource Fetch Failures">8.3. ç¬¬ä¸‰è€…ä¸»ä½“ã«å±ã™ã‚‹ä¸‹ä½è³‡æºã«å¯¾ã™ã‚‹~fetchå¤±æ•—~æ™‚ã®å ±å‘Š-æ³•</h3>

<p>
è³‡æºãŒç¬¬ä¸‰è€…ä¸»ä½“ã«ã‚ˆã‚ŠåŸ‹è¾¼ã¾ã‚Œã¦ã„ã‚‹äº‹ä¾‹ã§ã¯ã€è³‡æºã‚’ä¾›ã™ã‚‹å´ã¯ã€å¤±æ•—ã‚’ï¼»
æ¸¬å®šã§ããªã„ï¼è¦³æ¸¬ã§ããªã„
ï¼½ã“ã¨ãŒå¤šã„ã€‚
`example.com^s ãŒ è‡ªèº«ã®~siteã«è³‡æº
`widget.com/thing.js^s ã‚’åŸ‹è¾¼ã‚“ã§ã„ã¦ï¼Œ
`example.com^s
ã‚’è¨ªå•ã—ã¦ã„ã‚‹åˆ©ç”¨è€…ãŒï¼Œ~network~errorã«å› ã‚Šãã®ã‚ˆã†ãªè³‡æºã®~fetchã«å¤±æ•—ã—ãŸå ´åˆã€~host
`widget.com^s
ã¯ã€å¤±æ•—ã«æ°—ä»˜ãã“ã¨ã‚‚ï¼Œãã‚Œã‚’æ¤œå‡ºã™ã‚‹ã“ã¨ã‚‚ã§ããªã„ã€‚
â—
In the case where a resource is embedded by a third party, the provider of the resource is often unable to instrument and observe the failure. For example, if `example.com` embeds a `widget.com/thing.js` resource on its site, and the user visiting `example.com` fails to fetch such resource due to a network error, the `widget.com` host is both unaware of the failure and unable to detect it.
</p>

<p>
`widget.com^s ã¯ã€ã“ã‚Œã«å–çµ„ã‚€ãŸã‚ï¼Œè‡ªèº«ã®~hostç”¨ã«`~NELæ–½ç­–$ã‚’ç™»éŒ²ã§ãã‚‹ã€‚
ãã®ã‚ˆã†ãªæ–½ç­–ãŒåœ¨ã‚‹ä¸‹ã§ï¼Œãã‚ŒãŒç™»éŒ²ã•ã‚ŒãŸ`ç”Ÿæˆå…ƒ$ã‹ã‚‰è³‡æºã‚’~fetchã™ã‚‹éš›ã«~network~errorã«é­é‡ã—ãŸå ´åˆ
â€” å½“äº‹è€…ä¸»ä½“, ç¬¬ä¸‰è€…ä¸»ä½“ã©ã¡ã‚‰ã®ç”Ÿæˆå…ƒã‹ã‚‰è¦è«‹ã•ã‚ŒãŸã‹ã‚’å•ã‚ãš â€”
~UAã¯~network~errorã‚’å ±å‘Šã™ã‚‹ã“ã¨ã«ãªã‚Šï¼Œè³‡æºã‚’ä¾›ã™ã‚‹å´ã¯~errorã‚’ç©¶æ˜-å¯èƒ½ã«ãªã‚‹ã€‚
â—
To address this, `widget.com` can register an NEL policy for its host. Then, if such policy is present and a network error is encountered while fetching a resource â€” regardless of whether it is being requested from a first-party or third-party origin â€” from the origin with a registered NEL policy, the user agent will report the network error and enable the provider to investigate the error.
</p>

		</section>
	</section>
	<section id="privacy-considerations">
<h2 title="Privacy Considerations">9. ~privacyä¸Šã®è€ƒæ…®ç‚¹</h2>

<p>
~NELã¯ã€ï¼»
åˆ©ç”¨è€…ã®~networkç’°å¢ƒè¨­å®šã«ã¤ã„ã¦ã®æ–°ãŸãªæƒ…å ±
ï¼½ã‚‚å…¬é–‹ã—å¾—ã‚‹ã‚ˆã†ãªï¼Œ~network~errorå ±å‘Šã‚’ä¾›ã™ã‚‹ã€‚
ä¾‹ãˆã°ï¼Œæ”»æ’ƒè€…ã¯ã€ï¼»
åˆ©ç”¨è€…ã®~networkç’°å¢ƒè¨­å®šã‚’æ¢æŸ»ã—ãŸã‚Šï¼Œåˆ©ç”¨è€…ã®å†…éƒ¨~networkä¸Šã®~serverã‚’~scanã™ã‚‹
ï¼½ãŸã‚ã«~NELå ±å‘Š-æ³•ã‚’æ¿«ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã€‚
ã¾ãŸï¼Œï¼»
HSTS, HPKP, ~pinned CSP æ–½ç­–
ï¼½ã¨åŒæ§˜ã«ã€æ ¼ç´ã•ã‚Œã‚‹`~NELæ–½ç­–$ã¯ï¼Œï¼»
ï¼ˆåˆ©ç”¨è€…ã”ã¨ã«ç•°ãªã‚‹ï¼‰~customãªå ±å‘Š~å…ˆ~URLã‚’ä¼´ã†ï¼Œåˆ¥å€‹ã®æ–½ç­–ã‚’è¨­å®šã™ã‚‹
ï¼½ã“ã¨ã«ã‚ˆã‚Šï¼»
~HTTP~cookieã¨ã®çµ„åˆã›ã§ï¼ˆã¾ãŸã¯ ãã‚Œã«ä»£ã‚ã‚‹ï¼‰ï¼Œè­˜åˆ¥å­ã¨ã—ã¦å‹•ä½œã™ã‚‹ã‚ˆã†ãª â€œ`supercookie^enâ€
ï¼½ã«ã‚‚åˆ©ç”¨ã§ãã‚‹ã€‚
â—
NEL provides network error reports that could expose new information about the user's network configuration. For example, an attacker could abuse NEL reporting to probe the user's network configuration, or to scan for servers on the user's internal network. Also, similar to HSTS, HPKP, and pinned CSP policies, the stored NEL policy could be used as a "supercookie" by setting a distinct policy with a custom (per-user) reporting URI to act as an identifier in combination with (or instead of) HTTP cookies.
</p>

<p>
ä¸Šè¿°ã®~riskã®ä¸€éƒ¨ã‚’è»½æ¸›ã™ã‚‹ãŸã‚ã€~NELç™»éŒ²ã¯ï¼Œ`ä¿¡ç”¨ã«ä¾¡ã—å¾—ã‚‹ç”Ÿæˆå…ƒ$ã«åˆ¶ç´„ã•ã‚Œã€~network~errorå ±å‘Šã®é€é”ã‚‚ï¼ŒåŒæ§˜ã«`ä¿¡ç”¨ã«ä¾¡ã—å¾—ã‚‹ç”Ÿæˆå…ƒ$ã«åˆ¶ç´„ã•ã‚Œã‚‹ã€‚
ã“ã‚Œã¯ã€~NELã‚’æŒç¶šçš„ãªè¿½è·¡å™¨ã¨ã—ã¦è‡ªæ˜ã«æ¿«ç”¨ã™ã‚‹ã‚ˆã†ãªï¼Œ
ä¸€éæ€§ã®~HTTP MITMâ€  ã‚’è¨±å®¹ã—ãªã„ã‚ˆã†ã«ã™ã‚‹ã€‚
ã€MIIM â€” `Man In The Middle^en â€” ä¸­é–“è€…ã€‘
â—
To mitigate some of the above risks, NEL registration is restricted to potentially trustworthy origins, and delivery of network error reports is similarly restricted to potentially trustworthy origins. This disallows a transient HTTP MITM from trivially abusing NEL as a persistent tracker.
</p>

<p>
~NELã¯ã€æ—¢å­˜ã®~serverå´~ç›£è¦–ã‚’å¢—è£œã™ã‚‹ã“ã¨ãŒæ„å›³ã•ã‚Œã¦ã„ã‚‹ã€‚
~NELå ±å‘ŠãŒé€ä¿¡ã•ã‚Œã‚‹å…ˆã¯ã€è¦è«‹ã—ã¦ã„ã‚‹~serviceã®æ‰€æœ‰è€…ã«é™ã‚‰ã‚Œã‚‹ã¹ãã§ã‚ã‚‹ã€‚
`~DNSè§£æ±º$ã®é–“ã«ç”Ÿã˜ãŸ~errorã«å¯¾ã—ã¦ã¯ã€~NELå ±å‘Šã¯ï¼»
`~NELæ–½ç­–$ãŒï¼»
`æ–½ç­–~ç”Ÿæˆå…ƒ$nPã‚’åŒ…å«ã™ã‚‹`~domainåå‰ç©ºé–“~æœ¨$
ï¼½ã®æ‰€æœ‰è€…ã‹ã‚‰å—ä¿¡ã•ã‚ŒãŸã¨ã
ï¼½ã«é™ã‚Šç”Ÿæˆã•ã‚Œã‚‹ã€‚
ï¼»
`~secureæ¥ç¶šã®ç¢ºç«‹$ ï¼ `è¦è«‹ã¨å¿œç­”ã®ä¼é€$
ï¼½ã®é–“ã«ç”Ÿã˜ãŸ~errorã«å¯¾ã—ã¦ã¯ã€~NELå ±å‘Šã¯ï¼»
`è¦è«‹$ã‚’é€ä¿¡ã—ãŸå…ˆã®`~server$ã®æ‰€æœ‰è€…ã‹ã‚‰`~NELæ–½ç­–$ãŒå—ä¿¡ã•ã‚ŒãŸã¨ã
ï¼½ã«é™ã‚Šç”Ÿæˆã•ã‚Œã‚‹ã€‚
â—
NEL is intended to augment existing server-side monitoring. NEL reports should only be sent to the owner of the service being requested. For errors that occur during DNS resolution, NEL reports are only generated when the NEL policy was received from the owner of the domain namespace tree that contains the policy origin. For errors that occur during secure connection establishment or transmission of request and response, NEL reports are only generated when the NEL policy was received from the owner of the server that the request was sent to.
</p>

<p>
ä»¥ä¸‹ã§ã¯ã€`~NELæ–½ç­–$ã®ï¼»
`å—ä¿¡ã—ãŸ~IP~address$nP ï¼ `ä¸‹ä½domain~flag$nP
ï¼½ã®æ‰±ã„ã‚’èª¬æ˜ã™ã‚‹ã€‚
ï¼»
æ–½ç­–ã®`å—ä¿¡ã—ãŸ~IP~address$nPãŒ`~server$ã®~IP~addressã«åˆè‡´ã™ã‚‹ã‹æ¤œæŸ»ã™ã‚‹
ï¼½ã“ã¨ã«ã‚ˆã‚Šã€~NELã¯ï¼Œæ–½ç­–ã®ä¿¡ç”¨-å¢ƒç•Œã‚’ï¼»
æ–½ç­–ã®`æ–½ç­–~ç”Ÿæˆå…ƒ$nPã®ã¿ãªã‚‰ãšï¼Œ~UAãŒé€šä¿¡ã—ã¦ã„ã‚‹ç‰¹å®šã®~serverã‚‚å«ã‚€
ï¼½ã‚ˆã†ã«æ‹¡å¼µã™ã‚‹ã€‚
ã“ã®æ¤œæŸ»ã¯ã€ï¼ˆå…·ä½“ä¾‹ã¨ã—ã¦ï¼‰ `DNS rebinding^enã€ ~domainåã‚’åˆ¥ã®~IP~addressã« â€œæŸç¸›ã—ç›´ã™â€ ã€‘æ”»æ’ƒã‚’é˜²ããŸã‚ã«ã‚ã‚‹ï¼š
ãã“ã§ã¯ï¼Œæ”»æ’ƒè€…ã¯ã€è‡ªèº«ãŒæ‰€æœ‰ã™ã‚‹ ã‚ã‚‹~serverã‹ã‚‰é•·ç”Ÿãã™ã‚‹`~NELæ–½ç­–$ã‚’é€é”ã—ãŸä¸Šã§ï¼Œãã®åå‰~serverï¼ˆ `name server^en ï¼‰ã‚’ï¼»
`æ–½ç­–~ç”Ÿæˆå…ƒ$nPã‚’ï¼Œè‡ªèº«ãŒåˆ¶å¾¡ã—ãªã„åˆ¥ã®~serverã«è§£æ±ºã™ã‚‹
ï¼½ã‚ˆã†ã«å¤‰æ›´ã™ã‚‹ã€‚
`å—ä¿¡ã—ãŸ~IP~address$nPã‚’æ¤œè¨¼yã—ãªã‹ã£ãŸå ´åˆã€~UAã¯ï¼Œåˆ¥ã®~serverã«ã¤ã„ã¦ã®å ±å‘Šã‚’æ”»æ’ƒè€…ã¸é€ä¿¡ã•ã›ã‚‰ã‚Œã‚‹ã“ã¨ã«ãªã‚‹ã€‚
â—
This rationale explains the treatment of the received IP address and subdomains flag of a NEL policy. By checking that the policy's received IP address matches the IP address of the server, NEL extends the trust boundary of the policy to include not just the policy's origin, but also the specific server that the user agent is communicating with. This helps prevent (for instance) DNS rebinding attacks, where an attacker delivers a long-lived NEL policy from a server that they own, and then changes their name servers to resolve the policy origin to a server they don't control. Without the received IP address verification, this would cause user agents to send reports about the second server to the attacker.
</p>

<p>
åŒæ§˜ã«ï¼Œï¼»
`ä¸‹ä½domain~flag$nP ~EQ `å«ã‚€^i 
ï¼½ã«ã•ã‚Œã¦ã„ã‚‹`~NELæ–½ç­–$ã¯ã€ï¼»
`è¦è«‹$ã®`~DNSè§£æ±º$ã®é–“ã«ï¼Œ`æ–½ç­–~ç”Ÿæˆå…ƒ$nPã®ä¸‹ä½domainã«ã¤ã„ã¦ã®å ±å‘Šã‚’ç”Ÿæˆã™ã‚‹ã¨ã
ï¼½ã«é™ã‚Šåˆ©ç”¨ã§ãã‚‹ã‚ˆã†åˆ¶é™ã•ã‚Œã‚‹ã€‚
ã“ã®`ç›¸$ã®é–“ã¯ã€~errorã®æ‰€æœ‰è€…ãŒèª°ãªã®ã‹æ¤œè¨¼yã™ã‚‹ãŸã‚ã®`è¦è«‹$ã¯ç„¡ã„
â€” ãã‚Œã‚’ç¢ºç«‹ã™ã‚‹ã«ã¯ï¼»
å½“ã®æ–½ç­–ãŒ `è¦è«‹$ã®`ç”Ÿæˆå…ƒ$ã®ä¸Šä½domainã‹ã‚‰å—ä¿¡ã•ã‚ŒãŸäº‹å®Ÿ
ï¼½ã ã‘ã§ååˆ†ã«ãªã‚‹ã€‚
ã“ã‚Œã¯ã€`~domainåå‰ç©ºé–“~æœ¨$ã®ç‰¹å®š0ã®éƒ¨ä½ã®æ‰€æœ‰è€…ã«ï¼»
~NELã‚’åˆ©ç”¨ã—ã¦ï¼Œ<a href="#dns-misconfiguration">~DNSç’°å¢ƒè¨­å®šã®èª¤ã‚Š</a>ã‚’æ¤œå‡ºã™ã‚‹
ï¼½ã“ã¨ã‚’è¨±å®¹ã™ã‚‹ä¸€æ–¹ã§ã€æ‰€æœ‰è€…ãŒï¼»
è‡ªèº«ãŒåˆ¶å¾¡ã—ãªã„~serverã«ã¤ã„ã¦ã®æƒ…å ±ã‚’ï¼Œæ‚ªæ„çš„ãª~DNS~entryã‚’åˆ©ç”¨ã—ã¦åé›†ã™ã‚‹
ï¼½ã®ã¯é˜²ãã€‚
â—
Similarly, subdomain NEL policies are limited, and can only be used to generate reports about subdomains of the policy origin during the DNS resolution phase of a request. During this phase, there is no server to verify ownership of, and the fact that the policy was received from a superdomain of the request's origin is enough to establish ownership of the error. This allows the owners of a particular portion of the domain namespace tree to use NEL to detect 7.3 DNS misconfiguration errors, while preventing them from using malicious DNS entries to collect information about servers they don't control.
</p>

<p>
æƒ…å ±~æ¼æ´©ã‚’é˜²ããŸã‚ã€`è¦è«‹$ã«ã¤ã„ã¦ã®~NELå ±å‘Šã¯ï¼Œï¼»
`è¦è«‹$ã‚’å‡¦ç†ã™ã‚‹ã¨ãã«ï¼Œ`~server$ã‹ã‚‰ã¯å¯è¦–ã§ãªã„æƒ…å ±
ï¼½ã¯åŒ…å«ã—ãªã„ã€‚
`~DNSè§£æ±º$ã®é–“ã®~errorã«å¯¾ã—ã¦ã¯ã€~NELå ±å‘Šã¯ï¼Œ~DNSè‡ªèº«ã‹ã‚‰å¯ç”¨ãªæƒ…å ±ã®ã¿ã‚’åŒ…å«ã™ã‚‹ã€‚
ã“ã‚Œã¯ã€`~server$ãŒï¼Œ~NELã‚’æ¿«ç”¨ã—ã¦ï¼»
åˆ©ç”¨è€…ã«ã¤ã„ã¦ã™ã§ã«~accessã‚’æœ‰ã—ã¦ã„ã‚‹ã‚‚ã®
ï¼½ã‚’è¶…ãˆã‚‹æƒ…å ±ã‚’åé›†ã™ã‚‹ã®ã‚’é˜²ãã€‚
â—
To prevent information leakage, NEL reports about a request do not contain any information that is not visible to the server when processing the request. For errors during DNS resolution, a NEL report only contains information available from DNS itself. This prevents servers from abusing NEL to collect more information about their users than they already have access to.
</p>

<p class="note">æ³¨è¨˜ï¼š
ä¾‹ã¨ã—ã¦ã€~NELå ±å‘Šã¯ï¼Œç‰¹ã«ï¼»
`è¦è«‹$ã®`~domainå$ã‚’~IP~addressã«è§£æ±ºã™ã‚‹ã¨ãã«ï¼Œã©ã®`~DNSè§£æ±ºå™¨$ãŒåˆ©ç”¨ã•ã‚ŒãŸã‹
ï¼½ã«ã¤ã„ã¦ã®æƒ…å ±ã¯åŒ…å«ã—ãªã„ã€‚
â—
Note
As an example, NEL reports specifically do not contain any information about which DNS resolver was used to resolve a request's domain name into an IP address.
</p>

<p>
ä¸Šã®åˆ¶ç´„ã«åŠ ãˆã¦ã€~UAã¯ï¼Œæ¬¡ã«å¾“ã‚~MUSTï¼š
â—
In addition to above restrictions, the user agents MUST:
</p>

<ul>
	<li>
åˆ©ç”¨è€…ãŒè‡ªèº«ã®é–²è¦§~dataï¼ˆ ~cookie, ~site~data, å±¥æ­´, ç­‰ã€…ï¼‰ã‚’æ¶ˆå»ã—ãŸã¨ãã¯ã€æ ¼ç´-æ¸ˆã¿`~NELæ–½ç­–$ã‚‚æ¶ˆå»ã™ã‚‹ã€‚
â—
Clear the stored NEL policies when the user clears their browsing data (cookies, site data, history, etc).
</li>
	<li>
~network~errorå ±å‘Šã‚’é€é”ã™ã‚‹ã¨ãã¯ã€
`Set-Cookie$h å¿œç­”~headerã‚’å‡¦ç†ã™ã‚‹ã®ã‚’æ‹’å¦ã™ã‚‹ã€‚
â—
Refuse to process Set-Cookie response headers when delivering network error reports.
</li>
</ul>

<p>
é–‹ç™ºè€…ã¯ã€~NELã‚’é…å‚™ã™ã‚‹ã¨ãã«ã¯ï¼ŒæŒ‡å®šã—ãŸåé›†å™¨ã«~NELå ±å‘Šã‚’é€é”ã™ã‚‹ã“ã¨ã«ã‚ˆã‚‹~privacyã¸ã®å½±éŸ¿iã‚’è€ƒæ…®ã™ã‚‹ã¹ãã§ã‚ã‚‹ã€‚
ä¾‹ãˆã°ï¼Œå ±å‘Šã¯ã€ç‰¹åˆ¥ãªäºˆé˜²ç­–ãŒå¿…è¦ãªï¼Œæ•æ„Ÿãª~dataã‚’ä¼´ã†~URLï¼ˆä¾‹ï¼š â€œèƒ½åŠ›~URLï¼ˆ `Capability URLs^en ï¼‰â€ ï¼‰ã‚’åŒ…å«ã™ã‚‹ã“ã¨ã‚‚ã‚ã‚Šï¼ˆ `CAPABILITY-URLS$r ã‚’è¦‹ã‚ˆï¼‰ã€é–‹ç™ºè€…ã«ã¯ï¼Œï¼»
è‡ªå‰ã®~NELåé›†å™¨ã‚’ï¼Œãã®ã‚ˆã†ãª~URLãŒç¬¬ä¸‰è€…ä¸»ä½“ã¸å ±å‘Šã•ã‚Œã‚‹ã®ã‚’é˜²ãã‚ˆã†ã«é‹ç”¨ã™ã‚‹
ï¼½ã“ã¨ãŒè¦æ±‚ã•ã‚Œå¾—ã‚‹ã€‚
â—
When deploying NEL the developer SHOULD consider privacy implications of NEL reports delivered to the specified collectors. For example, reports may contain URLs with sensitive data (e.g. "Capability URLs") that may need special precautions (see [CAPABILITY-URLS]), and may require the developer to operate their own NEL collectors to prevent reporting of such URLs to third parties.
</p>

	</section>
	<section id="iana-considerations">
<h2 title="IANA Considerations">10. IANA è€ƒæ…®ç‚¹</h2>

<p>
æ’ä¹…çš„~message~headerç™»è¨˜ç°¿ã¯ã€ä»¥ä¸‹ã®ç™»éŒ²ã«ã‚ˆã‚Šæ›´æ–°ã•ã‚Œã‚‹ã¹ãã§ã‚ã‚‹
`RFC3864$r ï¼š
â—
The permanent message header field registry should be updated with the following registrations ([RFC3864]):
â—
10.1. NEL
</p>

<div>
<dl id="nel">
	<dt>~headerå</dt>
	<dd>`NEL$h</dd>
	<dt>é©ç”¨-å¯èƒ½ãª~protocol</dt>
	<dd>http</dd>
	<dt>ä½ç½®ä»˜ã‘</dt>
	<dd>æ¨™æº–</dd>
	<dt>ä½œæˆå¤‰æ›´ç®¡ç†è€…</dt>
	<dd>W3C</dd>
	<dt>ä»•æ§˜~æ–‡æ›¸</dt>
	<dd>ã“ã®ä»•æ§˜ï¼ˆ `NEL$h å¿œç­”~headerã‚’è¦‹ã‚ˆï¼‰</dd>
</dl>

<pre lang="en">
Header field name
    NEL
Applicable protocol
    http
Status
    standard
Author/Change controller
    W3C
Specification document
    This specification (see NEL response header)
</pre>
</div>

	</section>
	<section id="acknowledgments">
<h2 title="Acknowledgments">è¬è¾</h2>

<p>
ã“ã®æ–‡æ›¸ã¯
`CSP$r, `RFC6797$r
ä»•æ§˜ã®~textã‚’ï¼Œãã®~licenseã«å¾“ã£ã¦å†åˆ©ç”¨ã—ã¦ã„ã‚‹ã€‚
åŠ ãˆã¦ã€ã“ã®ä»•äº‹ã«~~æœ‰ç›Šãª~commentã‚’å¯„ã›ã‚‰ã‚Œï¼Œå¯„ä¸ã•ã‚ŒãŸï¼Œæ¬¡ã®å„æ°ã«æ„Ÿè¬ã™ã‚‹ï¼š
`Julia Tuttle, Chris Bentzel, Todd Reifsteck, Aaron Heady, Mark Nottingham^en

â—
This document reuses text from the [CSP] and [RFC6797] specification, as permitted by the licenses of those specifications. Additionally, sincere thanks to Julia Tuttle, Chris Bentzel, Todd Reifsteck, Aaron Heady, and Mark Nottingham for their helpful comments and contributions to this work.
</p>
	</section>

</main></div><!-- id="MAIN"ï¼MAIN0 -->
