<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<title>Ambient Light Sensor（日本語訳）</title>

<link rel="stylesheet" href="common.css" type="text/css">
<link rel="stylesheet" href="common-w3c.css" type="text/css">

<script src="common0.js"></script>
<script src="common1.js" async></script>

<script>

Util.ready = function(){
	const source_data = {
		toc_main: 'MAIN0',
		generate: expand
	};
	Util.switchWordsInit(source_data);
}

function expand(){
	const class_map = this.class_map;
	const tag_map = this.tag_map;
	const link_map = this.link_map;

	return this.html.replace(
		/%[\w\-~一-鿆あ-ん]+|`(.+?)([$@\^])(\w*)/g,
		create_html
	);

	function create_html(match, key, indicator, klass){

if(!key) {//%
	return `<var>${match.slice(1)}</var>`;
}

let href = '';
let href1 = '';
{
	const n = key.indexOf('＠');
	if(n > 0) {
		href1 = key.slice(n + 1);
		key = key.slice(0, n);
	}
}
let text = key;

switch(klass){
case 'r':
	text = `[${key}]`;
	href = `#biblio-${key.toLowerCase()}`;
	break;
case 'l':
case 'vsT':
	text = `"<code class="literal">${text}</code>"`;
	break;
case 'mc':
	text = 'constructor';
	klass = 'm';
	key = `new ${key}`;
	break;
case 'm':
	const n = text.indexOf('(');
	if(n > 0){
		key = text.slice(0, n);
		text = key + text.slice(n).replace(/\w+/g, '<var>$&</var>');
	}
	break;
case 'en':
	return `<span lang="en">${key}</span>`;
	break;
}

let tag = tag_map[klass];
if(tag) {
	let classname = class_map[klass];
	classname = classname ? ` class="${classname}"` : '';
	text = `<${tag}${classname}>${text}</${tag}>`;
}

if(indicator !== '^'){
	href = href1 || link_map[ klass ? `${klass}.${key}` : key ] || href;
	if(!href){
		console.log(match); // check error
		return match;
	}

	switch(indicator){
	case '$':
		text = `<a href="${href}">${text}</a>`;
		break;
	case '@':
		text = `<dfn id="${href.slice(1)}">${text}</dfn>`;
		break;
	}
}

return text;


	}
}

</script>


<script type="text/plain" id="_source_data">


●●options

spec_title:Ambient Light Sensor
spec_date:2024-01-24
trans_update:2024-01-27
source_checked:231020
spec_status:ED
original_url:https://w3c.github.io/ambient-light/
	abbr_url:AMBIENT-LIGHT
ref_id_prefix:biblio-
ref_id_lowercase:true
page_state_key:SENSORS
site_nav:sensors
ref_id_lowercase:true
copyright:2024,permissive
trans_1st_pub:2019-08-26
conformance:w3c

●●class_map
E:error
et:event-type
d:descriptor
jt:js-type

●●tag_map
I:code
E:code
m:code
c:code
mb:code
cite:cite
et:code
d:code
jt:code
i:i
em:em

●●original_id_map

●●mdn_urls
ambientlightsensor:API/AmbientLightSensor

●●link_map

	●IDL
SecureContext:~WEBIDLjs#SecureContext
Exposed:~WEBIDLjs#Exposed
double:~WEBIDL#idl-double

E.SecurityError:~WEBIDL#securityerror

	I.DOMException:~WEBIDL#idl-DOMException
I.AmbientLightSensor:#ambientlightsensor
I.Sensor:~SENSORS#sensor
I.SensorOptions:~SENSORS#dictdef-sensoroptions

m.new AmbientLightSensor:#dom-ambientlightsensor-ambientlightsensor
	%sensorOptions:#dom-ambientlightsensor-ambientlightsensor-sensoroptions-sensoroptions

m.illuminance:#dom-ambientlightsensor-illuminance

m.matchMedia:~CSSOMVIEW#dom-window-matchmedia

	廃）l.ambient-light:~SENSORS#dom-mocksensortype-ambient-light
l.ambient-light-sensor:#permissiondef-ambient-light-sensor

vsT.ambient-light:~MAGNETOMETER#ambient-light-virtual-sensor-type

d.prefers-contrast:~MQ5#descdef-media-prefers-contrast
d.prefers-color-scheme:~MQ5#descdef-media-prefers-color-scheme

jt.Object:https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-object-objects

	●用語

i.~ambient光~sensor:#ambient-light-sensor
現在の光~level:#current-light-level
現在の照度:#illuminance
~ambient光~sensor~objを初期化する:#construct-an-ambient-light-sensor-object
	~ambient光~sensor~objを構築する:#construct-an-ambient-light-sensor-object
~ambient光の読取り量子化~algo:#ambient-light-reading-quantization-algorithm
#reduce-sensor-accuracy
~ambient光の~threshold検査~algo:#ambient-light-threshold-check-algorithm
照度~読取り量子:#illuminance-rounding-multiple
照度~threshold値:#illuminance-threshold-value
照度の読取りを構文解析する:#illuminance-reading-parsing-algorithm


	●用語（sensor
~sensor~objを初期化する:~SENSORS#initialize-a-sensor-object
~sensor型:~SENSORS#sensor-type
拡張~sensor~interface:~SENSORS#extension-sensor-interface
~sensor施策により制御される特能を検査する:~SENSORS#check-sensor-policy-controlled-features
~sensor許可~名~群:~SENSORS#sensor-permission-names
~sensor読取り:~SENSORS#sensor-reading
既定の~sensor:~SENSORS#default-sensor
最新な読取り~mapから値を取得する:~SENSORS#get-value-from-latest-reading
標本化~frequency:~SENSORS#sampling-frequency
~sensor許可~revocation~algo:~SENSORS#generic-sensor-permission-revocation-algorithm
最新な読取りを更新する:~SENSORS#update-latest-reading
読取り量子化~algo:~SENSORS#reading-quantization-algorithm
~threshold検査~algo:~SENSORS#threshold-check-algorithm
正確度を抑制する:~SENSORS#reduce-accuracy
~virtual~sensor~metadata:~SENSORS#virtual-sensor-metadata
型ごとの~virtual~sensor~metadata:~SENSORS#per-type-virtual-sensor-metadata
属する~virtual~sensor型:~SENSORS#_virtual-sensor-type
	~virtual~sensor型:~SENSORS#virtual-sensor-type
vsM.読取り構文解析~algo:~SENSORS#virtual-sensor-metadata-reading-parsing-algorithm
一数の読取りを構文解析する:~SENSORS#parse-single-value-number-reading


	●用語（外部
真偽値:~INFRA#boolean
~map:~INFRA#ordered-map
map.~entry:~INFRA#map-entry
map.~key:~INFRA#map-key
map.値:~INFRA#map-value

構築子~手続き:~WEBIDL#constructor-steps

施策により制御される特能:~PERMISSIONS-POLICY#policy-controlled-feature
既定の許容list:~PERMISSIONS-POLICY#policy-controlled-feature-default-allowlist
許可~revocation~algo:~PERMISSIONS#dfn-permission-revocation-algorithm
強力な特能:~PERMISSIONS#dfn-powerful-feature
名前:~PERMISSIONS#dfn-name

選好される色~scheme:~CSSCOLORADJUST#preferred-color-scheme
媒体~特能:~MQ5#media-feature

	絶対~値:~TC39#eqn-abs

●●words_table1

●●words_table

	●物理
ambient:::環境
光:light::~
照度:illuminance::~
lux::::ルクス
露光:exposure:~
ISOspeed:ISO::ISO 感度

	周囲の:surrounding
	近くにある:close by
	最も近い:closest
	近くの:near the
	周りの:around
	近くの:nearby

	●sensor／測定
device:
sensor::::センサー
frequency:
最新な:latest:~
virtual:
検出器:detector::~
標本化-:sample::~::サンプル
標本化:sampling::~::サンプリング
量子化:quantization::~
量子化-:quantize::~
量子:quantum::~
	量子:multiple
生な:rawな:~
読出し:readout::読み出し
threshold:

	●処理
丸めら:roundさ:~
	丸めら:rounded up
整数倍:multiple:~
差:difference:~
	差がある:differ

	%~ambient光~sensor:ambient_light_sensor
	%読取り:reading
	%新たな読取り:newReading
	%最新な読取り:latestReading
	%新たな照度:newIlluminance
	%最新な照度:latestIlluminance
	%丸められた新たな読取り:roundedNewReading
	%丸められた最新な読取り:roundedLatestReading
	%量子化された読取り:quantizedReading
	%~parameter群:parameters

	●事例
LED:
flash::::フラッシュ
camera::::カメラ
黒い:blackな:~
白い:whiteな:~
作業場:workplace:~
照明:lighting:~
拡大-:scale:~
	画素ごと:pixel by pixel
aperture-shutter-speed-ISO:aperture, shutter speed, ISO:絞り, シャッター速度, ISO 感度
入射光較正定数:incident-light calibration constant:入射光 較正定数
反射面:reflective surface:~

公共区域:public area:~
事務作業:office work:~
授業:classes:~
居宅:home:~
smart::::スマート
劇場:theater:~
日用品店:grocery:~
実験室:laboratory:~
製作所:mechanical workshop:~
絵描き:drawing:~
食料品店:supermarket:~
製図作業:detailed drawing work:~
contrast::::コントラスト
簡単:easy:~
	短い:short
	たまに:occasionally
	居るかどうか:presence

	●保安
策:strategy:~
脅威:threat:~
補う:complementする:~
挙動上の:behavioralな:~
分析:analysis:~
強奪:hijacking:~
未訪問:unvisited:~
	訪問-済み:visited
読出され:read outされ:読み出され
broadcast::::ブロードキャスト
増補-:enhance:~
相関-:correlate::~
許容list:allowlist::許容 list:許容リスト
revocation::取り消し
補助的:auxiliary:~
効能:efficacy:~
数学的:mathematical:~
証明-:prove:~
実現不能:infeasible:~

	~~阻止する:thwart
	周りで揺らいで:hovering around

	●仕様（ status
追求-:pursue:~
横断的:horizontal:~
	始まっ:took place
	当~WG:the group
	これまでの~~主要な:the amount of 〜 since

	●仕様
原型:prototype:~
一式:suite:~
査定:assessment:~
木目細かな:fine-grainedな:~
	木目細かな:fine grained
付随-:accompany:~
束ねら:tieさ:~
掘下げる:delveする:掘り下げる
balanceする::::バランスをとる

	~profile法:profiling
	~ambient光~sensor:Ambient Light Sensor
	汎用~sensor~API:Generic Sensor API
	足る:sufficient
	し得る:potential
	より高:higher-
	支持を受けて:in favor of
	選ぶ:choose
	集めら:gather
	事実:fact

	●未分類
print:
発され:emitされ:~
変動:fluctuation:~
構成:construction:~
切替わる:switchする:~
main:

	~style:styling
	~web~page:webpage
	戻る:back
	lx
	EV
	^i:LightLevelSensor
	今から:ready
	半分:half
	差がある:differ
	よりも高い:higher
	最も近い:closest
	一数:single-value number
	少数の:a small set
	低-:low
	高-:high
	より高い:higher
	になり次第:whenever
	またがる:cross-


●●ref_normative

[ECMASCRIPT]
    ＜ECMAScript Language Specification＞. URL: https://tc39.es/ecma262/multipage/
[GENERIC-SENSOR]
    Rick Waldron. ＜Generic Sensor API＞. URL: https://w3c.github.io/sensors/
[INFRA]
    Anne van Kesteren; Domenic Denicola. ＜Infra Standard＞. Living Standard. URL: https://infra.spec.whatwg.org/
[PERMISSIONS]
    Marcos Caceres; Mike Taylor. ＜Permissions＞. URL: https://w3c.github.io/permissions/
[PERMISSIONS-POLICY-1]
    Ian Clelland. ＜Permissions Policy＞. URL: https://w3c.github.io/webappsec-permissions-policy/
[RFC2119]
    S. Bradner. ＜Key words for use in RFCs to Indicate Requirement Levels＞. March 1997. Best Current Practice. URL: https://datatracker.ietf.org/doc/html/rfc2119
[WEBIDL]
    Edgar Chen; Timothy Gu. ＜Web IDL Standard＞. Living Standard. URL: https://webidl.spec.whatwg.org/

●●ref_informative

[ALSPRIVACYANALYSIS]
    Lukasz Olejnik. ＜Privacy analysis of Ambient Light Sensors＞. 31 August 2016. URL: https://blog.lukaszolejnik.com/privacy-of-ambient-light-sensors/
[CSSOM-VIEW-1]
    Simon Pieters. ＜CSSOM View Module＞. URL: https://drafts.csswg.org/cssom-view/
[IMAGINGPRIVACY]
    Yang Liu; et al. ＜Imaging privacy threats from an ambient light sensor＞. 10 January 2024. URL: https://www.science.org/doi/10.1126/sciadv.adj3608
[MEDIAQUERIES-5]
    Dean Jackson; et al. ＜Media Queries Level 5＞. URL: https://drafts.csswg.org/mediaqueries-5/
[PINSKIMMINGVIASENSOR]
    Raphael Spreitzer. ＜PIN Skimming: Exploiting the Ambient-Light Sensor in Mobile Devices＞. 15 May 2014. URL: https://arxiv.org/abs/1405.3760
[SI]
    ＜SI Brochure: The International System of Units (SI), 8th edition＞. 2014. URL: http://www.bipm.org/en/publications/si-brochure/
[STEALINGSENSITIVEDATA]
    Lukasz Olejnik. ＜Stealing sensitive browser data with the W3C Ambient Light Sensor API＞. 19 April 2017. URL: https://blog.lukaszolejnik.com/stealing-sensitive-browser-data-with-the-w3c-ambient-light-sensor-api/
[VIDEORECOGNITIONAMBIENTLIGHT]
    Raphael Spreitzer. ＜Video recognition using ambient light sensors＞. 21 April 2016. URL: https://doi.org/10.1109/PERCOM.2016.7456511


●●trans_metadata
<p>
~THIS_PAGEは、~W3Cにより
編集者草案として公開された
<a href="~SPEC_URL">Ambient Light Sensor</a>
を日本語に翻訳したものです。
~PUB

●●spec_metadata

最新公表バージョン
	https://www.w3.org/TR/ambient-light/
公表履歴
	https://www.w3.org/standards/history/ambient-light/
commit 履歴
	https://github.com/w3c/ambient-light/commits/main/index.bs
フィードバック
	<a href="mailto:public-device-apis@w3.org?subject=%5Bambient-light%5D%20YOUR%20TOPIC%20HERE">public-device-apis@w3.org</a> with subject line “<kbd>[ambient-light] <i>… message topic …</i></kbd>” (<a href="https://lists.w3.org/Archives/Public/public-device-apis/" rel="discussion">archives</a>)
	<a href="https://github.com/w3c/ambient-light/issues/">GitHub</a>
テスト一式
	https://github.com/web-platform-tests/wpt/tree/master/ambient-light
編集
	<a href="https://intel.com/">Anssi Kostiainen</a> (Intel Corporation)
	<a href="https://intel.com/">Rijubrata Bhaumik</a> (Intel Corporation)
前任編集者
	<a href="https://tobie.me">Tobie Langel</a> (Codespeaks, formerly on behalf of Intel Corporation) <a href="mailto:tobie@codespeaks.com">tobie@codespeaks.com</a>
	<a href="https://mozilla.com/">Doug Turner</a> (Mozilla Corporation)
課題追跡
	<a href="https://github.com/w3c/ambient-light/milestones/Level%202">Level 2 Issues</a>
公表者
	<a href="https://www.w3.org/groups/wg/das">Devices and Sensors WG</a>

</script>
</head>
<body>

<header>
	<hgroup>
<h1>環境光センサー — Ambient Light Sensor</h1>
	</hgroup>
</header>

<div id="MAIN" hidden>

	<section id="abstract">
◎要約

<p>
この仕様は、
~deviceの環境における［
~ambient光~level／照度
］を監視する具象-~sensor~interfaceを定義する。
◎
This specification defines a concrete sensor interface to monitor the ambient light level or illuminance of the device’s environment.
</p>

	</section>
	<section id="sotd">
◎位置付け

<p>
この節では、公表~時点における…
【以下，この節の他の内容は、~SOTD-W3Cに移譲。】
</p>

<p>
`Devices and Sensors ~WG^cite は、
この仕様に対する現代の［
~security／~privacy
］考査を追求している
— ［
`2017年 10 月 3日から始まった＠https://github.com/w3c/sensors/issues/299#issue-262392533$，
この仕様, および［
~privacy／~security
］に対する横断的な考査の実施
］における，これまでの~~主要な変更を考慮に入れる下で。
類似に，当~WGは、
最新な~architecture上の考査の実施を織り込むため，
この仕様に対する［
`Technical Architecture Group^cite（ TAG, 技術-~architecture~group）による考査
］の更新も追求している。
◎
The Devices and Sensors Working Group is pursuing modern security and privacy reviews for this specification in consideration of the amount of change in both this specification and in privacy and security review practices since the horizontal reviews took place on 3 October 2017. Similarly, the group is pursuing an update to the Technical Architecture Group review for this specification to account for the latest architectural review practices.
</p>

	</section>

<main id="MAIN0">

	<section id="_conventions">
<h2 class="trans-note">【この訳に特有な表記規約】</h2>

◎表記記号

	</section>
	<section id="intro">
<h2 title="Introduction">1. 序論</h2>

<p>
`~ambient光~sensor^cite（ `Ambient Light Sensor^en ）は、
`汎用~sensor~API^cite（ `Generic Sensor API^en ） `GENERIC-SENSOR$r を拡張して，［
~deviceの~main光~検出器により検出された~ambient光~level
］についての情報を~lux単位で供する。
◎
The Ambient Light Sensor extends the Generic Sensor API [GENERIC-SENSOR] to provide information about ambient light levels, as detected by the device’s main light detector, in terms of lux units.
</p>

		<section id="scope">
<h3 title="Scope">1.1. 視野</h3>

<p>
この文書は、
次を要求する`利用事例＠#usecases-requirements$用に設計された~APIを指定する
⇒
低-待時間で
— 場合によっては，高-~frequencyで標本化された —
木目細かな照度~data
◎
This document specifies an API designed for use cases which require fine grained illuminance data, with low latency, and possibly sampled at high frequencies.
</p>

<p>
次のような共通的な利用事例は、
この~APIの視野から外れる
⇒
~web~pageを［
~contrast~level／`選好される色~scheme$
］に則って~styleすることは，少数の照度~値に依拠しており、［
~deviceにて測定された~ambient光~level
］は，それらの値に波及し得るが、
それは，次により最良に~serveされる
⇒
~CSS`媒体~特能$［
`prefers-contrast$d, `prefers-color-scheme$d
］ `MEDIAQUERIES-5$r および，
それに付随している `matchMedia()$m ~API `CSSOM-VIEW-1$r
◎
Common use cases relying on a small set of illuminance values, such as styling webpages according to contrast level or preferred color scheme that may be influenced by a device’s measured ambient light level are best served by the the prefers-contrast and prefers-color-scheme CSS media features [MEDIAQUERIES-5] as well as the accompanying matchMedia API [CSSOM-VIEW-1] and are out of scope of this API.
</p>

<p class="note">注記：
`MEDIAQUERIES-5$r 仕様は，［
~ambient光の読取りに もっと直に束ねられていた `light-level^d 媒体~特能
］を包含していたが、
それは，より高~levelな［
`prefers-color-scheme^d, `prefers-contrast^d
］媒体~特能への支持を受けて，その仕様から`落とされた＠https://github.com/w3c/csswg-drafts/commit/f5b663c27d5a2715239633f4916880563969d770$
。
◎
Note: The [MEDIAQUERIES-5] specification used to contain a light-level media feature that was more directly tied to ambient light readings. It has since been dropped from the specification in favor of the higher-level prefers-color-scheme and prefers-contrast media features.
</p>

		</section>
	</section>
	<section id="examples">
<h2 title="Examples">2. 例</h2>

<div class="example">
<p>
この単純な例では、
~ambient光~sensorは，既定の環境設定で作成される。
新たな`~sensor読取り$が可用になり次第，~consoleに~printされる。
◎
In this simple example, ambient light sensor is created with default configuration. Whenever a new reading is available, it is printed to the console.
</p>

<pre class="lang-js">
const %sensor = new AmbientLightSensor();
%sensor.onreading = () =&gt; console.log(%sensor.illuminance);
%sensor.onerror = %event =&gt; console.log(%event.error.name, %event.error.message);
%sensor.start();
</pre>
</div>

<div class="example">
<p>
この例では、
~ambient光`~sensor読取り$から，~ISOspeed 100 における露光~値（EV）を計算する。
まず、
~ambient光`~sensor読取り$に~accessする許可は，~UAにあるかどうか検査する。
次に、
`illuminance$m 値を最も近い露光~値に変換する。
◎
In this example, the exposure value (EV) at ISO 100 is calculated from the ambient light sensor readings. Initially, we check that the user agent has permissions to access ambient light sensor readings. Then, the illuminance value is converted to the closest exposure value.
</p>

<pre class="lang-js">
navigator.permissions.query({ name: 'ambient-light-sensor' }).then(%result =&gt; {
    if (%result.state === 'denied') {
        console.log('~ambient光~sensorを利用する許可は否認されました。');
        return;
    }

    const %als = new AmbientLightSensor({frequency: 20});
    %als.addEventListener('activate', () =&gt; console.log('EV は今から測定できます。'));
    %als.addEventListener('error', %event =&gt; console.log(``^~error: ${%event.error.name}``^));
    %als.addEventListener('reading', () =&gt; {
        // <span class="comment">既定の~ISOspeed値</span>
        const %ISO = 100;
        // <span class="comment">入射光較正定数</span>
        const %C = 250;

        let %EV = Math.round(Math.log2((%als.illuminance * %ISO) / %C));
        console.log(``^~露光~値 (EV) : ${%EV}``^);
    });

    %als.start();
});
</pre>
</div>

<div class="example">
<p>
この例は、
~ambient光`~sensor読取り$を，作業場に推奨される光~levelにどう対応付けるかをデモる。
◎
This example demonstrates how ambient light sensor readings can be mapped to recommended workplace light levels.
</p>

<pre class="lang-js">
const %als = new AmbientLightSensor();

%als.onreading = () =&gt; {
    let %str = luxToWorkplaceLevel(%als.illuminance);
    if (%str) {
        console.log(``^${%str}用に相応しい光~levelです：``^);
    }
};

%als.start();

function luxToWorkplaceLevel(%lux) {
    if (20 &lt;= %lux  &amp;&amp; %lux &lt; 100) {
        return '公共区域, 短い訪問';
    } else if (100 &lt;= %lux &amp;&amp; %lux &lt; 150) {
        return 'たまに遂行される視覚的な~task';
    } else if (150 &lt;= %lux &amp;&amp; %lux &lt; 250) {
        return '簡単な事務作業, 授業, 居宅, 劇場';
    } else if (250 &lt;= %lux &amp;&amp; %lux &lt; 500) {
        return '通常の事務作業, 日用品店, 実験室';
    } else if (500 &lt;= %lux &amp;&amp; %lux &lt; 1000) {
        return '製作所, 絵描き, 食料品店';
    } else if (1000 &lt;= %lux &amp;&amp; %lux &lt; 5000) {
        return '製図作業, 低~contrastな視覚的な~task';
    }

    return;
}
</pre>
<!-- 
const als = new AmbientLightSensor();

als.onreading = () => {
    let str = luxToWorkplaceLevel(als.illuminance);
    if (str) {
        console.log(Light level is suitable for: ${str}.);
    }
};

als.start();

function luxToWorkplaceLevel(lux) {
    if (lux > 20 && lux < 100) {
        return 'public areas, short visits';
    } else if (lux > 100 && lux < 150) {
        return 'occasionally performed visual tasks';
    } else if (lux > 150 && lux < 250) {
        return 'easy office work, classes, homes, theaters';
    } else if (lux > 250 && lux < 500) {
        return 'normal office work, groceries, laboratories';
    } else if (lux > 500 && lux < 1000) {
        return 'mechanical workshops, drawing, supermarkets';
    } else if (lux > 1000 && lux < 5000) {
        return 'detailed drawing work, visual tasks of low contrast';
    }

    return;
}

-->
</div>

	</section>
	<section id="security-and-privacy">
<h2 title="Security and Privacy Considerations">3. ~security／~privacyの考慮点</h2>

<p>
◎追跡路
~ambient光~sensorは、
~device環境~近くの照明~条件について情報を供する。
これは、
次に挙げる~privacy~riskを含み得る：
◎
Ambient Light Sensor provides information about lighting conditions near the device environment. Potential privacy risks include:
</p>

<ul>
	<li>
~profile法
⇒
~ambient光~sensorは、
利用者の利用~patternや周囲について情報を漏洩し得る。
この情報は、
利用者を~profileしたり挙動上の分析を増補するために利用され得る。
◎
Profiling. Ambient Light Sensor can leak information about user’s use patterns and surrounding. This information can be used to enhance user profiling and behavioral analysis.
</li>
	<li>
~device間にまたがる~link法
⇒
2 つの~deviceは、
同じ第三者-主体に属する~scriptを含む~web~siteに~accessし得る
— ~scriptは，時間~越しに照明~levelを相関する。
◎
Cross-device linking. Two devices can access web sites that include the same third-party script that correlates lighting levels over time.
</li>
	<li>
~device間をまたがる通信
⇒
近くにある~deviceにおける~ambient光~sensorで［
~device~screenや~camera~LED~flashから読出された~message
］を，単純な~broadcast通信~手法を利用して~broadcastし得る。
◎
Cross-device communication. A simple broadcast communication method can use device screen or camera LED flashes to broadcast messages read out with an Ambient Light Sensor in a close by device.
</li>
	<li>
非同一-生成元への漏洩
⇒
~screenから発された光は、
近くの反射面から，~sensorへ戻るように反映され得る。
悪意的な~siteは、
異なる生成元からの資源を埋込んで，
内容を画素ごとに判別できるよう内容を拡大して特定0の画素を表示し得る。
◎
Cross-origin leaks. Light emitted from the screen can be reflected back to the sensor from nearby reflective surfaces. Malicious sites can embed resources from different origins and scale the content to display particular pixels to allow distinguishing the contents, pixel by pixel.
</li>
	<li>
閲覧~履歴の強奪
⇒
［
訪問-済み／未訪問
］な~linkに異なる光~levelを結付ける
— すなわち、
~screen内で［
黒い／白い
］塊になるよう~styleする —
ことにより，それらが判別できるようになる。
◎
Hijacking browsing history. Styling visited links to allow distinguishing the light levels associated with visited and unvisited links i.e. visited links styled as a block of black screen; white for unvisited.
</li>
</ul>

<p>
これらの課題を さらに掘下げる作業は、
次に挙げるものなどにある
⇒＃
`ALSPRIVACYANALYSIS$r,
`PINSKIMMINGVIASENSOR$r,
`STEALINGSENSITIVEDATA$r,
`VIDEORECOGNITIONAMBIENTLIGHT$r,
`IMAGINGPRIVACY$r
◎
Works such as [ALSPRIVACYANALYSIS], [PINSKIMMINGVIASENSOR], [STEALINGSENSITIVEDATA], [VIDEORECOGNITIONAMBIENTLIGHT], and [IMAGINGPRIVACY] delve further into these issues.
</p>

<p>
これらの，~ambient光~sensorに特有な脅威を軽減するため、
~UAは
⇒＃
~sensor読取りの`正確度を抑制する$モノトスル。
`最大~標本化~frequencyを制限しても＠~SENSORS#limit-max-frequency$ヨイ。
◎
To mitigate these threats specific to Ambient Light Sensor, user agents must reduce accuracy of sensor readings. User agents may also limit maximum sampling frequency.
</p>

<p>
これらの軽減~策は、
`汎用~sensor~API^cite `GENERIC-SENSOR$r に定義される`汎用な軽減~策＠~SENSORS#mitigation-strategies$を補う。
◎
These mitigation strategies complement the generic mitigations defined in the Generic Sensor API [GENERIC-SENSOR].
</p>

		<section id="reduce-sensor-accuracy">
<h3 title="Reducing sensor readings accuracy">3.1. ~sensor読取りの正確度の抑制-法</h3>

<p>
~sensor読取りの`正確度を抑制する$ため、
この仕様は
⇒＃
`~threshold検査~algo$として`~ambient光の~threshold検査~algo$を定義する。
`読取り量子化~algo$として`~ambient光の読取り量子化~algo$を定義する。
◎
In order to reduce accuracy of sensor readings, this specification defines a threshold check algorithm (the ambient light threshold check algorithm) and a reading quantization algorithm (the ambient light reading quantization algorithm).
</p>

<p>
これらの~algoは［
`照度~読取り量子$, `照度~threshold値$
］を用立てる。
実装は、
これらの値に対し，次に挙げる要件を固守するモノトスル：
◎
These algorithms make use of the illuminance rounding multiple and the illuminance threshold value. Implementations must adhere to the following requirements for their values:
</p>
<ul>
	<li>
`照度~読取り量子$は 50 ~lux以上にするモノトスル。
◎
The illuminance rounding multiple must be at least 50 lux.
</li>
	<li>
`照度~threshold値$は、
`照度~読取り量子$の半分~以上にするベキである。
◎
The illuminance threshold value should be at least half of the illuminance rounding multiple.
</li>
</ul>

<p class="note">注記：
`照度~読取り量子$を選ぶことは、［
精確~過ぎる読出しを公開しない一方で，
~API利用者にも有用な読出しを供する
］よう~balanceすることを要求する。
`照度~読取り量子$用の最小として値 50 ~luxが，
`課題 #13＠https://github.com/w3c/ambient-light/issues/13#issuecomment-302393458$
にて決定された
— 様々な照明~条件の下で様々な~ambient光~level測定が`集められ＠https://docs.google.com/spreadsheets/d/1vUojkaaif6AmftQmtqra1w9Z7CH00Cn9pb0Ci6v5_Jk$，
`STEALINGSENSITIVEDATA$r にて述べられた攻撃を~~阻止することが示された後に。
50 ~luxは，また、
~ambient光~sensor読取りを利用する動画~認識（ `VIDEORECOGNITIONAMBIENTLIGHT$r ）を実現不能にするために要求される 5 ~luxよりも高い。
◎
Note: Choosing an illuminance rounding multiple requires balancing not exposing readouts that are too precise while also providing readouts that are still useful for API users. The value of 50 lux as a minimum for the illuminance rounding multiple was determined in GitHub issue #13 after different ambient light level measurements under different lighting conditions were gathered and shown to thwart the attack described in [STEALINGSENSITIVEDATA]. 50 lux is also higher than the 5 lux required to make video recognition using ambient light sensor readings ([VIDEORECOGNITIONAMBIENTLIGHT]) infeasible.
</p>

<p class="note">注記：
`照度~threshold値$は、［
特定0の値の周りで揺らいでいる読取りが，異なる値に量子化される事実
］が漏洩することを防止するために利用される。
例えば，［
`照度~読取り量子$ ~EQ 50
］の場合、
これは，［
生な読出しが 24 と 26 の間で切替わるとき，
照度~値が 0 と 50 の間で切替わる
］ことを防止する。
`~threshold検査~algo$は、［
補助的な指紋収集~軽減~策としての その効能
］は数学的に証明されてはいないが、
実装~経験に基づいて，この仕様に追加された。
`Chromium bug 1332536＠https://crbug.com/1332536$,
`Chromium review 3666917＠https://crrev.com/c/3666917$
は、
このことについての情報をもっと包含する。
◎
Note: The illuminance threshold value is used to prevent leaking the fact that readings are hovering around a particular value but getting quantized to different values. For example, if illuminance rounding multiple is 50, this prevents switching the illuminance value between 0 and 50 if the raw readouts switch between 24 and 26. The efficacy of the threshold check algorithm as an auxiliary fingerprinting mitigation strategy has not been mathematically proven, but it has been added to this specification based on implementation experience. Chromium bug 1332536 and Chromium review 3666917 contain more information about this.
</p>

		</section>
	</section>
	<section id="model">
<h2 title="Model">4. ~model</h2>

<p>
`~sensor型$
`~ambient光~sensor@i
（ `Ambient Light Sensor^en ）は：
◎
↓</p>
<ul>
	<li>
`Sensor$I 下位class【`拡張~sensor~interface$】として、
`AmbientLightSensor$I が結付けられる。
◎
The Ambient Light Sensor sensor type’s associated Sensor subclass is the AmbientLightSensor class.
</li>
	<li>
その`既定の~sensor$は、
~deviceの~main光~検出器である。
◎
The Ambient Light Sensor has a default sensor, which is the device’s main light detector.
</li>
	<li>
`名前$
`ambient-light-sensor@l
により識別される`強力な特能$である。
◎
The Ambient Light Sensor is a powerful feature that is identified by the name "ambient-light-sensor",＼
</li>
	<li>
その`~sensor許可~名~群$は、
`ambient-light-sensor^l のみからなる。
◎
which is also its associated sensor permission name.＼
</li>
	<li>
その`許可~revocation~algo$は、
次の結果を返す
⇒
`~sensor許可~revocation~algo$( `ambient-light-sensor^l )
◎
Its permission revocation algorithm is the result of calling the generic sensor permission revocation algorithm with "ambient-light-sensor".
</li>
	<li>
`施策により制御される特能$であり、
文字列 `ambient-light-sensor^l により識別される。
その`既定の許容list$は `'self'^l とする。
◎
The Ambient Light Sensor is a policy-controlled feature identified by the string "ambient-light-sensor". Its default allowlist is 'self'.
</li>
	<li>
それが`属する~virtual~sensor型$は、
`ambient-light@vsT
とする。
◎
The Ambient Light Sensor has a virtual sensor type, which is "ambient-light".
</li>
</ul>

<p>
`現在の光~level@
（ `current light level^en ）
—
`現在の照度@
（ `current illuminance^en ）とも称される —
は、
~hostしている~device周りの~ambient光~levelを表現する値であり，
その単位は~lux（ `lux^en ）（ lx ） `SI$r とする。
◎
The current light level or illuminance is a value that represents the ambient light level around the hosting device. Its unit is the lux (lx) [SI].
</p>

<p class="note">注記：
報告される精確な~lux値は、
同じ光の下でも，~deviceごとに異なり得る
— 検出~手法における相違点, ~sensorの構成, 等々に因り。
◎
Note: The precise lux value reported by different devices in the same light can be different, due to differences in detection method, sensor construction, etc.
</p>

<p>
`~sensor型$ `~ambient光~sensor$i には：
◎
↓</p>
<ul>
	<li>
<p>
~luxで測定される
`照度~読取り量子@
（ `illuminance rounding multiple^en †）がある
— 各~照度~読取りは、
この~~量の整数倍に丸められることになる。
</p>

<p class="trans-note">【†
この `multiple^en は， “倍数（~~整数倍）” を意味するが、
そのように対訳すると意味が通らなくなるので， “量子化” に対応する対訳に改めている。
】</p>
◎
The Ambient Light Sensor has an illuminance rounding multiple, measured in lux, which represents a number whose multiples the illuminance readings will be rounded up to.
</li>
	<li>
~luxで測定される
`照度~threshold値@
（ `illuminance threshold value^en ）がある
— それは、
`~ambient光の~threshold検査~algo$内で利用される。
◎
The Ambient Light Sensor has an illuminance threshold value, measured in lux, which is used in the ambient light threshold check algorithm.
</li>
</ul>

<p class="note">注記：
これらに課される最小な要件は、
`§ ~sensor読取りの正確度の抑制-法＠#reduce-sensor-accuracy$を見よ。
◎
Note: see § 3.1 Reducing sensor readings accuracy for minimum requirements for the values described above.
</p>

	</section>
	<section id="api">
<h2 title="API">5. ~API</h2>

		<section id="ambient-light-sensor-interface">
<h3 title="The AmbientLightSensor Interface">5.1. `Ambientlightsensor^I ~interface</h3>

<pre class="idl">
[`SecureContext$, `Exposed$=Window]
interface `AmbientLightSensor@I : `Sensor$I {
  `AmbientLightSensor$mc(optional `SensorOptions$I %sensorOptions = {});
  readonly attribute `double$? `illuminance$m;
};
</pre>

<div class="algo">
`new AmbientLightSensor(sensorOptions)@m
構築子~手続きは
⇒
`~ambient光~sensor~objを初期化する$( %sensorOptions )
◎
To construct an AmbientLightSensor object the user agent must invoke the construct an ambient light sensor object abstract operation.
</div>

<div class="algo" id="ambient-light-sensor-reading-attribute">
`illuminance@m
属性は、
`現在の照度$を表現する
— その取得子~手続きは
⇒
~RET `最新な読取り~mapから値を取得する$( コレ, `illuminance^l )
◎
5.1.1. The illuminance attribute
◎
The illuminance getter steps are:
• Let illuminance be the result of invoking get value from latest reading with this and "illuminance" as arguments.
• Return illuminance.
</div>

		</section>
	</section>
	<section id="abstract-operations">
<h2 title="Abstract Operations">6. 抽象-演算</h2>

		<section id="construct-an-ambient-light-sensor-object">
<h3 title="Construct an ambient light sensor object">6.1. ~ambient光~sensor~objを初期化する</h3>

<div class="algo">
<p>
所与の
( %~ambient光~sensor, %~option群 )
に対し：
</p>
<ol>
	<li>
~Assert：
%~ambient光~sensor は
`AmbientLightSensor$I ~interfaceを実装する
</li>
	<li>
~Assert：
%~option群 は `SensorOptions$I 辞書である
</li>
	<li>
~IF［
`~sensor施策により制御される特能を検査する$( `~ambient光~sensor$i【！`AmbientLightSensor$I】 ) ~EQ ~F
］
⇒
~THROW `SecurityError$E
</li>
	<li>
`~sensor~objを初期化する$( %~ambient光~sensor, %~option群 )
</li>
</ol>

<p class="trans-note">【
原文の この~algoは，新たな~instanceを作成して返しているが、
`WEBIDL$r の`構築子~手続き$の規約に則って，この訳では初期化のみ行うよう改めている。
】</p>

◎
input
• options, a SensorOptions object.
output
• An AmbientLightSensor object.
◎
Let allowed be the result of invoking check sensor policy-controlled features with AmbientLightSensor.
◎
If allowed is false, then:
• Throw a SecurityError DOMException.
◎
Let ambient_light_sensor be the new AmbientLightSensor object.
◎
Invoke initialize a sensor object with ambient_light_sensor and options.
◎
Return ambient_light_sensor.
</div>

		</section>
		<section id="ambient-light-threshold-check-algorithm">
<h3 title="Ambient light threshold check algorithm">6.2. ~ambient光~threshold検査~algo</h3>

<div class="algo">
<p>
`~sensor型$ `~ambient光~sensor$i は、
`~threshold検査~algo$として，次を定義する
— それは、
所与の
( `~sensor読取り$ %新たな読取り, `~sensor読取り$ %最新な読取り )
に対し，［
読取りにおける差は十分に有意かどうかを指示する`真偽値$
］を返す：
◎
The Ambient Light Sensor sensor type defines the following threshold check algorithm:
◎
input
• newReading, a sensor reading
• latestReading, a sensor reading
◎
output
• A boolean indicating whether the difference in readings is significant enough.
</p>
<ol>
	<li>
%新たな照度 ~LET %新たな読取り[ `illuminance^l ]
◎
↓If newReading["illuminance"] is null, return true.
◎
↓If latestReading["illuminance"] is null, return true.
◎
Let newIlluminance be newReading["illuminance"].
</li>
	<li>
%最新な照度 ~LET %最新な読取り[ `illuminance^l ]
◎
Let latestIlluminance be latestReading["illuminance"].
</li>
	<li>
~IF［
%新たな照度 ~EQ ~NULL
］~OR［
%最新な照度 ~EQ ~NULL
］
⇒
~RET ~T
◎
↑</li>
	<li>
~IF［
( %最新な照度 ~MINUS %新たな照度 ) の絶対~値 ~LT `照度~threshold値$
］
⇒
~RET ~F
◎
If abs(latestIlluminance - newIlluminance) &lt; illuminance threshold value, return false.
</li>
	<li>
%丸められた新たな読取り ~LET `~ambient光の読取り量子化~algo$( %新たな照度 )
◎
Let roundedNewReading be the result of invoking the ambient light reading quantization algorithm algorithm with newIlluminance.
</li>
	<li>
%丸められた最新な読取り ~LET `~ambient光の読取り量子化~algo$( %最新な照度 )
◎
Let roundedLatestReading be the result of invoking the ambient light reading quantization algorithm algorithm with latestIlluminance.
</li>
	<li>
~IF［
%丸められた新たな読取り[ `illuminance^l ] ~EQ %丸められた最新な読取り【！roundedLatestIlluminance】[ `illuminance^l ]
］
⇒
~RET ~F
◎
If roundedNewReading["illuminance"] and roundedLatestIlluminance["illuminance"] are equal, return false.
</li>
	<li>
~RET ~T
◎
Otherwise, return true.
</li>
</ol>
</div>

<p class="note">注記：
この~algoは、［
前回と同じ値に丸められる読取りは，`最新な読取りを更新する$ときに更新を誘発しない
］ことを確保するため，
`~ambient光の読取り量子化~algo$を呼出す。
【！Not doing so would ...】
◎
Note: This algorithm invokes the ambient light reading quantization algorithm to ensure that readings that round up to the same value do not trigger an update in the main update latest reading algorithm.＼
Not doing so would indicate to users that the raw illuminance readings are within a range where they differ by at least the illuminance threshold value but do not round up to different illuminance rounding multiple.
</p>

		</section>
		<section id="ambient-light-reading-quantization-algorithm">
<h3 title="Ambient light reading quantization algorithm">6.3. ~ambient光~読取り量子化~algo</h3>

<div class="algo">
<p>
`~sensor型$ `~ambient光~sensor$i は、
`読取り量子化~algo$として，次を定義する
— それは、
所与の
( `~sensor読取り$ %読取り )
に対し，`~sensor読取り$を返す：
◎
The Ambient Light Sensor sensor type defines the following reading quantization algorithm:
◎
input
• reading, a sensor reading
◎
output
• A sensor reading
</p>
<ol>
	<li>
%量子化された読取り ~LET %読取り 【の複製？】
◎
Let quantizedReading be reading.
</li>
	<li>
%量子化された読取り[ `illuminance^l ] ~SET 
`照度~読取り量子$の整数倍のうち， %読取り[ `illuminance^l ] に最も近い値
◎
Set quantizedReading["illuminance"] to the multiple of the illuminance rounding multiple that reading["illuminance"] is closest to.
</li>
	<li>
~RET %量子化された読取り
◎
Return quantizedReading.
</li>
</ol>
</div>

		</section>
	</section>
	<section id="automation">
<h2 title="Automation">7. 自動化</h2>

<p>
この節では、
`GENERIC-SENSOR$r に定義される`自動化＠~SENSORS#automation$を拡張する
— `~ambient光~sensor$i に特有な`~virtual~sensor~metadata$を供することにより。
◎
This section extends Generic Sensor API § 9 Automation by providing Ambient Light Sensor-specific virtual sensor metadata.
</p>

<div class="algo">
<p>
`照度の読取りを構文解析する@
~algoは、
所与の
( ~JSON `Object$jt %~parameter群 )
に対し
⇒
~RET `一数の読取りを構文解析する$( %~parameter群, `illuminance^l )
◎
The illuminance reading parsing algorithm, given a JSON Object parameters, must return the result of invoking parse single-value number reading with parameters and "illuminance".
</p>
</div>

<p>
`型ごとの~virtual~sensor~metadata$を与える`~map$は、
次に挙げる`~entry$mapを伴うモノトスル：
◎
The per-type virtual sensor metadata map must have the following entry:
</p>
<ul>
	<li>
`~key$map `ambient-light^l
⇒
対応する`値$mapを与える`~virtual~sensor~metadata$の
⇒＃
`~virtual~sensor型$vsMは `~ambient光~sensor$i ／
`読取り構文解析~algo$vsMは `照度の読取りを構文解析する$
◎
key
• "ambient-light"
◎
value
• A virtual sensor metadata whose virtual sensor type is Ambient Light Sensor and reading parsing algorithm is illuminance reading parsing algorithm.
</li>
</ul>

	</section>
	<section id="usecases-requirements">
<h2 title="Use Cases and Requirements">8. 利用事例と要件</h2>

<p>
次に挙げるものを行う~Web~app：
◎
↓</p>

<ul>
	<li>
~smart居宅~system用に照明を制御する入力を供する。
◎
A Web application provides input for a smart home system to control lighting.
</li>
	<li>
作業~空間において光~levelは足るかどうか検査する。
◎
A Web application checks whether light level at work space is sufficient.
</li>
	<li>
手動で制御する~camera用の設定群（~aperture-shutter-speed-ISO）を計算する。
◎
A Web application calculates settings for a camera with manual controls (aperture, shutter speed, ISO).
</li>
	<li>
現在の光~levelを検査して，~camera~streamが［
目的（例：ヒトが居るかどうか検証yする）に十分に正確aな~data
］を包含するかどうか決定する。
◎
A Web application checks the current light level to determine whether a camera stream will contain data that is accurate enough for its purposes (e.g. human presence verification).
</li>
</ul>

<p>
一部の利用事例では、
精確な~ambient光の測定を得することから便益が得られよう。
一方で，~ambient光~levelの変動を利用者~入力~eventへ変換する利用事例では、
より高い`標本化~frequency$から便益が得られよう。
◎
While some of the use cases may benefit from obtaining precise ambient light measurements, the use cases that convert ambient light level fluctuations to user input events would benefit from higher sampling frequencies.
</p>

	</section>
	<section id="acknowledgements">
<h2 title="Acknowledgements">9. 謝辞</h2>

<p>
`Doug Turner^en 氏は、
初期の原型を寄せられた。
 `Marcos Caceres^en 氏は~test一式を寄せられた。
◎
Doug Turner for the initial prototype and Marcos Caceres for the test suite.
</p>

<p>
`Paul Bakaus^en 氏は、
`LightLevelSensor^i 案を寄せられた。
◎
Paul Bakaus for the LightLevelSensor idea.
</p>

<p>
`Mikhail Pozdnyakov^en,
`Alexander Shalamov^en 
両氏は、
利用事例と要件を寄せられた。
◎
Mikhail Pozdnyakov and Alexander Shalamov for the use cases and requirements.
</p>

<p>
`Lukasz Olejnik^en 氏は、
~privacy~risk査定を寄せられた。
◎
Lukasz Olejnik for the privacy risk assessment.
</p>

	</section>
</main></div>
