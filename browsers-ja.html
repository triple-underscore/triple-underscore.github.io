<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<title>HTML Standard — Browsing contexts（日本語訳）</title>
<link rel="stylesheet" href="common.css" type="text/css" />
<link rel="stylesheet" href="common-whatwg.css" type="text/css" />
<style type="text/css">
.js {
	color: green;
}

#_nav-table tr > *:first-child {
	max-width: 50vw;
}
</style>

<script src="common0.js" ></script>
<script src="common1.js" async></script>


<script>


Util.ready = function(){
	var source_data = {
		toc_main: 'browsers',
		levels: 'ほぼ英語:英語主体:漢字+英語:漢字主体:カナ主体',
		level: 3,
		generate: expand,
	};
	Util.switchWordsInit(source_data);

//	Util.del_j(); //checked: 170608 spec
}

function expand(){

	var class_map = {
		e: 'element',
		a: 'attr',
		et: 'event-type',
		sc: 'scheme',
		E: 'error',
		h: 'header',
		sl: 'js-slot',
		jI: 'js-intrinsic',
		jA: 'abstract',
		U: 'code-point',
		v: 'value',
	};

	var tag_map = {
		I: 'code',
		m: 'code',
		c: 'code',
		e: 'code',
		a: 'code',
		sc: 'code',
		et: 'code',
		h: 'code',
		E: 'code',
		sl: 'span',
		jI: 'span',
		jA: 'span',
		U: 'span',
		v: 'code',
		V: 'var',
		i: 'i',
	};

	var link_map = this.link_map;

	return this.html.replace(
		/%[\w~一-鿆]+|`(.+?)([$@\^])(\w*)/g,
		create_html
	);

	function create_html(match, key, indicator, klass){

if(!key) {//%
	return '<var>' + match.slice(1) + '</var>';
}

var text = key;
var href = '';
var classname = class_map[klass];
var tag = tag_map[klass];

switch(klass){
case 'r': // ref
	text = '[' + key + ']';
	href = 'HTML-references.html#refs' + key;
	break;
case 'l': // literal
	text = '"<code class="literal">' + text + '</code>"';
	break;
case 'm': // IDL member
	var n = text.indexOf('(');
	if(n > 0){
		key = text.slice(0, n);
		text = key + text.slice(n).replace(/\w+/g, '<var>$&</var>');
	}
	break;
case 'sc': // url scheme
	text = text.replace(/_/, ':');
	break;
case 'sbox': // sandboxing flags
	text = '閲覧文脈~sandbox化( ' + key + ' )~flag';
	break;
case 'sl': // JS internal slot
	text = '[[' + key + ']]';
	break;
case 'jI': // JS intrinsic objects
	text = '%' + key + '%';
	break;
case 'bP': //
	text = key + '<code>BarProp</code> ~obj';
	break;
case 'U': // Unicode code point
	text = 'U+' + key;
	break;
case 'smb': //
	text = '(<span class="char-symbol">' + text + '</span>)'
	break;
}

if(tag) {
	text = '<' + tag + (
		classname ? ' class="' + classname + '"' : ''
	) + '>' + text + '</' + tag + '>';
}


if(indicator !== '^'){
	href = link_map[klass ? (klass + '.' + key) : key] || href;
	if(!href){
		console.log(match); // check error
		return match;
	}

	switch(indicator){
	case '$':
		text = '<a href="' + href + '">' + text + '</a>';
		break;
	case '@':
		text = '<dfn id="' + href.slice(1) + '">' + text + '</dfn>';
		break;
	}
}

return text;


	}
}

</script>


<script type="text/plain" id="_source_data">


●●options

spec_date:2018-02-08
trans_update:2018-02-09
page_state_key:HTML
spec_status:LS
original_url:https://html.spec.whatwg.org/multipage/browsers.html
site_nav:browsers,network,html
nav_prev:HTMLdnd
nav_next:WINDOW
trans_1st_pub:2016-07-12


●●words_table



API:
ASCII:
	COLON:
DOM:
	FULL-STOP:
Web:
browser::::ブラウザ
data::::データ
flag::::フラグ
mode::::モード
key:
keyword::::キーワード
link::::リンク
list::::リスト
group::::グループ
	~group分け:grouping
open:
	＊~opener:
選択肢:option:~:::オプション

	切離す:sever する／Lose:切り離す
prop:property:::プロパティ
	srcdoc:
	表:table
web::
上書き:override:~

	●仕様（動詞
伝えて:inform して:~
依存-:depend:~
奨励-:encourage:~
定義-:define:~
定義:definition:~
実装-:implement:~
指定-:specify:~
供-:provide:~
提供-:offer:~
決定-:determine:~
省略-:omit:~
確保-:ensure:~
要求-:require:~
要約-:summarize:~
解釈-:interpret:~
	記述-:describe
	記述:description:~
選好:preference:~
利用-:use:~
再利用:reuse:~
利用者:user:~
制約:restriction:~
意味-:mean:~
意味:meaning:~
結付けら:associate さ:結び付けら
辞退-:decline:~
影響-:affect:~
見なさ:consider さ:~
言明-:state:~

	●仕様
UA:user agent:UA
tool::::ツール
algo:algorithm:::アルゴリズム
custom::::カスタム
	~custom化:customize
well-defined:
一意:unique:~
一般:general:~
不透明な:opaque:~
事例:case:~
仕方:way:~
仕様:spec:~
作者:author:~
	-:possibly
実際:actual:~
既存の:existing:~
概して:typical に:~

標準:standard:~
特別:special:~
特定の:specific:~
特色機能:feature:~
状況:situation:~
直接的:direct:~
	やりとり:interact:~
	通常は:normal では:~
適用-:apply:~
	-:applicable:
方式:manner:~
明示的:explicit:~
条件:condition:~
能:ability:~
要件:requirements:~
規範的:normative:~
適切:appropriate:~
可用:available:~
効果:effect:~
手続き:steps:~
	-:substeps
段:step:~
一貫した:consistent な:一貫性のある
基盤:infrastructure:~
例外:exception:~
	とは限らない:necessarily
	必要-:need
	理にかなっているとは言い難い:make much sense

	●network／保安
allowX:allow〜
URL:
domain::::ドメイン
navigate::::ナビゲート
	navigating:
navi:navigation:::ナビ
navigator::::ナビゲータ
referrer::::リファラ
load:
保安:security::~:セキュリティ
session::::セッション
sandbox::::サンドボックス
	~sandbox法:sandboxing
施策:policy::~:ポリシー
要請:request::~::リクエスト
資源:resource::~:リソース
基底:base:~
阻止-:block::~::ブロック
許可-:permit:~
	許可-済み:permitted

	●環境 ／ 閲覧
環境:environment:~
大域:global::~::グローバル
設定子:setter:~
設定群:settings:~
現在の:current:~
realm:
視野:scope:~
関連する:relevant な:~

top-level::::トップレベル
閲覧文脈:browsing context::~
補助:auxiliary::~
生成元:origin::~::オリジン
同一生成元:same-origin::~::同一オリジン
非同一生成元:cross-origin::~::クロスオリジン
直接到達可能:directに reach 可能:~
破棄-:discard:~

近しい:familiar with:~
読込まれ:load され::読み込まれ::ロードされ
読込後:post-load::読み込み後
頁:page:::ページ
入子に:nest:入れ子に
入子の:nested:入れ子の
族:family:~
開いた:open した::~
開こう:open しよう::~

子:child:~
親:parent:~
子孫:descendant:~
容器:container:::コンテナ
木:tree::~::ツリー
根:root::~::ルート
文書:document:~

作動中の:active な::~::アクティブな
作動中:active::~::アクティブ
作動化:activation::~::アクティブ化
作動化-:activate::~::アクティブ化

履歴:history::~
entry::::エントリ

	●IDL / js / event
event-loop:event loop:::イベントループ
event::::イベント
内部:internal:~
slot::::スロット
method::::メソッド
IDL:
JS:JavaScript
member::::メンバ
call::
instance::::インスタンス
interface::::インタフェース
node::::ノード
shadow:
obj:object:::オブジェクト
script::::スクリプト
task::::タスク
window:

抽象:abstract:~
例外投出あり:rethrow any exceptions:~
取得子:getter:~
初期:initial:~
記述子:descriptor:~
強い:strong な:~
属性:attribute:~

	●UI
focus::::フォーカス
form::::フォーム
popup:
tab::::タブ
form::::フォーム
呈示-:present:~

	●構文
文字:character:~
文字列:string:~
大小無視:case-insensitive:~
小文字:lowercase:~
空:empty:~
名:name:~
名前:name:~
直列化-:serialize::~::シリアル化

	●未分類（動詞
作成-:create:~
作成:creation:~
作成元:creator:~
作成元の:creator:~
予約-:reserve:~
伝播-:propagate:~
共有-:share:~
到達-:reach:~
	可能:possible
可能化-:enable:~
可能化:enabled:~
合致-:match:~
包含-:contain:~
変更-:change:~
存在-:exist:~
実行-:execute:~
実行:execution:~
形成-:form:~
接続:connection:~
操作:manipulation:~
演算:operation:~
環境設定-:configure:~
環境設定:configuration:~
設定-:set:~
置換-:replace:~
置換:replacement:~
見出さな:find しな:~
許容-:allow:~
試行-:try:~
誘発-:trigger:~
走らす:run する:~
走らせ:run し:~
走って:run して:~
追加-:add:~
	追加の:additional
付加-:append:~
遅延:delay:~
	遅延~中:delaying
選定-:select:~
関係:relation:~
関係-:relate:~
除去-:remove:~
順序:order:~
有順序:ordered:~
提出:submission::~
対応関係:mapping:~
集析:mining::~::マイニング
複製-:copy:~
	述べ-:describe
	〜に基づく:based
	含-:include
	対応-:corresponding
	従う:follow
	生-:occur
	示す:show
	見よ:see
	起こる:happen
	返す:return
	選ぶ:choose する
	除-:except
	having
	置かれ:put
	said
	束ねられ:tie
	所与の:given
	与-:give
	渡-:passing

	●未分類
未所有化:disowned::~
	-:common
種別:type:~
値:value:~
先祖:ancestor:~
全部的:full:~
内容:content:~
過去互換:quirks::~
準備済み:ready::~
即時:immediate:~
単独の:single:~
和集合:union:~
型:type:~
妥当:valid:~
完全:complete:~
	まったく:completely
	responsible:担当して
推移閉包:transitive closure:~
文脈:context:~
新たな:new:~
等価:equivalent:~
精確:precise:~
要素:element:~

規則:rule:~
集合:set:~
mode::::モード
	popup blocker
対象0:subject:対象
storage::::ストレージ
区画:area:~
真偽値:boolean:~

	結果:result
	結果になる:end up
	壊れやすい:brittle
	分ける:divide
	-:variable
	べき:should
	例:example
	決して:never
	特に:in particular
	節:section
	通:through
	とは言え:Having said that
	近く:closely
	およそ:likely
	as long as
	非:non
	省略時は:optionally
	:per
	point

近過去:recent:~
	最も近過去に:most recently
	最も小さい:smallest
	よい:ok

	●指示語
	自身:itself
	常に:always
	複数の:multiple
	末尾:end
	最初の:first
	最後の:last
	ほとんど:most
	いくつかの:several
	この:this
	これらの:these
	すべての:all
	その:that
	そのような:such
	それら:they
	それらの:their
	それらの:those
	それらを:them
	anything
	nothing
	上:above
	下:below
	両者:both
	二つ:two
	番目:second
	他の:other
	他の場合:otherwise
	任意の:arbitrary
	元々:originally
	別の:another
	前:before
	後:after
	十分:enough
	各:each
	同じ:same
	新たに:newly
	更なる:further
	次:next
	異なる:different
	種々の:various
	別々の:separate


●●original_id_map


dom-window-frameElement:dom-frameelement
dom-window-opener:dom-opener
dom-window-parent:dom-parent
dom-window-top:dom-top
	number-of-document-tree-child-browsing-contexts:number-of-child-browsing-contexts
	serialized-state:state-object


●●words_table1


HTMLWPROXY:HTML-windowproxy-ja.html
length0:length
iframe: <code class="element">iframe</code> 
srcdoc: <code class="attr">srcdoc</code>


●●link_map



	●IDL Interface/Dictionary
I.Document:~HTMLdom#document
I.Element:~DOM4#interface-element
I.Window:~WINDOW#window
I.WindowProxy:~WINDOW#windowproxy

	●Error
	E.SyntaxError:~WEBIDL#syntaxerror

	■#dom-member

m.createDocument:~DOM4#dom-domimplementation-createdocument
m.document.domain:~ORIGIN#dom-document-domain
m.document.open:~HTMLdynamic#dom-document-open
m.frameElement:#dom-window-frameelement
m.opener:#dom-window-opener
m.parent:#dom-window-parent
m.top:#dom-window-top
m.sessionStorage:~WEBSTORAGE#dom-sessionstorage

	●event
	et.load:~HTMLindex#event-load

	●要素

e.body:~HEsections#the-body-element
e.head:~HEmetadata#the-head-element
e.html:~HEmetadata#the-html-element
e.iframe:~HEembed#the-iframe-element
e.frame:~HTMLobs#frame
e.frameset:~HTMLobs#frameset

	●内容属性
a.sandbox:~HEembed#attr-iframe-sandbox

	●code
sc.about_blank:~HTMLdep#about:blank

sl.Window:~WINDOW#concept-windowproxy-window

	text/html:iana.html#text/html

	●
~window:~WINDOW#the-window-object
文書:~HTMLdom#the-document-object
	＊disown:#disowned-its-opener
未所有化~flag:#disowned-its-opener


~load~event遅延~中~mode:#delaying-load-events-mode
~navigateは許容されて:#allowed-to-navigate

	●閲覧文脈
閲覧文脈:#browsing-context

閲覧文脈~名:#browsing-context-name
名前:#browsing-context-name
妥当な閲覧文脈~名:#valid-browsing-context-name
妥当な閲覧文脈~名または~keyword:#valid-browsing-context-name-or-keyword
閲覧文脈に属する:#concept-document-bc
属する閲覧文脈:#concept-document-bc
属する文書:#concept-document-bc
	閲覧文脈を~close:#close-a-browsing-context
開いた閲覧文脈:#opener-browsing-context
~top-level閲覧文脈:#top-level-browsing-context

閲覧文脈~容器:#browsing-context-container
内容~文書:#concept-bcc-content-document
入子の閲覧文脈:#nested-browsing-context
入子にしている閲覧文脈:#nested-browsing-context
通して入子にされ:#browsing-context-nested-through

子~閲覧文脈:#child-browsing-context
文書~木に属する子~閲覧文脈:#document-tree-child-browsing-context
	文書~木に属する子~閲覧文脈の個数:#number-of-document-tree-child-browsing-contexts
子~閲覧文脈~list:#_list-of-the-child-browsing-contexts
子孫~閲覧文脈~list:#list-of-the-descendant-browsing-contexts
親~閲覧文脈:#parent-browsing-context
先祖:#ancestor-browsing-context
先祖~閲覧文脈:#ancestor-browsing-context

新たな閲覧文脈を作成する:#creating-a-new-browsing-context
直接到達可能:#directly-reachable-browsing-contexts
補助~閲覧文脈:#auxiliary-browsing-context
互いに関係する閲覧文脈~群:#unit-of-related-browsing-contexts
互いに関係するかつ生成元も類似する閲覧文脈~群:#unit-of-related-similar-origin-browsing-contexts

閲覧文脈~視野~生成元:#browsing-context-scope-origin
	閲覧文脈の作成-時にあてがわれたそれら:#about-blank-origin
閲覧文脈を選ぶ規則:#the-rules-for-choosing-a-browsing-context-given-a-browsing-context-name

作成元~閲覧文脈:#creator-browsing-context
作成元の生成元:#creator-origin
作成元の~URL:#creator-url
作成元の基底~URL:#creator-base-url
作成元の~referrer施策:#creator-referrer-policy

近しい:#familiar-with
作動中の文書:#active-document
閲覧文脈にて作動中の文書を設定する:#set-the-active-document
作動中:#active-document
文書~族:#document-family
全部的に作動中:#fully-active

	●WINDOW
対応する閲覧文脈:~WINDOW#_concept-window-bc
結付けられている文書:~WINDOW#concept-document-window
破棄され:~WINDOW#a-browsing-context-is-discarded
~window用に環境~設定群~objを設定しておく:~WINDOW#set-up-a-window-environment-settings-object

	●生成元／sandbox（origin.html

生成元:~ORIGIN#concept-origin
不透明な生成元:~ORIGIN#concept-origin-opaque
同一生成元:~ORIGIN#same-origin
同じ生成元~domain:~ORIGIN#same-origin-domain

v.allow-popups:~ORIGIN#attr-iframe-sandbox-allow-popups
v.allow-top-navigation:~ORIGIN#attr-iframe-sandbox-allow-top-navigation

作動中の~sandbox法~flag集合:~ORIGIN#active-sandboxing-flag-set
~popup~sandbox法~flag集合:~ORIGIN#popup-sandboxing-flag-set
sbox.非~利用者~作動化~top-level~navi:~ORIGIN#sandboxed-top-level-navigation-without-user-activation-browsing-context-flag
sbox.利用者~作動化~top-level~navi:~ORIGIN#sandboxed-top-level-navigation-with-user-activation-browsing-context-flag
sbox.~navi:~ORIGIN#sandboxed-navigation-browsing-context-flag
sbox.補助~navi:~ORIGIN#sandboxed-auxiliary-navigation-browsing-context-flag
~sandboxは補助~閲覧文脈に伝播する~flag:~ORIGIN#sandbox-propagates-to-auxiliary-browsing-contexts-flag
文書~用に~sandbox法を実装する:~ORIGIN#implement-the-sandboxing
許可-済み~navigator:~ORIGIN#one-permitted-sandboxed-navigator

	●history
~session履歴:~HISTORY#session-history

	●NAVI
~navigate:~NAVI#navigate
~navi:~NAVI#navigate
置換~可能化~flag:~NAVI#replacement-enabled

	●INFRA
~ASCII大小無視:~INFRA#ascii-case-insensitive
~ASCII小文字~化する:~INFRA#ascii-lowercase

	●HTMLINFRA
doc.基底~URL:~HTMLurl#document-base-url
文書から除去され:~HTMLINFRA#remove-an-element-from-a-document
jA.StructuredSerializeForStorage:~HTMLcloning#structuredserializeforstorage

	●WAPI
現在の設定群~obj:~WAPI#current-settings-object
関連する設定群~obj:~WAPI#relevant-settings-object
関連する大域~obj:~WAPI#concept-relevant-global
~event-loop:~WAPI#event-loop
enV.生成元:~WAPI#concept-settings-object-origin
enV.実行~準備済み~flag:~WAPI#concept-environment-execution-ready-flag

	●URL1
~URLを直列化する:~URL1#concept-url-serializer

	●
jA.InitializeHostDefinedRealm():~TC39#sec-initializehostdefinedrealm
jA.OrdinaryDefineOwnProperty:~TC39#sec-ordinarydefineownproperty

~JS実行~文脈:~TC39#sec-execution-contexts
走っている~JS実行~文脈:~TC39#running-execution-context

doc.~referrer:~HTMLdom#the-document's-referrer
		'
doc.~referrer施策:~HTMLdom#concept-document-referrer-policy
文書~用に~allowX~flagを設定する:~HEembed#set-the-allow*-flags
読込後~taskは準備済み:~HTMLparsing#ready-for-post-load-tasks
完全に読込まれ:~HTMLparsing#completely-loaded
~load~eventを遅延する:~HTMLparsing#delay-the-load-event
利用者による作動化から誘発されて:~HTMLinteraction#triggered-by-user-activation

doc.種別:~DOM4#concept-document-type
doc.過去互換~mode:~DOM4#concept-document-quirks
doc.内容~型:~DOM4#concept-document-content-type
doc.~URL:~DOM4#concept-document-url

~node文書:~DOM4#concept-node-document
木~内にある:~DOM4#in-a-document
文書~木~内:~DOM4#in-a-document
木~順序:~DOM4#tree-order
接続されて:~DOM4#connected
~shadowも含む根:~DOM4#concept-shadow-including-root

●●trans_metadata
<p>
~THIS_PAGEは、~WHATWGによる HTML 仕様の
Loading Web pages 章の
<a href="~SPEC_URL">Browsing contexts</a>
節を日本語に翻訳したものです。
~PUB
</p>

</script>

<body>


<header>
	<hgroup>
<h1>閲覧文脈 — Browsing contexts</h1>
	</hgroup>

</header>

<hr>

<main id="MAIN" style="display:none;">

	<section id="browsers">
<h1 title="Loading Web pages">7. Web ページの読み込み</h1>

<p>
この節は、~Web~browserに最も直接的に適用される特色機能を述べる。
とは言え，~web~browserかどうかにかかわらず、この節に定義される要件は，<em>すべての~UA</em>に適用される
— 他が指定されない限り。
◎
This section describes features that apply most directly to Web browsers. Having said that, except where specified otherwise, the requirements defined in this section do apply to all user agents, whether they are Web browsers or not.
</p>

		<section id="_conventions">
<h2>【この訳に固有の表記規約】</h2>

<p>
この訳の，~algoや定義の記述に利用されている各種記号（ ~LET, ~IF, ε, 此れ, ~THROW 等々）の意味や定義の詳細は，~SYMBOL_DEF_REFを~~参照されたし。
</p>

		</section>
		<section id="windows">
<h2 title="Browsing contexts">7.1. 閲覧文脈</h2>

<p>
`閲覧文脈@
とは、利用者~向けに`文書$を呈示する環境である。
◎
A browsing context is an environment in which Document objects are presented to the user.
</p>

<p class="note">注記：
~Web~browser内の［
~tab／~window
］は、概して`閲覧文脈$を包含する。
［
`iframe$e ／ `frameset$e
］内の `frame$e も同様である。
◎
A tab or window in a Web browser typically contains a browsing context, as does an iframe or frames in a frameset.
</p>

<p>
各 `閲覧文脈$は、対応する `WindowProxy$I ~objを持つ。
◎
A browsing context has a corresponding WindowProxy object.
</p>

<p>
各 `閲覧文脈$は、`~session履歴$を持つ。
それは、`閲覧文脈$が呈示-［
した／している／することになる
］`文書$たちからなる。
◎
A browsing context has a session history, which lists the Document objects that the browsing context has presented, is presenting, or will present.＼
</p>

<p>
`閲覧文脈$ %B にて
`作動中の文書@
は、
%B の `WindowProxy$I ~objの `Window$sl 内部~slot値に`結付けられている文書$である。
◎
A browsing context's active document is its WindowProxy object's [[Window]] internal slot value's associated Document.＼
</p>

<p>
`文書$ %文書 が
`属する閲覧文脈@
は、次を満たす`閲覧文脈$ %B は［
在るならば それ ／
無いならば ε
］とする
⇒
［
%B は`破棄され$ていない
］~AND［
%B の`~session履歴$を成すある~entryの文書 ~EQ %文書
］
【同じ文書が複数の~session履歴に含まれることはないので、 %B は一意に定まる。】
◎
A Document's browsing context is the browsing context whose session history contains the Document, if any such browsing context exists and has not been discarded.
</p>

<div class="note">

<p>注記：
一般に，`~window$から`閲覧文脈に属する$`文書$へは一対一に対応するが、例外が 2 つある：
◎
In general, there is a 1-to-1 mapping from the Window object to the Document object, as long as the Document object has a browsing context. There are two exceptions.＼
</p>

<ul>
	<li>
一つは、`~window$は，同じ`閲覧文脈$内で 2 番目の`文書$を呈示するために再利用されることもあり、その場合，対応関係は一対二になる†。
これは、［
`置換~可能化~flag$ ~SET ~ON
］の下で，`閲覧文脈$が初期 `about_blank$sc `文書$から別の文書へ`~navigate$されるときに生じる。
◎
First, a Window can be reused for the presentation of a second Document in the same browsing context, such that the mapping is then 1-to-2. This occurs when a browsing context is navigated from the initial about:blank Document to another, with replacement enabled.＼
</li>
	<li>
もう一つは、 `document.open()$m ~methodが利用される結果として，いくつかの`~window$間で同じ`文書$が再利用される††こともある
— この場合、対応関係は多対一になる。
◎
Second, a Document can end up being reused for several Window objects when the document.open() method is used, such that the mapping is then many-to-1.
</li>
</ul>

<p class="trans-note">【†
この一対二は，異なる時点も含めてのことであり、任意のある時点では，一義的に対応する
— そのため、仕様の記述では、文書と~windowは，他の~objとの~~関係を述べるときに同一視されることも多い
— 例えば “~windowの閲覧文脈” は、実際には
“~windowに結付けられている文書が属する閲覧文脈”
の略記である（そう解釈する下で，和訳している）。
】【††
再利用されると言っても、文書の内容は ~openした資源で一新される。
】</p>

</div>

<p class="note">注記：
`文書$は必ずしも`閲覧文脈$に属するとは限らない。
特に，~data集析~toolは、およそ閲覧文脈を~instance化することはないであろう。
`createDocument()$m などの ~APIを利用して作成された`文書$は、`閲覧文脈に属する$ことは決してない。
また、 `iframe$e 要素に対し作成された`文書$があって，後にその要素が`文書から除去され$たときは、その文書が`属する閲覧文脈$は`破棄され$，文書が`属する閲覧文脈$は ε になる。
◎
A Document does not necessarily have a browsing context associated with it. In particular, data mining tools are likely to never instantiate browsing contexts. A Document created using an API such as createDocument() never has a browsing context. And the Document originally created for an iframe element, which has since been removed from the document, has no associated browsing context, since that browsing context was discarded.
</p>

<p>
`閲覧文脈にて作動中の文書を設定する@
ときは、所与の
( `閲覧文脈$ %B, `文書$ %文書, `~window$ %~window （省略時は ε ） )
に対し，次を走らす：
◎
To set the active document of a browsing context browsingContext to a Document object document, optionally with a Window object window, run these steps:
</p>

<ol>
	<li>
<p>
~IF［
%~window ~EQ ε
］
⇒
%~window ~SET %文書 に`関連する大域~obj$
◎
If window is not given, let window be document's relevant global object.
</p>

<p class="XXX">
この標準によれば、
%文書 は， %~window より前に作成され得る
— それは理にかなっているとは言い難い。
<a href="https://github.com/whatwg/html/issues/2688">issue #2688</a>
を見よ。
◎
Per this standard document can be created before window, which does not make much sense. See issue #2688.
</p>
	</li>
	<li>
%B の `WindowProxy$I の `Window$sl 内部~slot値 ~SET %window
◎
Set browsingContext's WindowProxy object's [[Window]] internal slot value to window.
</li>
	<li>
%window に`結付けられている文書$ ~SET %文書
◎
Set window's associated Document to document.
</li>
	<li>
%~window に`関連する設定群~obj$の`実行~準備済み~flag$enV ~SET ~ON
◎
Set window's relevant settings object's execution ready flag.
</li>
</ol>

<hr>

<p>
`閲覧文脈$ %B の
`作成元~閲覧文脈@
とは、 %B の作成を担当していたとされる`閲覧文脈$であり，次で定義される：
◎
A browsing context can have a creator browsing context, the browsing context that was responsible for its creation.＼
</p>

<ol>
	<li>
%B の`親~閲覧文脈$ ~NEQ ε ならば、それ。
◎
If a browsing context has a parent browsing context, then that is its creator browsing context.＼
</li>
	<li>
他の場合， %B を`開いた閲覧文脈$ ~NEQ ε ならば、それ。
◎
Otherwise, if the browsing context has an opener browsing context, then that is its creator browsing context.＼
</li>
	<li>
他の場合、 ε。
◎
Otherwise, the browsing context has no creator browsing context.
</li>
</ol>

<p>
`閲覧文脈$ %B の`作成元~閲覧文脈$ %作成元 ~NEQ ε ならば、
%B には次のものが結付けられる（ %作成元 ~EQ ε の場合、これらは いずれも ε とする）。
以下における %作成元~文書 は %B の作成-時に %作成元 にて`作動中の文書$であった`文書$とする：
◎
If a browsing context context has a creator browsing context creator, it also has the following properties. In what follows, let creator document be creator's active document at the time context is created:
</p>

<dl class="def-list">
	<dt>`作成元の生成元@</dt>
	<dd>
%作成元~文書 の`生成元$
◎
creator document's origin
</dd>

	<dt>`作成元の~URL@</dt>
	<dd>
%作成元~文書 の`~URL$doc
◎
creator document's URL
</dd>

	<dt>`作成元の基底~URL@</dt>
	<dd>
%作成元~文書 の`基底~URL$doc
◎
creator document's base URL
</dd>

	<dt>`作成元の~referrer施策@</dt>
	<dd>
%作成元~文書 の`~referrer施策$doc
◎
creator document's referrer policy
</dd>

</dl>



<p class="algo-head">
`新たな閲覧文脈を作成する@
ときは、所与の
( 真偽値 %noopener （省略時は ~F） )
に対し，次を走らす：
◎
To create a new browsing context, optionally given noopener:
• If noopener was not given, let it be false.
</p>

<ol>
	<li>
%B ~LET 新たな`閲覧文脈$
◎
Let browsingContext be a new browsing context.
</li>
	<li>
%window ~LET 新たな`~window$ ~obj
◎
↓</li>
	<li>
%windowProxy ~LET 新たな `WindowProxy$I ~obj
◎
↓</li>
	<li>
<p>
次のように~custom化する下で~JS `InitializeHostDefinedRealm()$jA 抽象~演算を~callする：
◎
Call the JavaScript InitializeHostDefinedRealm() abstract operation with the following customizations:
</p>
		<ul>
			<li>
大域~obj には %window を利用する
◎
For the global object, create a new Window object window.
</li>
			<li>
大域 `this^js 値 には %windowProxy を利用する
◎
For the global this value, use browsingContext's WindowProxy object.
</li>
		</ul>
	</li>
	<li>
<p>
%~realm実行~文脈 ~LET `走っている~JS実行~文脈$
◎
Let realm execution context be the running JavaScript execution context.
</p>

<p class="note">注記：
これは、前~段で作成した`~JS実行~文脈$になる。
◎
This is the JavaScript execution context created in the previous step.
</p>

	</li>
	<li>
%設定群~obj ~LET `~window用に環境~設定群~objを設定しておく$( %~realm実行~文脈 )
◎
Set up a window environment settings object with realm execution context, and let settingsObject be the result.
</li>
	<li>
<p>
%文書 ~LET 次のようにされた新たな`文書$：
◎
Let document be a new Document,＼
</p>

		<ul>
			<li>
`過去互換~mode$docにおいては
⇒
%文書 の`種別$doc ~SET `html^l
◎
marked as an HTML document in quirks mode,＼
</li>
			<li>
`内容~型$doc ~SET `text/html^l
◎
whose content type is "text/html", and＼
</li>
			<li>
即時に，`読込後~taskは準備済み$になる
◎
which is both ready for post-load tasks and＼
</li>
			<li>
即時に，`完全に読込まれ$る
◎
completely loaded immediately.
</li>
		</ul>
	</li>
	<li>
%文書 が次を満たすことを確保する
⇒
［
%文書 の子~nodeたちは 1 個の `html$e 要素 %html からなる
］~AND［
%html の子~nodeたちは 空の［
`head$e 要素, `body$e 要素
］からなる
］
◎
Ensure that document has a single child html node, which itself has two empty child nodes: a head element, and a body element.
</li>
	<li>
`閲覧文脈にて作動中の文書を設定する$( %B, %文書 )
◎
Set the active document of browsingContext to document.
</li>
	<li id="about-blank-origin">
<p>
~IF［
%B の`作成元~閲覧文脈$ ~NEQ ε
］
⇒
%文書 の
⇒＃
`生成元$ ~SET %B の`作成元の生成元$,
`~referrer$doc ~SET `~URLを直列化する$( %B の`作成元の~URL$ ),
`~referrer施策$doc ~SET %B の`作成元の~referrer施策$
</p>

<p>
~ELSE
⇒
%文書 の`生成元$ ~SET `不透明な生成元$
</p>

◎
Set the origin of document:
• If browsingContext has a creator browsing context, then the origin of document is the creator origin.
• Otherwise, the origin of document is a unique opaque origin.
◎
If browsingContext has a creator browsing context, then set document's referrer to the serialization of creator URL.
◎
If browsingContext has a creator browsing context, then set document's referrer policy to the creator referrer policy.
</li>
	<li>
`文書~用に~sandbox法を実装する$( %文書, %B )
◎
Implement the sandboxing for document.
</li>
	<li>
`文書~用に~allowX~flagを設定する$( %文書, %B )
◎
Set the allow* flags for document.
</li>
	<li>
%B の`~session履歴$に %文書 を追加する
◎
Add document to browsingContext's session history.
</li>
	<li id="copy-session-storage">
<!--
NOTE: Clean up this logic in the future. SessionStorage ownership is unclear.
https://github.com/whatwg/html/pull/2832#issuecomment-315239343
-->
~IF［
%noopener ~EQ ~F
］~AND［
%B は`~top-level閲覧文脈$である
］~AND［
( %B の`作成元の生成元$, %文書 の`生成元$ )
は`同一生成元$である
］
⇒
%B の`作成元~閲覧文脈$から［
%B の`作成元の生成元$に属する `sessionStorage$m ~storage区画
］を［
%B の~session~storage区画の集合
］に複製する
⇒
これらの区画は、別々の, ［
いかなる仕方でも互いに影響しないもの
］と見なされ~MUST。
◎
If noopener is false, browsingContext is a top-level browsing context, and creator origin is same origin with document's origin, then copy the sessionStorage storage area of the creator origin from the creator browsing context into browsingContext's set of session storage areas. These areas must be considered separate, not affecting each other in any way.
</li>
	<li>
~RET %B
◎
Return browsingContext.
</li>
</ol>


			<section id="nested-browsing-contexts">
<h3 title="Nested browsing contexts">7.1.1. 入子の閲覧文脈</h3>


<p>
ある種の要素（例えば `iframe$e 要素）は、更に`閲覧文脈$を~instance化し得る。
そのような要素 %要素 は
`閲覧文脈~容器@
と呼ばれる。
◎
Certain elements (for example, iframe elements) can instantiate further browsing contexts. These elements are called browsing context containers.
</p>

<p>
`閲覧文脈~容器$ %要素 が
`入子にしている閲覧文脈@
は、`閲覧文脈$または ~NULL とする。
~NULL でない場合：
◎
Each browsing context container has a nested browsing context, which is either a browsing context or null.
</p>

<div class="p">
<ul>
	<li>
そのような`閲覧文脈$ %B は`入子の閲覧文脈$である，ともいう。
</li>
	<li>
%B は %要素 を
`通して入子にされ@
ているともいう。
%要素 の`~node文書$を %文書 とするとき、
%B は %文書 を`通して入子にされ$ているともいう。
</li>
</ul>

<p class="trans-note">【
ある要素が`入子にしている閲覧文脈$が，別の要素のそれと同じになることはない。
】</p>

◎
If a browsing context is the nested browsing context of a browsing context container, then the browsing context is said to be nested through the browsing context container's node document.
</div>


<p>
`閲覧文脈$ %子 が別の`閲覧文脈$ %親 の
`子~閲覧文脈@
であるとは、次をすべて満たす`閲覧文脈~容器$ %要素 が在ることをいう：
◎
A browsing context child is said to be a child browsing context of another browsing context parent, if all of the following conditions hold:
</p>

<ul>
	<li>
%子 ~EQ %要素 が`入子にしている閲覧文脈$
◎
child is a nested browsing context of a browsing context container element
</li>
	<li>
%要素 は`接続されて$いる
◎
element is connected
</li>
	<li>
%親 ~EQ %要素 の`~shadowも含む根$が`属する閲覧文脈$
◎
element's shadow-including root's browsing context is parent
</li>
</ul>

<!-- 従って、 親~子~関係は、入子より強い -->

<p>
上の条件に加えて， %要素 は`文書~木~内$にあるならば、
%子 は %親 の`文書~木に属する子~閲覧文脈@
であるという。
◎
A browsing context child is then a document-tree child browsing context of parent if it is a child browsing context and its browsing context container is not just connected, but also in a document tree.
</p>


<p>
`閲覧文脈$ %子 がある %親 の`子~閲覧文脈$であるならば、そのような %親 は一意に定まる。
この %親 を指して， %子 の
`親~閲覧文脈@
という。
そのような %親 は無いならば、
%子 の`親~閲覧文脈$ ~EQ ε （存在しない）と定義される。
◎
A browsing context child may have a parent browsing context. This is the unique browsing context that has child as a child browsing context, if any such browsing context exists. Otherwise, the browsing context has no parent browsing context.
</p>


<div class="p">
<p>
`閲覧文脈$ %A, %B が次のいずれかを満たすとき、
%A は %B の
`先祖@
であるという：
</p>

<ul ><li>%A は %B の`親~閲覧文脈$である
</li><li>%A は %B の ある`先祖$の`親~閲覧文脈$である
</li></ul>

◎
A browsing context A is said to be an ancestor of a browsing context B if there exists a browsing context A' that is a child browsing context of A and that is itself an ancestor of B, or if the browsing context A is the parent browsing context of B.
</div>


<p>
`入子の閲覧文脈$でない`閲覧文脈$ %B の`親~閲覧文脈$は ε である。
このとき、 %B は，［
%B を`先祖$とするような閲覧文脈
］すべての
`~top-level閲覧文脈@
になる。
◎
A browsing context that is not a nested browsing context has no parent browsing context, and is the top-level browsing context of all the browsing contexts for which it is an ancestor browsing context.
</p>

<p class="trans-note">【
“`~top-level閲覧文脈$である”
ことに`子~閲覧文脈$の存在が要求されるわけではない。
~top-level閲覧文脈 %B 自身の~top-level閲覧文脈も %B である。
（例えば`補助~閲覧文脈$）
】</p>

<p>
`閲覧文脈$に対する，非 ε の`親~閲覧文脈$による推移閉包
【親を順々に辿って得られる先祖たち】
は、`先祖~閲覧文脈$の~listを成す。
◎
The transitive closure of parent browsing contexts for a browsing context that is a nested browsing context gives the list of ancestor browsing contexts.
</p>



<p class="algo-head">
`文書$ %文書 の
`子孫~閲覧文脈~list@
は、次の~algoが返す有順序~listで与えられる：
◎
The list of the descendant browsing contexts of a Document d is the (ordered) list returned by the following algorithm:
</p>


<ol>
	<li>
%~list ~LET 空~list
◎
Let list be an empty list.
</li>
	<li>
<p>
%文書 `木~内にある$
~EACH( `閲覧文脈~容器$ %C )
に対し，`木~順序$で：
◎
For each child browsing context of d that is nested through an element that is in the Document d, in the tree order of the elements nesting those browsing contexts, run these substeps:
</p>
		<ol>
			<li>
%B ~LET %C が`入子にしている閲覧文脈$
◎
↑</li>
			<li>
~Assert：
%B は`子~閲覧文脈$である
◎
↑</li>
			<li>
%~list の末尾に %B を付加する
◎
Append that child browsing context to the list list.
</li>
			<li>
%B にて`作動中の文書$の`子孫~閲覧文脈~list$を成す
~EACH( %子孫 )
に対し
⇒
%~list の末尾に %子孫 を付加する
◎
Append the list of the descendant browsing contexts of the active document of that child browsing context to the list list.
</li>
		</ol>
	</li>
	<li>
~RET %~list
◎
Return the constructed list.
</li>
</ol>


<p>
`作動中の文書$は、自身が`属する閲覧文脈$ %B が次を満たすならば，
`全部的に作動中@
であるという：
◎
A Document is said to be fully active when it has a browsing context and it is the active document of that browsing context, and＼
</p>

<ul >
	<li>
%B は`~top-level閲覧文脈$であるか，または
◎
either its browsing context is a top-level browsing context, or＼
</li>
	<li>
［
%B の`親~閲覧文脈$ %P ~NEQ ε
］~AND［
%B は %P において`全部的に作動中$である文書を`通して入子にされ$ている
］
◎
it has a parent browsing context and the Document through which it is nested is itself fully active.
</li>
</ul>

<p>
`子~閲覧文脈$ %B は，要素に結付けられるので、常にその`親~閲覧文脈$に属する特定の`文書$ %文書 に束ねられる。
~UAは、 %文書 が`全部的に作動中$でない下では、<!-- ＊ -->利用者による %B とのやりとりを許容しては~MUST_NOT。
◎
Because they are associated with an element, child browsing contexts are always tied to a specific Document in their parent browsing context. User agents must not allow the user to interact with child browsing contexts of elements that are in Documents that are not themselves fully active.
</p>


<p>
`入子の閲覧文脈$は、
`~load~event遅延~中~mode@
下に置かれ得る。
この~modeは、`~navigate$に際して新たな`文書$が作成される前に，その`閲覧文脈~容器$向けの`~load~eventを遅延する$ために利用される。
◎
A browsing context that is a nested browsing context can be put into a delaying load events mode. This is used when it is navigated, to delay the load event of its browsing context container before the new Document is created.
</p>

<p>
`閲覧文脈$ %B の
`文書~族@
は、［
%B の`~session履歴$内にある`文書$
］すべてと, ［
それらの各`文書$の`文書~族$
］すべての和集合からなる。
`文書$ %文書 の`文書~族$は、［
%文書 を`通して入子にされ$ている各 `閲覧文脈$の`文書~族$
］すべての和集合からなる。
◎
The document family of a browsing context consists of the union of all the Document objects in that browsing context's session history and the document families of all those Document objects. The document family of a Document object consists of the union of all the document families of the browsing contexts that are nested through the Document object.
</p>

<p class="algo-head">
`閲覧文脈~容器$ %C の
`内容~文書@
は、次の~algoの結果で与えられる：
◎
The content document of a browsing context container container is the result of the following algorithm:
</p>

<ol>
	<li>
%B ~LET %C が`入子にしている閲覧文脈$
◎
↓</li>
	<li>
~IF［
%B ~EQ ~NULL
］
⇒
~RET ~NULL
◎
If container's nested browsing context is null, then return null.
◎
Let context be container's nested browsing context.
</li>
	<li>
%文書 ~LET %B にて`作動中の文書$
◎
Let document be context's active document.
</li>
	<li>
~IF［
( %文書 の`生成元$, `現在の設定群~obj$により指定される`生成元$enV )
は`同じ生成元~domain$でない
］
⇒
~RET ~NULL
◎
If document's origin and the origin specified by the current settings object are not same origin-domain, then return null.
</li>
	<li>
~RET %文書
◎
Return document.
</li>
</ol>




				<section id="navigating-nested-browsing-contexts-in-the-dom">
<h4 title="Navigating nested browsing contexts in the DOM">7.1.1.1. ~DOMにおける入子の閲覧文脈の~navigate法</h4>

<dl class="domintro">
	<dt>%window . `top$m</dt>
	<dd>
`~top-level閲覧文脈$の `WindowProxy$I を返す。
◎
Returns the WindowProxy for the top-level browsing context.
</dd>

	<dt>%window . `parent$m</dt>
	<dd>
`親~閲覧文脈$の `WindowProxy$I を返す。
◎
Returns the WindowProxy for the parent browsing context.
</dd>

	<dt>%window . `frameElement$m</dt>
	<dd>
`閲覧文脈~容器$に対する `Element$I を返す。
◎
Returns the Element for the browsing context container.
</dd>
	<dd>
そのようなものがない, または
“非同一生成元 状況”
にある場合、 ~NULL を返す。
◎
Returns null if there isn't one, and in cross-origin situations.
</dd>
</dl>

<dl class="idl-def">
	<dt>`top@m</dt>
	<dd>
<p>
取得子は、次を走らせ~MUST：
◎
The top IDL attribute, on getting, must run the following algorithm:
</p>

		<ol>
			<li>
%B ~LET 此れに`対応する閲覧文脈$
◎
↓</li>
			<li>
~IF［
%B ~EQ ε
］
⇒
~RET ~NULL
◎
Let windowProxy be this Window object's WindowProxy object.
◎
If there is no browsing context with windowProxy as its WindowProxy object, then return null.
◎
Let context be that browsing context.
</li>
			<li>
~RET %B の`~top-level閲覧文脈$の `WindowProxy$I ~obj
◎
If context is a top-level browsing context, then return context's WindowProxy object.
◎
Otherwise, context must have a top-level browsing context (i.e. an ancestor browsing context with no parent browsing context). Return that top-level browsing context's WindowProxy object.
</li>
		</ol>
	</dd>

	<dt>`parent@m</dt>
	<dd>
<p>
取得子は、次を走らせ~MUST：
◎
The parent IDL attribute, on getting, must run the following algorithm:
</p>
		<ol>
			<li>
%B ~LET 此れに`対応する閲覧文脈$
◎
↓</li>
			<li>
~IF［
%B ~EQ ε
］
⇒
~RET ~NULL
◎
Let windowProxy be this Window object's WindowProxy object.
◎
If there is no browsing context with windowProxy as its WindowProxy object, then return null.
◎
Let context be that browsing context.
</li>
			<li>
~RET［
%B の`親~閲覧文脈$ ~NEQ ε ならば それ ／
~ELSE_ %B
］の `WindowProxy$I ~obj
◎
If context is a child browsing context of another browsing context parent, then return parent's WindowProxy object.
◎
Otherwise, context must be a top-level browsing context. Return context's WindowProxy object.
</li>
		</ol>
	</dd>

	<dt>`frameElement@m</dt>
	<dd>
<p>
取得子は、次を走らせ~MUST：
◎
The frameElement IDL attribute, on getting, must run the following algorithm:
</p>
		<ol>
			<li>
%B ~LET 此れに`対応する閲覧文脈$
◎
↓</li>
			<li>
~IF［
%B ~EQ ε
］
⇒
~RET ~NULL
◎
Let windowProxy be this Window object's WindowProxy object.
◎
If there is no browsing context with windowProxy as its WindowProxy object, then return null.
◎
Let context be that browsing context.
</li>
			<li>
~IF［
%B は`入子の閲覧文脈$でない
］
⇒
~RET ~NULL
◎
If context is not a nested browsing context, then return null.
</li>
			<li>
%C ~SET %B の`閲覧文脈~容器$
◎
Let container be context's browsing context container.
</li>
			<li>
~IF［
( %C の`~node文書$の`生成元$, `現在の設定群~obj$の`生成元$enV )
は`同じ生成元~domain$でない
］
⇒
~RET ~NULL
◎
If container's node document's origin is not same origin-domain with the current settings object's origin, then return null.
</li>
			<li>
~RET %C
◎
Return container.
</li>
		</ol>
	</dd>
</dl>



<div class="example">
<p>
これらの~IDL属性が ~NULL を返し得る例：
◎
An example of when these IDL attributes can return null is as follows:
</p>

<pre>
&lt;!DOCTYPE html&gt;
&lt;iframe&gt;&lt;/iframe&gt;

&lt;script&gt;
"use strict";
const %element = document.querySelector("iframe");
const %iframeWindow = %element.contentWindow;
%element.remove();

console.assert(%iframeWindow.top === null);
console.assert(%iframeWindow.parent === null);
console.assert(%iframeWindow.frameElement === null);
&lt;/script&gt;
</pre>

<p>
この例の %iframeWindow に対応する`閲覧文脈$は、
%element が文書から除去されたとき`破棄され$る。
◎
Here the browsing context corresponding to iframeWindow was discarded when element was removed from the document.
</p>

</div>


				</section>
			</section>
			<section id="auxiliary-browsing-contexts">
<h3 title="Auxiliary browsing contexts">7.1.2. 補助~閲覧文脈</h3>

<p>
新たな閲覧文脈を、要素を`通して入子にされ$ることなく，ある`~top-level閲覧文脈$に関係するように作成することも可能である。
そのような閲覧文脈は、
`補助~閲覧文脈@
と呼ばれる。
補助~閲覧文脈は、常に`~top-level閲覧文脈$である。
◎
It is possible to create new browsing contexts that are related to a top-level browsing context without being nested through an element. Such browsing contexts are called auxiliary browsing contexts. Auxiliary browsing contexts are always top-level browsing contexts.
</p>

<p>
`補助~閲覧文脈$ %B を作成させた`閲覧文脈$を指して、 %B を
`開いた閲覧文脈@
という
— そのようなものが無ければ、開いた閲覧文脈は ε とする。
◎
An auxiliary browsing context has an opener browsing context, which is the browsing context from which the auxiliary browsing context was created.
</p>

<p class="trans-note">【
おそらく， “補助~閲覧文脈である” と “開いた閲覧文脈 ~NEQ ε” は、論理的に等価になると思われる。
】</p>


				<section id="navigating-auxiliary-browsing-contexts-in-the-dom">
<h4 title="Navigating auxiliary browsing contexts in the DOM">7.1.2.1. ~DOMにおける補助~閲覧文脈の~navigate法</h4>

<p>
各`閲覧文脈$には
`未所有化~flag@
が結付けられ、初期~時には ~OFF とする。
それは、`補助~閲覧文脈$のみに影響する。
◎
An auxiliary browsing context can be disowned.
</p>

<p class="trans-note">【
未所有化
— 原文の動詞 “disown” は、この訳では，状態を表す~flagに対する操作で表現することにする。
】</p>

<p class="idl-def">
`Window$I 上の
`opener@m
属性は：
◎
↓</p>

<ul>
	<li>
<p>
取得子は、次を走らせ~MUST：
◎
The opener attribute's getter, must run these steps:
</p>
		<ol>
			<li>
%B ~LET 此れに`対応する閲覧文脈$
◎
↓</li>
			<li>
~IF［
%B の`未所有化~flag$ ~EQ ~ON
］
⇒
~RET ~NULL
◎
If the current browsing context is disowned, then return null.
</li>
			<li>
%B ~SET %B を`開いた閲覧文脈$
◎
↓</li>
			<li>
~RET ［
%B ~EQ ε ならば ~NULL ／
~ELSE_ %B の `WindowProxy$I ~obj
］
◎
If the current browsing context has no opener browsing context, then return null.
◎
Return the current browsing context's opener browsing context's WindowProxy object.
</li>
		</ol>
	</li>
	<li>
<p>
設定子は、次を走らせ~MUST：
◎
The opener attribute's setter, must run these steps:
</p>
		<ol>
			<li>
%B ~LET 此れに`対応する閲覧文脈$
◎
↓</li>
			<li>
~IF［
所与の値 ~EQ ~NULL
］
⇒＃
%B の`未所有化~flag$ ~SET ~ON；
~RET
◎
If the given value is null, then disown the current browsing context and return.
</li>
			<li>
~RET 次を~callした結果（例外投出あり）
⇒
`OrdinaryDefineOwnProperty$jA(
此れ,
`opener^l,
{
`Value^sl: 所与の値,
`Writable^sl: ~T,
`Enumerable^sl: ~T,
`Configurable^sl: ~T
}
)
◎
Return the result of calling OrdinaryDefineOwnProperty(this Window object, "opener", { [[Value]]: the given value, [[Writable]]: true, [[Enumerable]]: true, [[Configurable]]: true }). Rethrow any exceptions.
</li>
		</ol>
	</li>
</ul>

<div class="note">

<p>注記：
`閲覧文脈$ %B の`未所有化~flag$ が ~ON にされて以降は、対応する`~window$の `opener$m 属性は ~NULL になる。
その結果， %B 内の~scriptは、 %B を`開いた閲覧文脈$の`~window$（すなわち， %B を作成した`~window$）のどの~propも変更できなくなる。
◎
If a browsing context is disowned, its window.opener attribute is null. That prevents scripts in the browsing context from changing any properties of its opener browsing context's Window object (i.e., the Window object from which the browsing context was created).
</p>

<p>
%B の`未所有化~flag$が ~OFF のままである場合、
%B 内の~scriptは `~window$の `opener$m を利用して， %B を`開いた閲覧文脈$（ ~NEQ ε とする）の`~window$の~propを変更できる。
例えば、 %B 内で走っている~scriptは、 `window.opener.location^m の値を変更して，`開いた閲覧文脈$をまったく別の文書に~navigateできる。
◎
Otherwise, if a browsing context is not disowned, then scripts in that browsing context can use window.opener to change properties of its opener browsing context's Window object. For example, a script running in the browsing context can change the value of window.opener.location, causing the opener browsing context to navigate to a completely different document.
</p>
</div>


				</section>
			</section>
			<section id="security-nav">
<h3 title="Security">7.1.3. 保安</h3>

<p id="security-1">
所与の`閲覧文脈$ %A, %B に対し，
%A が %B に
`近しい@
（ “ %A is familiar with %B ” ）とは、次のいずれかが満たされることを意味する：
◎
A browsing context A is familiar with a second browsing context B if one of the following conditions is true:
</p>

<ul>
	<li>
( %A にて`作動中の文書$の`生成元$, %B にて`作動中の文書$の`生成元$ )
は`同一生成元$である
◎
Either the origin of the active document of A is the same as the origin of the active document of B, or
</li>
	<li>
%A の`~top-level閲覧文脈$ ~EQ %B
◎
The browsing context A is a nested browsing context with a top-level browsing context, and its top-level browsing context is B, or
</li>
	<li>
［
%B は`補助~閲覧文脈$である
］~AND［
%A は %B を`開いた閲覧文脈$に`近しい$
］
◎
The browsing context B is an auxiliary browsing context and A is familiar with B's opener browsing context, or
</li>
	<li>
%B のある`先祖~閲覧文脈$ %X が存在して
⇒
%A にて`作動中の文書$の`生成元$, %X にて`作動中の文書$の`生成元$ )
は`同一生成元$である
◎
The browsing context B is not a top-level browsing context, but there exists an ancestor browsing context of B whose active document has the same origin as the active document of A (possibly in fact being A itself).
</li>
</ul>

<p class="trans-note">【
最初と最後の条件から、特に，［
%A ~EQ %B, または
%A は %B の`先祖~閲覧文脈$である
］ならば、
%A は %B に`近しい$ことになる。
】</p>


<hr>

<p class="algo-head">
所与の`閲覧文脈$ %A, %B に対し、次の手続きが ~T を返すならば，
%A は %B に対する
`~navigateは許容されて@
いるとされる：
◎
A browsing context A is allowed to navigate a second browsing context B if the following algorithm returns true:
</p>

<ol>
	<li>
~IF［
%A ~EQ %B
］
⇒
~RET ~T
◎
↓</li>
	<li>
%S ~LET［
%A にて`作動中の文書$
］の`作動中の~sandbox法~flag集合$
◎
↓</li>
	<li>
<p>
~RET［
次のいずれかが満たされるならば ~F ／
~ELSE_ ~T
］：
</p>
		<ul>
			<li>
［
%B は`~top-level閲覧文脈$ではない
］~AND［
%A は %B の`先祖~閲覧文脈$でない
］~AND［
`~navi$sbox ~IN %S
］
◎
If A is not the same browsing context as B, and A is not one of the ancestor browsing contexts of B, and B is not a top-level browsing context, and A's active document's active sandboxing flag set has its sandboxed navigation browsing context flag set, then return false.
</li>
			<li>
<p>
［
%B は %A の`~top-level閲覧文脈$である
］~AND［
次のいずれかが満たされる
］：
◎
Otherwise, if B is a top-level browsing context, and is one of the ancestor browsing contexts of A, then:
</p>
				<ul>
					<li>
［
この~algoは`利用者による作動化から誘発されて$いる
］~AND［
`利用者~作動化~top-level~navi$sbox ~IN %S
］
◎
If this algorithm is triggered by user activation and A's active document's active sandboxing flag set has its sandboxed top-level navigation with user activation browsing context flag set, then return false.
</li>
					<li>
［
この~algoは`利用者による作動化から誘発されて$いない
］~AND［
`非~利用者~作動化~top-level~navi$sbox ~IN %S
］
◎
Otherwise, if this algorithm is not triggered by user activation and A's active document's active sandboxing flag set has its sandboxed top-level navigation without user activation browsing context flag set, then return false.
</li>
				</ul>
			</li>
			<li>
［
%B は`~top-level閲覧文脈$である
］~AND［
%B は %A の`先祖~閲覧文脈$でない
］~AND［
`~navi$sbox ~NIN %S
］~AND［
%A は %B の`許可-済み~navigator$でない
］
◎
Otherwise, if B is a top-level browsing context, and is neither A nor one of the ancestor browsing contexts of A, and A's Document's active sandboxing flag set has its sandboxed navigation browsing context flag set, and A is not the one permitted sandboxed navigator of B, then return false.
◎
Return true.
</li>
		</ul>
	</li>
</ol>

<p class="trans-note">【
最初の 2 つの段は、 3 番目の段を簡潔に記すための，訳者による追加。
】【
論理的には、 %A が %B を~navigateする機会が生じ得ないような場合（ “互いに無縁な” 閲覧文脈など）も ~F を返すべきだが、不要なので省略されていると見られる。
】</p>


<hr>

<div class="p">
<p>
要素 %E の
`閲覧文脈~視野~生成元@
は、次を走らせた結果で与えられる：
</p>

<ol>
	<li>
%文書 ~LET %E の`~node文書$
</li>
	<li>
%B ~LET %文書 が`属する閲覧文脈$
</li>
	<li>
~IF［
%B ~EQ ε
］
⇒
~RET ε
</li>
	<li>
%生成元 ~LET %文書 の`生成元$
</li>
	<li>
%B の ~EACH ( `先祖~閲覧文脈$ %A ) に対し
⇒
~IF［
( %A にて`作動中の文書$の`生成元$, %生成元 )
は`同一生成元$でない
］
⇒
~RET ε
</li>
	<li>
~RET %生成元
</li>
</ol>

◎
An element has a browsing context scope origin if its Document's browsing context is a top-level browsing context or if all of its Document's ancestor browsing contexts all have active documents whose origin are the same origin as the element's node document's origin. If an element has a browsing context scope origin, then its value is the origin of the element's node document.
</div>

			</section>
			<section id="groupings-of-browsing-contexts">
<h3 title="Groupings of browsing contexts">7.1.4. 閲覧文脈の~group分け</h3>

<p>
所与の`閲覧文脈$ %A に対し，次のいずれかを満たす`閲覧文脈$ %B は、 %A から
`直接到達可能@
とされる：
◎
Each browsing context is defined as having a list of one or more directly reachable browsing contexts. These are:
</p>

<ul>
	<li>
%B ~EQ %A
◎
The browsing context itself.
</li>
	<li>
%B の`親~閲覧文脈$ ~EQ %A
◎
All the browsing context's child browsing contexts.
</li>
	<li>
%B ~EQ %A の`親~閲覧文脈$
◎
The browsing context's parent browsing context.
</li>
	<li>
%B を`開いた閲覧文脈$ ~EQ %A
◎
All the browsing contexts that have the browsing context as their opener browsing context.
</li>
	<li>
%B ~EQ %A を`開いた閲覧文脈$
◎
The browsing context's opener browsing context.
</li>
</ul>

<p class="trans-note">【
この関係は、反射律と対称律を満たす（そのことが明白になるよう，ここでは 原文を等価な形に言い換えている）。
】</p>

<p>
`直接到達可能$な関係による推移閉包は、
`互いに関係する閲覧文脈~群@
を形成する。
◎
The transitive closure of all the browsing contexts that are directly reachable browsing contexts forms a unit of related browsing contexts.
</p>

<p class="trans-note">【
すなわち、推移律も満たすように
— したがって，同値律を満たすように —
“直接到達可能” を拡張した関係に基づく，同値類。
】</p>


<p>
各 `互いに関係する閲覧文脈~群$は，更に、各~groupが次を満たすような，最も少数の~groupに分けられる
⇒
~groupのどの~memberも，その`作動中の文書$の`生成元$は，［
`document.domain$m 属性に対する適切な操作
］を通して，~groupの他の~memberにて`作動中の文書$のそれと`同じ生成元~domain$にできる一方で、他の~groupの~memberとは同じにできない。
◎
Each unit of related browsing contexts is then further divided into the smallest number of groups such that every member of each group has an active document with an origin that, through appropriate manipulation of the document.domain attribute, could be made to be same origin-domain with other members of the group, but could not be made the same as members of any other group.＼
</p>

<p>
そのような各~groupを
`互いに関係するかつ生成元も類似する閲覧文脈~群@
という。
◎
Each such group is a unit of related similar-origin browsing contexts.
</p>

<p class="trans-note">【
この定義が~well-definedになるためには，
“適切な操作〜”
が 対称律を満たす（可逆になる）必要があるが、それを確かめるためには，この仕様~全体を精査する必要がある。
おそらく、［
2 つの~memberが同じ~groupに属するのは、<em>両者</em> に対し ある適切な操作を施した結果が`同じ生成元~domain$になるとき
］と解釈されるべきに思われる（そう解釈すれば精査する必要もなくなる）。
】</p>


<p class="note">注記：
各 `互いに関係するかつ生成元も類似する閲覧文脈~群$ が持ち得る`~event-loop$は高々一つまでである（一方で、複数の`互いに関係するかつ生成元も類似する閲覧文脈~群$は，同じ`~event-loop$を共有し得る）。
◎
There is also at most one event loop per unit of related similar-origin browsing contexts (though several units of related similar-origin browsing contexts can have a shared event loop).
</p>



			</section>
			<section id="browsing-context-names">
<h3 title="Browsing context names">7.1.5. 閲覧文脈~名</h3>

<p>
各 `閲覧文脈$は、
`閲覧文脈~名@
を持つ。
他が言明されない限り，空~文字列とする（名前がないことを表す）。
◎
Browsing contexts can have a browsing context name. Unless stated otherwise, it is the empty string.
</p>

<p>
`妥当な閲覧文脈~名@
とは、［
空でない
］~AND［
最初の文字 ~NEQ `005F^U `_^smb
］を満たす文字列である。
（最初の文字 ~EQ `005F^U `_^smb なる文字列は、次に述べる特別な~keyword用に予約される。）
◎
A valid browsing context name is any string with at least one character that does not start with a U+005F LOW LINE character. (Names starting with an underscore are reserved for special keywords.)
</p>

<div class="p">
<p>
`妥当な閲覧文脈~名または~keyword@
とは、次のいずれかを満たす文字列である：
</p>
<ul>
	<li>
`妥当な閲覧文脈~名$である
</li>
	<li>
次のいずれかに`~ASCII大小無視$で合致する
⇒
`_blank^l, `_self^l, `_parent^l, `_top^l
</li>
</ul>

◎
A valid browsing context name or keyword is any string that is either a valid browsing context name or that is an ASCII case-insensitive match for one of: _blank, _self, _parent, or _top.
</div>

<p>
頁の “~link等” （
~link, ~script, ~form提出
等々）が指定する，`妥当な閲覧文脈~名または~keyword$ 値
— 以下，単に %名前 と記す —
は、頁が~sandbox化されているか否かに応じて、下の規範的でない
“表 A”
の 2 列目以降に要約されるような，それぞれに異なる意味を持つ：
◎
These values have different meanings based on whether the page is sandboxed or not, as summarized in the following (non-normative) table.＼
</p>

<div class="p">

<ul>
	<li>
表の 1 列目には、 %名前, および追加の条件が示される。
</li>
	<li>
<p>
表の 2 〜 4 列目
— ~~見出し［
“普通”,  “無”, “有”
］の列 —
は、表の 1 列目の条件の下で，どの`閲覧文脈$が~navigateされるかを与える：
</p>
		<ul>
			<li>
“普通” の列は、次項の
“無”, “有”
いずれにも該当しないときの効果を与える。
</li>
			<li>
［
“無” ／ “有”
］の列は、当の “~link等” が `iframe$e 内にあって,
その `iframe^e は `sandbox$a 属性を有していて,
その値に `allow-top-navigation$v ~keywordが［
無いとき ／ 有るとき
］の効果を与える。
</li>
		</ul>
	</li>
</ul>

<p class="trans-note">【
原文による表は、説明が省略され過ぎているので、この訳ではかなり加筆している。
】</p>

<p>
加えて、 “表 A” に利用される~~記号の意味を次の表に示す：
</p>

<table><thead><tr><th>記号
<th>意味
</thead>

<tbody><tr><td>`現^i<!-- current -->
<td>
%名前 を指定している “~link等” が所属している`文書$が`属する閲覧文脈$を指す。

<tr><td>`親^i<!-- parent -->
<td>
`現^i の`親~閲覧文脈$を指す。

<tr><td>`top^i
<td>
`現^i の`~top-level閲覧文脈$を指す。

<tr><td>`新^i<!-- new -->
<td>
新たな`~top-level閲覧文脈$（`補助~閲覧文脈$の場合もある）が作成されることを意味する。
これは、種々の［
利用者による選好／~UAによる施策
］の対象0になる。

<tr><td>`なし^i<!-- none -->
<td>
何も起きない（~navigateされる閲覧文脈はない）ことを意味する。

<tr><td>`新？^i<!-- maybe new -->
<td>
（ “無” ／ “有” の場合のみ）
`iframe^e の `sandbox$a 属性に `allow-popups$v ~keywordも指定されているならば `新^i と同じ。
他の場合は `なし^i と同じ（ただし，利用者が~sandbox法を上書きした（していた）場合は、 `新^i になり得る）。

</tbody></table>

◎
In this table, "current" means the browsing context that the link or script is in, "parent" means the parent browsing context of the one the link or script is in, "top" means the top-level browsing context of the one the link or script is in, "new" means a new top-level browsing context or auxiliary browsing context is to be created, subject to various user preferences and user agent policies, "none" means that nothing will happen, and "maybe new" means the same as "new" if the "allow-popups" keyword is also specified on the sandbox attribute (or if the user overrode the sandboxing), and the same as "none" otherwise.
</div>


<table id="_nav-table">
<caption>表 A</caption>

<thead><tr><th>
%名前, および追加の条件
<th>普通
<th>無
<th>有
</thead><tbody>
<!-- 
Keyword │ Ordinary effect │ Effect in an iframe with...
_______ │ ________ ______ │ sandbox="" │ allow-top-navigation
-->

<tr><td>
%名前 は指定されていない
◎
none specified, for links and form submissions
<td>`現^i
<td>`現^i
<td>`現^i

<tr><td>空~文字列
<td>`現^i
<td>`現^i
<td>`現^i

</tbody>

<tbody><tr><th colspan="4" scope="rowgroup">
以下、~keywordによる %名前 の場合

<tr><td>`_blank^l
<td>`新^i
<td>`新？^i
<td>`新？^i

<tr><td>`_self^l
<td>`現^i
<td>`現^i
<td>`現^i

<tr><td>
`_parent^l ~AND［
`親^i ~EQ ε
］
◎
_parent if there isn't a parent
<td>`現^i
<td>`現^i
<td>`現^i

<tr><td>
`_parent^l ~AND［
`親^i ~EQ `top^i
］
◎
_parent if parent is also top
<td>`親^i （ ~EQ `top^i ）◎ parent/top
<td>`なし^i
<td>`親^i◎ parent/top

<tr><td>
`_parent^l ~AND［
`親^i ~NIN { ε, `top^i }
］
◎
_parent if there is one and it's not top
<td>`親^i
<td>`なし^i
<td>`なし^i

<tr><td>
`_top^l ~AND［
`top^i ~EQ `現^i
］
◎
_top if top is current
<td>`現^i （ ~EQ `top^i ）
<td>`現^i
<td>`現^i

<tr><td>
`_top^l ~AND［
`top^i ~NEQ `現^i
］
◎
_top if top is not current
<td>`top^i
<td>`なし^i
<td>`top^i

</tbody>

<tbody><tr><th colspan="4" scope="rowgroup">
以下、非~keywordによる %名前 の場合
— 記号 %B は、 %名前 を`名前$とする`閲覧文脈$を表すとする。

<tr><td>
%B は存在しない
◎
name that doesn't exist
<td>`新^i
<td>`新？^i
<td>`新？^i

<tr><td>
%B は `現^i の子孫である
◎
name that exists and is a descendant
<td>%B◎ Ipecified descendant
<td>%B◎ specified descendant
<td>%B◎ specified descendant

<tr><td>
%B ~EQ `現^i
◎
name that exists and is current
<td>%B （ ~EQ `現^i ）
<td>%B
<td>%B

<tr><td>
［
%B は `現^i の先祖である
］~AND［
%B ~EQ `top^i
］
◎
name that exists and is an ancestor that is top
<td>%B （ ~EQ `top^i ）◎ specified ancestor
<td>`なし^i
<td>%B◎ specified ancestor/top

<tr><td>
［
%B は `現^i の先祖である
］~AND［
%B ~NEQ `top^i
］
◎
name that exists and is an ancestor that is not top
<td>%B◎ specified ancestor
<td>`なし^i
<td>`なし^i

<tr><td>
［
%B は上に該当しない
］~AND［
%B の`~top-level閲覧文脈$ ~EQ `top^i
］
◎
other name that exists with common top
<td>%B◎ specified
<td>`なし^i
<td>`なし^i

</tbody>

<tbody><tr><th colspan="4" scope="rowgroup">
以下、 %B の`~top-level閲覧文脈$ ~NEQ `top^i の場合

<tr><td>
［
%B は `現^i に`近しい$
］~AND［
`現^i は %B の`許可-済み~navigator$である
］
◎
name that exists with different top, if familiar and one permitted sandboxed navigator
<td>%B◎ specified
<td>%B◎ specified
<td>%B◎ specified

<tr><td>
［
%B は `現^i に`近しい$
］~AND［
`現^i は %B の`許可-済み~navigator$でない
］
◎
name that exists with different top, if familiar but not one permitted sandboxed navigator
<td>%B◎ specified
<td>`なし^i
<td>`なし^i

<tr><td>
［
%B は `現^i に`近しい$
］でない
◎
name that exists with different top, not familiar
<td>`新^i
<td>`新？^i
<td>`新？^i

</tbody></table>

<p class="tablenote"><small>
~sandbox化された閲覧文脈に対する制約のほとんどは、他の~algo
— 例えば `~navi$~algo —
により適用される。
`閲覧文脈を選ぶ規則$ではなく。
</small>
◎
Most of the restrictions on sandboxed browsing contexts are applied by other algorithms, e.g. the navigation algorithm, not the rules for choosing a browsing context given below.
</p>

<!-- 
Keyword 	Ordinary effect 	Effect in an iframe with...
sandbox="" 	sandbox="allow-top-navigation"
none specified, for links and form submissions 	current 	current 	current
empty string 	current 	current 	current
_blank 	new 	maybe new 	maybe new
_self 	current 	current 	current
_parent if there isn't a parent 	current 	current 	current
_parent if parent is also top 	parent/top 	none 	parent/top
_parent if there is one and it's not top 	parent 	none 	none
_top if top is current 	current 	current 	current
_top if top is not current 	top 	none 	top
name that doesn't exist 	new 	maybe new 	maybe new
name that exists and is a descendant 	specified descendant 	specified descendant 	specified descendant
name that exists and is current 	current 	current 	current
name that exists and is an ancestor that is top 	specified ancestor 	none 	specified ancestor/top
name that exists and is an ancestor that is not top 	specified ancestor 	none 	none
other name that exists with common top 	specified 	none 	none
name that exists with different top, if familiar and one permitted sandboxed navigator 	specified 	specified 	specified
name that exists with different top, if familiar but not one permitted sandboxed navigator 	specified 	none 	none
name that exists with different top, not familiar 	new 	maybe new 	maybe new

Most of the restrictions on sandboxed browsing contexts are applied by other algorithms, e.g. the navigation algorithm, not the rules for choosing a browsing context given a browsing context name given below.
-->

<hr>

<p class="algo-head">
`閲覧文脈を選ぶ規則@
は、所与の
( `閲覧文脈~名$ %名前, `閲覧文脈$ %現, 真偽値 %noopener )
に対し，次に従う：
◎
The rules for choosing a browsing context, given a browsing context name name, a browsing context current, and a boolean noopener are as follows:
</p>

<ol>
	<li>
%小文字~化~名 ~LET `~ASCII小文字~化する$( %名前 )
◎
↓</li>
	<li>
<p>
%結果 ~SET
%小文字~化~名 に応じて，次で与えられる閲覧文脈または ~NULL：
◎
Let chosen be null.
◎
Let new be false.
</p>

		<dl class="switch">
			<dt>空~文字列</dt>
			<dt>`_self^l</dt>
			<dd>
%現
◎
If name is the empty string or an ASCII case-insensitive match for "_self", then set chosen to current.
</dd>

			<dt>`_parent^l</dt>
			<dd>
%現 の`親~閲覧文脈$ ~NEQ ε ならば それ ／
~ELSE_ %現
◎
If name is an ASCII case-insensitive match for "_parent", then set chosen to current's parent browsing context, if any, and current otherwise.
</dd>

			<dt>`_top^l</dt>
			<dd>
%現 の`~top-level閲覧文脈$ ~NEQ ε ならば それ ／
~ELSE_ %現
◎
If name is an ASCII case-insensitive match for "_top", then set chosen to current's top-level browsing context, if any, and current otherwise.
</dd>

			<dt>`_blank^l</dt>
			<dd>
~NULL
</dd>

			<dt>その他</dt>
			<dd>
<p>
~IF［
次のいずれも満たすような閲覧文脈 %B は存在する
］…
</p>

<ul><li>%B の`名前$ ~EQ %名前
</li><li>%現 は %B に`近しい$
</li><li>~UAは， %現, %B が互いに到達してもよいほどに十分~関係すると決定した
</li></ul>

<p>
…ならば
⇒
そのような閲覧文脈のうちのいずれか
⇒
該当する %B が複数ある場合、~UAは，そのうち一つを［
何らかの，一貫した, 任意の方式
］で選定するべきである
— 例えば［
最も近過去に開いたもの ／
最も近過去に~focusされたもの ／
より近く関係するもの
］など。
</p>

<p>
~ELSE
⇒
~NULL
</p>

◎
If name is not an ASCII case-insensitive match for "_blank" and there exists a browsing context whose name is the same as name, and current is familiar with that browsing context, and the user agent determines that the two browsing contexts are related enough that it is ok if they reach each other, then set chosen to that browsing context. If there are multiple matching browsing contexts, the user agent should set chosen to one in some arbitrary consistent manner, such as the most recently opened, most recently focused, or more closely related.
</dd>
			<dd class="XXX">
これは、
<a href="https://github.com/whatwg/html/issues/1440">issue #1440</a>
にて，もっと精確に定められることになる。
◎
This will be made more precise in issue #1440.
</dd>
		</dl>
	</li>
	<li>
~IF［
%結果 ~NEQ ~NULL
］
⇒
~RET ( %結果, ~F )
◎
↑</li>
	<li>
~Assert：
新たな閲覧文脈が要請されている
— 何が起こるかは、~UAの環境設定と能に依存する
◎
Otherwise, a new browsing context is being requested, and what happens depends on the user agent's configuration and abilities — it is determined by the rules given for the first applicable option from the following list:
</li>
	<li>
%新 ~LET ~F
◎
↑↑</li>
	<li>
%~flag集合 ~LET［
%現 にて`作動中の文書$
］の`作動中の~sandbox法~flag集合$
◎
↓</li>
	<li id="popup-blocker">
~IF［
この~algoは、`利用者による作動化から誘発されて$いない
］~AND［
~UAは~popupを示さないよう環境設定されている（すなわち，~UAは “popup blocker” を可能化している）
］
⇒
~UAは、~popupを阻止したことを利用者に伝えてよい。
◎
If the algorithm is not triggered by user activation and the user agent has been configured to not show popups (i.e. the user agent has a "popup blocker" enabled)
• The user agent may inform the user that a popup has been blocked.
</li>
	<li id="sandboxWindowOpen">
<p>
~ELIF［
`補助~navi$sbox ~IN %~flag集合
］：
◎
If current's active document's active sandboxing flag set has the sandboxed auxiliary navigation browsing context flag set.
</p>
		<ol>
			<li>
<p>
~UAの任意選択で、利用者に，次の選択肢を提供する：
◎
The user agent may offer the user one of:
</p>
				<ul class="switch">
					<li>
新たな~top-level閲覧文脈
⇒＃
%結果 ~SET `新たな閲覧文脈を作成する$( %noopener ),
%新 ~SET ~T
◎
Set chosen to a new top-level browsing context given noopener, and set new to true.
</li>
					<li>
既存のものを再利用する
⇒
%結果 ~SET  既存の`~top-level閲覧文脈$
◎
Set chosen to an existing top-level browsing context.
</li>
					<li>
辞退する
</li>
				</ul>

<p class="warning">
この事例が生じた場合、~linkを開こうと試行している文書は，作者が明示的に~sandbox化していることを意味する。
◎
If this case occurs, it means that an author has explicitly sandboxed the document that is trying to open a link.
</p>

			</li>
		</ol>

<p class="note">注記：
利用者が辞退した場合／~UAが上の選択肢を提供しなかった場合、［
%結果, %新
］はそのままにされる。
◎
If the user declines or the user agent doesn't offer the above, the variables remain unchanged.
</p>
	</li>
	<li>
<p>
~ELIF［
~UAは新たな閲覧文脈を作成するように環境設定されている
］：
◎
If the user agent has been configured such that in this instance it will create a new browsing context:
</p>

		<ol>
			<li>
%結果 ~SET `新たな閲覧文脈を作成する$( %noopener )
◎
Set chosen to a new auxiliary browsing context given noopener＼
</li>
			<li>
%結果 は`補助~閲覧文脈$になるとする
⇒
%結果 を`開いた閲覧文脈$ ~SET %現
◎
with the opener browsing context being current, and＼
</li>
			<li>
%新 ~SET ~T
◎
set new to true.
</li>
			<li>
~IF［
%小文字~化~名 ~NEQ `_blank^l
］
⇒
%結果 の`名前$ ~SET %名前
◎
If name is not an ASCII case-insensitive match for "_blank", then chosen's name must be set to name.
</li>
		</ol>

<p class="note">注記：
新たに作成された`閲覧文脈$が即時に`~navigate$される場合、その~naviは，［
`置換~可能化~flag$ ~SET ~ON
］の下で行われることになる。
◎
If the newly created browsing context is immediately navigated, then the navigation will be done with replacement enabled.
</p>

	</li>
	<li>
~ELIF［
~UAは %現 を再利用するように環境設定されている
］
⇒
%結果 ~SET %現
◎
If the user agent has been configured such that in this instance it will reuse current
• Set chosen to current.
</li>
	<li>
<p>
~ELSE（ ~UAは閲覧文脈を見出さないように環境設定されている）
⇒
何もしない
◎
If the user agent has been configured such that in this instance it will not find a browsing context
• Do nothing.
</p>

<p class="note">注記：
~UAには、［
~UAが常に %現 を再利用するように環境設定する仕方
］を，利用者に供することが奨励される。
◎
User agents are encouraged to provide a way for users to configure the user agent to always reuse current.
</p>
	</li>
	<li>
<p>
~IF［
%新 ~EQ ~T
］：
◎
If new is true, then:
</p>
		<ol>
			<li>
~IF［
`~navi$sbox ~IN %~flag集合
］
⇒
%結果 の`許可-済み~navigator$ ~SET %現 
◎
Let flagSet be current's active document's active sandboxing flag set.
◎
If flagSet's sandboxed navigation browsing context flag is set, then current must be set as chosen's one permitted sandboxed navigator.
</li>
			<li>
~IF［
`~sandboxは補助~閲覧文脈に伝播する~flag$ ~IN %~flag集合
］
⇒
%結果 の`~popup~sandbox法~flag集合$に %~flag集合 内のすべての~flagを追加する
◎
If flagSet's sandbox propagates to auxiliary browsing contexts flag is set, then all the flags that are set in flagSet must be set in chosen's popup sandboxing flag set.
</li>
		</ol>
	</li>
	<li>
~RET ( %結果, %新 )
◎
Return chosen and new.
</li>
</ol>


			</section>
		</section>
		<section id="cross-origin-objects">
<h2 title="Security infrastructure for Window, WindowProxy, and Location objects">7.2. `Window^I, `WindowProxy^I, `Location^I ~obj用の保安~基盤</h2>

<p class="trans-note">【
この節の内容は、
<a href="~HTMLWPROXY#cross-origin-objects">別ページ</a>
にて。
】</p>


		</section>
	</section>
</main>
