<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<title>HTML Standard — Browsing contexts（日本語訳）</title>
<link rel="stylesheet" href="common.css" type="text/css" />
<link rel="stylesheet" href="common-whatwg.css" type="text/css" />
<style>

#_nav-table tr > *:first-child {
	max-width: 50vw;
}
</style>

<script src="common0.js" ></script>
<script src="common1.js" async></script>

<script>
Util.ready = function(){
	const source_data = {
		toc_main: 'browsers',
		generate: expand,
	};
	Util.switchWordsInit(source_data);
}

function expand(){

	const class_map = this.class_map;
	const tag_map = this.tag_map;
	const link_map = this.link_map;

	return this.html.replace(
		/%[\w~\-一-鿆あ-ん]+|`(.+?)([$@\^])(\w*)/g,
		create_html
	);

	function create_html(match, key, indicator, klass){

if(!key) {//%
	return `<var>${match.slice(1)}</var>`;
}

let text = key;
let href = '';

switch(klass){
case 'r':
	text = `[${key}]`;
	href = `HTML-references.html#refs${key}`;
	break;
case 'coop':
case 'coep':
case 'coI':
case 'l':
	text = `"<code class="literal">${text}</code>"`;
	break;
case 'm':
	const n = text.indexOf('(');
	if(n > 0){
		key = text.slice(0, n);
		text = key + text.slice(n).replace(/\w+/g, '<var>$&</var>');
	}
	break;
case 'sbox': // sandboxing flags
	text = `閲覧文脈~sandbox化( ${key} )~flag`;
	break;
case 'sl':
	text = `[[${key}]]`;
	break;
case 'bP': //
	text = `${key}<code>BarProp</code> ~obj`;
	break;
case 'U':
	text = `U+${key}`;
	break;
case 'smb':
	text = `(<span class="char-symbol">${text}</span>)`;
	break;
case 'en':
	return `<span lang="en-x-a0">${key}</span>`;
	break;
}

let tag = tag_map[klass];
if(tag) {
	let classname = class_map[klass];
	classname = classname ? ` class="${classname}"` : '';
	text = `<${tag}${classname}>${text}</${tag}>`;
}

if(indicator !== '^'){
	href = link_map[ klass ? `${klass}.${key}` : key ] || href;
	if(!href){
		console.log(match); // check error
		return match;
	}

	switch(indicator){
	case '$':
		text = `<a href="${href}">${text}</a>`;
		break;
	case '@':
		text = `<dfn id="${href.slice(1)}">${text}</dfn>`;
		break;
	}
}

return text;

	}
}

</script>

<script type="text/plain" id="_source_data">

●●options

spec_date:2021-01-12
trans_update:2021-01-13
source_checked:201119
page_state_key:HTML
spec_status:LS
original_url:https://html.spec.whatwg.org/multipage/browsers.html
	abbr_url:BROWSERS
site_nav:browsers,network,html
nav_prev:HTMLdnd
nav_next:WINDOW
trans_1st_pub:2016-07-12

●●class_map
e:element
a:attr
et:event-type
sc:scheme
E:error
h:header
sl:js-slot
jA:abstract
jv:js-value
U:code-point
v:value

●●tag_map
I:code
m:code
c:code
e:code
a:code
sc:code
et:code
h:code
E:code
sl:span
jA:span
jv:code
U:span
v:code
V:var
i:i


●●words_table

	●network／保安
navigator::::ナビゲータ
load:
flags:::flag 群:フラグ群
	~sandbox法:sandboxing
	許可-済み:permitted
	navigating

	●環境 ／ 閲覧
agent:
補助:auxiliary::~
近しい:familiar with:~
読込後:post-load::読み込み後
族:family::~
開いた:openした::~
閉中:is closing::閉じかけ
opener:::open 元
modal::::モーダル
	生成元が類似な:similar-origin
埋込元:embedder::埋め込み元
閲覧:browsing::~
履歴上の:historicalな:~
	生成元を~keyに:origin-keyed

	●型／構造／操作
shadow:
	作成-法:creating
作成元:creator::~
作成元の:creator::~
対応関係:mapping::~
和集合:union:~
推移閉包:transitive closure:~
	~group分け:grouping
弱い:weakな::~
倉:shed::~::シェッド
virtual:

	●処理一般
例外投出あり:rethrow any exceptions::~
存続期間:lifetime:~
作成時の:creation::~
切替n:switch:切替え

	遅延~中:delaying
	-:substeps
	終わらす:finish
	報告のみの:report-only
	報告-法:reporting

	●UI
popup:
tab::::タブ
一過:transient::~

	●仕様
必要十分:adequate:~
伝えて:informして:~
探求-:explore:~
	探求-:exploration
通過制御-:gate:~
特質:property:~:::プロパティ

	-:possibly
	この標準:The HTML Standard
	-:applicable:
	になることもある:not necessarily 〜 non-
	必ず:never 〜 non-
	とは言え:Having said that
	まずない:likely to never
	省略時は:optionally
	:per
	よい:ok
	よって、:as such
	それぞれが:their respective
	とすると:thus
	が，:however
	一度限り:only-gets〜once
	壊れやすい:brittle
	~~説明:illustrate
	〜結果:starts out
	選ぶ:choose する
	し易くする:help
	結果になる:end up
	まったく:completely
	無くなった:nothing 〜 anymore
	担う:responsible
	どの組み合わせもとり得る:various possibilities
	在る下では:in the presence of
	し続ける:keep
	課され:impose

	●未分類
未所有化:disowned::~
open:
	-:opener:
集析:mining::~::マイニング
近過去:recent:~


	having
	置かれ:put
	said
	束ねられ:tie
	切離す:sever する／Lose:切り離す
	srcdoc:
	表:table
	-:common
	^en:popup blocker
	最も近過去に:most recently
	最も小さい:smallest
	分ける:divide
	-:variable
	近く:closely
	as long as
	point
	noopener


	●指示語
現-:current:~
新-:new:~
ナシ:none:なし

	非:non
	末尾:end
	anything
	nothing
	次:next
	種々の:various
	この時点:at the point
	かつ:both
	後続して:subsequent

	●変数
	%A
	%B
	%B:browsingContext
	%E:-
	%~group:group
	%S:-
	%T:browsingContext
	%X:-
	%html:-
	%noopener:noopener
	%~window:window
	%~window種別:windowType
	%~agent:agent
	%coop:coop
	%~group
	%~list:list
	%~realm実行~文脈:realm execution context
	%~sandbox~flags:sandboxFlags
	%~sandbox法~flag集合:sandboxingFlagSet
	%~top-level作成時の~URL:topLevelCreationURL
	%~top-level生成元:topLevelOrigin
	%~url:url
	%~window:window
	%作動中の文書~navi生成元:activeDocumentNavigationOrigin
	%作成元:creator
	%入子な閲覧文脈:nestedBC
	%名前:name
	%名前:-
	%呼出n生成元:invocationOrigin
	%埋込元:embedder
	%子:-
	%容器:container
	%小文字~化~名:name
	%文書:document
	%文書:-
	%現-:current
	%現-文書:currentDocument
	%作成元:~creator:#4
	%~opener:opener
	%結果:chosen
	%結果:-
	%要素:element
	%親:-
	-:settingsObject
	%許可~施策:permissionsPolicy
	%~opener:opener
	%閲覧文脈:browsingContext


●●original_id_map
dom-window-frameelement:dom-frameelement
dom-window-opener:dom-opener
dom-window-parent:dom-parent
dom-window-top:dom-top
	number-of-document-tree-child-browsing-contexts:number-of-child-browsing-contexts
	serialized-state:state-object

●●words_table1
HTMLWPROXY:HTML-windowproxy-ja.html
about_blank:about:blank
about_srcdoc:about:srcdoc

●●link_map

	●IDL Interface/Dictionary
I.Document:~HTMLdom#document
I.Element:~DOM4#interface-element
I.Window:~WINDOW#window
I.WindowProxy:~WINDOW#windowproxy

	●Error
	E.SyntaxError:~WEBIDL#syntaxerror

	■#dom-member

m.createDocument:~DOM4#dom-domimplementation-createdocument
m.document.open:~HTMLdynamic#dom-document-open
m.frameElement:#dom-window-frameelement
m.opener:#dom-window-opener
m.parent:#dom-window-parent
m.top:#dom-window-top
m.document.domain:~ORIGIN#dom-document-domain

	●event
	et.load:~HTMLindex#event-load

	●要素

e.body:~HEsections#the-body-element
e.head:~HEmetadata#the-head-element
e.html:~HEmetadata#the-html-element
e.iframe:~HEembed#the-iframe-element
e.embed:~HEembed#the-embed-element
e.object:~HEembed#the-object-element
e.frame:~HTMLobs#frame
e.frameset:~HTMLobs#frameset
e.button:~HEforms#the-button-element

	●内容属性
a.sandbox:~HEembed#attr-iframe-sandbox

	●code 他
sc.~about_blank:~HTMLdep#about:blank
sc.~about_srcdoc:~HTMLurl#about:srcdoc

	text/html:iana.html#text/html

v.allow-popups:~ORIGIN#attr-iframe-sandbox-allow-popups
v.allow-top-navigation:~ORIGIN#attr-iframe-sandbox-allow-top-navigation

coop.same-origin:~ORIGIN#coop-same-origin
coop.same-origin-plus-COEP:~ORIGIN#coop-same-origin-plus-coep
coep.require-corp:~ORIGIN#coep-require-corp

coI.none:#cross-origin-isolation-none
coI.logical:#cross-origin-isolation-logical
coI.concrete:#cross-origin-isolation-concrete

h.Cross-Origin-Opener-Policy:~HTMLiana#cross-origin-opener-policy-2
h.Cross-Origin-Embedder-Policy:~HTMLiana#cross-origin-embedder-policy

	●

未所有化~flag:#disowned-its-opener
閉中~flag:#is-closing

~load~event遅延-中:#delaying-load-events-mode
~navigateすることは許容されて:#allowed-to-navigate

	●閲覧文脈
閲覧文脈:#browsing-context

閲覧文脈~名:#browsing-context-name
bc.名前:#browsing-context-name
妥当な閲覧文脈~名:#valid-browsing-context-name
妥当な閲覧文脈~名または~keyword:#valid-browsing-context-name-or-keyword
属する閲覧文脈:#concept-document-bc
属する文書:#concept-document-bc
開いた閲覧文脈:#opener-browsing-context
~top-level閲覧文脈:#top-level-browsing-context

閲覧文脈~容器:#browsing-context-container
bc.容器:#bc-container
bc.~virtual閲覧文脈~group~ID:#virtual-browsing-context-group-id
bc.初期~URL:#browsing-context-initial-url
bc.作成時の~opener生成元:#opener-origin-at-creation

内容~文書:#concept-bcc-content-document
入子にしている閲覧文脈:#nested-browsing-context
容器~文書:#bc-container-document
子~閲覧文脈:#child-browsing-context
文書~treeに属する子~閲覧文脈:#document-tree-child-browsing-context
	文書~treeに属する子~閲覧文脈の個数:#number-of-document-tree-child-browsing-contexts
子~閲覧文脈~list:#_list-of-the-child-browsing-contexts
子孫~閲覧文脈~list:#list-of-the-descendant-browsing-contexts
親~閲覧文脈:#parent-browsing-context
先祖:#ancestor-browsing-context
先祖~閲覧文脈:#ancestor-browsing-context

新たな閲覧文脈を作成する:#creating-a-new-browsing-context
新たな~top-level閲覧文脈を作成する:#creating-a-new-top-level-browsing-context
新たな補助~閲覧文脈を作成する:#creating-a-new-auxiliary-browsing-context
新たな入子な閲覧文脈を作成する:#creating-a-new-nested-browsing-context

非同一-生成元~隔離~mode:#cross-origin-isolation-mode

閲覧文脈~group:#browsing-context-group
bcG.閲覧文脈~集合:#browsing-context-set
bcG.非同一-生成元~隔離~mode:#bcg-cross-origin-isolation
bcG.~agent~cluster~map:#agent-cluster-map
bcG.履歴上の~agent~cluster~key~map:#historical-agent-cluster-key-map

閲覧文脈~group集合:#browsing-context-group-set
閲覧文脈~groupに付加する:#bcg-append
閲覧文脈~groupから除去する:#bcg-remove
新たな閲覧文脈~groupを作成する:#creating-a-new-browsing-context-group
tbcG.~group:#tlbc-group

補助~閲覧文脈:#auxiliary-browsing-context

閲覧文脈~視野~生成元:#browsing-context-scope-origin
	閲覧文脈の作成-時にあてがわれたそれら:#about-blank-origin
閲覧文脈を選ぶ規則:#the-rules-for-choosing-a-browsing-context-given-a-browsing-context-name

作成元の生成元:#creator-origin
作成元の~URL:#creator-url
作成元の基底~URL:#creator-base-url
生成元を決定する:#determining-the-origin

近しい:#familiar-with

作動中の~window:#active-window
作動中の文書:#active-document
閲覧文脈にて作動中の文書を設定する:#set-the-active-document
作動中:#active-document
文書~族:#document-family
全部的に作動中:#fully-active


	●WINDOW／NAVI／HISTORY
~window:~WINDOW#the-window-object
対応する閲覧文脈:~WINDOW#window-bc
結付けられている文書:~WINDOW#concept-document-window
破棄され:~WINDOW#a-browsing-context-is-discarded
閲覧文脈を破棄する:~WINDOW#a-browsing-context-is-discarded
~window用に環境~設定群~objを設定しておく:~WINDOW#set-up-a-window-environment-settings-object
sl.Window:~WINDOW#concept-windowproxy-window

~navigate:~NAVI#navigate
~navi:~NAVI#navigate
読込ngを完全に終わらす:~NAVI#completely-finish-loading
V.履歴~取扱い:~NAVI#navigation-hh
i.置換-:~NAVI#hh-replace

~session履歴:~HISTORY#session-history
~session履歴~entry:~HISTORY#session-history-entry

tlbc.閲覧~session:~HISTORY#tlbc-browsing-session
shE.文書:~HISTORY#she-document

	●ORIGIN

生成元:~ORIGIN#concept-origin
不透明な生成元:~ORIGIN#concept-origin-opaque
同一-生成元:~ORIGIN#same-origin
同じ生成元~domain:~ORIGIN#same-origin-domain
~sandbox法~flag集合:~ORIGIN#sandboxing-flag-set
作成時の~sandbox法~flagsを決定する:~ORIGIN#determining-the-creation-sandboxing-flags
閲覧文脈~sandbox化( 生成元 )~flag:~ORIGIN#sandboxed-origin-browsing-context-flag
非同一-生成元~opener施策:~ORIGIN#cross-origin-opener-policy

作動中の~sandbox法~flag集合:~ORIGIN#active-sandboxing-flag-set
~popup~sandbox法~flag集合:~ORIGIN#popup-sandboxing-flag-set
sbox.非~利用者~作動化~top-level~navi:~ORIGIN#sandboxed-top-level-navigation-without-user-activation-browsing-context-flag
sbox.利用者~作動化~top-level~navi:~ORIGIN#sandboxed-top-level-navigation-with-user-activation-browsing-context-flag
sbox.~navi:~ORIGIN#sandboxed-navigation-browsing-context-flag
sbox.補助~navi:~ORIGIN#sandboxed-auxiliary-navigation-browsing-context-flag
~sandboxは補助~閲覧文脈に伝播する~flag:~ORIGIN#sandbox-propagates-to-auxiliary-browsing-contexts-flag
許可-済み~navigator:~ORIGIN#one-permitted-sandboxed-navigator
coOP.値:~ORIGIN#coop-struct-value

	●WAPI
現在の設定群~obj:~WAPI#current-settings-object
関連な設定群~obj:~WAPI#relevant-settings-object
関連な大域~obj:~WAPI#concept-relevant-global
~event~loop:~WAPI#event-loop
enV.生成元:~WAPI#concept-settings-object-origin
enV.~top-level作成時の~URL:~WAPI#concept-environment-top-level-creation-url
enV.~top-level生成元:~WAPI#concept-environment-top-level-origin
enV.実行~準備済み~flag:~WAPI#concept-environment-execution-ready-flag
enV.作成時の~URL:~WAPI#concept-environment-creation-url
enV.非同一-生成元~隔離-済み能力:~WAPI#concept-settings-object-cross-origin-isolated-capability
新たな~JS~realmを作成する:~WAPI#creating-a-new-javascript-realm
生成元が類似な~window~agentを得する:~WAPI#obtain-similar-origin-window-agent
~agent~cluster~key:~WAPI#agent-cluster-key

	●doc
文書:~HTMLdom#the-document-object
doc.基底~URL:~HTMLurl#document-base-url
doc.~referrer:~HTMLdom#the-document's-referrer
		'
doc.~referrer施策:~HTMLdom#concept-document-referrer-policy
doc.埋込元~施策:~HTMLdom#concept-document-embedder-policy
doc.種別:~DOM4#concept-document-type
doc.過去互換~mode:~DOM4#concept-document-quirks
doc.内容~型:~DOM4#concept-document-content-type
doc.生成元:~DOM4#concept-document-origin
doc.~URL:~DOM4#concept-document-url
doc.許可~施策:~HTMLdom#concept-document-permissions-policy
doc.非同一-生成元~opener施策:~HTMLdom#concept-document-coop

	●HTML 他

文書から除去され:~HTMLINFRA#remove-an-element-from-a-document
jA.StructuredSerializeForStorage:~HTMLcloning#structuredserializeforstorage
文書~基底~URL:~HTMLurl#document-base-url

読込後~taskは準備済み:~HTMLparsing#ready-for-post-load-tasks
~load~eventを遅延する:~HTMLparsing#delay-the-load-event

一過な作動化:~HTMLinteraction#transient-activation

	●外部
~ASCII大小無視:~INFRA#ascii-case-insensitive
~ASCII小文字~化する:~INFRA#ascii-lowercase

~list:~INFRA#list
付加する:~INFRA#list-append
除去する:~INFRA#list-remove
拡張する:~INFRA#list-extend
有順序~集合:~INFRA#ordered-set
set.付加する:~INFRA#set-append
空:~INFRA#list-is-empty
~map:~INFRA#ordered-map

~URLを直列化する:~URL1#concept-url-serializer
~URL~record:~URL1#concept-url
url.~scheme:~URL1#concept-url-scheme
url.生成元:~URL1#concept-url-origin

jA.OrdinaryDefineOwnProperty:~TC39#sec-ordinarydefineownproperty
~agent~cluster:~TC39#sec-agent-clusters

~node文書:~DOM4#concept-node-document
~tree内にある:~DOM4#in-a-document
文書~tree内:~DOM4#in-a-document-tree
~tree順序:~DOM4#concept-tree-order
接続されて:~DOM4#connected
~shadowも含む根:~DOM4#concept-shadow-including-root
~shadowも含む~tree順序:~DOM4#concept-shadow-including-tree-order

閲覧文脈~用の許可~施策を作成する:~PERMISSIONS-POLICY#create-for-browsingcontext
~referrer施策:~REFERRER-POLICY#referrer-policy

閲覧~session~storage倉を旧来~cloneする:~STORAGE#legacy-clone-a-browsing-session-storage-shed

●●trans_metadata
<p>
~THIS_PAGEは、~WHATWGによる HTML 仕様の
<a href="~SPEC_URL">§ Browsing contexts</a>
を日本語に翻訳したものです。
~PUB
</p>

</script>

<body>

<header>
	<hgroup>
<h1>閲覧文脈 — Browsing contexts</h1>
	</hgroup>

</header>

<hr>

<main id="MAIN" hidden>

	<section id="browsers">
<h1 title="Loading web pages">7. web ページの読み込み</h1>

<p>
この節は、~web~browserに最も直に適用される特能を述べる。
とは言え，~web~browserかどうかにかかわらず、この節に定義される要件は，<em>すべての~UA</em>に適用される
— 他が指定されない限り。
◎
This section describes features that apply most directly to web browsers. Having said that, except where specified otherwise, the requirements defined in this section do apply to all user agents, whether they are web browsers or not.
</p>

		<section id="_conventions">
<h2>【この訳に固有の表記規約】</h2>

<p>
この訳の，~algoや定義の記述に利用されている各種記号（ ~LET, ~IF, ε, コレ, ~THROW 等々）の意味や定義の詳細は，~SYMBOL_DEF_REFを~~参照されたし。
</p>

		</section>
		<section id="windows">
<h2 title="Browsing contexts">7.1. 閲覧文脈</h2>

<p>
`閲覧文脈@
とは、利用者~向けに`文書$を呈示する環境である。
◎
A browsing context is an environment in which Document objects are presented to the user.
</p>

<p class="note">注記：
~web~browser内の［
~tab／~window
］は、概して`閲覧文脈$を包含する
— ［
`iframe$e や `frameset$e 内の `frame$e
］と同じく。
◎
A tab or window in a web browser typically contains a browsing context, as does an iframe or frames in a frameset.
</p>

<p>
各 `閲覧文脈$ %B には、次に挙げるものが結付けられる：
◎
↓</p>

<ul>
	<li>
%B に対応する `WindowProxy$I ~obj。
◎
A browsing context has a corresponding WindowProxy object.
</li>
	<li>
%B を
`開いた閲覧文脈@
は、［
~NULL または`閲覧文脈$
］であり，初期~時は ~NULL とする。
◎
A browsing context has an opener browsing context, which is null or a browsing context. It is initially null.
</li>
	<li>
%B の
`未所有化~flag@
は、真偽値であり，初期~時は ~F とする。
◎
A browsing context has a disowned boolean. It is initially false.
</li>
	<li>
%B の
`閉中~flag@
は、真偽値であり，初期~時は ~F とする。
◎
A browsing context has an is closing boolean. It is initially false.
</li>
</ul>

<div class="example">
<p>
`閲覧文脈$の［
`未所有化~flag$, `閉中~flag$
］は、次の例に示すように，どの組み合わせもとり得る：
◎
The following example illustrates the various possibilities of a browsing context. It can be disowned, is closing, neither, or both.
</p>

<pre class="lang-js">
/* <span class="comment">
未所有化~flag ~EQ ~F,
閉中~flag ~EQ ~F
◎
Neither disowned nor is closing:
</span> */
const %popup1 = window.open();

/* <span class="comment">
未所有化~flag ~EQ ~T,
閉中~flag ~EQ ~F
◎
Disowned, but not is closing:
</span> */
const %popup2 = window.open();
%popup2.opener = null;

/* <span class="comment">
未所有化~flag ~EQ ~F,
閉中~flag ~EQ ~T
◎
Not disowned, but is closing:
</span> */
const %popup3 = window.open();
%popup3.close();

/* <span class="comment">
未所有化~flag ~EQ ~T,
閉中~flag ~EQ ~T
◎
Disowned, is closing:
</span> */
const %popup4 = window.open();
%popup4.opener = null;
%popup4.close();
</pre>
</div>

<p>
`閲覧文脈$ %B の`~session履歴$は、
%B が呈示-［
した／している／することになる
］`文書$たちからなる。
◎
A browsing context has a session history, which lists the Document objects that the browsing context has presented, is presenting, or will present.＼
</p>

<p>
`文書$ %文書 が
`属する閲覧文脈@
は、次を満たす`閲覧文脈$ %B は［
在るならば それ ／
無いならば ~NULL
］である
⇒
［
%B は`破棄され$ていない
］~AND［
%文書 は %B の`~session履歴$内にある†
］
◎
A Document's browsing context is the browsing context whose session history contains the Document, if any such browsing context exists and has not been discarded, and null otherwise.
</p>

<p class="trans-note">【†
より厳密には、
ある`~session履歴~entry$の`文書$shE ~EQ %文書
】【
同じ文書が複数の~session履歴~内にあることはないので、
%B は一意に定まる。
】</p>

<p class="note">注記：
`文書$が`属する閲覧文脈$は ~NULL になることもある。
特に，~data集析~toolは、閲覧文脈を~instance化することは，まずないであろう。
`createDocument()$m などの ~APIを利用して作成された`文書$が`属する閲覧文脈$は、必ず ~NULL になる。
また， `iframe$e 要素~用に作成された`文書$が`属する閲覧文脈$は、後で要素が`文書から除去され$たときには，`破棄され$て ~NULL にされる。
◎
A Document does not necessarily have a non-null browsing context. In particular, data mining tools are likely to never instantiate browsing contexts. A Document created using an API such as createDocument() never has a non-null browsing context. And the Document originally created for an iframe element, which has since been removed from the document, has no associated browsing context, since that browsing context was discarded.
</p>

<p>
`閲覧文脈$ %B にて
`作動中の~window@
は、
%B の `WindowProxy$I ~objの `Window$sl 内部~slotの値である
【この~slotに保持される】。
%B にて
`作動中の文書@
は、
%B にて`作動中の~window$に`結付けられている文書$を指す。
◎
A browsing context's active window is its WindowProxy object's [[Window]] internal slot value. A browsing context's active document is its active window's associated Document.
</p>

<p class="note">注記：
一般に，`~window$と［
`文書$のうち，`属する閲覧文脈$は ~NULL でないもの
］は一対一に対応するが、1 つだけ例外がある：
`~window$は，同じ`閲覧文脈$内で 2 番目の`文書$を呈示するために再利用されることもあり、その場合，対応関係は一対二になる†。
これは、［
`履歴~取扱い$V を `置換-$i に設定する下で，`閲覧文脈$を初期 `~about_blank$sc `文書$から別の文書へ`~navigate$するとき
］に生じる。
【†この一対二は，異なる時点も含めてのことであり、任意のある時点では，一意に対応する。】
◎
In general, there is a 1-to-1 mapping from the Window object to the Document object, as long as the Document object has a non-null browsing context. There is one exception. A Window can be reused for the presentation of a second Document in the same browsing context, such that the mapping is then 1-to-2. This occurs when a browsing context is navigated from the initial about:blank Document to another, with historyHandling set to "replace".
</p>

<p>
各 `閲覧文脈$は、次に挙げるものを持つ：
◎
↓</p>
<ul>
	<li>
`~virtual閲覧文脈~group~ID@bc
⇒
整数であり，初期~時には 0 とする。
これは，
<a href="~ORIGIN#coop-struct-report-only-value">非同一-生成元~opener施策の報告-法</a>に利用され、
報告のみの施策が施行されていた場合に起こる閲覧文脈~groupの切替nを追跡し続ける。
◎
A browsing context has a virtual browsing context group ID integer. It is initially 0. This is used by cross-origin opener policy reporting, to keep track of the browsing context group switches that would have happened if the report-only policy had been enforced.
</li>
	<li>
`初期~URL@bc
⇒
［
`~URL~record$／~NULL
］であり，初期~時には ~NULL とする。
◎
A browsing context has an initial URL, which is a URL or null. It is initially null.
</li>
	<li>
`作成時の~opener生成元@bc
⇒
［
`生成元$／~NULL
］であり，初期~時には ~NULL とする。
◎
A browsing context has an opener origin at creation, which is an origin or null. It is initially null.
</li>
</ul>

			<section id="creating-browsing-contexts">
<h3 title="Creating browsing contexts">7.1.1. 閲覧文脈の作成-法</h3>

<div class="algo">
<p>
`閲覧文脈にて作動中の文書を設定する@
ときは、所与の
( `閲覧文脈$ %B, `文書$ %文書 )
に対し，次を走らす：
◎
To set the active document of a browsing context browsingContext to a Document object document, run these steps:
</p>
<ol>
	<li>
%~window ~LET %文書 に`関連な大域~obj$
◎
Let window be document's relevant global object.
</li>
	<li>
%B にて`作動中の~window$ ~SET %~window
◎
Set browsingContext's active window to window.
</li>
	<li>
%~window に`結付けられている文書$ ~SET %文書
◎
Set window's associated Document to document.
</li>
	<li>
%~window に`関連な設定群~obj$の`実行~準備済み~flag$enV ~SET ~T
◎
Set window's relevant settings object's execution ready flag.
</li>
</ol>
</div>

<hr>

<div class="p">
<p>
各 `閲覧文脈$には，次に挙げるものが結付けられ、どれも［
初期~時は ~NULL を返す
］ようにされているとする：
</p>

<ul>
	<li>
`作成元の生成元@
⇒
~NULL または`生成元$を返す
</li>
	<li>
`作成元の~URL@
⇒
~NULL または`~URL~record$を返す
</li>
	<li>
`作成元の基底~URL@
⇒
~NULL または`~URL~record$を返す
</li>
</ul>

◎
A browsing context has an associated creator origin (null or returns an origin), creator URL (null or returns a URL), and creator base URL (null or returns a URL). These are all initially null.
</div>

<div class="algo">
<p>
`生成元を決定する@
ときは、所与の
(
`閲覧文脈$ %B,
`~URL~record$ %~url,
`~sandbox法~flag集合$ %~sandbox~flags,
`生成元$ %呼出n生成元,
`生成元$ %作動中の文書~navi生成元
)
に対し：
◎
To determine the origin, given browsing context browsingContext, URL url, sandboxing flag set sandboxFlags, and two origins invocationOrigin and activeDocumentNavigationOrigin:
</p>
<ol>
	<li id="sandboxOrigin">
~IF［
`閲覧文脈~sandbox化( 生成元 )~flag$ ~IN %~sandbox~flags
］
⇒
~RET 新たな`不透明な生成元$
◎
If sandboxFlags has its sandboxed origin browsing context flag set, then return a new opaque origin.
</li>
	<li>
~IF［
%~url ~EQ ~NULL
］
⇒
~RET 新たな`不透明な生成元$
◎
If url is null, then return a new opaque origin.
</li>
	<li>
~IF［
%作動中の文書~navi生成元
~NEQ ~NULL
］~AND［
%~url の`~scheme$url ~EQ `javascript^l
］
⇒
~RET %作動中の文書~navi生成元
◎
If activeDocumentNavigationOrigin is not null, and url's scheme is "javascript", then return activeDocumentNavigationOrigin.
</li>
	<li>
<p>
~IF［
%呼出n生成元 ~NEQ ~NULL
］~AND［
%~url は【！＊】 `~about_blank$sc
］
⇒
~RET %呼出n生成元
◎
If invocationOrigin is non-null and url is about:blank, then return invocationOrigin.
</p>

<p class="note">注記：
ここでの結果は、
2 つの文書の下層の`生成元$は同じになり，
`document.domain$m は両者に影響することを意味する。
【<a href="~HTMLissue/4126">課題 #4126</a>】
◎
The result here is that two documents end up with the same underlying origin, meaning that document.domain affects both.
</p>
	</li>
	<li>
~IF［
%~url は【！＊】 `~about_srcdoc$sc
］
⇒
~RET %B の`容器~文書$の`生成元$doc
◎
If url is about:srcdoc, then return the origin of browsingContext's container document.
</li>
	<li>
~RET %~url の`生成元$url
◎
Return url's origin.
</li>
</ol>
</div>

<div class="algo">
<p>
`新たな閲覧文脈を作成する@
ときは、所与の
( ~NULL または`文書$ %作成元, ~NULL または要素 %埋込元, `閲覧文脈~group$ %~group )
に対し，次を走らす：
◎
To create a new browsing context, given null or a Document object creator, null or an element embedder, and a browsing context group group, run these steps:
</p>
<ol>
	<li>
%B ~LET 新たな`閲覧文脈$
◎
Let browsingContext be a new browsing context.
</li>
	<li id="creator-browsing-context">
~IF［
%作成元 ~NEQ ~NULL
］
⇒＃
%B の`作成元の生成元$は %作成元 の`生成元$docを返すようにする,
%B の`作成元の~URL$は %作成元 の`~URL$docを返すようにする,
%B の`作成元の基底~URL$は %作成元 の`文書~基底~URL$を返すようにする
%B の`~virtual閲覧文脈~group~ID$bc ~SET %作成元 の`~top-level閲覧文脈$の`~virtual閲覧文脈~group~ID$bc
◎
If creator is non-null, then set browsingContext's creator origin to return creator's origin, browsingContext's creator URL to return creator's URL, browsingContext's creator base URL to return creator's base URL, and browsingContext's virtual browsing context group ID to creator's top-level browsing context's virtual browsing context group ID.
</li>
	<li>
%~sandbox~flags ~LET `作成時の~sandbox法~flagsを決定する$( %B, %埋込元 )
◎
Let sandboxFlags be the result of determining the creation sandboxing flags given browsingContext and embedder.
</li>
	<li id="about-blank-origin">
%生成元 ~LET `生成元を決定する$( 次に挙げる引数 )
⇒＃
%B,
`~about_blank$sc,
%~sandbox~flags,
%B の`作成元の生成元$,
~NULL
◎
Let origin be the result of determining the origin given browsingContext, about:blank, sandboxFlags, browsingContext's creator origin, and null.
</li>
	<li>
<p>
%許可~施策 ~LET
`閲覧文脈~用の許可~施策を作成する$( %B, %生成元 )
`PERMISSIONSPOLICY$r
◎
Let permissionsPolicy be the result of creating a permissions policy given browsingContext and origin. [PERMISSIONSPOLICY]
</p>

<p class="XXX">
これは %埋込元 を必要とする。
◎
This needs to use embedder.
</p>
	</li>
	<li>
%~agent ~LET `生成元が類似な~window~agentを得する$( %生成元, %~group, ~F )
◎
Let agent be the result of obtaining a similar-origin window agent given origin, group, and false.
</li>
	<li>
%~realm実行~文脈 ~LET 次のように~custom化する下で，
%~agent 内で`新たな~JS~realmを作成する$
⇒＃
大域~obj用に 新たな `Window$I ~objを作成する,
大域 `this^jv 束縛には %B の `WindowProxy$I ~objを利用する
◎
Let realm execution context be the result of creating a new JavaScript realm given agent and the following customizations:
• For the global object, create a new Window object.
• For the global this binding, use browsingContext's WindowProxy object.
</li>
	<li>
%~top-level作成時の~URL ~LET %埋込元 に応じて
⇒＃
~NULL ならば `~about_blank$sc ／
~ELSE_ %埋込元 に`関連な設定群~obj$の`~top-level作成時の~URL$enV
◎
Let topLevelCreationURL be about:blank if embedder is null; otherwise embedder's relevant settings object's top-level creation URL.
</li>
	<li>
%~top-level生成元 ~LET %埋込元 に応じて
⇒＃
~NULL ならば %生成元 ／
~ELSE_ %埋込元 に`関連な設定群~obj$の`~top-level生成元$enV
◎
Let topLevelOrigin be origin if embedder is null; otherwise embedder's relevant settings object's top-level origin.
</li>
	<li>
`~window用に環境~設定群~objを設定しておく$( 次に挙げる引数 )
⇒＃
`~about_blank$sc,
%~realm実行~文脈,
~NULL,
%~top-level作成時の~URL,
%~top-level生成元
◎
Set up a window environment settings object with about:blank, realm execution context, null, topLevelCreationURL, and topLevelOrigin.
</li>
	<li>
%coop ~LET 新たな`非同一-生成元~opener施策$
◎
Let coop be a new cross-origin opener policy.
</li>
	<li>
~IF［
%作成元 ~NEQ ~NULL
］~AND［
( %作成元 の`生成元$doc, %作成元 に`関連な設定群~obj$の`~top-level生成元$enV )
は`同一-生成元$である
］
⇒
%coop ~SET %作成元 が`属する閲覧文脈$の`~top-level閲覧文脈$にて`作動中の文書$の`非同一-生成元~opener施策$doc
◎
If creator is non-null and creator's origin is same origin with creator's relevant settings object's top-level origin, then set coop to creator's browsing context's top-level browsing context's active document's cross-origin opener policy.
</li>
	<li>
<p>
%文書 ~LET 次のようにされた新たな`文書$：
◎
Let document be a new Document,＼
</p>
		<ul>
			<li>
`過去互換~mode$docにおいては
⇒
%文書 の`種別$doc ~SET `html^l
◎
marked as an HTML document in quirks mode,＼
</li>
			<li>
`内容~型$doc ~SET `text/html^l
◎
whose content type is "text/html",＼
</li>
			<li>
`生成元$doc ~SET %生成元
◎
origin is origin,＼
</li>
			<li>
`作動中の~sandbox法~flag集合$ ~SET %~sandbox~flags
◎
active sandboxing flag set is sandboxFlags,＼
</li>
			<li>
`許可~施策$doc ~SET %許可~施策
◎
permissions policy is permissionsPolicy,＼
</li>
			<li>
`非同一-生成元~opener施策$doc ~SET %coop
◎
cross-origin opener policy is coop, and＼
</li>
			<li>
即時に，`読込後~taskは準備済み$になる
◎
which is ready for post-load tasks.
</li>
		</ul>
	</li>
	<li>
~Assert：
⇒＃
%文書 の`~URL$doc ~EQ `~about_blank$sc,
%文書 に`関連な設定群~obj$の`作成時の~URL$enV ~EQ `~about_blank$sc
◎
Assert: document's URL and document's relevant settings object's creation URL are about:blank.
</li>
	<li>
%文書 が次を満たすことを確保する
⇒
［
%文書 の子~nodeたちは 1 個の `html$e 要素 %html からなる
］~AND［
%html の子~nodeたちは 空な［
`head$e 要素, `body$e 要素
］からなる
］
◎
Ensure that document has a single child html node, which itself has two empty child nodes: a head element, and a body element.
</li>
	<li>
`閲覧文脈にて作動中の文書を設定する$( %B, %文書 )
◎
Set the active document of browsingContext to document.
</li>
	<li>
~IF［
%B の`作成元の~URL$ ~NEQ ~NULL
］
⇒
%文書 の`~referrer$doc ~SET `~URLを直列化する$( %B の`作成元の~URL$ )
◎
If browsingContext's creator URL is non-null, then set document's referrer to the serialization of it.
</li>
	<li>
~IF［
%作成元 ~NEQ ~NULL
］
⇒＃
%文書 の`~referrer施策$doc ~SET %作成元 の`~referrer施策$doc；
%文書 の`埋込元~施策$doc ~SET %作成元 の`埋込元~施策$doc
◎
If creator is non-null, then set document's referrer policy to creator's referrer policy.
◎
If creator is non-null, then set document's embedder policy to creator's embedder policy.
</li>
	<li>
%B の`~session履歴$に %文書 を追加する
【これは、もっときちんと定義される必要があろう。】
◎
Add document to browsingContext's session history.
</li>
	<li>
%文書 の`読込ngを完全に終わらす$
◎
Completely finish loading document.
</li>
	<li>
~RET %B
◎
Return browsingContext.
</li>
</ol>
</div>

<div class="algo">
<p>
`新たな~top-level閲覧文脈を作成する@
ときは：
◎
To create a new top-level browsing context:
</p>
<ol>
	<li>
%~group ~LET `新たな閲覧文脈~groupを作成する$
◎
Let group be the result of creating a new browsing context group.
</li>
	<li>
~RET %~group の`閲覧文脈~集合$bcG[0]
◎
Return group's browsing context set[0].
</li>
</ol>

<p class="note">注記：
これは`~top-level閲覧文脈$を作成する。
◎
This creates a top-level browsing context.
</p>
</div>

<div class="algo">
<p>
`新たな補助~閲覧文脈を作成する@
ときは、所与の
( `閲覧文脈$ %~opener )
に対し：
◎
To create a new auxiliary browsing context, given a browsing context opener:
</p>
<ol>
	<li>
%~group ~LET %~opener の`~top-level閲覧文脈$の`~group$tbcG
◎
Let group be opener's top-level browsing context's group
</li>
	<li>
~Assert：
%~group ~NEQ ~NULL
— これは、`~navigate$するとき直に呼出されるので。
◎
Assert: group is non-null, as navigating invokes this directly.
</li>
	<li>
%B ~LET `新たな閲覧文脈を作成する$( %~opener にて`作動中の文書$, ~NULL, %~group )
◎
Let browsingContext be the result of creating a new browsing context with opener's active document, null, and group.
</li>
	<li>
`閲覧文脈~groupに付加する$( %~group, %B )
◎
Append browsingContext to group.
</li>
	<li>
%B を`開いた閲覧文脈$ ~SET %~opener
◎
Set browsingContext's opener browsing context to opener.
</li>
	<li>
%B の`~virtual閲覧文脈~group~ID$bc ~SET %~opener の`~top-level閲覧文脈$の`~virtual閲覧文脈~group~ID$bc
◎
Set browsingContext's virtual browsing context group ID to opener's top-level browsing context's virtual browsing context group ID.
</li>
	<li>
%B の`作成時の~opener生成元$bc ~SET %~opener にて`作動中の文書$の`生成元$doc
◎
Set browsingContext's opener origin at creation to opener's active document's origin.
</li>
	<li id="copy-session-storage">
`閲覧~session~storage倉を旧来~cloneする$( %~opener の`閲覧~session$tlbc, %B の`閲覧~session$tlbc )
`STORAGE$r
◎
Legacy-clone a browsing session storage shed with opener's browsing session and browsingContext's browsing session. [STORAGE]
</li>
	<li>
~RET %B
◎
Return browsingContext.
</li>
</ol>

<p class="note">注記：
これは、［
`補助~閲覧文脈$でもある，`~top-level閲覧文脈$
］を作成する。
◎
This creates a top-level browsing context that is also an auxiliary browsing context.
</p>
</div>

<div class="algo">
<p>
`新たな入子な閲覧文脈を作成する@
ときは、所与の
( 要素 %要素 )
に対し：
◎
To create a new nested browsing context, given an element element:
</p>
<ol>
	<li>
%文書 ~LET %要素 の`~node文書$
◎
↓</li>
	<li>
%~group ~LET %文書 が`属する閲覧文脈$の`~top-level閲覧文脈$の`~group$tbcG
◎
Let group be element's node document's browsing context's top-level browsing context's group.
</li>
	<li>
%B ~LET `新たな閲覧文脈を作成する$( %文書, %要素, %~group )
◎
Let browsingContext be the result of creating a new browsing context with element's node document, element, and group.
</li>
	<li>
%要素 が`入子にしている閲覧文脈$ ~SET %B
◎
Set element's nested browsing context to browsingContext.
</li>
	<li>
~IF［
%要素 は `name^a 属性を有する
］
⇒
%B の`名前$bc ~SET その属性の値
◎
If element has a name attribute, then set browsingContext's name to the value of this attribute.
</li>
	<li>
~RET %B
【この段は原文には無いが、他所を簡潔に記述するため，追加している。】
</li>
</ol>
</div>

			</section>
			<section id="nested-browsing-contexts">
<h3 title="Related browsing contexts">7.1.2. 関係する閲覧文脈たち</h3>

<p>
ある種の要素（例えば `iframe$e 要素）は、更に`閲覧文脈$を~instance化し得る。
そのような要素 %要素 は
`閲覧文脈~容器@
と呼ばれる。
◎
Certain elements (for example, iframe elements) can instantiate further browsing contexts. These elements are called browsing context containers.
</p>

<p class="trans-note">【
`iframe^e 以外に該当する要素には、
`embed$e, `object$e，および廃用にされた `frame$e がある。
】</p>

<p>
`閲覧文脈~容器$が
`入子にしている閲覧文脈@
は、`閲覧文脈$または ~NULL であり，初期~時には ~NULL とする。
◎
Each browsing context container has a nested browsing context, which is either a browsing context or null. It is initially null.
</p>

<p class="trans-note">【
閲覧文脈~容器が文書から除去されたときなど、
<a href="~HEembed#_discard-nested-browsing-context">入子な閲覧文脈が破棄される</a>ときも， ~NULL にされる。
】【
この用語は、
“入子な閲覧文脈である”
という句で参照されることもある。
それは、［
当の閲覧文脈の`容器$bc ~NEQ ~NULL
］を含意する
— が，実際には、より強い条件［
`親~閲覧文脈$ ~NEQ ~NULL
］が意図されているかもしれない（特に，他の仕様から参照されている場合）。
】</p>

<p>
`閲覧文脈$ %B の
`容器@bc
は、次を満たす`閲覧文脈~容器$ %容器 が［
在るならばそれ ／
無いならば ~NULL
］とする
⇒
%容器 が`入子にしている閲覧文脈$ ~EQ %B
◎
The container of a browsing context bc is the browsing context container whose nested browsing context is bc, or null if there is no such element.
</p>

<p class="trans-note">【
%容器 は一意に定まる
— 複数の`閲覧文脈~容器$が同じ`閲覧文脈$を入子にすることはないので。
また，所与の`閲覧文脈$に対し、その`容器$bc（ ~NEQ ~NULL ）が他の`閲覧文脈~容器$に変化することもない。
】</p>

<p>
`閲覧文脈$ %B の
`容器~文書@
は、［
%B の`容器$bc ~NEQ ~NULL ならば その`~node文書$ ／
~ELSE_ ~NULL
］とする。
◎
Each browsing context bc has a container document, which is the result of running these steps:
• If bc's container is null, then return null.
• Return bc's container's node document.
</p>

<p class="note">注記：
~NULL でないならば、
%容器 の`~shadowも含む根$に等しくなる
— %容器 は`接続されて$いるはずなので。
◎
This is equal to bc's container's shadow-including root as bc's container has to be connected.
</p>

<div class="p">
<p>
`閲覧文脈$ %子 の
`親~閲覧文脈@
は、［
%子 の`容器~文書$ %文書 ~NEQ ~NULL
］~AND［
%文書 が`属する閲覧文脈$ %親 ~NEQ ~NULL
］を［
満たすならば %親 ／
満たさないならば ~NULL （無い）
］とする。
</p>

<p>
`閲覧文脈$ %子 の`親~閲覧文脈$ %親 ~NEQ ~NULL
ならば、
%子 は %親 の
`子~閲覧文脈@
であるとされる。
それに加え，［
%子 の`容器$bcは`文書~tree内$にある
］ならば、
%子 は %親 の
`文書~treeに属する子~閲覧文脈@
であるとされる。
</p>
◎
A browsing context child is said to be a child browsing context of another browsing context parent, if child's container document is non-null and child's container document's browsing context is parent.
◎
A browsing context child is a document-tree child browsing context of parent if child is a child browsing context and child's container is in a document tree.
◎
A browsing context child may have a parent browsing context. This is the unique browsing context that has child as a child browsing context, if any such browsing context exists. Otherwise, the browsing context has no parent browsing context.
</div>

<p>
所与の`閲覧文脈$ %A, %B は、次を満たすならば，
%A は %B の
`先祖@
であるとされる
⇒
［
%A ~EQ %B の`親~閲覧文脈$
］~OR［
%A は %B の ある`先祖$の`親~閲覧文脈$である
］
◎
A browsing context A is said to be an ancestor of a browsing context B if there exists a browsing context A' that is a child browsing context of A and that is itself an ancestor of B, or if the browsing context A is the parent browsing context of B.
</p>

<p>
`閲覧文脈$のうち［
`親~閲覧文脈$ ~EQ ~NULL
］なるものは、［
自身, および それを`先祖$とするような閲覧文脈
］すべての
`~top-level閲覧文脈@
になる。
◎
A browsing context that has no parent browsing context is the top-level browsing context for itself and all of the browsing contexts for which it is an ancestor browsing context.
</p>

<p>
各`~top-level閲覧文脈$には
`~group@tbcG
が結付けられる
— それは、 ~NULL または`閲覧文脈~group$であり，初期~時は ~NULL とする。
◎
A top-level browsing context has an associated group (null or a browsing context group). It is initially null.
</p>

<p>
新たな`閲覧文脈$を、 ［
その`容器$bc ~EQ ~NULL
］にしたまま，ある`~top-level閲覧文脈$に関係するように作成することもアリである。
そのような閲覧文脈は、
`補助~閲覧文脈@
と呼ばれる。
補助~閲覧文脈は、常に`~top-level閲覧文脈$である。
◎
It is possible to create new browsing contexts that are related to a top-level browsing context while their container is null. Such browsing contexts are called auxiliary browsing contexts. Auxiliary browsing contexts are always top-level browsing contexts.
</p>

<p>
`子~閲覧文脈$に対する， ~NULL でない`親~閲覧文脈$による推移閉包
【親を順々に辿って得られる先祖たち】
は、`先祖~閲覧文脈$の~listを成す。
◎
The transitive closure of parent browsing contexts for a browsing context that is a child browsing context gives the list of ancestor browsing contexts.
</p>

<div class="algo">
<p>
`文書$ %文書 の
`子孫~閲覧文脈~list@
は、次の~algoが返す~listで与えられる：
◎
The list of the descendant browsing contexts of a Document d is the (ordered) list returned by the following algorithm:
</p>
<ol>
	<li>
%~list ~LET 新たな`~list$
◎
Let list be an empty list.
</li>
	<li>
<p>
~EACH( `閲覧文脈~容器$であって［
その`~shadowも含む根$ ~EQ %文書
］なるもの %容器 )
に対し，`~shadowも含む~tree順序$で：
◎
For each browsing context container container, whose nested browsing context is non-null and whose shadow-including root is d, in shadow-including tree order:
</p>
		<ol>
			<li>
%入子な閲覧文脈 ~LET %容器 が`入子にしている閲覧文脈$
◎
Let nestedBC be container's nested browsing context.
</li>
			<li>
~IF［
%入子な閲覧文脈 ~EQ ~NULL
］
⇒
~CONTINUE
◎
↑</li>
			<li>
%~list に %入子な閲覧文脈 を`付加する$
◎
Append nestedBC to list.
</li>
			<li>
%~list を［
%入子な閲覧文脈 にて`作動中の文書$の`子孫~閲覧文脈~list$
］で`拡張する$
◎
Extend list with the list of the descendant browsing contexts of nestedBC's active document.
</li>
		</ol>
	</li>
	<li>
~RET %~list
◎
Return list.
</li>
</ol>
</div>

<p>
`文書$ %文書 は、それが`属する閲覧文脈$ %B が次をすべて満たすとき，
`全部的に作動中@
であるとされる：
◎
A Document d is said to be fully active when＼
</p>
<ul>
	<li>
%B ~NEQ ~NULL
◎
d's browsing context is non-null,＼
</li>
	<li>
%B にて`作動中の文書$ ~EQ %文書
◎
d's browsing context's active document is d, and either＼
</li>
	<li>
［
%B は`~top-level閲覧文脈$である
］~OR［
%B の`容器~文書$は`全部的に作動中$である
］
◎
d's browsing context is a top-level browsing context, or＼
d's browsing context's container document is fully active.
</li>
</ul>

<p>
`子~閲覧文脈$ %B は，要素に結付けられるので、常にその`親~閲覧文脈$に属する特定の`文書$ %文書 に束ねられる。
~UAは、 %文書 が`全部的に作動中$でない下では、【！ ＊ 】利用者による %B とのやりとりを許容しないモノトスル。
◎
Because they are associated with an element, child browsing contexts are always tied to a specific Document in their parent browsing context. User agents must not allow the user to interact with child browsing contexts of elements that are in Documents that are not themselves fully active.
</p>

<div class="example">

<p>
`文書$が［
`作動中$であること, `全部的に作動中$であること
］の相違を、次の例で~~説明する。
ここでは、~browser~windowの中に `a.html^c が読込まれる結果、その `iframe$e の中に `b-1.html^c が読込まれる。
`b-2.html^c, `c.html^c は省略されている（それらは、単純に空~文書でもよい）。
◎
The following example illustrates the differences between active and fully active Document objects. Here a.html is loaded into a browser window, b-1.html starts out loaded into an iframe as shown, and b-2.html and c.html are omitted (they can simply be an empty document).
</p>

<pre class="lang-html">
&lt;!-- a.html --&gt;
&lt;!DOCTYPE html&gt;
&lt;html lang="ja"&gt;
&lt;title&gt; 閲覧文脈 A &lt;/title&gt;

&lt;iframe src="b-1.html"&gt;&lt;/iframe&gt;
&lt;button onclick="frames[0].location.href = 'b-2.html'"&gt;~clickしてください&lt;/button&gt;

&lt;!-- b-1.html --&gt;
&lt;!DOCTYPE html&gt;
&lt;html lang="ja"&gt;
&lt;title&gt; 閲覧文脈 B &lt;/title&gt;

&lt;iframe src="c.html"&gt;&lt;/iframe&gt;
</pre>

<p>
この時点では、［
`a.html^c, `b-1.html^c, `c.html^c
］から与えられる文書は、どれも それぞれが`属する閲覧文脈$にて`作動中$にあり，また`全部的に作動中$でもある。
◎
At this point, the documents given by a.html, b-1.html, and c.html are all the active documents of their respective browsing contexts. They are also all fully active.
</p>

<p>
ここで `button$e が~clickされたとすると、閲覧文脈 B の中へ `b-2.html^c から新たな`文書$が読込まれ，次の結果が得られる：
◎
After clicking on the button, and thus loading a new Document from b-2.html into browsing context B, we have the following results:
</p>

<ul>
	<li>
`a.html^c `文書$は、閲覧文脈 A にて`作動中$かつ`全部的に作動中$であり続ける。
◎
The a.html Document remains both the active document of browsing context A, and fully active.
</li>
	<li>
`b-1.html^c `文書$は、今や閲覧文脈 B にて<em>`作動中$でない</em>
— よって、`全部的に作動中$でもない。
◎
The b-1.html Document is now not the active document of browsing context B. As such it is also not fully active.
</li>
	<li>
新たな `b-2.html^c `文書$は、今や閲覧文脈 B にて`作動中$にあり，また`全部的に作動中$でもある。
◎
The new b-2.html Document is now the active document of browsing context B, and is also fully active.
</li>
	<li>
`c.html^c `文書$は、ある閲覧文脈 C にて依然として`作動中$にある。
しかしながら、 C の`容器~文書$は `b-1.html^c `文書$であり，`全部的に作動中$ではない
— すなわち、 `c.html^c `文書$は，今や`全部的に作動中$でないことになる。
◎
The c.html Document is still the active document of browsing context C. However, since C's container document is the b-1.html Document, which is itself not fully active, this means the c.html Document is now not fully active (even though it is active).
</li>
</ul>

<p>
ここに孕まれる複階性について
— とりわけ <a href="#history">~session履歴</a>への影響i —
について，もっと探求したければ、
<cite>A Model of Navigation History</cite>
（~navi履歴の~model）
`NAVMODEL$r
を見よ。
◎
For more explorations of the complexities involved here, especially as it impacts the session history, see A Model of Navigation History. [NAVMODEL]
</p>

</div>

<p>
各 `子~閲覧文脈$には、真偽値をとる
`~load~event遅延-中@
が結付けられ，初期~時は ~F とする。
これは、`~navigate$に際して新たな`文書$が作成される前に，その`容器$bc向けの`~load~eventを遅延する$ために利用される。
◎
A child browsing context can be put into a delaying load events mode. This is used when it is navigated, to delay the load event of its container before the new Document is created.
</p>

<p>
`閲覧文脈$ %B の
`文書~族@
は、［
%B の`~session履歴$内にある`文書$
【~session履歴を成す各`~session履歴~entry$の ~NULL でない`文書$shE】
］すべてと［
それらの各`文書$の`文書~族$
］すべての和集合からなる。
`文書$ %文書 の`文書~族$は、［
%文書 の`子孫~閲覧文脈~list$を成す各 `閲覧文脈$の`文書~族$
］すべての和集合からなる。
◎
The document family of a browsing context consists of the union of all the Document objects in that browsing context's session history and the document families of all those Document objects. The document family of a Document object consists of the union of all the document families of the browsing contexts in the list of the descendant browsing contexts of the Document object.
</p>

<div class="algo">
<p>
`閲覧文脈~容器$ %容器 の
`内容~文書@
は、次の~algoの結果で与えられる：
◎
The content document of a browsing context container container is the result of the following algorithm:
</p>
<ol>
	<li>
%B ~LET %容器 が`入子にしている閲覧文脈$
◎
↓</li>
	<li>
~IF［
%B ~EQ ~NULL
］
⇒
~RET ~NULL
◎
If container's nested browsing context is null, then return null.
◎
Let context be container's nested browsing context.
</li>
	<li>
%文書 ~LET %B にて`作動中の文書$
◎
Let document be context's active document.
</li>
	<li>
~IF［
( %文書 の`生成元$doc, %容器 の`~node文書$の`生成元$doc )
は`同じ生成元~domain$でない
］
⇒
~RET ~NULL
◎
If document's origin and container's node document's origin are not same origin-domain, then return null.
</li>
	<li>
~RET %文書
◎
Return document.
</li>
</ol>
</div>

				<section id="navigating-nested-browsing-contexts-in-the-dom">
<h4 title="Navigating related browsing contexts in the DOM">7.1.2.1. ~DOMにおける関係する閲覧文脈の~navigate法</h4>

<dl class="domintro">
	<dt>%window . `top$m</dt>
	<dd>
`~top-level閲覧文脈$の `WindowProxy$I を返す。
◎
Returns the WindowProxy for the top-level browsing context.
</dd>

	<dt>%window . `opener$m [ = %value ]</dt>
	<dd>
`開いた閲覧文脈$用の `WindowProxy$I を返す。
◎
Returns the WindowProxy for the opener browsing context.
</dd>
	<dd>
そのような閲覧文脈は無い, あるいは ~NULL に設定された場合、 ~NULL を返す。
◎
Returns null if there isn't one or if it has been set to null.
</dd>
	<dd>
~NULL に設定できる。
◎
Can be set to null.
</dd>

	<dt>%window . `parent$m</dt>
	<dd>
`親~閲覧文脈$の `WindowProxy$I を返す。
◎
Returns the WindowProxy for the parent browsing context.
</dd>

	<dt>%window . `frameElement$m</dt>
	<dd>
`閲覧文脈~容器$に対する `Element$I を返す。
◎
Returns the Element for the browsing context container.
</dd>
	<dd>
そのようなものがない, または
“非同一-生成元 状況”
にある場合、 ~NULL を返す。
◎
Returns null if there isn't one, and in cross-origin situations.
</dd>
</dl>

<div class="algo">
<p>
`top@m
取得子~手続きは：
◎
The top attribute's getter must run these steps:
</p>
<ol>
	<li>
%B ~LET コレに`対応する閲覧文脈$
◎
↓</li>
	<li>
~IF［
%B ~EQ ~NULL
］
⇒
~RET ~NULL
◎
If this Window object's browsing context is null, then return null.
</li>
	<li>
~RET %B の`~top-level閲覧文脈$の `WindowProxy$I ~obj
◎
Return this Window object's browsing context's top-level browsing context's WindowProxy object.
</li>
</ol>
</div>

<div class="algo">
<p>
`opener@m
取得子~手続きは：
◎
The opener attribute's getter must run these steps:
</p>
<ol>
	<li>
%B ~LET コレに`対応する閲覧文脈$
◎
Let current be this Window object's browsing context.
</li>
	<li>
~IF［
%B ~EQ ~NULL
］
⇒
~RET ~NULL
◎
If current is null, then return null.
</li>
	<li>
~IF［
%B の`未所有化~flag$ ~EQ ~T
］
⇒
~RET ~NULL
◎
If current's disowned is true, then return null.
</li>
	<li>
~IF［
%B を`開いた閲覧文脈$ ~EQ ~NULL
］
⇒
~RET ~NULL
◎
If current's opener browsing context is null, then return null.
</li>
	<li>
~RET %B を`開いた閲覧文脈$の `WindowProxy$I ~obj
◎
Return current's opener browsing context's WindowProxy object.
</li>
</ol>
</div>

<div class="algo">
<p>
`opener$m
設定子~手続きは：
</p>
<ol>
	<li>
~IF［
所与の値 ~NEQ ~NULL
］
⇒
【！return】
~ABRUPT `OrdinaryDefineOwnProperty$jA( コレ, `opener^l, {
`Value^sl: 所与の値,
`Writable^sl: ~T,
`Enumerable^sl: ~T,
`Configurable^sl: ~T
}
)
</li>
	<li>
~ELIF［
コレに`対応する閲覧文脈$ ~NEQ ~NULL
］
⇒＃
コレに`対応する閲覧文脈$の`未所有化~flag$ ~SET ~T
</li>
</ol>
◎
The opener attribute's setter must run these steps:
• If the given value is null and this Window object's browsing context is non-null, then set this Window object's browsing context's disowned to true.
• If the given value is non-null, then return ? OrdinaryDefineOwnProperty(this Window object, "opener", { [[Value]]: the given value, [[Writable]]: true, [[Enumerable]]: true, [[Configurable]]: true }).
</div>

<div class="note">
<p>注記：
`閲覧文脈$ %B の`未所有化~flag$が：
◎
↓</p>
<ul>
	<li>
~T の場合、
%B に対応する`~window$の `opener$m 属性は ~NULL を返す。
その結果， %B 内の~scriptは、
%B を`開いた閲覧文脈$の`~window$（すなわち， %B を作成した`~window$）のどの~propも変更できなくなる。
◎
If a browsing context's disowned is true, its window.opener attribute is null. That prevents scripts in the browsing context from changing any properties of its opener browsing context's Window object (i.e., the Window object from which the browsing context was created).
</li>
	<li>
~F の場合、
%B 内の~scriptは，
`opener$m 属性を利用して %B を`開いた閲覧文脈$の`~window$の~propを変更できる。
例えば、 %B 内で走っている~scriptは、
`window.opener.location^m の値を変更して，`開いた閲覧文脈$をまったく別の文書に~navigateできる。
◎
Otherwise, if a browsing context's disowned is false, then scripts in that browsing context can use window.opener to change properties of its opener browsing context's Window object. For example, a script running in the browsing context can change the value of window.opener.location, causing the opener browsing context to navigate to a completely different document.
</li>
</ul>
</div>

<div class="algo">
<p>
`parent@m
取得子~手続きは：
◎
The parent attribute's getter must run these steps:
</p>
<ol>
	<li>
%B ~LET コレに`対応する閲覧文脈$
◎
Let current be this Window object's browsing context.
</li>
	<li>
~IF［
%B ~EQ ~NULL
］
⇒
~RET ~NULL
◎
If current is null, then return null.
</li>
	<li>
~IF［
%B は`子~閲覧文脈$である
］
⇒
~RET %B の`親~閲覧文脈$の `WindowProxy$I ~obj
◎
If current is a child browsing context of another browsing context parent, then return parent's WindowProxy object.
</li>
	<li>
~Assert：
%B は`~top-level閲覧文脈$である
◎
Assert: current is a top-level browsing context.
</li>
	<li>
~RET %B の `WindowProxy$I ~obj
◎
Return current's WindowProxy object.
</li>
</ol>
</div>

<div class="algo">
<p>
`frameElement@m
取得子~手続きは：
◎
The frameElement attribute's getter must run these steps:
</p>
<ol>
	<li>
%B ~LET コレに`対応する閲覧文脈$
◎
Let current be this Window object's browsing context.
</li>
	<li>
~IF［
%B ~EQ ~NULL
］
⇒
~RET ~NULL
◎
If current is null, then return null.
</li>
	<li>
%容器 ~LET %B の`容器$bc
◎
Let container be current's container.
</li>
	<li>
~IF［
%容器 ~EQ ~NULL
］
⇒
~RET ~NULL
◎
If container is null, then return null.
</li>
	<li>
~IF［
( %容器 の`~node文書$の`生成元$doc, `現在の設定群~obj$の`生成元$enV )
は`同じ生成元~domain$でない
］
⇒
~RET ~NULL
◎
If container's node document's origin is not same origin-domain with the current settings object's origin, then return null.
</li>
	<li>
~RET %容器
◎
Return container.
</li>
</ol>
</div>

<div class="example">
<p>
これらの~IDL属性が ~NULL を返し得る例：
◎
An example of when these IDL attributes can return null is as follows:
</p>

<pre class="lang-html">
&lt;!DOCTYPE html&gt;
&lt;iframe&gt;&lt;/iframe&gt;

&lt;script&gt;
"use strict";
const %element = document.querySelector("iframe");
const %iframeWindow = %element.contentWindow;
%element.remove();

console.assert(%iframeWindow.top === null);
console.assert(%iframeWindow.parent === null);
console.assert(%iframeWindow.frameElement === null);
&lt;/script&gt;
</pre>

<p>
この例の %iframeWindow に対応する`閲覧文脈$は、
%element が文書から除去されたとき`破棄され$る。
◎
Here the browsing context corresponding to iframeWindow was discarded when element was removed from the document.
</p>

</div>

				</section>
			</section>
			<section id="security-nav">
<h3 title="Security">7.1.3. ~security</h3>

<p id="security-1">
所与の`閲覧文脈$ %A, %B に対し，
%A が %B に
`近しい@
（ “ %A `is familiar with^en %B ” ）とは、次のいずれかが満たされることを意味する：
◎
A browsing context A is familiar with a second browsing context B if one of the following conditions is true:
</p>

<ul>
	<li>
( %A にて`作動中の文書$の`生成元$doc, %B にて`作動中の文書$の`生成元$doc )
は`同一-生成元$である
◎
Either the origin of the active document of A is the same as the origin of the active document of B, or
</li>
	<li>
［
%A は`子~閲覧文脈$である
］~AND［
%A の`~top-level閲覧文脈$ ~EQ %B
］
◎
The browsing context A is a child browsing context and its top-level browsing context is B, or
</li>
	<li>
［
%B は`補助~閲覧文脈$である
］~AND［
%A は %B を`開いた閲覧文脈$に`近しい$
］
◎
The browsing context B is an auxiliary browsing context and A is familiar with B's opener browsing context, or
</li>
	<li>
%B のある`先祖~閲覧文脈$ %X が存在して
⇒
( %A にて`作動中の文書$の`生成元$doc, %X にて`作動中の文書$の`生成元$doc )
は`同一-生成元$である
◎
The browsing context B is not a top-level browsing context, but there exists an ancestor browsing context of B whose active document has the same origin as the active document of A (possibly in fact being A itself).
</li>
</ul>

<p class="trans-note">【
最初と最後の条件から、特に，［
%A ~EQ %B, または
%A は %B の`先祖~閲覧文脈$である
］ならば、
%A は %B に`近しい$ことになる。
】</p>

<hr>

<div class="algo">
<p>
所与の`閲覧文脈$ %A, %B に対し、次の手続きが ~T を返すならば，
%A は %B を
`~navigateすることは許容されて@
いるとされる：
◎
A browsing context A is allowed to navigate a second browsing context B if the following algorithm returns true:
</p>
<ol>
	<li>
~IF［
%A ~EQ %B
］
⇒
~RET ~T
◎
↓</li>
	<li>
%S ~LET［
%A にて`作動中の文書$
］の`作動中の~sandbox法~flag集合$
◎
↓</li>
	<li>
<p>
~RET［
次のいずれかが満たされるならば ~F ／
~ELSE_ ~T
］：
</p>
		<ul>
			<li>
［
%B は`~top-level閲覧文脈$ではない
］~AND［
%A は %B の`先祖~閲覧文脈$でない
］~AND［
`~navi$sbox ~IN %S
］
◎
If A is not the same browsing context as B, and A is not one of the ancestor browsing contexts of B, and B is not a top-level browsing context, and A's active document's active sandboxing flag set has its sandboxed navigation browsing context flag set, then return false.
</li>
			<li>
<p>
［
%B は %A の`~top-level閲覧文脈$である
］~AND［［
%A にて`作動中の~window$の`一過な作動化$
］に応じて，次のいずれかが満たされる
］：
◎
Otherwise, if B is a top-level browsing context, and is one of the ancestor browsing contexts of A, then:
</p>
				<ul class="switch">
					<li>
~T の場合
⇒
`利用者~作動化~top-level~navi$sbox ~IN %S
◎
If A's active window has transient activation and A's active document's active sandboxing flag set has its sandboxed top-level navigation with user activation browsing context flag set, then return false.
</li>
					<li>
~F の場合
⇒
`非~利用者~作動化~top-level~navi$sbox ~IN %S
◎
Otherwise, if A's active window does not have transient activation and A's active document's active sandboxing flag set has its sandboxed top-level navigation without user activation browsing context flag set, then return false.
</li>
				</ul>
			</li>
			<li>
［
%B は`~top-level閲覧文脈$である
］~AND［
%B は %A の`先祖~閲覧文脈$でない
］~AND［
`~navi$sbox ~NIN %S
］~AND［
%A は %B の`許可-済み~navigator$でない
］
◎
Otherwise, if B is a top-level browsing context, and is neither A nor one of the ancestor browsing contexts of A, and A's Document's active sandboxing flag set has its sandboxed navigation browsing context flag set, and A is not the one permitted sandboxed navigator of B, then return false.
◎
Return true.
</li>
		</ul>
	</li>
</ol>

<p class="trans-note">【
最初の 2 つの段は、 3 番目の段を簡潔に記すための，訳者による追加。
】【
論理的には、 %A が %B を~navigateする機会が生じ得ないような場合（ “互いに無縁な” 閲覧文脈など）も ~F を返すべきだが、不要なので省略されていると見受けられる。
】</p>
</div>

<hr>

<div class="algo">
<p>
要素 %E の
`閲覧文脈~視野~生成元@
は、次を走らせた結果で与えられる：
</p>
<ol>
	<li>
%文書 ~LET %E の`~node文書$
</li>
	<li>
%B ~LET %文書 が`属する閲覧文脈$
</li>
	<li>
~IF［
%B ~EQ ~NULL
］
⇒
~RET ε
</li>
	<li>
%生成元 ~LET %文書 の`生成元$doc
</li>
	<li>
%B の ~EACH ( `先祖~閲覧文脈$ %A ) に対し
⇒
~IF［
( %A にて`作動中の文書$の`生成元$doc, %生成元 )
は`同一-生成元$でない
］
⇒
~RET ε
</li>
	<li>
~RET %生成元
</li>
</ol>

◎
An element has a browsing context scope origin if its Document's browsing context is a top-level browsing context or if all of its Document's ancestor browsing contexts all have active documents whose origin are the same origin as the element's node document's origin. If an element has a browsing context scope origin, then its value is the origin of the element's node document.
</div>

			</section>
			<section id="groupings-of-browsing-contexts">
<h3 title="Groupings of browsing contexts">7.1.4. 閲覧文脈の~group分け</h3>

<p>
~UAは、
`閲覧文脈~group集合@
を保持する
— それは、 0 個以上の`閲覧文脈~group$が成す`有順序~集合$である。
◎
A user agent holds a browsing context group set (a set of browsing context groups).
</p>

<p>
各
`閲覧文脈~group@
には、次に挙げるものが結付けられる：
◎
↓</p>

<dl class="def-list">
	<dt>
`閲覧文脈~集合@bcG
◎
A browsing context group holds a browsing context set＼
</dt>
	<dd>
0 個以上の`~top-level閲覧文脈$が成す`有順序~集合$。
◎
(a set of top-level browsing contexts).
</dd>
	<dd class="note">注記：
`新たな閲覧文脈~groupを作成する$ときには、新たな【！ある】`~top-level閲覧文脈$が当の`閲覧文脈~group$に追加される。
後続して`閲覧文脈~group$に追加される`~top-level閲覧文脈$は、すべて`補助~閲覧文脈$である。
◎
A top-level browsing context is added to the group when the group is created. All subsequent top-level browsing contexts added to the group will be auxiliary browsing contexts.
</dd>

	<dt>
`~agent~cluster~map@bcG
◎
A browsing context group has an associated agent cluster map＼
</dt>
	<dd>
<p>
`~agent~cluster~key$から`~agent~cluster$への弱い`~map$。
【 “弱い” とは，すなわち、】［
ある~agent~clusterに対し，それに~accessし得るものは無くなった
］と判断されるとき，それを【~garbage】収集するのは、~UAが担うとする。
◎
(a weak map of agent cluster keys to agent clusters). User agents are responsible for collecting agent clusters when it is deemed that nothing can access them anymore.
</dd>
	<dd class="trans-note">【
~map内の~keyとしての，`~agent~cluster~key$の同等性は、成分ごとの比較（生成元ならば`同一-生成元$）に基づくと見受けられる。
】</dd>

	<dt>
`履歴上の~agent~cluster~key~map@bcG
◎
A browsing context group has an associated historical agent cluster key map,＼
</dt>
	<dd>
`生成元$から`~agent~cluster~key$への`~map$。
この~mapは、［
所与の生成元~用に，それまで どの~agent~cluster~keyが利用されていたか
］を記録することにより，
<a href="~ORIGIN#origin-keyed-agent-clusters">生成元を~keyにする~agent~cluster</a>
特能の一貫性を確保するために利用される。
◎
which is a map of origins to agent cluster keys. This map is used to ensure the consistency of the origin-keyed agent clusters feature by recording what agent cluster keys were previously used for a given origin.
</dd>
	<dd class="note">注記
`履歴上の~agent~cluster~key~map$bcGを成す~entryは、当の`閲覧文脈~group$の存続期間~内に得られたものに限られる。
◎
The historical agent cluster key map only ever gains entries over the lifetime of the browsing context group.
</dd>

	<dt>
`非同一-生成元~隔離~mode@bcG
◎
A browsing context group has a cross-origin isolation mode,＼
</dt>
	<dd>
`非同一-生成元~隔離~mode$を与える。
初期~時には `none$coI とする。
◎
which is a cross-origin isolation mode. It is initially "none".
</dd>
</dl>

<p>
`非同一-生成元~隔離~mode@
に~アリな値は
⇒＃
`none@coI,
`logical@coI,
`concrete@coI
◎
A cross-origin isolation mode is one of three possible values: "none", "logical", or "concrete".
</p>

<div class="note">

<p>注記：
`logical$coI,
`concrete$coI
は、類似する。
どちらも，次をいずれも満たす`閲覧文脈~group$用に利用される：
◎
"logical" and "concrete" are similar. They are both used for browsing context groups where:
</p>
<ul>
	<li>
それを成すどの~top-level`文書$にも次が伴われる
⇒
`same-origin$coop を値にとる `Cross-Origin-Opener-Policy$h ~header
◎
every top-level Document has `Cross-Origin-Opener-Policy: same-origin`, and
</li>
	<li>
それを成すどの`文書$にも次が伴われる
⇒
`require-corp$coep を値にとる `Cross-Origin-Embedder-Policy$h ~header
◎
every Document has `Cross-Origin-Embedder-Policy: require-corp`.
</li>
</ul>

<p>
［
`非同一-生成元~隔離-済み能力$enVにより通過制御される~APIに対し，安全な~accessを是認する
］ために要求される~securityの特質を供するのが困難な~platformもある。
そのため、その【~APIが供する】能力 %能力 への~accessを是認できるのは，
`concrete$coI に限られる。
`logical$coI は、
%能力 【への安全な~access】を~supportしていない~platformにて利用される
— そこでも，非同一-生成元~隔離により課される様々な制約は適用されるが、
%能力 は是認されない。
◎
On some platforms, it is difficult to provide the security properties required to grant safe access to the APIs gated by the cross-origin isolated capability. As a result, only "concrete" can grant access that capability. "logical" is used on platform not supporting this capability, where various restrictions imposed by cross-origin isolation will still apply, but the capability is not granted.
</p>
</div>

<div class="algo">
<p>
`新たな閲覧文脈~groupを作成する@
ときは、次の手続きを走らす：
◎
To create a new browsing context group, run these steps:
</p>
<ol>
	<li>
%~group ~LET 新たな`閲覧文脈~group$
◎
Let group be a new browsing context group.
</li>
	<li>
~UAの`閲覧文脈~group集合$に %~group を`付加する$set
◎
Append group to the user agent's browsing context group set.
</li>
	<li>
%B ~LET `新たな閲覧文脈を作成する$( ~NULL, ~NULL, %~group )
◎
Let browsingContext be the result of creating a new browsing context with null, null, and group.
</li>
	<li>
`閲覧文脈~groupに付加する$( %~group, %B )
◎
Append browsingContext to group.
</li>
	<li>
~RET %~group
◎
Return group.
</li>
</ol>
</div>

<div class="algo">
<p>
`閲覧文脈~groupに付加する@
ときは、所与の
( `閲覧文脈~group$ %~group, `~top-level閲覧文脈$ %T )
に対し，次の手続きを走らす：
◎
To append a top-level browsing context browsingContext to a browsing context group group, run these steps:
</p>
<ol>
	<li>
%~group の`閲覧文脈~集合$bcGに %T を`付加する$set
◎
Append browsingContext to group's browsing context set.
</li>
	<li>
%T の`~group$tbcG ~SET %~group
◎
Set browsingContext's group to group.
</li>
</ol>
</div>

<div class="algo">
<p>
`閲覧文脈~groupから除去する@
ときは、所与の
( `~top-level閲覧文脈$ %T )
に対し，次の手続きを走らす：
◎
To remove a top-level browsing context browsingContext, run these steps:
</p>
<ol>
	<li>
~Assert：
%T の`~group$tbcG ~NEQ ~NULL
— `閲覧文脈$が`破棄され$るのは一度限りなので。
◎
Assert: browsingContext's group is non-null, because a browsing context only gets discarded once.
</li>
	<li>
%~group ~LET %T の`~group$tbcG
◎
Let group be browsingContext's group.
</li>
	<li>
%T の`~group$tbcG ~SET ~NULL
◎
Set browsingContext's group to null.
</li>
	<li>
%~group の`閲覧文脈~集合$bcGから %T を`除去する$
◎
Remove browsingContext from group's browsing context set.
</li>
	<li>
~IF［
%~group の`閲覧文脈~集合$bcGは`空$である
］
⇒
~UAの`閲覧文脈~group集合$から %~group を`除去する$
◎
If group's browsing context set is empty, then remove group from the user agent's browsing context group set.
</li>
</ol>
</div>

<p class="note">注記：
［
`閲覧文脈~groupに付加する$／`閲覧文脈~groupから除去する$
］は、`閲覧文脈~group$の存続期間を定義し易くするための，~primitiveな演算である。
それらは、次に挙げる~algoから~callされる
⇒＃
`新たな閲覧文脈~groupを作成する$,
`新たな補助~閲覧文脈を作成する$,
`閲覧文脈を破棄する$
◎
Append and remove are primitive operations that help define the lifetime of a browsing context group. They are called from creating a new browsing context group, creating a new auxiliary browsing context, and discarding a browsing context.
</p>

<hr>

<p class="note">注記：
この標準は、
“<span id="unit-of-related-browsing-contexts">互いに関係する閲覧文脈~群</span>”,
“<span id="unit-of-related-similar-origin-browsing-contexts">互いに関係するかつ生成元も類似な閲覧文脈~群</span>”
を定義していた。
これらは、必要十分でなかったので除去された。
◎
The HTML Standard used to define "unit of related browsing contexts" and "unit of related similar-origin browsing contexts". These have been removed as they were not adequate.
</p>

			</section>
			<section id="browsing-context-names">
<h3 title="Browsing context names">7.1.5. 閲覧文脈~名</h3>

<p>
各 `閲覧文脈$は、
`閲覧文脈~名@
を持つ。
他が言明されない限り，空~文字列とする（名前がないことを表す）。
◎
Browsing contexts can have a browsing context name. Unless stated otherwise, it is the empty string.
</p>

<p>
`妥当な閲覧文脈~名@
とは、［
空でない
］~AND［
最初の文字 ~NEQ `005F^U `_^smb
］を満たす文字列である。
（最初の文字 ~EQ `005F^U `_^smb なる文字列は、次に述べる特別な~keyword用に予約される。）
◎
A valid browsing context name is any string with at least one character that does not start with a U+005F LOW LINE character. (Names starting with an underscore are reserved for special keywords.)
</p>

<div class="p">
<p>
`妥当な閲覧文脈~名または~keyword@
とは、次のいずれかを満たす文字列である：
</p>
<ul>
	<li>
`妥当な閲覧文脈~名$である
</li>
	<li>
次のいずれかに`~ASCII大小無視$で合致する
⇒
`_blank^l, `_self^l, `_parent^l, `_top^l
</li>
</ul>

◎
A valid browsing context name or keyword is any string that is either a valid browsing context name or that is an ASCII case-insensitive match for one of: _blank, _self, _parent, or _top.
</div>

<p>
~pageの “~link等” （
~link, ~script, ~form提出
等々）が指定する，`妥当な閲覧文脈~名または~keyword$ 値
— 以下，単に %名前 と記す —
は、~pageが~sandbox化されているか否かに応じて、下の規範的でない
“表 A”
の 2 列目以降に要約されるような，それぞれに異なる意味を持つ：
◎
These values have different meanings based on whether the page is sandboxed or not, as summarized in the following (non-normative) table.＼
</p>

<div class="p">

<ul>
	<li>
表の 1 列目には、 %名前, および追加的な条件が示される。
</li>
	<li>
<p>
表の 2 〜 4 列目
— ~~見出し［
“普通”,  “無”, “有”
］の列 —
は、表の 1 列目の条件の下で，どの`閲覧文脈$が~navigateされるかを与える：
</p>
		<ul>
			<li>
“普通” の列は、次項の
“無”, “有”
いずれにも該当しないときの効果を与える。
</li>
			<li>
［
“無” ／ “有”
］の列は、当の “~link等” が `iframe$e 内にあって,
その `iframe^e は `sandbox$a 属性を有していて,
その値に `allow-top-navigation$v ~keywordが［
無いとき ／ 有るとき
］の効果を与える。
</li>
		</ul>
	</li>
</ul>

<p class="trans-note">【
原文による表は、説明が省略され過ぎているので、この訳ではかなり加筆している。
】</p>

<p>
加えて、 “表 A” に利用される~~記号の意味を次の表に示す：
</p>

<table><thead><tr><th>記号
<th>意味
</thead>

<tbody><tr><td>`現-^i【！current】
<td>
%名前 を指定している “~link等” が所属している`文書$が`属する閲覧文脈$を指す。

<tr><td>`親^i【！parent】
<td>
`現-^i の`親~閲覧文脈$を指す。

<tr><td>`top^i
<td>
`現-^i の`~top-level閲覧文脈$を指す。

<tr><td>`新-^i【！new】
<td>
新たな`~top-level閲覧文脈$（`補助~閲覧文脈$の場合もある）が作成されることを意味する。
これは、種々の［
利用者による選好／~UAによる施策
］の~subjectになる。

<tr><td>`ナシ^i【！none】
<td>
何も起きない（~navigateされる閲覧文脈はない）ことを意味する。

<tr><td>`新-？^i【！maybe new】
<td>
（ “無” ／ “有” の場合のみ）
`iframe^e の `sandbox$a 属性に `allow-popups$v ~keywordも指定されているならば `新-^i と同じ。
他の場合は `ナシ^i と同じ（ただし，利用者が~sandbox法を上書きした（していた）場合は、 `新-^i になり得る）。

</tbody></table>

◎
In this table, "current" means the browsing context that the link or script is in, "parent" means the parent browsing context of the one the link or script is in, "top" means the top-level browsing context of the one the link or script is in, "new" means a new top-level browsing context or auxiliary browsing context is to be created, subject to various user preferences and user agent policies, "none" means that nothing will happen, and "maybe new" means the same as "new" if the "allow-popups" keyword is also specified on the sandbox attribute (or if the user overrode the sandboxing), and the same as "none" otherwise.
</div>

<table id="_nav-table">
<caption>表 A</caption>

<thead><tr><th>
%名前, および追加的な条件
<th>普通
<th>無
<th>有
</thead><tbody>
<!-- 
Keyword │ Ordinary effect │ Effect in an iframe with...
_______ │ ________ ______ │ sandbox="" │ allow-top-navigation
-->

<tr><td>
%名前 は指定されていない
◎
none specified, for links and form submissions
<td>`現-^i
<td>`現-^i
<td>`現-^i

<tr><td>空~文字列
<td>`現-^i
<td>`現-^i
<td>`現-^i

</tbody>

<tbody><tr><th colspan="4" scope="rowgroup">
以下、~keywordによる %名前 の場合

<tr><td>`_blank^l
<td>`新-^i
<td>`新-？^i
<td>`新-？^i

<tr><td>`_self^l
<td>`現-^i
<td>`現-^i
<td>`現-^i

<tr><td>
`_parent^l ~AND［
`親^i ~EQ ε
］
◎
_parent if there isn't a parent
<td>`現-^i
<td>`現-^i
<td>`現-^i

<tr><td>
`_parent^l ~AND［
`親^i ~EQ `top^i
］
◎
_parent if parent is also top
<td>`親^i （ ~EQ `top^i ）
<td>`ナシ^i
<td>`親^i

<tr><td>
`_parent^l ~AND［
`親^i ~NIN { ε, `top^i }
］
◎
_parent if there is one and it's not top
<td>`親^i
<td>`ナシ^i
<td>`ナシ^i

<tr><td>
`_top^l ~AND［
`top^i ~EQ `現-^i
］
◎
_top if top is current
<td>`現-^i （ ~EQ `top^i ）
<td>`現-^i
<td>`現-^i

<tr><td>
`_top^l ~AND［
`top^i ~NEQ `現-^i
］
◎
_top if top is not current
<td>`top^i
<td>`ナシ^i
<td>`top^i

</tbody>

<tbody><tr><th colspan="4" scope="rowgroup">
以下、非~keywordによる %名前 の場合
— 記号 %B は、 %名前 を`名前$bcとする`閲覧文脈$を表すとする。

<tr><td>
%B は存在しない
◎
name that doesn't exist
<td>`新-^i
<td>`新-？^i
<td>`新-？^i

<tr><td>
%B は `現-^i の子孫である
◎
name that exists and is a descendant
<td>%B
<td>%B
<td>%B

<tr><td>
%B ~EQ `現-^i
◎
name that exists and is current
<td>%B （ ~EQ `現-^i ）
<td>%B
<td>%B

<tr><td>
［
%B は `現-^i の先祖である
］~AND［
%B ~EQ `top^i
］
◎
name that exists and is an ancestor that is top
<td>%B （ ~EQ `top^i ）
<td>`ナシ^i
<td>%B

<tr><td>
［
%B は `現-^i の先祖である
］~AND［
%B ~NEQ `top^i
］
◎
name that exists and is an ancestor that is not top
<td>%B
<td>`ナシ^i
<td>`ナシ^i

<tr><td>
［
%B は上のどれにも該当しない
］~AND［
%B の`~top-level閲覧文脈$ ~EQ `top^i
］
◎
other name that exists with common top
<td>%B
<td>`ナシ^i
<td>`ナシ^i

</tbody>

<tbody><tr><th colspan="4" scope="rowgroup">
以下、 %B は上のどれにも該当しない場合

<tr><td>
［
%B は `現-^i に`近しい$
］~AND［
`現-^i は %B の`許可-済み~navigator$である
］
◎
name that exists with different top, if familiar and one permitted sandboxed navigator
<td>%B
<td>%B
<td>%B

<tr><td>
［
%B は `現-^i に`近しい$
］~AND［
`現-^i は %B の`許可-済み~navigator$でない
］
◎
name that exists with different top, if familiar but not one permitted sandboxed navigator
<td>%B
<td>`ナシ^i
<td>`ナシ^i

<tr><td>
［
%B は `現-^i に`近しい$
］でない
◎
name that exists with different top, not familiar
<td>`新-^i
<td>`新-？^i
<td>`新-？^i

</tbody></table>

<!-- 
Keyword 	Ordinary effect 	Effect in an iframe with...
sandbox="" 	sandbox="allow-top-navigation"
none specified, for links and form submissions 	current 	current 	current
empty string 	current 	current 	current
_blank 	new 	maybe new 	maybe new
_self 	current 	current 	current
_parent if there isn't a parent 	current 	current 	current
_parent if parent is also top 	parent/top 	none 	parent/top
_parent if there is one and it's not top 	parent 	none 	none
_top if top is current 	current 	current 	current
_top if top is not current 	top 	none 	top
name that doesn't exist 	new 	maybe new 	maybe new
name that exists and is a descendant 	specified descendant 	specified descendant 	specified descendant
name that exists and is current 	current 	current 	current
name that exists and is an ancestor that is top 	specified ancestor 	none 	specified ancestor/top
name that exists and is an ancestor that is not top 	specified ancestor 	none 	none
other name that exists with common top 	specified 	none 	none
name that exists with different top, if familiar and one permitted sandboxed navigator 	specified 	specified 	specified
name that exists with different top, if familiar but not one permitted sandboxed navigator 	specified 	none 	none
name that exists with different top, not familiar 	new 	maybe new 	maybe new
-->

<p class="tablenote"><small>
~sandbox化された閲覧文脈に対する制約のほとんどは、他の~algo
— 例えば `~navi$~algo —
により適用される。
`閲覧文脈を選ぶ規則$ではなく。
</small>
◎
Most of the restrictions on sandboxed browsing contexts are applied by other algorithms, e.g. the navigation algorithm, not the rules for choosing a browsing context given below.
</p>

<hr>

<div class="algo">
<p>
`閲覧文脈を選ぶ規則@
は、所与の
( `閲覧文脈~名$ %名前, `閲覧文脈$ %現-, 真偽値 %noopener )
に対し，次に従う：
◎
The rules for choosing a browsing context, given a browsing context name name, a browsing context current, and a boolean noopener are as follows:
</p>
<ol>
	<li>
%~window種別 ~LET `既存のまたはナシ^i
◎
Let chosen be null.
◎
Let windowType be "existing or none".
</li>
	<li>
%~sandbox法~flag集合 ~LET %現- にて`作動中の文書$にて`作動中の~sandbox法~flag集合$
◎
Let sandboxingFlagSet be current's active document's active sandboxing flag set.
</li>
	<li>
%小文字~化~名 ~LET `~ASCII小文字~化する$( %名前 )
◎
↓</li>
	<li>
<p>
%結果 ~LET %小文字~化~名 に応じて，次で与えられる閲覧文脈または ~NULL：
◎
↑↓</p>
		<dl class="switch">
			<dt>空~文字列</dt>
			<dt>`_self^l</dt>
			<dd>
%現-
◎
If name is the empty string or an ASCII case-insensitive match for "_self", then set chosen to current.
</dd>

			<dt>`_parent^l</dt>
			<dd>
%現- の`親~閲覧文脈$ ~NEQ ~NULL ならば それ ／
~ELSE_ %現-
◎
Otherwise, if name is an ASCII case-insensitive match for "_parent", set chosen to current's parent browsing context, if any, and current otherwise.
</dd>

			<dt>`_top^l</dt>
			<dd>
%現- の`~top-level閲覧文脈$ ~NEQ ε ならば それ ／
~ELSE_ %現-
◎
Otherwise, if name is an ASCII case-insensitive match for "_top", set chosen to current's top-level browsing context, if any, and current otherwise.
</dd>

			<dt>`_blank^l</dt>
			<dd>
~NULL
</dd>

			<dt>その他</dt>
			<dd>
<p>
~IF［
次のいずれも満たすような閲覧文脈 %B は存在する
］…
</p>

<ul><li>%B の`名前$bc ~EQ %名前
</li><li>%現- は %B に`近しい$
</li><li>~UAは， %現-, %B が互いに到達してもよいほどに十分~関係すると決定した
</li></ul>

<p>
…ならば
⇒
そのような閲覧文脈のうちのいずれか
⇒
該当する %B が複数ある場合、~UAは，そのうち一つを［
何らかの，一貫した, 任意な方式
］で選定するベキである
— 例えば［
最も近過去に開いたもの ／
最も近過去に~focusされたもの ／
より近く関係するもの
］など。
</p>

<p>
~ELSE
⇒
~NULL
</p>

◎
Otherwise, if name is not an ASCII case-insensitive match for "_blank", there exists a browsing context whose name is the same as name, current is familiar with that browsing context, and the user agent determines that the two browsing contexts are related enough that it is ok if they reach each other, set chosen to that browsing context. If there are multiple matching browsing contexts, the user agent should set chosen to one in some arbitrary consistent manner, such as the most recently opened, most recently focused, or more closely related.
</dd>
			<dd class="XXX">
これは、
<a href="~HTMLissue/313">課題 #313</a>
にて，もっと精確に定められることになる。
◎
This will be made more precise in issue #313.
</dd>
		</dl>
	</li>
	<li>
~IF［
%結果 ~NEQ ~NULL
］
⇒
~RET ( %結果, %~window種別 )
◎
↑</li>
	<li>
~Assert：
新たな閲覧文脈が要請されている
— 何が起こるかは、~UAの環境設定と能に依存する
◎
Otherwise, a new browsing context is being requested, and what happens depends on the user agent's configuration and abilities — it is determined by the rules given for the first applicable option from the following list:
</li>
	<li id="popup-blocker">
~IF［
%現- の`作動中の~window$の`一過な作動化$ ~EQ ~F
］~AND［
~UAは~popupを示さないよう環境設定されている（すなわち，~UAは “`popup blocker^en” を可能化している）
］
⇒
~UAは、~popupを阻止したことを利用者に伝えてもヨイ
◎
If current's active window does not have transient activation and the user agent has been configured to not show popups (i.e., the user agent has a "popup blocker" enabled)
• The user agent may inform the user that a popup has been blocked.
</li>
	<li id="sandboxWindowOpen">
~ELIF［
`補助~navi$sbox ~IN %~sandbox法~flag集合
］
⇒
~UAは、~popupを阻止したことを開発者~consoleに報告してもヨイ
◎
If sandboxingFlagSet has the sandboxed auxiliary navigation browsing context flag set
• The user agent may report to a developer console that a popup has been blocked.
</li>
	<li>
<p>
~ELIF［
~UAは新たな閲覧文脈を作成するように環境設定されている
］：
◎
If the user agent has been configured such that in this instance it will create a new browsing context
</p>
		<ol>
			<li>
%~window種別 ~SET `制約されない新たな^i
◎
Set windowType to "new and unrestricted".
</li>
			<li>
<p>
~IF［
%現- の`~top-level閲覧文脈$にて`作動中の文書$の`非同一-生成元~opener施策$docの`値$coOP ~IN { `same-origin$coop, `same-origin-plus-COEP$coop }
］：
◎
If current's top-level browsing context's active document's cross-origin opener policy's value is "same-origin" or "same-origin-plus-COEP", then:
</p>
				<ol>
					<li>
%現-文書 ~LET %現- にて`作動中の文書$
◎
Let currentDocument be current's active document.
</li>
					<li>
<p>
~IF［
( %現-文書 の`生成元$doc, %現-文書 に`関連な設定群~obj$の`~top-level生成元$enV
)
は`同一-生成元$でない
］
⇒＃
%noopener ~SET ~T,
%名前 ~SET `_blank^l,
%~window種別 ~SET `~openerが無い新たな^i
◎
If currentDocument's origin is not same origin with currentDocument's relevant settings object's top-level origin, then set noopener to true, name to "_blank", and windowType to "new with no opener".
</p>

<p class="note">注記：
`非同一-生成元~opener施策$が在る下では、入子な文書のうち［
その~top-level閲覧文脈にて作動中の文書とは非同一-生成元に属するもの
］の %noopener は，常に ~T に設定される。
◎
In the presence of a cross-origin opener policy, nested documents that are cross-origin with their top-level browsing context's active document always set noopener to true.
</p>
					</li>
				</ol>
			</li>
			<li id="noopener">
~IF［
%noopener ~EQ ~T
］
⇒
%結果 ~SET `新たな~top-level閲覧文脈を作成する$
◎
If noopener is true, then set chosen to the result of creating a new top-level browsing context.
</li>
			<li>
<p>
~ELSE：
◎
Otherwise:
</p>
				<ol>
					<li>
%結果 ~SET `新たな補助~閲覧文脈を作成する$( %現- )
◎
Set chosen to the result of creating a new auxiliary browsing context with current.
</li>
					<li>
~IF［
`~navi$sbox ~IN %~sandbox法~flag集合
］
⇒
%結果 の`許可-済み~navigator$ ~SET %現-
◎
If sandboxingFlagSet's sandboxed navigation browsing context flag is set, then current must be set as chosen's one permitted sandboxed navigator.
</li>
				</ol>
			</li>
			<li>
~IF［
`~sandboxは補助~閲覧文脈に伝播する~flag$ ~IN %~sandbox法~flag集合
］
⇒
%結果 の`~popup~sandbox法~flag集合$に %~sandbox法~flag集合 を成すすべての~flagを追加する
◎
If sandboxingFlagSet's sandbox propagates to auxiliary browsing contexts flag is set, then all the flags that are set in sandboxingFlagSet must be set in chosen's popup sandboxing flag set.
</li>
			<li>
~IF［
%小文字~化~名 ~NEQ `_blank^l
］
⇒
%結果 の`名前$bc ~SET %名前
◎
If name is not an ASCII case-insensitive match for "_blank", then set chosen's name to name.
</li>
		</ol>

<p class="note">注記：
新たに作成された`閲覧文脈$が即時に`~navigate$される場合、その~naviは，
`履歴~取扱い$V を `置換-$i に設定する下で行われることになる。
◎
If the newly created browsing context is immediately navigated, then the navigation will be done with historyHandling set to "replace".
</p>

	</li>
	<li>
~ELIF［
~UAは %現- を再利用するように環境設定されている
］
⇒
%結果 ~SET %現-
◎
If the user agent has been configured such that in this instance it will reuse current
• Set chosen to current.
</li>
	<li>
<p>
~ELSE（ ~UAは閲覧文脈を見出さないように環境設定されている）
⇒
何もしない
◎
If the user agent has been configured such that in this instance it will not find a browsing context
• Do nothing.
</p>

<p class="note">注記：
~UAには、［
~UAが常に %現- を再利用するように環境設定する仕方
］を利用者に供することが奨励される。
◎
User agents are encouraged to provide a way for users to configure the user agent to always reuse current.
</p>
	</li>
	<li>
~RET ( %結果, %~window種別 )
◎
Return chosen and windowType.
</li>
</ol>
</div>

			</section>
		</section>
		<section id="cross-origin-objects">
<h2 title="Security infrastructure for Window, WindowProxy, and Location objects">7.2. `Window^I, `WindowProxy^I, `Location^I ~obj用の~security基盤</h2>

<p class="trans-note">【
この節の内容は、
<a href="~HTMLWPROXY#cross-origin-objects">別ページ</a>
にて。
】</p>

		</section>
	</section>
</main>
