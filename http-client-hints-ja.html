<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<title>RFC8942 — HTTP Client Hints（日本語訳）</title>

<link rel="stylesheet" href="common.css" type="text/css">
<link rel="stylesheet" href="http-common.css" type="text/css">
<script src="common0.js"></script>
<script src="http-common.js"></script>
<script src="common1.js" async></script>

<script type="text/plain" id="_source_data">

●●options

spec_title:HTTP Client Hints
	spec_date:2021-02-10
trans_update:2021-02-11
	source_checked:
original_url:https://www.rfc-editor.org/rfc/rfc8942.html
abbr_url:HTTPch
spec_status:IETFEX
page_state_key:HTTP
no_original_dfn:true
ref_rfc:true
	ref_id_prefix:ref-
site_nav:network,http
trans_1st_pub:2020-09-29

●●original_id_map

references:
normative:
informative:

●●mdn_urls
accept-ch:HTTP/Headers/Accept-CH
	client-hint:https://developer.mozilla.org/docs/Glossary/Client_hints

●●link_map

h.Accept-CH:#accept-ch
h.Save-Data:https://wicg.github.io/savedata/#save-data-request-header-field

p.sf-list:~STRUCTURED-FIELDS#p.sf-list

~client~hint~header:#client-hint-request-header-fields
~client~hint:#client-hint

~proactiveな内容~折衝:~HTTPsem#proactive.negotiation

有構造~header:~STRUCTURED-FIELDS#structured-header
~sf~token:~STRUCTURED-FIELDS#token
~sf~list:~STRUCTURED-FIELDS#list

禁止~要請~header:~FETCH#forbidden-request-header
rq.行先:~FETCH#concept-request-destination

	●§
3.1:#accept-ch
~securityの考慮点:#security-considerations
	https://wicg.github.io/client-hints-infrastructure/#low-entropy-table

●●words_table1
sf:<sub>sf-</sub>

●●words_table

	●保安
受動的:passive::~
能動的:active::~
脅威:threat:~
敏感性:sensitivity:~
通過制御-:gate:~
口:surface:~
情報量:entropy::~
事実調査:research:~
事実調査器:researcher:~
tradeoff::::トレードオフ
黙って:silentに:~
	兼ね合い:balance
分析-:analyze:~

	●仕様
opt-in-:opt in
opt-in:
排他的:exclusive:~
推定-:infer:~
高価:expensive:~
定式化-:formulate:~
観点:perspective:~
場当的:ad hoc:場当たり的
木目細か:fine-grained:~
難題:challenging:~
順応-:adapt:~
順応:adaptation:~
	順応:adaption:~
親切:friendly:~
束縛-:bind:~
	bound
念頭:mind:~
助け:help:~
仕様化-:specify:~
利用量:usage:~
特質:properties:~

	通称:colloquially known
	難しい:hardである
	難しく:hardに
	選ぶ:chooseする
	最悪:worst:~
	し得るようになる:potentially
	生じ得る:potential
	勧める:advised to
	調べる:look at
	方がまし:not better than
	用意がない:unwilling
	千差万別:thousands of different
	依拠している:reliant
	課す:impose
	欠くこと:lack
	難がある:suffer from
	きちんと定義された:well-defined
	転換-:turn into
	~~規定する:respective
	実用的でない:impractical
	認識されない:unrecognized
	見込まれ:likely
	つもりがある:going to be
	〜ごとに:basis
	〜に代わって:in its stead
	念頭に置く:bear in mind
	制御されない:uncontrolled
	そのためには:to that end
	様々に:have different
	一因:cause
	貴重な:invaluable
	~port可能:portable
	~port能:portability

	●未分類
多産:prolific:~
地理所在:geolocation:~
高精細:highly granular:~
剥がす:stripする:~
運び:carryし:~
発-:emit:~
	発すること:emission

	~client~hint:Client Hint
	~UA:User Agent
	有構造~header:Structured Header
	恒久的~message~header~field~registry:Permanent Message Header Fields registry
	〜から〜までにわたる:Different features will be positioned in different points in the space between
	“肥大化” :creates "bloat"
	ABNF:Augmented Backus-Naur Form
	早期に:early
	~privacyを保全する:privacy-preserving
	監視されない:unmonitored
	し続けて:keep
	広げる／増大／増えること:increase
	増える結果になる:incurs an increase
	近い:close
	~link能:linkability
	敏感でない:non-sensitive
	〜ごと:per-
	高-:high-
	低-:low-
	より高:higher
	選ぶ:choice
	に伴い 〜 はいくぶん増えることになる:lead to some increased 〜
	存続する限り:duration


●●ref_normative

[RFC2119]
    Bradner, S., "Key words for use in RFCs to Indicate Requirement Levels", BCP 14, ~RFC2119, March 1997
[RFC3864]
    Klyne, G., Nottingham, M., and J. Mogul, "Registration Procedures for Message Header Fields", BCP 90, ~RFC3864, September 2004
[RFC5234]
    Crocker, D., Ed. and P. Overell, "Augmented BNF for Syntax Specifications: ABNF", STD 68, ~RFC5234, January 2008
[RFC7231]
    Fielding, R., Ed. and J. Reschke, Ed., "Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content", ~RFC7231, June 2014
[RFC7234]
    Fielding, R., Ed., Nottingham, M., Ed., and J. Reschke, Ed., "Hypertext Transfer Protocol (HTTP/1.1): Caching", ~RFC7234, June 2014
[RFC8174]
    Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words", BCP 14, ~RFC8174, May 2017
[RFC8941]
    Nottingham, M. and P-H. Kamp, "Structured Field Values for HTTP", ~RFC8941, February 2021


●●ref_informative

[CLIENT-HINTS-INFRASTRUCTURE]
    Weiss, Y., "Client Hints Infrastructure", July 2020,
    URL: https://wicg.github.io/client-hints-infrastructure/
[FETCH]
    van Kesteren, A., "Fetch", n.d.,
    URL: https://fetch.spec.whatwg.org/
[RFC6265]
    Barth, A., "HTTP State Management Mechanism", ~RFC6265, April 2011
[UA-CH]
    West, M. and Y. Weiss, "User Agent Client Hints", n.d.,
    URL: https://wicg.github.io/ua-client-hints/


●●
Author's Address

●●trans_metadata
<p>
~THIS_PAGEは、
~IETF により Internet-Draft として公表された，
<a href="~SPEC_URL">HTTP Client Hints</a>
を日本語に翻訳したものです。
~PUB
</p>

●●spec_metadata

Stream
	Internet Engineering Task Force (IETF)
RFC
	8942
位置付け
	Experimental
分類
	Experimental
公表日
	2021 年 2 月
ISSN
	2070-1721
著作者／著作者アドレス
	I. Grigorik, Google, <a href="mailto:ilya@igvita.com">ilya@igvita.com</a>, <a href="https://www.igvita.com/">https://www.igvita.com/</a>
	Y. Weiss, Google, <a href="mailto:yoav@yoav.ws">yoav@yoav.ws</a>, <a href="https://blog.yoav.ws/">https://blog.yoav.ws/</a>

現在の位置付け, 正誤表, フィードバックの方法
	https://www.rfc-editor.org/info/rfc8942

commit 履歴（ Internet-Draft ）
	https://github.com/httpwg/http-extensions/commits/main/draft-ietf-httpbis-client-hints.md
ソースコード／課題リスト
	https://github.com/httpwg/http-extensions/labels/client-hints

</script>

</head>
<body>


<header>
	<hgroup>
<h1>HTTP クライアントヒント</h1>
<p>RFC 8942 — Client Hints</p>
	</hgroup>
</header>

<div id="MAIN" hidden>
	<section id="abstract">
◎要約

<p>
~HTTPは、
`~proactiveな内容~折衝$を定義する
— それは、所与の要請に対し，［
要請~header内に表出された`~UA$の特性に基づいて，適切な応答を選定する
］ことを`~server$に許容する。
実施においては、
~UAは，それらの要請~headerを送信する用意がないことが多い
— `~server$に利用されるかどうか明瞭でないことに加え、
それらの送信は，処理能, ~privacyどちらにも影響iがあるので。
◎
HTTP defines proactive content negotiation to allow servers to select the appropriate response for a given request, based upon the user agent's characteristics, as expressed in request headers. In practice, user agents are often unwilling to send those request headers, because it is not clear whether they will be used, and sending them impacts both performance and privacy.
</p>

<p>
この文書は、
`Accept-CH$h 応答~headerを定義する
— それを利用すれば、
`~server$は，自身による［
`~proactiveな内容~折衝$用の要請~headerの利用
］を広告できる。
それとともに、
そのような~header
— 通称 “`~client~hint$” —
を作成するための一連の指針も与える。
◎
This document defines an Accept-CH response header that servers can use to advertise their use of request headers for proactive content negotiation, along with a set of guidelines for the creation of such headers, colloquially known as "Client Hints."
</p>

	</section>
	<section id="status-of-memo">
<h2 title="Status of This Memo">このメモの位置付け</h2>

<p class="trans-note">【
この節の内容は
`~IETF日本語訳 共通~page＠~IETFcommon#status-experimental$に移譲。
】</p>

	</section>
	<section id="copyright">
<h2 title="Copyright Notice">著作権の告知</h2>

<p lang="en">
Copyright (c) 2021 IETF Trust and the persons identified as the document authors. All rights reserved.
</p>

<p class="trans-note">【
以下、この節の他の内容は
`~IETF日本語訳 共通~page＠~IETFcommon#copyright-notice$に移譲。
】</p>

	</section>

<main id="MAIN0">

	<section id="introduction">
<h2 title="Introduction">1. 序論</h2>

<p>
~webに~accessしている機器の［
能力, 選好~情報
］は、千差万別である。
これらの機器~能力には、
~hardwareや~softwareの特性も，［
利用者／~UA
］の動的な選好も含まれる。
歴史的に、
応用は，そのような能力に基づいて［
内容の送達／利用者~体験
］を最適化するよう`~server$に求めるならば、［
次に挙げるものや類似な仕組み, それらのうちいくつかの組合n
］により，場当的な内容~折衝を可能化する必要があった
⇒＃
受動的な識別に依拠する（例： `User-Agent$h ~header【！`7231/5.5.3$rfc】の値を確立-済みな~UA署名の~databaseと照合する）／
~HTTP~cookie `RFC6265$r を利用する／
~URL~parameterを利用する
◎
There are thousands of different devices accessing the web, each with different device capabilities and preference information. These device capabilities include hardware and software characteristics, as well as dynamic user and user agent preferences. Historically, applications that wanted the server to optimize content delivery and user experience based on such capabilities had to rely on passive identification (e.g., by matching the User-Agent header field (Section 5.5.3 of [RFC7231]) against an established database of user agent signatures), use HTTP cookies [RFC6265] and URL parameters, or use some combination of these and similar mechanisms to enable ad hoc content negotiation.
</p>

<p>
そのような技法は、
設定しておくのも保守するのも高価であり，［
各~応用~間／各~server間
］にまたがって~port可能ではない。
それらはまた、［
応用, ~server
］どちらにとっても，どの~dataが［
要求されるか／折衝の間に利用-中にあるのか
］解するのを難しくしている：
◎
Such techniques are expensive to set up and maintain, and are not portable across both applications and servers. They also make it hard for both user agent and server to understand which data are required and is in use during the negotiation:
</p>
<ul>
	<li>
~UA検出は
⇒＃
すべての静的な変数【 `User-Agent$h 文字列を成す各~成分など】を依拠-可能に識別し得ない／
動的な~UA選好を推定し得ない／
外部の機器~databaseを要求する／
~cacheに親切でない／
受動的な指紋収集~口に依拠している
◎
User agent detection cannot reliably identify all static variables, cannot infer dynamic user agent preferences, requires an external device database, is not cache friendly, and is reliant on a passive fingerprinting surface.
</li>
	<li>
~cookieに基づく~approachは
⇒＃
応用~間や~server間にまたがって~port可能でない／
~JS実行を要求することにより，~client側に追加的な待時間を課す／
~cacheに親切でない
◎
Cookie-based approaches are not portable across applications and servers, impose additional client-side latency by requiring JavaScript execution, and are not cache friendly.
</li>
	<li>
~URL~parameterは，~cookieに基づく~approachに類似するが
⇒＃
~port能を欠く難がある／
内容~折衝~dataを各~資源の~URLの内側に符号化する要件に因り，配備するのは難しい
◎
URL parameters, similar to cookie-based approaches, suffer from lack of portability, and are hard to deploy due to a requirement to encode content negotiation data inside of the URL of each resource.
</li>
</ul>

<p>
`~proactiveな内容~折衝$ `RFC7231$r 【！`7231/3.4.1$rfc】は、
代替な~approachを提供する：
`~UA$は、
自身の能力と特性を広告するため，仕様化され, きちんと定義された要請~headerを利用する
— `~server$が、
それらの要請~header（あるいは、他の暗黙的な特性）に基づいて，
適切な応答を選定できる（または定式化できる）よう。
◎
Proactive content negotiation (Section 3.4.1 of [RFC7231]) offers an alternative approach; user agents use specified, well-defined request headers to advertise their capabilities and characteristics, so that servers can select (or formulate) an appropriate response based on those request headers (or on other, implicit characteristics).
</p>

<p>
しかしながら，`~proactiveな内容~折衝$用の伝統的な技法は、［
`~UA$が，これらの要請~headerを多産に送信する
］ことを意味することが多い。
これは、
（要請を “肥大化” させるので）
処理能の懸念の一因になることに加え，
~privacyの課題もある
— そのような情報を受動的に供することは、
利用者に黙って指紋収集することを`~server$に許容する。
◎
However, traditional proactive content negotiation techniques often mean that user agents send these request headers prolifically. This causes performance concerns (because it creates "bloat" in requests), as well as privacy issues; passively providing such information allows servers to silently fingerprint the user.
</p>

<p>
この文書は：
◎
This document defines＼
</p>
<ul>
	<li>
`~client~hint@
（ `Client Hint^en ）を定義する
— それは、`~server$が［
特定の`~proactiveな内容~折衝$の特能を~opt-inして，
それに則って自身が`生成-$する内容を順応する
］ことを可能化する~frameworkである。
また、
この~frameworkを利用する内容~折衝の仕組み用の指針も与える。
◎
Client Hints, a framework that enables servers to opt-in to specific proactive content negotiation features, adapting their content accordingly,＼
as well as guidelines for content negotiation mechanisms that use the framework.＼
</li>
	<li>
新たな応答~headerとして `Accept-CH$h も定義する
— それは、［
その`~field値$に~listされた`~client~hint~header$【！これらの~header】を要請~内に送信する
］よう，明示的に`~UA$に依頼することを`生成元~server$に許容する。
◎
This document also defines a new response header, Accept-CH, that allows an origin server to explicitly ask that user agents send these headers in requests.
</li>
</ul>

<p>
`~client~hint$は、
次に関する懸念を軽減する：
◎
Client Hints mitigate＼
</p>
<ul>
	<li>
処理能の懸念を軽減する
— 次を確約することにより
⇒
`~UA$は、
`Accept-CH$h 応答~headerに~listされた`~client~hint~header$【！これらの要請~header】のうち［
自身が実際に利用するつもりがあるもの
］に限り，送信することになる
◎
performance concerns by assuring that user agents will only send the request headers when they're actually going to be used,＼
</li>
	<li>
受動的な指紋収集による~privacy懸念を軽減する
— 次を要求することにより，受動的な指紋収集~行路を能動的なそれに転換することにより
⇒
`~server$による `Accept-CH$h 応答~headerの利用を通して，折衝に要求される~headerを明示的に~opt-inする／開示する
◎
and privacy concerns of passive fingerprinting by requiring explicit opt-in and disclosure of required headers by the server through the use of the Accept-CH response header, turning passive fingerprinting vectors into active ones.
</li>
</ul>

<p>
この文書は、
`~client~hint$に対する特定の用法は定義しない。
そのような用法は、
それらを~~規定する各~仕様にて定義される必要がある。
◎
The document does not define specific usages of Client Hints. Such usages need to be defined in their respective specifications.
</p>

<p>
そのような用法の例には、
~UA~client~hint `UA-CH$r がある。
◎
One example of such usage is the User Agent Client Hints [UA-CH].
</p>

		<section id="notational-conventions">
<h3 title="Notational Conventions">1.1. 表記規約</h3>

<p>
この文書~内の~keyword "MUST" …
【以下、この段落の内容は`~IETF日本語訳 共通~page＠~IETFcommon#requirements-notation$に移譲。】
◎
The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in BCP 14 [RFC2119] [RFC8174] when, and only when, they appear in all capitals, as shown here.
</p>

<p>
この文書は、
`RFC5234$r による~ABNF記法を利用する。
◎
This document uses the Augmented Backus-Naur Form (ABNF) notation of [RFC5234].
</p>

		</section>
	</section>
	<section id="client-hint-request-header-fields">
<h2 title="Client Hints Request Header Fields">2. ~client~hint要請~header</h2>

<p>
~client~hint要請~header
— 略して “~client~hint~header” —
は、［
`~server$が適切な応答を選定するために利用し得る~data
］を指示する~HTTP~headerであり、
~HTTP`~UA$により利用される。
そのような各~headerは、
`~server$が応答を［
順応させる／最適化する
］ために利用できる~UA選好を伝達する。
◎
A Client Hints request header field is an HTTP header field that is used by HTTP user agents to indicate data that can be used by the server to select an appropriate response. Each one conveys user agent preferences that the server can use to adapt and optimize the response.
</p>

		<section id="sending-client-hints">
<h3 title="Sending Client Hints">2.1. ~client~hintの送信-法</h3>

<p>
`~UA$は、
次に挙げるものに基づいて，
要請~内に どの`~client~hint$を送信するかを選ぶ
⇒＃
自身の既定の設定群,
利用者の環境設定,
`Accept-CH$h 内に表出される~server選好
◎
User agents choose what Client Hints to send in a request based on their default settings, user configuration, and server preferences expressed in Accept-CH.＼
</p>

<p>
`~UA$と`~server$は：
◎
The user agent and server＼
</p>
<ul>
	<li>
次を折衝するために，以下に要旨される~opt-inの仕組みを利用できる
⇒
効率的な内容の順応を許容するために，どの~headerを送信する必要があるか
◎
can use an opt-in mechanism outlined below to negotiate which header fields need to be sent to allow for efficient content adaption,＼
</li>
	<li>
任意選択で，次を折衝するための追加的な仕組み
（例： `CLIENT-HINTS-INFRASTRUCTURE$r にて要旨されるもの）
を利用できる
⇒
前項と同じ~headerに対する第三者-主体からの~accessを制御する委任~施策
◎
and they can optionally use additional mechanisms (e.g., as outlined in [CLIENT-HINTS-INFRASTRUCTURE]) to negotiate delegation policies that control access of third parties to those same header fields.＼
</li>
</ul>

<p>
`~UA$は、
低-情報量とは見なされない~hintを送信するときは，
~opt-inを要求するベキである。
低-情報量な~hintを公開する例は、
`CLIENT-HINTS-INFRASTRUCTURE$r の
`低-情報量な~hint表t＠https://wicg.github.io/client-hints-infrastructure/#low-entropy-table$を見よ。
◎
User agents SHOULD require an opt-in to send any hints that are not considered low-entropy. See the low-entropy hint table at [CLIENT-HINTS-INFRASTRUCTURE] for examples of hints that expose low amounts of entropy.
</p>

<p>
`~client~hint$用の~supportを実装する実装者は、
指紋収集による含意を自覚して，この文書の
`~securityの考慮点§に要旨される考慮点に従う必要がある。
◎
Implementers need to be aware of the fingerprinting implications when implementing support for Client Hints and follow the considerations outlined in the Security Considerations section of this document (see Section 4).
</p>

		</section>
		<section id="server-processing-of-client-hints">
<h3 title="Server Processing of Client Hints">2.2. ~serverによる~client~hintの処理</h3>

<p>
`~server$は、
要請に 1 個以上の`~client~hint~header$が在る場合には，
それらの情報に基づいて対する応答を最適化できる。
そうするときは、
当の`資源$は`~cache可能$である場合には，
次を指示する `Vary$h 応答~header【！`7231/7.1.4$rfc】も`生成-$しなければナラナイ
⇒＃
選定された応答には，どの~hintが影響し得たか／
選定された応答は，今後の要請~用にも適切になるかどうか
◎
When presented with a request that contains one or more Client Hints header fields, servers can optimize the response based upon the information in them. When doing so, and if the resource is cacheable, the server MUST also generate a Vary response header field (Section 7.1.4 of [RFC7231]) to indicate which hints can affect the selected response and whether the selected response is appropriate for a later request.
</p>

<p>
`~server$は、
自身が［
解さない, かつ~supportしない
］~hintを無視しなければナラナイ。
~hintを無視したことを`~UA$に指示するような，~server用の仕組みは無い。
【！論理的には、解するが~supportしない／解さないが~supportする場合は除外されることになる（そのような事例は あり得るのか？／解するとは？）。】
◎
Servers MUST ignore hints they do not understand nor support. There is no mechanism for servers to indicate to user agents that hints were ignored.
</p>

<p>
`~server$は、
追加的な応答~headerとして［
~client処理を援助するために，関係する値を伝達するもの
］を
（［
当の~hint／利用~中にある~hint
］により指定されたとおりに）
`生成-$できる。
◎
Furthermore, the server can generate additional response header fields (as specified by the hint or hints in use) that convey related values to aid client processing.
</p>

		</section>
	</section>
	<section id="advertising-server-support">
<h2 title="Advertising Server Support">3. ~server~supportの広告-法</h2>

<p>
`~server$は、
以下に述べる仕組みを利用して，`~client~hint$用の~supportを広告できる。
◎
Servers can advertise support for Client Hints using the mechanism described below.
</p>

		<section id="accept-ch">
<h3 title="The Accept-CH Response Header Field">3.1. `Accept-CH^h 応答~header</h3>

<p>
`Accept-CH^h 応答~headerは、
その値~内に指示された各~hint用の~server~supportを指示する。
`~client~hint$を通して~UA情報を受信するよう望んでいる`~server$は、
アリな限り早期に自身の応答に `Accept-CH^h 応答~headerを追加するベキである。
◎
The Accept-CH response header field indicates server support for the hints indicated in its value. Servers wishing to receive user agent information through Client Hints SHOULD add the Accept-CH response header to their responses as early as possible.
</p>

<p>
`Accept-CH^h は、
`有構造~header$である
— その値は`~sf~list$であり、
値を成す各~memberは`~sf~token$でなければナラナイ
`RFC8941$r
。
その~ABNFは：
◎
Accept-CH is a Structured Header [RFC8941]. Its value MUST be an sf-list (Section 3.1 of [RFC8941]) whose members are Tokens (Section 3.3.4 of [RFC8941]). Its ABNF is:
</p>

<pre class="bnf">
Accept-CH
	= `sf-list$p
</pre>

<div class="example">
<p>
例えば：
◎
For example:
</p>

<pre class="lang-http">
Accept-CH: Sec-CH-Example, Sec-CH-Example-2
</pre>
</div>

<p>
`Accept-CH^h を包含している~HTTP応答は、
その生成元は［
【当の`~field値$にて】指示された要請~headerを［
後続な同一-生成元な要請
］用に受信する
］ことを~opt-inすることを指示する。
そのような応答を受信した`~UA$は、
当の~opt-inが~secureでない（~HTTPSとは異なる~schemeを利用している）~transport越しに送達された場合には，
無視しなければナラナイ。
~opt-in値は、
当の生成元に束縛される下で，
利用者の~session（~UAにより定義される）が存続する限り
— 後続な要請にて，`~server$の生成元へ向けて`~client~hint$の送達を可能化するよう —
持続するベキであり、
それまで持続された~opt-in値があれば，それを上書きするベキである。
◎
When a user agent receives an HTTP response containing Accept-CH, it indicates that the origin opts-in to receive the indicated request header fields for subsequent same-origin requests. The opt-in MUST be ignored if delivered over non-secure transport (using a scheme different from HTTPS). It SHOULD be persisted and bound to the origin to enable delivery of Client Hints on subsequent requests to the server's origin, for the duration of the user's session (as defined by the user agent). An opt-in overrides previous persisted opt-in values and SHOULD be persisted in its stead.
</p>

<p class="example">
`https://site.example^c
へ~navigateしている~UAに対する応答~内に `Accept-CH^h が受信され，それは
~secureな~transport越しに送達されたとするとき、
その持続された `Accept-CH^h 選好は
`https://site.example^c
に束縛されることになる。
それは、
例えば
`https://site.example/foobar.html^c
への~navi用には利用される一方で，
`https://foobar.site.example/^c
への~navi用には利用されないことになる。
類似に，当の選好は、［
当の~naviに対する応答から構築された~page
］が起動した同一-生成元な資源
（例： `https://site.example/image.jpg^c ）
への要請~用には利用される一方で，非同一-生成元な資源
（例： `https://thirdparty.example/resource.js^c ）
への要請には利用されないことになる。
この選好は、
`https://site.example^c へ向けた資源への要請であっても，
他の生成元
（例： `https://other.example/^c ）
から起動されるものにまでは拡張されないことになる。
◎
Based on the Accept-CH example above, which is received in response to a user agent navigating to "https://site.example", and delivered over a secure transport, persisted Accept-CH preferences will be bound to "https://site.example". It will then use it for navigations to e.g., "https://site.example/foobar.html", but not to e.g., "https://foobar.site.example/". It will similarly use the preference for any same-origin resource requests (e.g., to "https://site.example/image.jpg") initiated by the page constructed from the navigation's response, but not to cross-origin resource requests (e.g., "https://thirdparty.example/resource.js"). This preference will not extend to resource requests initiated to "https://site.example" from other origins (e.g., from navigations to "https://other.example/").
</p>

		</section>
		<section id="interaction-with-caches">
<h3 title="Interaction with Caches">3.2. ~cacheとの相互作用</h3>

<p>
`~server$は、［
応答を 1 個以上の`~client~hint$に基づいて選定する
］ときは
⇒
当の`資源$は`~cache可能$である場合には、
`Vary$h 応答~header【！ `RFC7234$r 】を`生成-$して，次を指示する必要がある
⇒＃
選定された応答には，どの~hintが影響し得たか／
選定された応答は，今後の要請~用にも適切になるかどうか
◎
When selecting a response based on one or more Client Hints, and if the resource is cacheable, the server needs to generate a Vary response header field ([RFC7234]) to indicate which hints can affect the selected response and whether the selected response is appropriate for a later request.
</p>

<div class="example">

<pre class="lang-http">
Vary: Sec-CH-Example
</pre>

<p>
この例は、次を指示する
⇒
~cache~keyには、
`Sec-CH-Example^h ~headerも含める必要がある
◎
The above example indicates that the cache key needs to include the Sec-CH-Example header field.
</p>
</div>

<div class="example">
<pre class="lang-http">
Vary: Sec-CH-Example, Sec-CH-Example-2
</pre>

<p>
この例は、次を指示する
⇒
~cache~keyには、［
`Sec-CH-Example^h, `Sec-CH-Example-2^h
］~headerも含める必要がある
◎
The above example indicates that the cache key needs to include the Sec-CH-Example and Sec-CH-Example-2 header fields.
</p>
</div>

		</section>
	</section>
	<section id="security-considerations">
<h2 title="Security Considerations">4. ~securityの考慮点</h2>

		<section id="information-exposure">
<h3 title="Information Exposure">4.1. 情報~公開</h3>

<p>
［
この文書に依拠している特能
］に利用される要請~headerは、［
利用者の環境についての情報
］を公開する
— ~privacyを保全する`~proactiveな内容~折衝$を可能化して，
受動的な指紋収集~行路が公開されることを避けるため。
しかしながら、
実装者は，［
最悪な事例では、［
制御されない／監視されない
］能動的な指紋収集よりも，受動的な指紋収集の方がましになる
］ことを念頭に置く必要がある。
利用者~privacyに便益を供するためには、
`~UA$は，［
`~client~hint$を利用している特能により公開される情報
］の濫用を防止するよう，更なる施策を適用する必要がある。
◎
Request header fields used in features relying on this document expose information about the user's environment to enable privacy-preserving proactive content negotiation, and avoid exposing passive fingerprinting vectors. However, implementers need to bear in mind that in the worst case, uncontrolled and unmonitored active fingerprinting is not better than passive fingerprinting. In order to provide user privacy benefits, user agents need to apply further policies that prevent abuse of the information exposed by features using Client Hints.
</p>

<p>
特能により公開される情報は、
利用者についての新たな情報を露呈するかもしれない
— 実装者は、
以下に挙げる［
考慮点, 推奨, 最善な実施
］を考慮する~OUGHT。
◎
The information exposed by features might reveal new information about the user and implementers ought to consider the following considerations, recommendations, and best practices.
</p>

<p>
その下層には、［
利用者についての情報を要請~headerとして公開することは，
（~securityの観点からは）
他の手段により情報を公開することに等価である
］ことが前提にある
（例えば、
要請【を起動した~page】の生成元が~JS~APIを利用して，その情報に~accessでき、
その`生成元~server$へ伝送できる場合）。
◎
The underlying assumption is that exposing information about the user as a request header is equivalent (from a security perspective) to exposing this information by other means. (For example, if the request's origin can access that information using JavaScript APIs and transmit it to its servers.)
</p>

<p>
`~client~hint$は明示的に~opt-inする仕組みであり，［
`~server$は、
利用者の環境についての情報への~accessを求めるならば，
それを能動的に依頼する必要がある
］ことを意味するので、［［
~client／~privacy事実調査器
］が、
その~dataを どの生成元が収集しているかを追跡し続けて，
それに対し動作するようになり得る
］ことを可能化する。
~headerに基づく~opt-inは、
受動的な指紋収集~行路の除去がアリになることを意味する。
例として，
`~UA$は、
`User-Agent$h 文字列により公開される情報を抑制できる
— その情報への能動的な~accessを~UA~client~hint（ `UA-CH$r ）を通して可能化する一方で。
あるいは，~UAは、
受動的な指紋収集~口を広げることなく，
すでに~scriptを通して可用な情報を公開できる
（例： `Save-Data$h ~client~hint ）。
~client~hint特能を~supportしている~UAは、
~opt-inした`~server$に向けて ある種の情報を送信するならば，
等価な情報を受動的に送信することを避けるベキである。
◎
Because Client Hints is an explicit opt-in mechanism, it means that servers wanting access to information about the user's environment need to actively ask for it,＼
enabling clients and privacy researchers to keep track of which origins collect that data, and potentially act upon it.＼
The header-based opt-in means that removal of passive fingerprinting vectors is possible. As an example, the user agent can reduce the information exposed by the User-Agent string, while enabling active access to that information through User-Agent Client Hints [UA-CH].＼
Otherwise, the user agent can expose information already available through script (e.g., the Save-Data Client Hints &lt;https://wicg.github.io/savedata/#save-data-request-header-field&gt;), without increasing the passive fingerprinting surface.＼
User agents supporting Client Hints features which send certain information to opted-in servers SHOULD avoid sending the equivalent information passively.
</p>

<p>
したがって，この文書に依拠する下で`~client~hint~header$を定義している特能は、
`~UA$が他では応用
— 既存の［
要請~header／~HTML／~CSS／~JS
］など —
に可用にしないような，新たな情報を供してはナラナイ。
◎
Therefore, features relying on this document to define Client Hint headers MUST NOT provide new information that is otherwise not made available to the application by the user agent, such as existing request headers, HTML, CSS, or JavaScript.
</p>

<p>
そのような特能は、
公開される情報を成す側面のうち，次に挙げるものを織り込む必要がある：
◎
Such features need to take into account the following aspects of the exposed information:
</p>
<ul>
	<li>
情報量
⇒
高精細な~dataを公開することは、［
異なる生成元へ向けた複数の要請にわたって利用者を識別する
］ための助けに利用され得る。
［
~headerが表出し得る`~field値$の集合を抑制する
］こと, あるいは［
広告される値は，現在の値に近いが その正確な表現にはならない所では、
それらの値を ある列挙d範囲に制約する
］ことは、［
複数の利用者から同じ値が送信される
］ことを確保することにより，［
~privacyを改善し得る／
~link能の~risk【同じ利用者からの複数の要請が互いに~linkされる~risk】を抑制し得る
］。
◎
Entropy:
Exposing highly granular data can be used to help identify users across multiple requests to different origins. Reducing the set of header field values that can be expressed, or restricting them to an enumerated range where the advertised value is close to but is not an exact representation of the current value, can improve privacy and reduce risk of linkability by ensuring that the same value is sent by multiple users.
</li>
	<li>
敏感性
⇒
特能は、
利用者に敏感な情報を公開するベキでない。
そのためには、［
応用には可用になるが、
特定の利用者~動作
（例：許可~prompt／利用者-作動化）
の背後で通過制御される情報
］は，`~client~hint$として公開されるベキでない。
◎
Sensitivity:
The feature SHOULD NOT expose user-sensitive information. To that end, information available to the application, but gated behind specific user actions (e.g., a permission prompt or user activation), SHOULD NOT be exposed as a Client Hint.
</li>
	<li>
時間~越しな変化
⇒
特能は、
時間~越しに変化する利用者~情報を公開するベキでない
— 当の状態~変化~自体も（例：~JS~callbackを通して）公開されている場合は除き。
◎
Change over time:
The feature SHOULD NOT expose user information that changes over time, unless the state change itself is also exposed (e.g., through JavaScript callbacks).
</li>
</ul>

<p>
特能に応じて，それが供する情報は、［
低-情報量, 敏感でない, 静的
］なもの（例：~UA情報）から［
高-情報量, 敏感, 動的
］なもの（例：地理所在）までにわたる。
`~UA$は、
特定0の特能から供される値を［
これらの考慮点に突き合わせて考慮する
］必要があり、
望まれる施策は，特能ごとに
— または他の木目細かな~~分類ごとに —
その~tradeoffに関して様々になろう。
◎
Different features will be positioned in different points in the space between low-entropy, non-sensitive, and static information (e.g., user agent information) and high-entropy, sensitive, and dynamic information (e.g., geolocation). User agents need to consider the value provided by a particular feature vs. these considerations and may wish to have different policies regarding that tradeoff on a per-feature or other fine-grained basis.
</p>

<p>
実装者は、［
利用者, ~server
］両者において，どの`~client~hint~header$が広告されるかを制御するための［
仕組み／施策
］を考慮する~OUGHT
— 実装者は：
◎
Implementers ought to consider both user- and server-controlled mechanisms and policies to control which Client Hints header fields are advertised:
</p>
<ul>
	<li>
一部（またはすべて）の`~client~hint~header$の送達を［
それを~opt-inした生成元に限る
］よう制約するベキである
— 当の生成元が［
`~client~hint~header$を要請するための許可
］を別の生成元へ明示的に委任した場合を除き。
◎
Implementers SHOULD restrict delivery of some or all Client Hints header fields to the opt-in origin only, unless the opt-in origin has explicitly delegated permission to another origin to request Client Hints header fields.
</li>
	<li>
利用者が選ぶ仕組みとして，［
~privacyの懸念と帯域幅~制限との兼ね合いをとることを許容する何か
］を供することを考慮するならば、［
それに孕まれる~privacyの含意
— 受動的な指紋収集の~riskなど —
が［
難題／実用的でないもの
］になり得ること
］を利用者に説明することも，考慮する必要がある。
◎
Implementers that consider providing user-choice mechanisms that allow users to balance privacy concerns against bandwidth limitations need to also consider that explaining the privacy implications involved to users, such as the risks of passive fingerprinting, may be challenging or even impractical.
</li>
	<li>
ある種の［
利用事例／脅威~model
］に特有な実装は、
一部（またはすべて）の`~client~hint~header$を伝送することを避けてもヨイ。
例えば、
より高~riskな~link能を運び得る~headerの伝送は避けるなど。
◎
Implementations specific to certain use cases or threat models MAY avoid transmitting some or all of the Client Hints header fields. For example, avoid transmission of header fields that can carry higher risks of linkability.
</li>
</ul>

<p>
`~UA$は、［
次に挙げるものや, それらに類似な何か
］を~clearするときには，持続された~opt-in選好も~clearしなければナラナイ
⇒＃
~site~data／
閲覧~cache／
~cookie
◎
User agents MUST clear persisted opt-in preferences when any one of site data, browsing cache, cookies, or similar are cleared.
</p>

		</section>
		<section id="deployment-and-security-risks">
<h3 title="Deployment and Security Risks">4.2. 配備と~security~risk</h3>

<p>
新たな要請~headerの配備には、
以下に挙げる考慮点が要求される：
◎
Deployment of new request headers requires several considerations:
</p>
<ul>
	<li>
その`~field名$の既存の利用に因り生じ得る競合
◎
Potential conflicts due to existing use of a header field name
</li>
	<li>
その`~field値$にて通信される~dataの特質
◎
Properties of the data communicated in a header field value
</li>
</ul>

<p>
新たな`~client~hint$の策定者には、
それが［
~client側の内容（例：~script）により追加-可能になる,
`~UA$により排他的に設定される
］どちらにする必要があるか，
注意深く考慮することを勧める。
後者の事例では、
当の~header~field名に `Sec-^h 接頭辞を付与すれば，［
~scriptその他の応用~内容が，~UA内でそれらを設定する
］のを防止する効果がある。
`Sec-^h 接頭辞を利用すれば、
応用~内容ではなく，`~UA$が`生成-$した値であることを`~server$に通達する
— さらなる情報は、
`FETCH$r 【の`禁止~要請~header$】を見よ。
◎
Authors of new Client Hints are advised to carefully consider whether they need to be able to be added by client-side content (e.g., scripts) or whether the Client Hints need to be exclusively set by the user agent. In the latter case, the Sec- prefix on the header field name has the effect of preventing scripts and other application content from setting them in user agents. Using the "Sec-" prefix signals to servers that the user agent -- and not application content -- generated the values. See [FETCH] for more information.
</p>

<p>
規約として、
`~client~hint$である要請~headerには
— この~frameworkを利用しているものが，それらをより容易に識別できるよう —
接頭辞 `CH-^h を利用することが奨励される
— 例えば， `CH-Foo^h, あるいは `Sec-^h 接頭辞も伴うならば `Sec-CH-Foo^h など†。
そうすれば、
それらを~program的に識別するのも より容易になる
（例：~privacy~filterが認識されない~hintを要請から剥がすためなど）。
【† `Sec-^h の方が前に接頭されるのは、`禁止~要請~header$にするため。】
◎
By convention, request headers that are Client Hints are encouraged to use a CH- prefix, to make them easier to identify as using this framework; for example, CH-Foo or, with a "Sec-" prefix, Sec-CH-Foo. Doing so makes them easier to identify programmatically (e.g., for stripping unrecognized hints from requests by privacy filters).
</p>

<p>
`~client~hint~header$の`~field名$は、
`Accept-CH$h により~opt-inする仕組みを利用して折衝されることになるならば，
`~sf~token$ `RFC8941$r
に合致しなければナラナイ。
◎
A Client Hints request header negotiated using the Accept-CH opt-in mechanism MUST have a field name that matches sf-token (Section 3.3.4 of [RFC8941]).
</p>

		</section>
		<section id="abuse-detection">
<h3 title="Abuse Detection">4.3. 濫用の検出</h3>

<p>
`~UA$は，指紋収集~情報への能動的な~accessを追跡する場合には、
`~client~hint~header$を発することを等価な~APIへの~accessを考慮するときと類似な仕方で考慮するベキである。
◎
A user agent that tracks access to active fingerprinting information SHOULD consider emission of Client Hints headers similar to the way it would consider access to the equivalent API.
</p>

<p>
`~client~hint$の濫用に対する事実調査は、
要請~内の~client~hintの［
有無／値の相違
］に応じて，対する~HTTP応答がどう相違するか調べることにもなろう。
これを利用すれば，どの~client~hintが利用-中にあるか露呈され、
事実調査器は，その利用を更に分析できるようにもなろう。
◎
Research into abuse of Client Hints might look at how HTTP responses to requests that contain Client Hints differ from those with different values and from those without values. This might be used to reveal which Client Hints are in use, allowing researchers to further analyze that use.
</p>

		</section>
	</section>
	<section id="cost-of-sending-hints">
<h2 title="Cost of Sending Hints">5. ~hintを送信する~cost</h2>

<p>
`~client~hint$を`~server$へ送信すれば、
要請の~byte~sizeは増える結果になる。
この増大の一部は~HTTP~header圧縮~schemeにより軽減できるが，それでも、
新たな~hintが送信されるたびに，帯域幅の利用量は いくぶん増えることになる。
~serverは、
~client~hintの受信を~opt-inするときに，そのことを織り込むベキであり、
内容を順応させる目的に利用されない~hintは，その受信を~opt-inするベキでない。
◎
Sending Client Hints to the server incurs an increase in request byte size. Some of this increase can be mitigated by HTTP header compression schemes, but each new hint sent will still lead to some increased bandwidth usage. Servers SHOULD take that into account when opting in to receive Client Hints and SHOULD NOT opt-in to receive hints unless they are to be used for content adaptation purposes.
</p>

<p>
要請の~byte~sizeの増大に因り、［
この文書に依拠して，`~client~hint$を定義している特能
］は，それらの~hintを送信する要請を ある種の`行先$rq `FETCH$r を伴うものに制約することを
— そうした方が有用になると見込まれる所では —
考慮してもヨイ。
◎
Due to request byte size increase, features relying on this document to define Client Hints MAY consider restricting sending those hints to certain request destinations [FETCH], where they are more likely to be useful.
</p>

	</section>
	<section id="iana-considerations">
<h2 title="IANA Considerations">6. ~IANA考慮点</h2>

<p>
この文書に依拠している特能には、
追加する要請~headerを
“恒久的~message~header~field名” ~registry `RFC3864$r
に登録することが期待される。
◎
Features relying on this document are expected to register added request header fields in the "Permanent Message Header Field Names" registry [RFC3864].
</p>

<p>
この文書は、
`Accept-CH$h ~HTTP応答~headerを定義し，
同じ~registry内に登録する。
◎
This document defines the "Accept-CH" HTTP response header field, and registers it in the same registry.
</p>

		<section id="iana-accept-ch">
<h3 title="Accept-CH">6.1. `Accept-CH^h</h3>

<div>
<ul>
<li>~header~field名： `Accept-CH^h
<li>適用-可能な~protocol： ~HTTP
<li>位置付け：試験的
<li>著作者／変更~制御者： IETF
<li>仕様~文書：この~RFCの `3.1§
<li>関係する情報： `~client~hint$用
</ul>

◎
Header field name:
• Accept-CH
Applicable protocol:
• HTTP
Status:
• experimental
Author/Change controller:
• IETF
Specification document(s):
• Section 3.1 of this RFC
Related information:
• for Client Hints
</div>

		</section>
	</section>
	<section id="acknowledgements">
<h2 title="Acknowledgements">謝辞</h2>

<p>
貴重な助力と~feedbackを寄せられた次の方々に：
◎
↓</p>

<div lang="en">
Thanks to Mark Nottingham, Julian Reschke, Chris Bentzel, Ben Greenstein, Tarun Bansal, Roy Fielding, Vasiliy Faronov, Ted Hardie, Jonas Sicking, Martin Thomson, and numerous other members of the IETF HTTP Working Group for invaluable help and feedback.
</div>

	</section>
</main></div>
