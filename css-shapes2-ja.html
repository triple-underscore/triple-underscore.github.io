<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<title>CSS Shapes Module Level 2 （日本語訳）</title>

<link rel="stylesheet" href="common.css" type="text/css">
<link rel="stylesheet" href="common-css.css" type="text/css">
<script src="common0.js"></script>
<script src="common1.js" async></script>

<script>

Util.ready = function(){
	const source_data = {
		generate: expand,
	};
	Util.switchWordsInit(source_data);
}

function expand(){
	const class_map = this.class_map;
	const tag_map = this.tag_map;
	const link_map = this.link_map;

	return this.html.replace(
		/%[~\w\-一-鿆あ-ん]+|`(.+?)([$@\^])(\w*)/g,
		create_html
	);

	function create_html(match, key, indicator, klass){

if(!key) { //%
	return `<var>${match.slice(1)}</var>`;
}

let href = '';
let href1 = '';
{
	const n = key.indexOf('＠');
	if(n > 0) {
		href1 = key.slice(n + 1);
		key = key.slice(0, n);
	}
}
let text = key;

switch(klass){
case 'r':
	text = `[${key}]`;
	href = `#biblio-${key.toLowerCase()}`;
	break;
case 't':
	text = `&lt;${key}&gt;`;
	key = key.replace(/\s*\[.+/, '');
	break;
case 'f':
	text = `${key}()`;
	break;
case 'v':
	text = text.replace(/%(\w+)/g, '<var>$1</var>');
	break;
case 'tp': // property value type
	text = `&lt;'<code class="property">${key}</code>'&gt;`;
	href = link_map[`p.${key}`];
	break;
case 'l':
	text = `"<code class="literal">${text}</code>"`;
	break;
case 'en':
	return `<span lang="en">${key}</span>`;
	break;
case 'dgm':
	return `<a id="_dgm-${key}"></a>`;
	break;
}

let tag = tag_map[klass];
if(tag) {
	let classname = class_map[klass];
	classname = classname ? ` class="${classname}"` : '';
	text = `<${tag}${classname}>${text}</${tag}>`;
}

if(indicator !== '^'){
	href = href1 || link_map[ klass ? `${klass}.${key}` : key ] || href;
	if(!href){
		console.log(match); // check error
		return match;
	}

	switch(indicator){
	case '$':
		text = `<a href="${href}">${text}</a>`;
		break;
	case '@':
		text = `<dfn id="${href.slice(1)}">${text}</dfn>`;
		break;
	default:
		console.log(match);
		return match;
	}
}

return text;

	}
}
</script>

<script type="text/plain" id="_source_data">


●●options

spec_title:CSS Shapes Module Level 2
spec_date:2025-01-28
trans_update:2025-01-30
source_checked:220307
page_state_key:CSS
original_url:https://drafts.csswg.org/css-shapes-2/
	abbr_url:CSSSHAPES2
spec_status:ED
ref_id_prefix:biblio-
ref_id_lowercase:true
site_nav:layout,css
conformance:css
copyright:2025,permissive
trans_1st_pub:2023-09-23


●●class_map
p:property
css:css
e:element
a:attr
v:value
u:unit
f:func
t:type
tp:type
op:op

●●tag_map
p:code
t:var
css:code
I:code
e:code
a:code
v:code
f:code
u:code
c:code
tp:var
pC:i
i:i
op:span
em:em
cite:cite

●●original_id_map

●●mdn_urls
	propdef-shape-padding:CSS/shape-padding
	propdef-shape-inside:CSS/shape-inside

●●link_map

p.clip-path:~MASKING1#propdef-clip-path
p.display:~CSSDISP#propdef-display
p.shape-inside:#propdef-shape-inside
p.shape-padding:#propdef-shape-padding
p.shape-margin:~CSSSHAPES#propdef-shape-margin
p.shape-outside:~CSSSHAPES#propdef-shape-outside
p.stroke-linecap:~SVGpainting#StrokeLinecapProperty
p.stroke-linejoin:~SVGpainting#StrokeLinejoinProperty
p.shape-image-threshold:~CSSSHAPES#propdef-shape-image-threshold

tp.fill-rule:~SVGpainting#FillRuleProperty

f.circle:~CSSSHAPES#funcdef-basic-shape-circle
f.path:~CSSSHAPES#funcdef-basic-shape-path
f.polygon:~CSSSHAPES#funcdef-basic-shape-polygon
f.rotate:~TRANSFORM#funcdef-transform-rotate
f.shape:#funcdef-shape
f.var:~CSSVAR#funcdef-var

t.arc-command:#typedef-shape-arc-command
t.arc-size:#typedef-shape-arc-size
t.arc-sweep:#typedef-shape-arc-sweep
t.command-end-point:#typedef-shape-command-end-point
t.coordinate-pair:#typedef-shape-coordinate-pair
t.curve-command:#typedef-shape-curve-command
t.horizontal-line-command:#typedef-shape-horizontal-line-command
t.line-command:#typedef-shape-line-command
t.move-command:#typedef-shape-move-command
t.relative-control-point:#typedef-shape-relative-control-point
t.shape-command:#typedef-shape-command
t.control-point:#typedef-shape-control-point
t.smooth-command:#typedef-shape-smooth-command
t.vertical-line-command:#typedef-shape-vertical-line-command

t.angle:~CSSVAL#angle-value
t.basic-shape:~CSSSHAPES#typedef-basic-shape
t.image:~CSSIMAGE#typedef-image
t.length-percentage:~CSSVAL#typedef-length-percentage
t.percentage:~CSSVAL#percentage-value
t.position:~CSSVAL5#typedef-position
t.shape-box:~CSSSHAPES#typedef-shape-box
t.url:~CSSVAL#url-value

v.arc:#valdef-shape-arc
v.auto:#valdef-shape-inside-auto
v.by:#valdef-shape-by
v.ccw:#valdef-shape-ccw
v.close:#valdef-shape-close
v.curve:#valdef-shape-curve
v.cw:#valdef-shape-cw
v.large:#valdef-shape-large
v.line:#valdef-shape-line
v.move:#valdef-shape-move
v.small:#valdef-shape-small
v.smooth:#valdef-shape-smooth
v.to:#valdef-shape-to

v.hline:#_valdef-shape-hline
v.vline:#_valdef-shape-vline

v.auto:#valdef-shape-inside-auto
v.outside-shape:#valdef-shape-inside-outside-shape
v.display:#valdef-shape-inside-display
	vt.basic-shape:#valdef-shape-inside-basic-shape
	vt.url:#valdef-shape-inside-url

v.left:~CSSVAL5#valdef-position-left
v.center:~CSSVAL5#valdef-position-center
v.right:~CSSVAL5#valdef-position-right
v.x-start:~CSSVAL5#valdef-position-x-start
v.x-end:~CSSVAL5#valdef-position-x-end
v.top:~CSSVAL5#valdef-position-top
v.bottom:~CSSVAL5#valdef-position-bottom
v.y-start:~CSSVAL5#valdef-position-y-start
v.y-end:~CSSVAL5#valdef-position-y-end


u.px:~CSSVAL#px

I.CSSStyleRule:~CSSOM1#cssstylerule
e.path:~SVGpaths#elementdef-path

	●用語
pC.~arcto:~SVGpaths#PathDataEllipticalArcCommands
pC.~closepath:~SVGpaths#PathDataClosePathCommand
pC.~lineto:~SVGpaths#PathDataLinetoCommands
pC.~moveto:~SVGpaths#PathDataMovetoCommands
pC.三次~Bezier~curveto:~SVGpaths#PathDataCubicBezierCommands
pC.二次~Bezier~curveto:~SVGpaths#PathDataQuadraticBezierCommands

~border~box:~CSSBOX#border-box
~margin~box:~CSSBOX#margin-box
内容~区画:#content-area
排他~区画:#exclusion-area
浮動~区画:#float-area
方向に不問な~size:#direction-agnostic-size
図形~用の外部~資源を~fetchする:#fetch-an-external-resource-for-a-shape

	●用語 level 1
~level 1:#biblio-css-shapes
基準~box:~CSSSHAPES#basic-shape-reference-box

	●用語（CSS
~math関数:~CSSVAL#math-function
~style資源を~fetchする:~CSSVAL#fetch-a-style-resource
補間-:~CSSVAL#interpolation

包含塊:~CSSDISP#containing-block
行内~size:~CSSWM#inline-size
浮動体:~CSS2J#floats
排他~box:~CSSEXCLUSION#exclusion-box
排他体:~CSSEXCLUSION#exclusion-element
回込み文脈:~CSSEXCLUSION#wrapping-context

親~stylesheet:~CSSOM1#concept-css-rule-parent-css-style-sheet

確定的~size:~SIZING#definite
自動的~size:~SIZING#automatic-size
最大~size:~SIZING#max-size

~custom~prop:~CSSVAR#custom-property

	●用語（外部
応答:~FETCH#concept-response

●●words_table1


●●words_table

	●幾何

始点:starting point::~
終点:ending point::~
	終点:endpoint
	終点:end point
	終点:ending at the point
	始点:the start of

moveto:::移動する
lineto:::線を引く
curveto:::曲線を引く
	~curveto:curve
arcto:elliptical arc::楕円弧を引く
	~arcto:arc
closepath::path を close する:path を閉じる:パスを閉じる

	基準~box:reference box
基準:reference::~
図形:shape::~
矩形:rectangle::~
	矩形:rect
線:line::~
弧:arc::~
半径:radius::~
交差-:intersect::~
角度:angle::~
時計回り:clockwise:~
反時計回り:counter-clockwise:~
	反時計回り:counterclockwise
楕円:ellipse::~
	~arcto:arc
半径:radius::~
回転-:rotate::~
真円:circle::~
	$f:circle
限界域:bounds::~
点:point::~
矩形な:rectangular::~
矩形でな:rectangularでな::~
対角線:diagonal::~
正方形:square::~
隅:corner::~
下位path:subpath::下位 path:下位パス
変形:transform::~
拡縮-:scale::~
左上:top-left:~
側:side:~
横方向:horizontal::~
縦方向:vertical::~
横:horizontal::~
縦:vertical::~
拡大-:scale up::~
幾何:geometry:~
幾何的:geometric:~
曲線:curve:~
輪郭:contour:~
右方:rightward:~
下方:downward:~
滑らか:smooth:~
真円な:circularな:~
真直ぐ:straight:真っ直ぐ
二次:quadratic::~
三次:cubic::~
Bezier:Bézier::ベジェ
拡幅-:expand:~
ナゾる:traceする::なぞる
連続性:continuity:~
	G1 連続性
丸めら:roundさ:~

	%sweep-flag:the sweep flag
	%large-arc-flag:the large flag
	-:center
	反対:opposite
	~~対称:reflection 〜 around
	大きさ／大きく:large
	長い方:larger
	短い方:smaller
	丸まった:round
	揃う:aligned
	周り:around

	●layout
排他-:exclude::~
排他:exclusion::~
排他体:exclusion::~
	排他体:exclusion element
浮動体:float::~
浮動-:float::~
浮動:float::~
	浮動体:float element
回込み:wrapping::回り込み
回込む:wrap aroundする::回り込む
	回込むようにする:wrapping

	●塗り
描かな:drawしな:~
描く:drawする:~
alpha:
輝度:luminance::~
stroke::::ストローク
継がれ:joinされ:~
mask::::マスク

	`stroke-linejoin$p, `stroke-linecap$p:line-joins and line-caps

	●CSS
確定的:definite::~
math:

	●仕様
図画化:depiction:~
見かけ:look:~
即応可能:responsive::~::レスポンシブ

	今の所は:for now
	図:illustration
	選ぶ:chosen
	選ばれ:chosen
	主な:main
	何であれ:whatever
	書く:writing

	●未分類
平均:average:~
数量的:numerical:~
供与-:contribute:~
一様:uniform:~
pen::::ペン
不問な:agnosticな:依らない
後続-:follow:~
吹出し:speech bubble:吹き出し
	小さく:to a small balloon
ツノ:arrow:~
区分:segment:~

	含む:includeする
	開始~時の:starting
	終了~時の:ending
	灰色:grey
	薄青:light blue
	2 の平方根:sqrt(2)
	一部分:piecemeal
	十分:enough
	同じに:identically
	残りの:the rest of
	直前の:the previous
	直後の:the next
	ちょうど:just
	改変されない:unmodified
	先頭の~item:initial
	何もしない:does nothing
	を~~基準に:against
	を~~基準に:refer to
	だけで:merely
	~errorの取扱い:error-handling
	`応答の処理^i:processResponse
	%応答:res
	%~byte~stream:byteStream
	^v:red
	図形~command:shape-command
	閾値:switch
	-:total
	生な:raw
	図示-:illustrate
	`自動的~size$:auto-sized
	~~偏ることは:favor
	図形~画像:shape-image
	~parameter化:parametric
	小さく:to a small balloon
	転換:turning
	転換され:turned into
	始まる:begin
	であり続ける:stay
	一定:more constant
	目立たなく:invisible

●●images
＠css-shapes/
four-arcs｜height:18rem; background:white;｜｜.svg
bubble｜height:300px;｜｜.svg
bubble-scaled｜height:100px;｜｜bubble.svg
bubble-50｜height:150px;｜｜.svg
	svg-shape-reference｜｜｜.png
shapes_CSS2.1_MBP｜height:335px｜｜.png
shape-inside-content｜height:349px｜｜.png
rounded-rect-overflow｜height:297px｜｜.png
ellipse-overflow｜height:297px｜｜.png
shape-padding｜height:222px｜｜.png

●●ref_key_map
CSS3BG:CSSBACKGROUNDS3
CSS3BOX:CSSBOX3
CSS3EXCLUSIONS:CSSEXCLUSIONS1

●●ref_normative

[CSS-BOX-4]
    Elika Etemad. ＜CSS Box Model Module Level 4＞. URL: https://drafts.csswg.org/css-box-4/
[CSS-DISPLAY-3]
    Elika Etemad; Tab Atkins Jr.. ＜CSS Display Module Level 3＞. URL: https://drafts.csswg.org/css-display/
[CSS-DISPLAY-4]
    ＜CSS Display Module Level 4＞. Editor's Draft. URL: https://drafts.csswg.org/css-display-4/
[CSS-IMAGES-3]
    Tab Atkins Jr.; Elika Etemad; Lea Verou. ＜CSS Images Module Level 3＞. URL: https://drafts.csswg.org/css-images-3/
[CSS-MASKING-1]
    Dirk Schulze; Brian Birtles; Tab Atkins Jr.. ＜CSS Masking Module Level 1＞. URL: https://drafts.fxtf.org/css-masking-1/
[CSS-SHAPES]
    Rossen Atanassov; Alan Stearns. ＜CSS Shapes Module Level 1＞. URL: https://drafts.csswg.org/css-shapes/
[CSS-TRANSFORMS-1]
    Simon Fraser; et al. ＜CSS Transforms Module Level 1＞. URL: https://drafts.csswg.org/css-transforms/
[CSS-VALUES-3]
    Tab Atkins Jr.; Elika Etemad. ＜CSS Values and Units Module Level 3＞. URL: https://drafts.csswg.org/css-values-3/
[CSS-VALUES-4]
    Tab Atkins Jr.; Elika Etemad. ＜CSS Values and Units Module Level 4＞. URL: https://drafts.csswg.org/css-values-4/
[CSS-VALUES-5]
    Tab Atkins Jr.; Elika Etemad; Miriam Suzanne. ＜CSS Values and Units Module Level 5＞. URL: https://drafts.csswg.org/css-values-5/
[CSS-VARIABLES-2]
    ＜CSS Custom Properties for Cascading Variables Module Level 2＞. Editor's Draft. URL: https://drafts.csswg.org/css-variables-2/
[CSS-WRITING-MODES-4]
    Elika Etemad; Koji Ishii. ＜CSS Writing Modes Level 4＞. URL: https://drafts.csswg.org/css-writing-modes-4/
[CSS2]
    Bert Bos; et al. ＜Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification＞. URL: https://drafts.csswg.org/css2/
[CSS3-EXCLUSIONS]
    Rossen Atanassov; Vincent Hardy; Alan Stearns. ＜CSS Exclusions Module Level 1＞. URL: https://drafts.csswg.org/css-exclusions/
[CSSOM-1]
    Daniel Glazman; Emilio Cobos Álvarez. ＜CSS Object Model (CSSOM)＞. URL: https://drafts.csswg.org/cssom/
[FETCH]
    Anne van Kesteren. ＜Fetch Standard＞. Living Standard. URL: https://fetch.spec.whatwg.org/
[RFC2119]
    S. Bradner. ＜Key words for use in RFCs to Indicate Requirement Levels＞. March 1997. Best Current Practice. URL: https://datatracker.ietf.org/doc/html/rfc2119
[SVG2]
    Amelia Bellamy-Royds; et al. ＜Scalable Vector Graphics (SVG) 2＞. URL: https://svgwg.org/svg2-draft/


●●trans_metadata
<p>
~THIS_PAGEは、~W3Cにより編集者草案として公開された
<a href="~SPEC_URL">CSS Shapes Module Level 2</a>
を日本語に翻訳したものです。
~PUB
</p>


●●spec_metadata

最新公表バージョン
	https://www.w3.org/TR/css-shapes-2/
公表履歴
	https://www.w3.org/standards/history/css-shapes-2/

フィードバック
	<a href="https://github.com/w3c/csswg-drafts/labels/css-shapes-2">CSSWG Issues Repository</a>
編集
	<a href="mailto:ratan@microsoft.com">Rossen Atanassov</a> (Microsoft Corporation)
	<a href="mailto:stearns@adobe.com">Alan Stearns</a> (Adobe Systems, Inc.)
	Noam Rosenthal (Google)
Suggest an Edit for this Spec
	<a href="https://github.com/w3c/csswg-drafts/blob/main/css-shapes-2/Overview.bs">GitHub Editor</a>
commit 履歴
	https://github.com/w3c/csswg-drafts/commits/main/css-shapes-2
</script>

</head>
<body>


<header>
	<hgroup>
<h1>CSS Shapes Module Level 2</h1>
	</hgroup>
</header>

<div id="MAIN" hidden>
	<section id="abstract">
◎要約

<p>
この草案は、
内容を図形の［
内側に包装する／外側に回込む
］ための，
~CSSに関係する特能を包含する。
それは、
`~level 1$ の機能性を（今の所は暗黙的に）含み，それを拡張する。
`~level 1$ と比較した主な拡張は
⇒＃
図形を定義する追加的な仕方／
図形を利用した`排他~区画$の定義-法／
図形を利用した要素の`内容~区画$の制約-法
◎
This draft contains the features of CSS relating to wrapping content around and inside shapes. It (implicitly for now) includes and extends the functionality of CSS Shapes Level 1 [CSS-SHAPES]. The main points of extension compared to level 1 include additional ways of defining shapes, defining an exclusion area using a shape, and restricting an element’s content area using a shape.
</p>

~CSSisaLANG

	</section>
	<section id="sotd">
◎位置付け

<p>
これは編集者草案の公な複製です…
【以下、この節の他の内容は，~SOTD-CSSに移譲。】
</p>

	</section>

<main id="MAIN0">
	<section id="intro">
<h2 title="Introduction">1. 序論</h2>

◎非規範的

<p>
この仕様の`~level 1$ は、
要素の`浮動~区画$の幾何を制御するための~propを定義した。
この~levelは：
◎
Level 1 of this specification defined properties to control the geometry of an element’s float area. This level＼
</p>
<ul>
	<li>
`排他体$に図形をどう適用するかを定義する。
◎
defines how shapes apply to exclusions.＼
</li>
	<li>
図形を要素の`内容~区画$に適用するための `shape-inside$p ~propを含む。
◎
It also includes a shape-inside property for applying a shape to an element’s content area.＼
</li>
	<li>
これらすべての適用~用に，図形を指定する新たな仕方を定義する。
◎
Finally, it defines new ways of specifying shapes for all of these applications.
</li>
</ul>

		<section id="values">
<h3 title="Value Definitions">1.1. 値 定義</h3>

<p class="trans-note">【
この節の内容は、
`~CSS日本語訳 共通~page＠~CSScommon#values$に移譲。
】</p>

		</section>
	</section>
	<section id="terminology">
<h2 title="Terminology">2. 各種用語</h2>

<dl>
	<dt>
`排他~区画@
◎
exclusion area
</dt>
	<dd>
行内~flow内容を`排他~box$の周りに排他するために利用される区画。
`排他~区画$は、
`排他~box$用には`~border~box$に等価になる。
この仕様の `shape-outside$p ~propを利用すれば、
任意な矩形でない`排他~区画$を定義できる。
`shape-inside$p ~propも`排他~区画$を定義するが、
この事例では、
それは，図形の外側にある区画になる
— 行内~内容がそこを避けるような。
◎
The area used for excluding inline flow content around an exclusion box. The exclusion area is equivalent to the border box for an exclusion box. This specification’s shape-outside property can be used to define arbitrary, non-rectangular exclusion areas. The shape-inside property also defines an exclusion area, but in this case it is the area outside the shape that inline content avoids.
</dd>

	<dt>
`浮動~区画@
◎
float area
</dt>
	<dd>
内容が`浮動体$を回込むために利用される区画。
既定では，浮動-区画は`浮動体$の`~margin~box$になる。
この仕様の `shape-outside$p ~propを利用すれば、
任意な矩形でない浮動-区画を定義できる。
◎
The area used for wrapping content around a float element. By default, the float area is the float element’s margin box. This specification’s shape-outside property can be used to define arbitrary, non-rectangular float areas.
</dd>

	<dt>
`内容~区画@
◎
content area
</dt>
	<dd>
通常は、
~boxの行内~flow内容の~layout用に利用される区画。
◎
The content area is normally used for layout of the inline flow content of a box.
</dd>

	<dt>
`方向に不問な~size@
◎
direction-agnostic size
</dt>
	<dd>
当の~boxの対角線の長さを 2 の平方根で除算した結果。
◎
The direction-agnostic size of a box is equal to the length of the diagonal of the box, divided by sqrt(2).
</dd>
	<dd class="note">注記：
これは，~boxの横幅と縦幅を平均~化する~methodであり、
~SVGにおいて，一部の事例で
— ~boxの~sizeの百分率が欲されるが，
当の文脈は横幅, 縦幅どちらかに特定的に~~偏ることはないときに —
利用される。
正方形な~box用には，これは［
横幅／縦幅
］と同じになる。
◎
Note: This is a method of averaging the width and height of a box used by SVG in some cases, when a percentage of a box’s size is desired but the context doesn’t specifically favor the width or the height. For square boxes, this is the same as the width/height.
</dd>
</dl>

	</section>
	<section id="shapes">
<h2 title="Shapes">3. 図形</h2>

<p>
図形は、
任意な幾何的な輪郭を定義する
— 行内~内容は，その周りに~flowする。
`shape-outside$p ~propは、［
`浮動体$用には`浮動~区画$／
`排他体$用には`排他~区画$
］を定義する。
◎
Shapes define arbitrary geometric contours around which inline content flows. The shape-outside property defines the float area for a float, and the exclusion area for an exclusion.
</p>

	</section>
	<section id="basic-shape-functions">
<h2 title="Basic Shapes">4. 基本~図形</h2>

<p>
`~level 1$ の
`§ 基本~図形＠~CSSSHAPES#basic-shape-functions$
をここに追加する。
◎
Add the final level 1 section.
</p>

		<section id="supported-basic-shapes">
<h3 title="Supported Shapes">4.1. ~supportされる図形</h3>

<p>
`~level 1$ の
`§ ~supportされる図形＠~CSSSHAPES#supported-basic-shapes$
をここに追加する。
◎
Add the final level 1 sections.
</p>

			<section id="shape-function">
<h4 title="The shape() Function">4.1.1. `shape^f 関数</h4>

<p>
`path$f 関数は，［
より特化された図形~関数では許容されない，任意な図形
］を定義するために［
~SVG~path構文の再利用を許容する
］が、
それは，~pathを単独の文字列として書くことを要求する
（例えば、
~pathの一部分を `var$f で築くこととは互換でない）
ことに加え、
~SVGによる いくつかの制限
— 暗黙的に `px$u 単位しか許容しないなど —
を継承する。
◎
While the path() function allows reuse of the SVG path syntax to define more arbitrary shapes than allowed by more specialized shape functions, it requires writing a path as a single string (which is not compatible with, for example, building a path piecemeal with var()), and inherits a number of limitations from SVG, such as implicitly only allowing the px unit.
</p>

<p>
`shape$f 関数は，
`path$f 関数により利用されるものと等価な~commandたちが成す集合を利用するが、
より標準な~CSS構文でそうすることにより，
~CSS機能性を成す全部的な範囲
— 追加的な単位や`~math関数$など —
を許容する。
`shape$f により利用される各~commandは、
描画~用に利用されるとき
— 例：描画される `clip-path$p を算出するとき —
動的に~path区分へ転換される。
◎
The shape() function uses a set of commands equivalent to the ones used by path(), but does so with more standard CSS syntax, and allows the full range of CSS functionality, such as additional units and math functions. The commands used by shape() are dynamically turned into path segments when it is used for rendering, e.g., when computing the rendered clip-path.
</p>

<pre class="prod">
`shape@f
	= shape( `fill-rule$tp? from `coordinate-pair$t, `shape-command$t#)
</pre>

<p>
`fill-rule$tp は、
`path$f 内の同じ引数と同じに解釈される。
◎
The &lt;'fill-rule'&gt; is interpreted identically to the same argument in path().
</p>

<p>
残りの引数たちは、
この関数が表現する~path~data~commandたちが成す~list
— 以下では、略して “~command~list” と称される —
を定義する
— それらは、
`~SVGの~path~data＠~SVGpaths#PathData$と一致する。
◎
The rest of the arguments define a list of path data commands, identical to that of an SVG Path, which the function represents.
</p>

<p>
<code class="prod">from `coordinate-pair$t</code>
は、
最初の図形~commandの始点を表現する。
それは、
~command~listに先頭の~itemとして絶対 `~moveto$pC ~commandを追加する
— `coordinate-pair$t は，`基準~box$の左上~隅から測定される。
◎
The from &lt;coordinate-pair&gt; represents the starting point for the first shape-command. It adds an initial absolute moveto to the list of path data commands, with the &lt;coordinate-pair&gt; measured from the top-left corner of the reference box.
</p>

<p>
`shape-command@t
たちが成す連列は、
~~後続する`~path~data~command＠~SVGpaths#PathData$たちを表現する。
各~commandの始点は，直前の~commandの終点になる。
◎
The sequence of &lt;shape-command&gt;s represent further path data commands. Each command’s starting point is the previous command’s ending point.
</p>

<pre class="prod">
`shape-command$t
	= `move-command$t
	| `line-command$t
	| `close$v
	| `horizontal-line-command$t
	| `vertical-line-command$t
	| `curve-command$t
	| `smooth-command$t
	| `arc-command$t

`move-command$t
	= `move$v `command-end-point$t
`line-command$t
	= `line$v `command-end-point$t
`horizontal-line-command$t
	= `hline$v [
		to [ `length-percentage$t | `left$v | `center$v | `right$v | `x-start$v | `x-end$v ]
		| by `length-percentage$t
	]
`vertical-line-command$t
	= `vline$v [
		to [ `length-percentage$t | `top$v | `center$v | `bottom$v | `y-start$v | `y-end$v ]
		| by `length-percentage$t
	]
`curve-command$t
	= `curve@v [
		to `position$t with `control-point$t [ / `control-point$t ]?
		| by `coordinate-pair$t with `relative-control-point$t [ / `relative-control-point$t ]?
	]
`smooth-command$t
	= `smooth@v [
		to `position$t [ with `control-point$t ]?
		| by `coordinate-pair$t [ with `relative-control-point$t ]?
	]
`arc-command$t
	= `arc@v `command-end-point$t [
		of `length-percentage$t{1,2}
		&amp;&amp; `arc-sweep$t?
		&amp;&amp; `arc-size$t?
		&amp;&amp; [`rotate^v `angle$t]?
	]
`command-end-point$t
	= [ to `position$t | by `coordinate-pair$t ]
`control-point$t
	= [ `position$t | `relative-control-point$t ]
`relative-control-point$t
	= `coordinate-pair$t [ from [ `start^v | `end^v | `origin^v ] ]?
`coordinate-pair$t
	= `length-percentage$t{2}
`arc-sweep$t
	= `cw$v
	| `ccw$v
`arc-size$t
	= `large$v
	| `small$v
</pre>

<dl class="valdef">
	<dt><pre class="prod">
`coordinate-pair@t
	= `length-percentage$t{2}
</pre></dt>
	<dd>
指定された基準~点【 `command-end-point$t の記述を見よ】から［
右方への~offset, 下方への~offset
］を順に表現している座標~pairを定義する
— ［
前者／後者
］の座標に対する百分率は、
`基準~box$の［
横幅／縦幅
］を~~基準に解決される。
◎
Defines a pair of coordinates, representing a rightward and downward offset, respectively, from a specified reference point. Percentages are resolved against the width or height, respectively, of the reference box.
</dd>

	<dt><pre class="prod">
`command-end-point@t
	= [ `to@v `position$t | `by@v `coordinate-pair$t ]
</pre></dt>
	<dd>
<p>
各~commandには、
【 `command-end-point$t に限らず，どの~command文法においても】［
`to$v （ “絶対” 座標）／
`by$v （ “相対” 座標）
］どちらも指定でき，次を指示する：
</p>
		<ul>
			<li>
［
`to$v に後続している `position$t ／
`by$v に後続している `coordinate-pair$t
］が，~commandの終点を与える。
（［
`horizontal-line-command$t ／ `vertical-line-command$t
］の終点~用には、
これらは［
横／縦
］成分のみとして指定される。）
</li>
			<li>
当の終点【を成す長さ値（百分率でない `length-percentage$t 値）たち】は、［
`to$v の場合は当の~commandの始点／
`by$v の場合は`基準~box$の左上~隅
］に相対的になる。
</li>
		</ul>
◎
Every command can be specified in "absolute" or "relative" coordinates, determined by their by or to component. to indicates that any &lt;coordinate-pair&gt;s in the command are relative to the top-left corner of the reference box, while by indicates that the &lt;coordinate-pair&gt;s are relative to the command’s starting point.
◎
&lt;relative-control-point&gt; defines how by and to are interpreted for curve control points, while &lt;horizontal-line-command&gt; and &lt;vertical-line-command&gt; define how by and to are interpreted for horizontal and vertical lines, respectively.
</dd>
	<dd>
<p>
`to$v を利用するときは、
各~座標を `coordinate-pair$t の代わりに `position$t として指定できる。
</p>

<p class="trans-note">【
`position$t の値~空間は、
`coordinate-pair$t の値~空間を包摂することに注意。
】</p>
◎
When to is used, the coordinates can be specified as &lt;position&gt;s instead of &lt;coordinate-pair&gt;s.
</dd>

	<dd class="note">注記：
どちらの事例でも、
`coordinate-pair$t を成す各 `percentage$t 値は，
常に`基準~box$の~sizeに相対的に算出される。
◎
Note: In either case, &lt;percentage&gt; values in &lt;coordinate-pair&gt;s are always computed relative to the reference box’s size.
</dd>

	<dt><pre class="prod">
`move-command@t
	= `move@v `command-end-point$t
</pre></dt>
	<dd>
~command~listに `~moveto$pC ~commandを追加する。
◎
Adds a moveto command to the list of path data commands,＼
↑↑ with an ending point specified by the &lt;coordinate-pair&gt;.
</dd>
	<dd>
これは、
直後の~command用に “~penを移動する” だけで，何も描かない。
◎
This draws nothing, and merely "moves the pen" for the next command.
</dd>
	<dd class="note">注記：
これは、
`~closepath$pC（ `close$v ）~commandの目的においては，新たな下位pathを開始する。
◎
Note: This starts a new subpath, for the purpose of the close command.
</dd>

	<dt><pre class="prod">
`line-command@t
	= `line@v `command-end-point$t
</pre></dt>
	<dd>
~command~listに `~lineto$pC ~commandを追加する。
◎
Adds a lineto command to the list of path data commands,＼
↑↑ with an ending point specified by the &lt;coordinate-pair&gt;.
</dd>
	<dd>
これは、
~commandの始点から終点まで真直ぐな線を描く。
◎
This draws a straight line from the command’s starting point to its ending point.
</dd>

	<dt><pre class="prod">
`horizontal-line-command@t
	= `hline@v [
		to [ `length-percentage$t | `left^v | `center^v | `right^v | `x-start^v | `x-end^v ]
		| by `length-percentage$t
	]
</pre></dt>
	<dd>
~command~listに横方向な `~lineto$pC ~commandを追加する。
◎
Adds a horizontal lineto command to the list of path data commands.
</dd>
	<dd>
<p>
これは、
次のような `coordinate-pair$t を伴う `line$v ~commandと等価になる：
</p>
		<ul>
			<li>
<p>
横~成分は：
</p>
				<ul>
					<li>
`length-percentage$t が供された場合は，それになる。
</li>
					<li>
他の場合
— `to$v と伴に `position$t の横~位置~用の~keyword（ `left^v 等）が供された場合 —
は， `position$t の定義に従って決定される位置を指す値になる。
</li>
				</ul>
			</li>
			<li>
縦~成分は、
当の~commandの始点と同じ。
</li>
		</ul>
◎
This is equivalent to a line command with the &lt;length-percentage&gt; given as the horizontal component of the &lt;coordinate-pair&gt;. Specifying the horizontal component of &lt;position&gt; instead of a &lt;length-percentage&gt; (left, center, right, x-start, or x-end), would draw a line to that &lt;position&gt;, with the &lt;position&gt;’s vertical component remaining the same as the starting point.
</dd>

	<dt><pre class="prod">
`vertical-line-command@t
	= `vline@v [
		to [ `length-percentage$t | `top^v | `center^v | `bottom^v | `y-start^v | `y-end^v ]
		| by `length-percentage$t
	]
</pre></dt>

	<dd>
~command~listに縦方向な `~lineto$pC ~commandを追加する。
◎
Adds a vertical lineto command to the list of path data commands.
</dd>
	<dd>
<p>
これは、
次のような `coordinate-pair$t を伴う `line$v ~commandと等価になる：
</p>
		<ul>
			<li>
横~成分は、
当の~commandの始点と同じ。
</li>
			<li>
<p>
縦~成分は：
</p>
				<ul>
					<li>
`length-percentage$t が供された場合は，それになる。
</li>
					<li>
他の場合
— `to$v と伴に `position$t の縦~位置~用の~keyword（ `top^v 等）が供された場合 —
は， `position$t の定義に従って決定される位置を指す値になる。
</li>
				</ul>
			</li>
		</ul>
◎
This is equivalent to a line command with the &lt;length-percentage&gt; given as the vertical component of the &lt;coordinate-pair&gt;. Specifying the horizontal component of &lt;position&gt; (top, center, bottom, y-start, or y-end) instead of a &lt;length-percentage&gt;, would draw a line to that &lt;position&gt;, with the &lt;position&gt;’s horizontal component remaining the same as the starting point.
</dd>

	<dt><pre class="prod">
`curve-command@t
	= `curve@v [
		to `position$t with `control-point$t [ / `control-point$t ]?
		| by `coordinate-pair$t with `relative-control-point$t [ / `relative-control-point$t ]?
	]
◎
&lt;curve-command&gt; = curve [ [ to &lt;position&gt; with &lt;control-point&gt; [ / &lt;control-point&gt; ]? ] | [ by &lt;coordinate-pair&gt; with &lt;relative-control-point&gt; [ / &lt;relative-control-point&gt; ]? ] ]
</pre></dt>
	<dd>
~command~listに~Bezier~curveto~commandを追加する。
◎
Adds a Bézier curve command to the list of path data commands,＼
↑↑ ending at the point specified by the &lt;position&gt; following the to keyword, or the &lt;coordinate-pair&gt; following the by keyword, as specified by &lt;command-end-point&gt;.
</dd>
	<dd>
`with^v 成分は、
曲線の制御~点を指定する
— 供された［
`control-point$t ／ `relative-control-point$t
］の個数に応じて［
1 個ならば`二次~Bezier~curveto$pC／
2 個ならば`三次~Bezier~curveto$pC
］~commandを指定する。
◎
The with component specifies control points for the curve: if a single &lt;control-point&gt; or &lt;relative-control-point&gt; is provided, the command specifies a quadratic curve; if two &lt;control-point&gt;s or &lt;relative-control-point&gt;s are provided, it specifies a cubic curve.
</dd>

	<dt><pre class="prod">
`smooth-command@t
	= `smooth@v [
		to `position$t [ with `control-point$t ]?
		| by `coordinate-pair$t [ with `relative-control-point$t ]?
	]
◎
&lt;smooth-command&gt; = smooth [ [ to &lt;position&gt; [with &lt;control-point&gt; ]? ] | [ by &lt;coordinate-pair&gt; [ with &lt;relative-control-point&gt; ]? ] ]
</pre></dt>
	<dd>
~command~listに滑らかに~Bezier~curveto~commandを追加する。
◎
Adds a smooth Bézier curve command to the list of path data commands,＼
↑↑ Adds a smooth Bézier curve command to the list of path data commands, ending at the point specified by the &lt;position&gt; following the to keyword, or the &lt;coordinate-pair&gt; following the by keyword, as specified by &lt;command-end-point&gt;.＼
</dd>
	<dd>
`with^v 成分は、［
省略された場合は `二次~Bezier~curveto$pC ／
供された場合は `三次~Bezier~curveto$pC 
］~commandを指定する。
後者の場合、
`control-point$t は，当の曲線~用の制御~点を指定する。
◎
The with component specifies control points for the curve: if it’s omitted, the command specifies a smooth quadratic curve; if it’s provided, if specifies a smooth cubic curve.
</dd>

	<dd class="note">注記：
`smooth$v ~commandは、
1 個目の制御~点として，次が自動的に指定された `curve$v ~commandと等価になる：
［
直前の~path~data~commandが `~curveto^pC ~commandならば，
その 2 個目の制御~点から始点を挟んで~~対称な点／
他の場合は，始点
］。
前者の場合，直前の曲線との G1 連続性【一階微分可能】を確保するので、
当の曲線は直前の曲線から滑らかに継続するよう現れる。
【！rather than possibly】
◎
Note: A smooth command is equivalent to a curve command with the first control point automatically specified as the reflection of the previous curve’s second control point around the starting point, or as the starting point if the previous path data command wasn’t a curve. This ensures G1 continuity with the previous command, so the curve appears to smoothly continue from the previous command, rather than possibly making a sudden direction change.
</dd>

	<dt><pre class="prod">
`control-point@t
	= [ `position$t | `relative-control-point$t ]
</pre></dt>
	<dd>
［
二次／三次
］~Bezier曲線に 1 個の制御~点を供する。
【 `position$t は、終点として指定される `position^t と同様に解釈される。】
◎
Provides a control point to a quadratic or cubic Bézier curve.
</dd>

	<dt><pre class="prod">
`relative-control-point@t
	= `coordinate-pair$t [ from [ `start^v | `end^v | `origin^v ] ]?
</pre></dt>
	<dd>
［
二次／三次
］~Bezier曲線に 1 個の制御~点を供する。
</dd>
	<dd>
`from^v 成分は、
省略された場合は，
`from start^v が指定されたときと同じになる【！the segment’s start】。
所与の `coordinate-pair$t は、
`from^v に後続している~keywordに応じて，次に相対的になる
⇒＃
`start^v ならば 当の~commandの始点／
`end^v ならば 当の~commandの終点／
`origin^v ならば `基準~box$【の左上~隅】
◎
Provides a control point to a quadratic or cubic Bézier curve. When a from keyword is specified followed by start, end, or origin, the given &lt;coordinate-pair&gt; is relative to the command’s starting point, the command’s end point, or the reference box, respectively. If such component is not provided, the &lt;coordinate-pair&gt; is relative to the segment’s start.
</dd>

	<dt><pre class="prod">
`arc-command@t
	= `arc@v `command-end-point$t [
		of `length-percentage$t{1,2}
		&amp;&amp; `arc-sweep$t?
		&amp;&amp; `arc-size$t?
		&amp;&amp; [`rotate^v `angle$t]?
	]
◎
&lt;arc-command&gt; = arc &lt;command-end-point&gt; [[of &lt;length-percentage&gt;{1,2}] &amp;&amp; &lt;arc-sweep&gt;? &amp;&amp; &lt;arc-size&gt;? &amp;&amp; rotate &lt;angle&gt;? ]
</pre></dt>
	<dd>
~command~listに `~arcto$pC ~commandを追加する。
◎
Add an elliptical arc command to the list of path data commands,＼
↑↑ ending at the &lt;command-end-point&gt;.
</dd>
	<dd>
<p>
`of^v 成分は、
弧が成す楕円の~sizeを指定する
— `length-percentage$t が：
◎
The of component specifies the size of the ellipse that the arc is taken from.＼</p>
		<ul class="switch">
			<li>
2 個~供された場合
⇒
順に，楕円の［
横, 縦
］半径を供する。
`percentage$t 値は、
`coordinate-pair$t と同様に，`基準~box$の［
横幅／縦幅
］のうち適切な方を~~基準に解決される。
◎
The first &lt;length-percentage&gt; provides the horizontal radius of the ellipse and the second provides the vertical radius. Like for &lt;coordinate-pair&gt;s, &lt;percentage&gt; values are resolved against the width or height of the reference box, as appropriate.
</li>
			<li>
1 個だけ供された場合
⇒
どちらの半径も供された値を利用する。
`percentage$t 値は、
`基準~box$の`方向に不問な~size$を~~基準に解決される
（ `circle$f 関数と類似に）。
◎
If only one &lt;length-percentage&gt; is provided, both radiuses use the provided value. In that case, &lt;percentage&gt; values are resolved against the direction-agnostic size of the reference box (similar to the circle() function).
</li>
		</ul>
	</dd>
	<dd>
</dd>
	<dd class="note">
<p>
~SVGには、
`楕円~半径~用に特有な~errorの取扱い＠~SVGpaths#ArcOutOfRangeParameters$
として次に挙げるものがあることに注意：
◎
Note that SVG has some specific error-handling for the ellipse radiuses:
</p>
		<ul>
			<li>
終点が始点と同じ場合、
当の~commandは何もしない。
◎
if the endpoint is the same as the starting point, the command does nothing
</li>
			<li>
どちらかの半径が 0 の場合、
当の~commandは，終点への `line-command$t と等価になる。
◎
if either radius is zero, the command is equivalent to a &lt;line-command&gt; to the ending point
</li>
			<li>
負な半径には絶対~値が代わりに利用される。
◎
if either radius is negative, its absolute value is used instead
</li>
			<li>
2 つの半径が述べる楕円の大きさが，
指定された `angle$t による回転の後において［
始点, 終点
］に交差するには十分でない場合、
それらの半径は，当の楕円が ちょうど十分な大きさに達するまで一様に拡大される。
◎
if the radiuses don’t describe an ellipse large enough to intersect both the starting point and ending point (after rotation by the specified &lt;angle&gt;), they are scaled up uniformly until the ellipse is just large enough to reach.
</li>
		</ul>
	</dd>
	<dd>
指定された半径により述べられる楕円は、
既定では軸に揃うが，
`angle$t を指定することにより回転できる。
`rotate$f 変形~関数と類似に，［
正な角度は時計回り／
負な角度は反時計回り
］な回転を指定する。
省略された場合の既定は `0deg^v になる。
◎
The ellipse described by the specified radiuses defaults to being axis-aligned, but can be rotated by specifying an &lt;angle&gt;. Similar to the rotate() transform function, positive angles specify a clockwise rotation, and negative angles specify a counterclockwise rotation. If omitted, this defaults to 0deg.
</dd>
	<dd>
<p>
楕円は，所与の［
半径, 角度
］を伴う, かつ［
始点, 終点
］に交差するものとして定義されるが、
そのような楕円としてアリなものは通例的に 2 つあり，
楕円をナゾる方向も 2 つあるので、
弧としてアリなものは 4 つある。
［
`arc-sweep$t, `arc-size$t
］成分は、
これらの弧のうちどれが欲されるかを指定する：
◎
The ending point, radiuses, and angle, taken together, usually define two possible ellipses that intersect the starting point and ending point, and each ellipse can be traced in either direction, for a total of four possible arcs. The &lt;arc-sweep&gt; and &lt;arc-size&gt; components specify which of these arcs is desired:
</p>
		<ul>
			<li>
<p>
`arc-sweep@t
がとり得る［
`cw@v
は時計回り／
`ccw@v
は反時計回り
］に楕円をナゾる弧を選ぶことを指示する。
省略された場合の既定は `ccw$v になる。
◎
&lt;arc-sweep&gt; can be cw or ccw, indicating that the arc that is traced around the ellipse clockwise or counter-clockwise from the center, respectively, must be chosen. If omitted, this defaults to ccw.
</p>

<p class="note">注記：
~SVGの `~arcto$pC ~commandにおいては、［
`cw$v ／ `ccw$v
］は，
%sweep-flag 用の値［
1 ／ 0
］に対応する。
◎
Note: In the SVG arc command, cw corresponds to the value 1 for the sweep flag, and ccw to the value 0.
</p>
			</li>
			<li>
<p>
`arc-size@t
がとり得る［
`large@v
は長い方／
`small@v
は短い方
］をアリな 2 つの弧から選ぶことを指示する。
省略された場合の既定は `small$v になる。
◎
&lt;arc-size&gt; can be large or small, indicating that the larger or smaller, respectively, of the two possible arcs must be chosen. If omitted, this defaults to small.
</p>

<p class="note">注記：
~SVGの `~arcto$pC ~commandにおいては、［
`large$v ／ `small$v
］は，
%large-arc-flag 用の値［
1 ／ 0
］に対応する。
◎
Note: In the SVG arc command, large corresponds to the value 1 for the large flag, and small to the 0.
</p>

<p class="note">注記：
始点と終点が楕円~上の正確に反対~側にある場合、
アリな弧は同じ~sizeになるが，アリな楕円も 1 つに限られる。
この事例では、
`arc-size$t には効果は無く，
`arc-sweep$t が 2 つのアリな弧のうちどちらが選ばれるかを判別する。
◎
Note: If the starting and ending points are on exactly opposite sides of the ellipse, both possible arcs are the same size, but also there is only one possible ellipse. In this case, the &lt;arc-sweep&gt; distinguishes which of the two possible arcs will be chosen, and &lt;arc-size&gt; has no effect.
</p>
			</li>
		</ul>
<figure>
<figcaption id="_dgm-four-arcs">
選ばれる対象になる［
アリな 2 つの楕円,
アリな 4 つの弧
］の図画化。
◎
A depiction of the two possible ellipses, and four possible arcs, that can be chosen between.
</figcaption>
</figure>
	</dd>

	<dt>`close@v</dt>
	<dd>
~command~listに
`~closepath$pC ~commandを追加する。
◎
Adds a closepath command to the list of path data commands.
</dd>
	<dd class="note">注記：
これは、
終点が下位pathの始点に設定された `line$v ~commandに類似する。
それらは，生な図形としては一致するが、
当の~pathが~strokeされる場合，
`close$v ~commandの終点は、
下位pathの始点と滑らかに継がれ，［
`stroke-linejoin$p, `stroke-linecap$p
］がどう描画されるかに影響する。
◎
Note: This is similar to a line command with its ending point set to the starting point of the subpath. When specifying a raw shape, they’re identical, but if the path is stroked, the ending point of the close command is smoothly joined with the start of the subpath, which affects how line-joins and line-caps are rendered.
</dd>
</dl>

				<section id="shape-examples">
<h5 title="Using shape() to create responsive, parametric speech bubble">4.1.1.1. `shape$f を利用して，即応可能な~parameter化された吹出しを作成する例</h5>

<div class="example">
<p>
`shape$f 関数は、
拡縮-可能な図形のみならず，
即応可能な【具体的には，部分的に拡縮-可能な】図形も可能化する
（ `polygon$f 関数による図形も即応可能になるが、
それが~supportする曲線は，単純な丸められた隅に限られる）。
◎
The shape() function enables shapes that are responsive, rather than scalable. While the polygon() shape is also responsive, it only support simple rounded corners and not complex curves.
</p>

<p>
これをデモるため、
次のような【漫画の】吹出しから開始する：
◎
To demonstrate, let’s start with a speech bubble, such as the following:
</p>

<figure>
`bubble^dgm
</figure>

<p>
この図形は、
`clip-path$p で利用される。
それは、
`path$f 関数を利用しても行える：
◎
Using this shape with a clip-path can be done by using the path() function:
</p>

<pre class="lang-css">
.bubble {
  clip-path: path("m 5 0 H 95 Q 100 0 100 5 V 92 Q 100 97 95 97 H 70 l -2 3 l -2 -3 H 5 Q 0 97 0 92 V 5 Q 0 0 5 0")
};
</pre>

<p>
この~pathは，容易に拡縮できるが、
望ましい結果が得られないこともある
— 例えば，小さく拡縮されたとき、
吹出しを成す［
ツノ, 隅の曲線
］は，ほとんど目立たなくなる：
◎
Altohugh this path can easily scale, the scaled results are not always desirable. e.g. when scaled to a small balloon, the arrow and corners are scaled to become almost invisible:
</p>

<figure>
`bubble-scaled^dgm
</figure>

<p>
この図形を `shape$f 関数を利用して構築するため、
まずは， `path^f 関数の引数を成すすべての座標【！pixel values】を百分率へ転換する。
引数は `from^v から始まることに注意：
◎
To construct this shape using the shape() function, let’s start by turning all the pixel values from the path function to percentages. Note that the shape() function begins with from:
</p>

<pre class="lang-css">
.bubble {
  clip-path: shape(
    from 5% 0%,
    hline to 95%,
    curve to 100% 5% with 100% 0%,
    vline to 92%,
    curve to 95% 97% with 100% 97%,
    hline to 70%,
    line by -2% 3%,
    line by -2% -3%,
    hline to 5%,
    curve to 0% 92% with 0% 97%,
    vline to 5%,
    curve to 5% 0% with 0% 0%
  );
}
</pre>

<p>
次に、
この~pathが~size変化にきちんと応答するよう，即応可能にする。
そのためには、
いくつかの座標
— 特定的に，曲線とツノを制御するもの —
の単位を `px$u 値へ変換する：
◎
To make this path responsive, as in, respond well to size changes, we will convert some of its units to px values, specifically the ones the control the curves and arrows:
</p>

<pre class="lang-css">
.bubble {
  clip-path: shape(
    from 5px 0%,
    hline to calc(100% - 5px),
    curve to 100% 5px with 100% 0%,
    vline to calc(100% - 8px),
    curve to calc(100% - 5px) calc(100% - 3px) with 100% calc(100% - 3px),
    hline to 70%,
    line by -2px 3px,
    line by -2px -3px,
    hline to 5px,
    curve to 0% calc(100% - 8px) with 0% calc(100% - 3px),
    vline to 5px,
    curve to 5px 0% with 0% 0%
  );
}
</pre>

<p>
`clip-path^p として適用されたとき、
次の様な見かけになろう：
◎
When applied as clip-path, it would looks like the following:
</p>

<figure>
`bubble-50^dgm
</figure>

<p>
吹出し全体は`基準~box$へ拡縮される一方で、
曲線やツノは，一定であり続ける。
◎
The whole speech bubble is scaled to the reference box, while the curves and arrows stay more constant.
</p>

<p>
`shape$f は~CSS単位を利用するので、
各~辺を成す座標のうち一部を `position$t 値で置換できる：
◎
Since shape() uses CSS units, we can replace some of the edges with position values:
</p>

<pre class="lang-css">
.bubble {
  clip-path: shape(
    from 5px 0,
    hline to calc(100% - 5px),
    curve to right 5px with right top,
    vline to calc(100% - 8px),
    curve to calc(100% - 5px) calc(100% - 3px) with right calc(100% - 3px),
    hline to 70%,
    line by -2px 3px,
    line by -2px -3px,
    hline to 5px,
    curve to left calc(100% - 8px) with left calc(100% - 3px),
    vline to 5px,
    curve to 5px top with left top
  );
}
</pre>

<p>
`shape$f は、
別の有用な特能として，`~custom~prop$【！~CSS~prop】と伴にも利用できる。
【！In this case】
ツノ（以下における `--arrow-*^p ）と隅の半径（以下における `--radius^p ）は、
それにより~parameter化できる：
◎
Another useful feature of shape() is that it can be used alongside CSS properties. In this case, we can make the arrow and radius parametric:
</p>

<pre class="lang-css">
:root {
  --radius: 5px;
  --arrow-length: 3px;
  --arrow-half-width: 2px;
  --arrow-position: 70%;
  --arrow-bottom-offset: calc(100% - var(--radius) - var(--arrow-length));
}

.bubble {
  animation: bubble 100ms;
  clip-path: shape(
    from var(---radius) top,
    hline to calc(100% - var(---radius)),
    curve to right var(---radius) with right top,
    vline to var(---arrow-bottom-offset),
    curve to calc(100% - var(---radius)) calc(100% - var(---arrow-length)) with right calc(100% - var(---arrow-length)),
    hline to var(---arrow-position),
    line by var(---arrow-half-width) var(---arrow-length),
    line by var(---arrow-half-width) calc(0px - var(---arrow-length)),
    hline to var(---radius),
    curve to left var(---arrow-bottom-offset) with left calc(100% - var(---arrow-length)),
    vline to var(---radius),
    curve to var(---radius) top with left top
  );
}
</pre>
</div>

				</section>
				<section id="interpolating-shape">
<h5 title="Interpolating the shape() Function">4.1.1.2. `shape^f 関数の補間-法</h5>

<p>
2 つの［
`shape$f ／ `path$f
］関数は、
互いの［
~path~data~commandたちが成す~list
］が［
同じ長さである
］かつ［
順に “同じ” ~commandからなる
］ならば，互いに`補間-$できる
— 【 `shape^f と `path^f を補間する場合は、】
`path$f 関数を成す最初の~commandは， `shape$f 関数を成す先頭の `coordinate-pair$t と補間するとする。
◎
shape() and path() functions can be interpolated with each other if their associated list of path data commands is the same length and has the same commands, in order, with the first command of the path() function interpolating with the initial &lt;coordinate-pair&gt; in the shape() function.
</p>

<p class="note">注記：
`path$f 関数を成す最初の~commandは、
`move$v
（~SVG仕様における `~moveto$pC ~command）
になることが保証される。
◎
Note: The first command of a path() function is guaranteed to be a move, see moveTo in the SVG spec.
</p>

<p>
【補間した結果は、】
開始~時の値と終了~時の値が［
どちらも `path$f 関数ならば `path^f 関数／
他の場合は `shape$f 関数
］になる。
どちらの事例でも、
補間された値は，
“同じ” ~path~data~commandたちが成す~listを表現するモノトスル
— 各~commandが有する数量的な成分は、
開始~時の~listと終了~時の~listを成す対応する成分どうしの合間で補間した結果になるよう。
◎
If the starting and ending values are both path() functions, the interpolated value is a path() function; otherwise it’s a shape() function. In either case, the interpolated value must represent the same list of path data commands, with each command having its numerical components interpolated between the corresponding components of the starting and ending list.
</p>

<p>
この目的においては、
2 つの~commandが “同じ” であるとは，
~AND↓ が満たされることをいう：
◎
For this purpose, commands are "the same" if＼
</p>
<ul>
	<li>
同じ~command~keywordを利用する
◎
they use the same command keyword,＼
</li>
	<li>
同じ［
`to$v ／ `by$v
］~keywordを利用する
◎
and use the same &lt;by-to&gt; keyword.＼
</li>
	<li>
当の~commandが［
`curve$v ／ `smooth$v
］である場合は，制御~点の個数は互いに同じ
◎
For curve and smooth, they also must have the same number of control points.
</li>
</ul>

<p>
`arc$v ~commandに対しては、［
開始~時の~listと終了~時の~list
］の間で［
`arc-sweep$t ／ `arc-size$t
］~keywordが異なる場合、［
0 ~LT 進捗-値 ~LT 1
］の下で補間された結果には，［
`cw$v ／ `large$v
］を利用する。
◎
If an arc command has different &lt;arc-sweep&gt; between its starting and ending list, then the interpolated result uses cw for any progress value between 0 and 1. If it has different &lt;arc-size&gt; keywords, then the interpolated result uses large for any progress value between 0 and 1.
</p>

<p class="note">注記：
`arc$v ~keyword用の補間~規則は、
~SVG `path$e 用の既存の補間~規則に合致することが意味される。
◎
Note: The arc keyword interpolation rules are meant to match existing SVG path interpolation rules.
</p>

				</section>
			</section>
		</section>
	</section>
	<section id="referencing-svg-shapes">
<h2 title="Referencing SVG shapes">5. ~SVG図形の参照-法</h2>

<p>
~SVGの［
`基本~図形＠~SVGshapes$／`~path＠~SVGpaths$
］は、
`url^f 構文を利用して参照できる。
◎
An SVG shape can be referenced using the url() syntax. The shape can be any of the SVG basic shapes or a path element.
</p>

<div class="example">
<p class="trans-note">【
ここには画像が~mark-upされているが、
~~参照先は存在しない。
】</p>

<p class="alt" id="_dgm-svg-shape-reference">
~SVG図形を参照している結果
◎
results of referencing SVG shapes
</p>

<pre class="lang-html">
&lt;style&gt;
div {
  height: 400px;
  width: 400px;
}
.in-a-circle {
  shape-outside: url(#circle_shape);
}

.in-a-path {
  shape-outside: url(#path-shape);
}
&lt;/style&gt;

&lt;svg ...&gt;
  &lt;circle id="circle_shape" cx="50%" cy="50%" r="50%" /&gt;
  &lt;path id="path-shape" d="M 100 100 L 300 100 L 200 300 z" /&gt;
&lt;/svg&gt;

&lt;div class="around-a-circle"&gt;...&lt;/div&gt;
&lt;div class="around-a-path"&gt;...&lt;/div&gt;
</pre>
</div>

	</section>
	<section id="shapes-from-image">
<h2 title="Shapes from Image">6. 画像による図形</h2>

<p>
`~level 1$ の
`§ 画像による図形＠~CSSSHAPES#shapes-from-image$
をここに追加する。
◎
Add the final level 1 section.
</p>


<p class="issue">
要素の描画された内容に基づいて図形を定義することが，
`示唆された＠https://www.w3.org/Bugs/Public/show_bug.cgi?id=16716$。
これは、
~securityの含意も伴い得る。
◎
One suggestion is to define a shape based on an element’s rendered content. This could have security implications.
</p>

<p class="issue">
`image^f 関数に［
利用する関連な画素たちを決定する何か
］を追加することも，
`示唆された＠http://lists.w3.org/Archives/Public/www-style/2014Mar/0120.html$
（図形を［
定義するため, 表示するため
］両者に）。
◎
Another suggestion is to add something to an image() function that determines the relevant pixels to use (both for defining a shape and for display).
</p>



	</section>
	<section id="fetching-external-shapes">
<h2 title="Fetching external shapes">7. 外部~図形の~fetch法</h2>

<div class="algo">
<p>
［
~SVGまたは画像
］による
`図形~用の外部~資源を~fetchする@
ときは、
所与の
( `CSSStyleRule$I %規則 )
に対し
⇒
`~style資源を~fetchする$( ↓ )
⇒＃
%規則 の~URL,
%規則 の`親~stylesheet$,
`image^l,
`cors^l,
下に与える `応答の処理^i
◎
To fetch an external resource for a shape, either an SVG or an image, given a CSSStyleRule rule, fetch a style resource given rule’s URL, with stylesheet being rule’s parent CSS style sheet, destination "image", CORS mode "cors", and processResponse being the following steps＼
</p>

<div class="algo">
`応答の処理^i は、
所与の
( `応答$ %応答, ［
 ~NULL ／`失敗^i／~byte~stream
］ %~byte~stream )
に対し
⇒
~IF［
%~byte~stream は~byte~streamである
］
⇒
図形を受容している適切な~propに【 %~byte~stream から得られた】［
~SVGまたは画像
］を適用する
◎
given response res and null, failure or a byte stream byteStream: If byteStream is a byte stream, apply the image or SVG to the appropriate shape-accepting property.
</div>
</div>

<p class="note">注記：
図形の効果は，当の文書により検出されるので、
図形【用の外部~資源を~fetchするとき】には~CORS~modeが要求される。
◎
Note: shapes require CORS mode as their effect is detected by the document.
</p>

	</section>
	<section id="shapes-from-box-values">
<h2 title="Shapes from Box Values">8. ~box値による図形</h2>

<p>
`~level 1$ の
`§ ~box値による図形＠~CSSSHAPES#shapes-from-box-values$
をここに追加する。
◎
Add the final level 1 section.
</p>


	</section>
	<section id="declaring-shapes">
<h2 title="Declaring Shapes">9. 図形の宣言-法</h2>

<p>
図形は、
`shape-outside$p ~propで宣言できる
— それには、
`shape-margin$p ~propによる改変もアリになる。
［
`shape-outside$p, `shape-margin$p
］~propにより定義される図形は、［
`浮動体$の`浮動~区画$,
`排他体$の`排他~区画$
］の幾何を変更する。
◎
A shape can be declared with the shape-outside property, with possible modifications from the shape-margin property. The shape defined by the shape-outside and shape-margin properties changes the geometry of a float element’s float area and an exclusion element’s exclusion area.
</p>

<p>
図形は、
`shape-inside$p ~propで宣言できる
— それには、
`shape-padding$p ~propによる改変もアリになる。
［
`shape-inside$p, `shape-padding$p
］~propにより定義される図形は、
当の要素の`回込み文脈$に供与する`排他~区画$
］を定義する。
`shape-inside$p ~propは、
すべての塊~levelの要素に適用される。
◎
A shape can be declared with the shape-inside property, with possible modifications from the shape-padding property. The shape defined by the shape-inside and shape-padding properties defines an exclusion area that contributes to the element’s wrapping context. The shape-inside property applies to all block-level elements.
</p>

<div class="example">
<p>
`red^v な~boxは、
`排他体$の内容~boxを図示する,
それは［
改変されない／
通常の~CSS位置決め（ここでは絶対~位置決め）の~subjectになる
］。
◎
The red box illustrates an exclusion element’s content box, which is unmodified and subject to normal CSS positioning (here absolute positioning).
</p>

<pre class="lang-html">
&lt;style type="text/css"&gt;
.exclusion  {
  wrap-flow: both;
  position: absolute;
  top: 25%;
  left: 25%;
  width: 50%;
  height: 50%;
  shape-outside: circle(50% at 50% 50%);
  border: 1px solid red;
}
&lt;/style&gt;

&lt;div style=”position: relative;”&gt;
  &lt;div class=”exclusion”&gt;&lt;/div&gt;
  Lorem ipsum dolor sit amet...
&lt;/div&gt;
</pre>

<p class="alt" id="_dgm-shapes_CSS2.1_MBP">
`circle$f 図形と~box~modelを描画する例。
◎
Example rendering of circle shape and box model.
</p>
</div>


		<section id="shape-outside-property">
<h3 title="The shape-outside Property">9.1. `shape-outside^p ~prop</h3>

<p>
`~level 1$ の
`§ 浮動~区画の図形＠~CSSSHAPES#shape-outside-property$
をここに追加する
— 次に挙げる変更も伴わせて
⇒
`shape-outside$p は塊~levelの要素にも適用され、
要素が`排他体$である場合に効果がある。
◎
Add the final level 1 section with the change that shape-outside applies to block-level elements and has an effect if the element is an exclusion.
</p>

		</section>
		<section id="shape-inside-property">
<h3 title="The shape-inside Property">9.2. `shape-inside^p ~prop</h3>

<p>
`shape-inside$p ~propは、
要素の`回込み文脈$に 1 個以上の`排他~区画$を追加する。
これは、
`内容~区画$を成す通常の矩形な図形を，場合によっては矩形でない回込み区画に改変する。
`排他~区画$は、
当の要素の`内容~区画$から当の図形を減算することにより定義される。
図形を成す［
要素の`内容~区画$の外側にある部分
］には効果は無い
【言い換えれば、実質的な図形は，当の図形の外側と内容~区画との交差域になる】。
◎
The shape-inside property adds one or more exclusion areas to the element’s wrapping context. This modifies the normal rectangular shape of the content area to a possibly non-rectangular wrapping area. The exclusion areas are defined by subtracting the shape from the element’s content area. Any part of the shape outside the element’s content area has no effect.
</p>


◎名 `shape-inside@p
◎値 `auto^v | `outside-shape$v | [ `basic-shape$t || `shape-box$t ] | `image$t | `display$v
◎初 `auto^v
◎適 塊~levelの要素
◎継 されない
◎百 受容しない
◎算 
`basic-shape$t 用には算出d長さ／
`url$t 用には絶対~URL／
他は指定されとおり
◎順 文法に従う
◎ア `basic-shape$t 用には定義されたとおり／他は離散的
◎表終

<p>
各種~値の意味は：
◎
The values of this property have the following meanings:
</p>
<dl>
	<dt>`auto@v</dt>
	<dd>
図形は、
当の要素の内容~boxに基づいて算出される。
◎
The shape is computed based on the content box of the element.
</dd>

	<dt>`outside-shape@v</dt>
	<dd>
図形は、［
`shape-outside$p, `shape-margin$p
］~propにより定義される図形に基づいて算出される。
◎
The shape is computed based on the shape defined by the shape-outside and shape-margin properties.
</dd>

	<dt id="valdef-shape-inside-basic-shape">`basic-shape$t</dt>
	<dd>
図形は、
`basic-shape$t を成す いずれかの値に基づいて算出される
◎
The shape is computed based on the values of one of the &lt;basic-shape&gt; functions. 
</dd>

	<dt id="valdef-shape-inside-url">`url$t</dt>
	<dd>
<p>
`url$t が何を参照するかに応じて：
</p>
		<ul class="switch">
			<li>
~SVG図形~要素を参照する場合
⇒
その要素が図形を定義する。
</li>
			<li>
画像を参照する場合
⇒
図形は，指定された画像から抽出される~alpha~channelに基づいて算出される。
</li>
			<li>
他の場合
⇒
その効果は、
値 `auto$v が指定されたかのようになる。
</li>
		</ul>
◎
If the &lt;uri&gt; references an SVG shape element, that element defines the shape. Otherwise, if the &lt;uri&gt; references an image, the shape is extracted and computed based on the alpha channel of the specified image.
◎
If the &lt;uri&gt; does not reference an SVG shape element or an image, the effect is as if the value auto had been specified.
</dd>

	<dt>`display@v</dt>
	<dd>
図形は、
`CSS Round Display＠~CSSWG/css-round-display$cite
にて述べられるとおりの表示を成す図形に基づいて算出される。
◎
The shape is computed based on the shape of the display as described in css-round-display.
</dd>
</dl>

<p>
`shape-inside$p ~propは、
`浮動体$にも適用されるが，
適用されない要素もある
— `display$p の算出d値に `table＠~CSSDISP#valdef-display-table$v を伴う要素など。
◎
The shape-inside property applies to floats.
◎
The shape-inside property may not apply on some elements such as elements with a computed display value of table.
</p>

<figure>
<p class="alt" id="_dgm-shape-inside-content">
`shape-inside^p を［
伴って／伴わずに
］~flowしている内容
◎
Content flowing with and without a shape-inside
</p>

<figcaption>
行内~内容に対する `shape-inside^p の効果。
◎
Effect of shape-inside on inline content.
</figcaption></figure>

<p>
~overflowする内容は、［
`shape-inside$p, `shape-padding$p
］により追加された`排他~区画$（たち）を避ける
（当の要素の`回込み文脈$内の他の`排他~区画$に加えて）。
言い換えれば、
~overflowは，当の要素の矩形な限界域の外側で継続する。
◎
Overflow content avoids the exclusion area(s) added by shape-inside and shape-padding (as well as any other exclusion areas in the element’s wrapping context). In other words, overflow continues outside the rectangular bounds of the element.
</p>

<figure>
<div style="column-count:2;">
<div>
<p class="alt" id="_dgm-rounded-rect-overflow">
丸まった矩形と相互作用している~overflow
◎
Overflow interacting with rounded rect
</p>
</div>
<div>
<p class="alt" id="_dgm-ellipse-overflow">
楕円と相互作用している~overflow
◎
Overflow interacting with ellipse
</p>
</div>
</div>

<figcaption>
［
`shape-inside$p, `shape-padding$p
］により定義された`排他~区画$と相互作用している~overflow。
◎
Overflow interacting with exclusion areas defined by shape-inside and shape-padding.
</figcaption></figure>

<p class="issue">
灰色な~boxに代えて~overflowを示す~textを利用して、
上の図を改善する。
◎
improve the illustration above, using text to show overflow instead of grey boxes.
</p>

<p>
`自動的~size$を伴う要素は、
`shape-inside^p が`確定的~size$を有する場合には
（図形の定義~内に百分率は利用されてない），
自身の`最大~size$を決定するときの拘束として当の図形を利用するベキである。
◎
When a shape-inside has a definite size (no percentages used in the shape’s definition) an auto-sized element should use the shape as a constraint in determining its maximum size.
</p>

		</section>
		<section id="shape-image-threshold-property">
<h3 title="The shape-image-threshold Property">9.3. `shape-image-threshold^p ~prop</h3>

<p>
`~level 1$ の
`§ 画像~内で図形を成す画素を選ぶ＠~CSSSHAPES#shape-image-threshold-property$
をここに追加する
— 次に挙げる変更も伴わせて
⇒
`shape-image-threshol^p は［
`shape-inside$p, `shape-outside$p
］どちらにも適用される。
◎
Add the final level 1 section with the change that it applies to both shape-inside and shape-outside.
</p>


		</section>
		<section id="shape-image-source-type-property">
<h3 title="The shape-image-source-type Property">9.4. `shape-image-source-type^p ~prop</h3>

<p>
画像~sourceから図形を得るために利用する値を決定するときに［
~alpha／輝度
］による閾値を追加するべきか？
【~alphaによる閾値はすでに`~level 1$ にある。】
これは、
`shape-image-threshold$p ~prop用の単なる~keyword値にもなり得る。
何であれ，~mask~sourceからの［
~alpha／輝度
］閾値と互換になるべきである【`参照＠~MASKING1#MaskValues$】。
◎
Should we add an alpha/luminance switch to determine which values we use from the shape-image source? This could just be a keyword on the shape-image-threshold property. Whatever we go with should be compatible with the alpha/luminance switch from mask sources.
</p>

		</section>
		<section id="shape-margin-property">
<h3 title="The shape-margin property">9.5. `shape-margin^p ~prop</h3>

<p>
`~level 1$ の
`§ 図形の拡幅-法＠~CSSSHAPES#shape-margin-property$
をここに追加する
— 次に挙げる変更も伴わせて
⇒
`shape-margin$p は`排他体$にも適用される。
◎
Add the final level 1 section with the change that it applies to exclusions.
</p>

		</section>
		<section id="shape-padding-property">
<h3 title="The shape-padding Property">9.6. `shape-padding^p ~prop</h3>

<p>
`shape-padding$p ~propは、
`shape-inside^p に~paddingを追加する。
これは、
`shape-inside^p から【内方へ】指定された距離~以上にある点からなる新たな図形を定義する。
この~propは、
正な値に限り，とり得る。
◎
The shape-padding property adds padding to a shape-inside. This defines a new shape where every point is the specified distance from the shape-inside. This property takes on positive values only.
</p>

◎名 `shape-padding@p
◎値 `length-percentage [0,∞]$t
◎初 `0^v
◎適 塊~levelの要素
◎継 されない
◎百 `包含塊$の`行内~size$を~~基準にする
◎算 `length-percentage$t の算出d値
◎順 文法に従う
◎ア 算出d値の型による
◎表終

<dl class="valdef">
	<dt id="valdef-shape-padding-length-percentage-0">`length-percentage [0,∞]$t</dt>
	<dd>
当の図形の~paddingを指定された値に設定する。
◎
Sets the padding of the shape to the specified value.
</dd>
</dl>

<div class="example">
<figure>
<p class="alt" id="_dgm-shape-padding">
`shape-padding^p により~offsetされる例
◎
Example of a shape-padding offset
</p>

<figcaption>
`shape-padding$p は、
真円な `shape-inside$p からの~offsetを作成している。
薄青な矩形は、
~paddingにより作成された図形により影響される行内~内容を表現する。
◎
A shape-padding creating an offset from a circular shape-inside. The light blue rectangles represent inline content affected by the shape created by the padding.
</figcaption></figure>
</div>

<p class="note">注記：
`shape-padding$p ~propが影響するのは，
それが適用される要素の内側にある内容の~layoutに限られる一方で、
`shape-margin$p ~propが影響するのは，
当の要素の外側にある内容の~layoutに限られる。
◎
Note: The shape-padding property only affects layout of content inside the element it applies to while the shape-margin property only affects layout of content outside the element.
</p>

		</section>
	</section>
	<section id="privacy">
<h2 title="Privacy Considerations">~privacyの考慮点</h2>

<p>
この仕様に対し報告された，新たな~privacyの考慮点は、無い。
◎
No new privacy considerations have been reported on this specification.
</p>

	</section>
	<section id="security">
<h2 title="Security Considerations">~securityの考慮点</h2>

<p>
この仕様に対し報告された，新たな~privacyの考慮点は、無い。
◎
No new security considerations have been reported on this specification.
</p>

	</section>
</main></div>
