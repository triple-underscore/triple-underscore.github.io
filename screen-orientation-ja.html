<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<title>The Screen Orientation API （日本語訳）</title>

<link rel="stylesheet" href="common.css" type="text/css" />
<link rel="stylesheet" href="common-w3c.css" type="text/css" />

<style>
.test {
	float: right;
}

.practice {
	border-color: #8CCBF2;
	background: #F1F6FD;
	padding: .5em;
	border-width: .5em;
	border-style: none none none solid;
}

</style>

<script src="common0.js" ></script>
<script src="common1.js" async></script>

<script>

Util.ready = function(){
	const source_data = {
		generate: expand,
	};
	Util.switchWordsInit(source_data);
}

function expand(){
	const class_map = this.class_map;
	const tag_map = this.tag_map;
	const link_map = this.link_map;

	return this.html.replace(
		/%[\w\-~一-鿆あ-ん]+|`(.*?)([$@^])(\w*)/g,
		create_html
	);

	function create_html(match, key, indicator, klass){
if(!indicator) {//%
	return `<var>${match.slice(1)}</var>`;
}

let text = key;
let href = '';

switch(klass){
case 'r': // ref
	text = `[${key}]`;
	href = `#bib-${key.toLowerCase()}`;
	break;
case 'm':
	const n = text.indexOf('(');
	if(n > 0){
		key = text.slice(0, n);
		text = key + text.slice(n).replace(/\w+/g, '<var>$&</var>');
	}
	break;
case 'l': // literal
	text = `"<code class="literal">${key}</code>"`
	break;
case 'sl': // JS internal slot
	text = `[[${key}]]`;
	break;
case 'test':
	return (
`<span class="test">《test: <a href="https://w3c-test.org/screen-orientation/${key}.html">${key}</a>》</span>`
	);
	break;
case 'issue':
	href = `https://github.com/w3c/screen-orientation/issues/${key}`
	text = `課題 #${key}`;
	break;
case 'en':
	return `<span lang="en-x-a0">${key}</span>`
	break;
}

let tag = tag_map[klass];
if(tag) {
	let classname = class_map[klass];
	classname = classname ? ` class="${classname}"` : '';
	text = `<${tag}${classname}>${text}</${tag}>`;
}

if(indicator !== '^'){
	href = link_map[ klass ? `${klass}.${key}` : key ] || href;
	if(!href){
		console.log(match); // check error
		return match;
	}

	switch(indicator){
	case '$':
		text = `<a href="${href}">${text}</a>`;
		break;
	case '@':
		text = `<dfn id="${href.slice(1)}">${text}</dfn>`;
		break;
	}
}

return text;

	}
}
</script>

<script type="text/plain" id="_source_data">


●●options

spec_title:The Screen Orientation API
spec_date:2020-10-19
trans_update:2021-01-05
source_checked:201019
original_url:https://w3c.github.io/screen-orientation/
	abbr_url:SCREEN-ORIENTATION
spec_status:ED
ref_id_prefix:bib-
ref_id_lowercase:true
site_nav:uievents
conformance:w3c
copyright:2020,permissive
trans_1st_pub:2021-01-05

●●class_map
oL:value
oT:value
et:event-type
E:error
sl:js-slot
jv:js-value
test:test

●●tag_map
I:code
m:code
E:code
oL:code
oT:code
et:code
sl:span
c:code
jv:code
i:i
cite:cite
test:span


●●original_id_map

●●mdn_urls

dom-screenorientation:API/ScreenOrientation
	dom-orientationlocktype:API/OrientationLockType
	dom-orientationtype:API/OrientationType

●●link_map

	●IDL
Exposed:~WEBIDLjs#Exposed
SameObject:~WEBIDLjs#SameObject

undefined:~WEBIDL#idl-undefined
unsigned short:~WEBIDL#idl-unsigned-short
Promise:~WEBIDL#idl-promise

I.Promise:~WEBIDL#idl-promise
I.Window:~WINDOW#window
I.Document:~DOM4#document
	？I.Document:~HTMLdom#document

I.Screen:~CSSOMVIEW#screen
	I.Screen:#dom-screen
I.EventHandler:~WAPI#eventhandler
I.EventTarget:~DOM4#interface-eventtarget
I.ScreenOrientation:#dom-screenorientation
I.OrientationLockType:#dom-orientationlocktype
I.OrientationType:#dom-orientationtype
	orientationType:#dom-orientationtype

m.orientation:#dom-screen-orientation
m.screen.orientation:#dom-screen-orientation

m.requestFullscreen:~FULLSCREEN#dom-element-requestfullscreen

	OrientationLockType
oL.any:#dom-orientationlocktype-any
oL.natural:#dom-orientationlocktype-natural
oL.landscape:#dom-orientationlocktype-landscape
oL.portrait:#dom-orientationlocktype-portrait
oL.portrait-primary:#dom-orientationlocktype-portrait-primary
oL.portrait-secondary:#dom-orientationlocktype-portrait-secondary
oL.landscape-primary:#dom-orientationlocktype-landscape-primary
oL.landscape-secondary:#dom-orientationlocktype-landscape-secondary

	OrientationType
oT.portrait-primary:#dom-orientationtype-portrait-primary
oT.portrait-secondary:#dom-orientationtype-portrait-secondary
oT.landscape-primary:#dom-orientationtype-landscape-primary
oT.landscape-secondary:#dom-orientationtype-landscape-secondary

	ScreenOrientation
m.lock:#dom-screenorientation-lock
m.unlock:#dom-screenorientation-unlock
m.type:#dom-screenorientation-type
m.angle:#dom-screenorientation-angle
m.onchange:#dom-screenorientation-onchange

sl.orientationLock:#dfn-orientationlock
sl.defaultOrientation:#dfn-defaultorientation
sl.orientationPendingPromise:#dfn-orientationpendingpromise


	●用例（補完
0.orientation:#dom-screen-orientation
0.lock:#dom-screenorientation-lock
0.unlock:#dom-screenorientation-unlock
0.screen:~CSSOMVIEW#dom-window-screen
0.fullscreenElement:~FULLSCREEN#dom-document-fullscreenelement
0.requestFullscreen:~FULLSCREEN#dom-element-requestfullscreen
0.documentElement:~DOM4#dom-document-documentelement
0.addEventListener:~DOM4#dom-eventtarget-addeventlistener
0.getElementById:~DOM4#dom-nonelementparentnode-getelementbyid
0.body:~HTMLdom#dom-document-body
0.matchMedia:~CSSOMVIEW#dom-window-matchmedia
0.removeEventListener:~DOM4#dom-eventtarget-removeeventlistener
0.removeListener:~CSSOMVIEW#dom-mediaquerylist-removelistener
0.addListener:~CSSOMVIEW#dom-mediaquerylist-addlistener
0.matches:~CSSOMVIEW#dom-mediaquerylist-matches

et.orientationchange:~COMPAT#event-orientationchange
方位~変化~event:~COMPAT#event-orientationchange

	●用語
可視:#_visible
~screen:#dfn-screen-concept

横置き首-方位:#dfn-landscape-primary
横置き副-方位:#dfn-landscape-secondary
縦置き首-方位:#dfn-portrait-primary
縦置き副-方位:#dfn-portrait-secondary
縦置き方位:#dfn-portrait
横置き方位:#dfn-landscape
自然な方位:#dfn-natural
全~方位:#dfn-any

既定の~screen方位:#dfn-default-screen-orientation
現在の方位~種別:#dfn-current-orientation-type
現在の方位~角度:#dfn-current-orientation-angle
~screen方位~値~表:#dfn-screen-orientation-values-table
事前~lock条件:#dfn-pre-lock-conditions
方位~lock:#dfn-orientation-lock
方位~情報を更新する:#dfn-update-the-orientation-information
方位~lockを適用する:#dfn-apply-an-orientation-lock
方位を~lockする:#dfn-lock-the-orientation
作動中の方位~lock:#dfn-active-orientation-lock
利用者が生成した方位~変更により誘発された:#dfn-triggered-by-a-user-generated-orientation-change


§~WebAppManifestとの相互作用:#interaction-with-web-application-manifest

担当の文書:#_responsible-document
文書:#_document
bc.文書:#_bc-document

	●用語（外部
有順序~集合:~INFRA#ordered-set
~list:~INFRA#list

作動中の文書:~BROWSERS#active-document
作動中の~sandbox法~flag集合:~BROWSERS#active-sandboxing-flag-set
閲覧文脈~sandbox化( 方位~lock )~flag:~ORIGIN#sandboxed-orientation-lock-browsing-context-flag

閲覧文脈:~BROWSERS#browsing-context
属する閲覧文脈:~BROWSERS#concept-document-bc
子孫~閲覧文脈~list:~BROWSERS#list-of-the-descendant-browsing-contexts
~top-level閲覧文脈:~BROWSERS#top-level-browsing-context

~navigate:~NAVI#navigate
閲覧文脈~sandbox化( 方位~lock )~flag:~ORIGIN#sandboxed-orientation-lock-browsing-context-flag

~event~handler~event型:~WAPI#event-handler-event-type
~event~handler:~WAPI#event-handlers
enV.担当の文書:~WAPI#responsible-document
~task:~WAPI#concept-task
関連な設定群~obj:~WAPI#relevant-settings-object

~eventを発火する:~DOM4#concept-event-fire
文書:~DOM4#concept-document
	？文書:~HTMLdom#document

本質的:~TR/WCAG21/#dfn-essential
~fullscreen要素:~FULLSCREEN#fullscreen-element

~animation~frame~task:https://github.com/whatwg/fullscreen/issues/16
	https://github.com/w3c/screen-orientation/issues/136
	#dfn-animation-frame-task
	~animation~frame~task:~FULLSCREEN#list-of-pending-fullscreen-events 
	#run-the-fullscreen-steps

可視性~状態:~PAGE-VISIBILITY#dfn-visibility-states
可視性~状態を決定-:~PAGE-VISIBILITY#dfn-determine-the-visibility-state
	~PAGE-VISIBILITY#dfn-steps-to-determine-the-visibility-state
可視~化時の外部~algo:~PAGE-VISIBILITY#dfn-external-now-visible-algorithm


~WebAppManifest:~APPMANIFEST
	~WebAppManifest:~TR/appmanifest/
cite.CSS Device Adaptation Module Level 1:~TR/css-device-adapt-1/
cite.Web Content Accessibility Guidelines (WCAG) 2.1:~TR/WCAG21/

~webに公開される~screen区画:~CSSOMVIEW#web-exposed-screen-area

新たな~promise:~WEBIDLjs#a-new-promise
却下される~promise:~WEBIDLjs#a-promise-rejected-with
解決する:~WEBIDLjs#resolve
却下する:~WEBIDLjs#reject


	●他

●●words_table1
APPMANIFEST:appmanifest-ja.html
COMPAT:compat-ja.html

●●words_table

	●方位／UI／機器
ScreenOrientationAPI:Screen Orientation API
副-:secondary::~
首-:primary::~
時計回り:clockwise::~
	時計回り:right
反時計回り:counterclockwise:~
回転-:rotate::~
回転:rotation::~
	回した／回され:-turn
	逆回転:opposite
	反対の:opposite
横置き:landscape:::~
	各種~機器どうし:cross-devices
縦置き:portrait:::~
alert:
	~lock法:locking
unlock::::アンロック
	unlockする::::ロックを外す
	~unlock法:unlocking
pre-lock
gesture::::ジェスチャ
desktop::::デスクトップ
fullscreen::::全スクリーン
	click::::クリック
	押す:click／:press
	可視でない:non-visible
装着-:mount::~
描かれ:drawされ::~
度d:degree:deg:度°


	●IDL／型／構造
列挙:enum::~
	取得子~手続き:When getting 〜 the user agent MUST
	~method手続き:When 〜 is invoked 〜 the user agent MUST run

	文書:doc

	●処理一般
処理待ち:pending:~
実行時:runtime::~
	手続き:substeps
	-:sub-steps
	読取n法:reading

	●仕様
OS:operating system:~
	~program的:programmatical
WebAppManifest:<cite>Web Application Manifest</cite> 
選択肢:option:~:::オプション
視点:perspective:~

有力:competent:~
	共同で:in concert with
	なり得る:can be a potential
	見込まれて:unlikely
	見込みが高く:likely
	謝意:thank
	よって:hence
	満たす:meet
	問わず:irrespective
	間違い:wrong
	〜ではなく:as opposed to
	効く:in place
	委ねられる:at will

	●仕様（動詞
末端利用者:end user:~:::エンドユーザ
見做そう:assumeしよう:~
	見做そう:assumption
順応-:adapt:~
助言-:advise:~
補う:compensateする:~

	に応じて:depend
	知れる:known
	押し付ける:intrusive
	関するもの:concerning
	応じて:correspondingly
	寄与-:contribution
	指す:refer
	必ず〜して:making sure

	●未分類
arm::::アーム
game::::ゲーム
	game:computer game
排他的:exclusive::~
固定的:fixed:~
cell::::セル
電動車椅子:power wheelchair:~
	担当の:responsible
保つ:keepする:~

	~~移行:go into
	~web~site:website
	等しく:equal
	`可視性~状態$が変化したとき:becomes visible and hidden
	表:table
	-:assign
	-:computing
	-:going

	●機能語
	新たな:newly-created
	現時点／現在:currently
	一部:part of
	初回:first-time
	あるいは:Alternatively
	最後に:latest
	末端:end
	次回の:next


●●ref_normative

[CSSOM-VIEW]
    CSSOM View Module. Simon Pieters. W3C. 17 March 2016. W3C Working Draft. URL: https://www.w3.org/TR/cssom-view-1/
[dom]
    DOM Standard. Anne van Kesteren. WHATWG. Living Standard. URL: https://dom.spec.whatwg.org/
[FULLSCREEN]
    Fullscreen API Standard. Philip Jägenstedt. WHATWG. Living Standard. URL: https://fullscreen.spec.whatwg.org/
[HTML]
    HTML Standard. Anne van Kesteren; Domenic Denicola; Ian Hickson; Philip Jägenstedt; Simon Pieters. WHATWG. Living Standard. URL: https://html.spec.whatwg.org/multipage/
[infra]
    Infra Standard. Anne van Kesteren; Domenic Denicola. WHATWG. Living Standard. URL: https://infra.spec.whatwg.org/
[PAGE-VISIBILITY]
    Page Visibility (Second Edition). Jatinder Mann; Arvind Jain. W3C. 29 October 2013. W3C Recommendation. URL: https://www.w3.org/TR/page-visibility/
[RFC2119]
    Key words for use in RFCs to Indicate Requirement Levels. S. Bradner. IETF. March 1997. Best Current Practice. URL: https://tools.ietf.org/html/rfc2119
[RFC8174]
    Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words. B. Leiba. IETF. May 2017. Best Current Practice. URL: https://tools.ietf.org/html/rfc8174
[WebIDL]
    Web IDL. Boris Zbarsky. W3C. 15 December 2016. W3C Editor's Draft. URL: https://heycam.github.io/webidl/

●●ref_informative

[appmanifest]
    Web App Manifest. Marcos Caceres; Kenneth Christiansen; Mounir Lamouri; Anssi Kostiainen; Matt Giuca; Aaron Gustafson. W3C. 9 December 2019. W3C Working Draft. URL: https://www.w3.org/TR/appmanifest/
[CSS-ADAPTATION]
    CSS Device Adaptation Module Level 1. Rune Lillesveen; Florian Rivoal; Matt Rakow. W3C. 29 March 2016. W3C Working Draft. URL: https://www.w3.org/TR/css-device-adapt-1/
[WCAG21]
    Web Content Accessibility Guidelines (WCAG) 2.1. Andrew Kirkpatrick; Joshue O Connor; Alastair Campbell; Michael Cooper. W3C. 5 June 2018. W3C Recommendation. URL: https://www.w3.org/TR/WCAG21/



●●trans_metadata
<p>
~THIS_PAGEは、~W3Cにより編集者草案として公開された
<a href="~SPEC_URL">The Screen Orientation API</a>
を日本語に翻訳したものです。
~PUB
</p>

●●spec_metadata

最新発行バージョン
	https://www.w3.org/TR/screen-orientation/
編集者草案
	https://w3c.github.io/screen-orientation/

テスト一式
	https://w3c-test.org/screen-orientation/
課題追跡
	https://github.com/w3c/screen-orientation/issues/

編集
	Mounir Lamouri(Google Inc.)
	Marcos Cáceres(Mozilla)
	Johanna Herman (Invited Expert)
Participate
	<a href="https://github.com/w3c/screen-orientation/">GitHub w3c/screen-orientation</a>
	<a href="https://github.com/w3c/screen-orientation/issues/">File a bug</a>
	<a href="https://github.com/w3c/screen-orientation/commits/gh-pages">Commit history</a>
	<a href="https://github.com/w3c/screen-orientation/pulls/">Pull requests</a>
Can I Use this API?
	https://caniuse.com/screen-orientation
発行者
	<a href="https://www.w3.org/2019/webapps/">Web Applications Working Group</a>
</script>

</head>

<body>

<header>
	<hgroup>
<h1>The Screen Orientation API</h1>
	</hgroup>

</header>

<hr>

<div id="MAIN" hidden>

	<section id="abstract" class="introductory">
~ABSTRACT

<p>
`~ScreenOrientationAPI^cite
は、［
~screen方位の種別と角度を読取る／
~screenを特定の方位に~lockする
］能を供する
— 前者は、~screen方位が変化するとき伝えられることになる。
◎
The Screen Orientation API provides the ability to read the screen orientation type and angle, to be informed when the screen orientation changes, and to lock the screen to a specific orientation.
</p>

	</section>
	<section id="sotd" class="introductory">
~STATUSofTHIS

<p>
これは、編集者草案の公な複製です…
【以下，この節の他の内容は、<a href="w3c-common-ja.html#status">W3C 日本語訳~共通~page</a>／冒頭の仕様~metadataに移譲。】
</p>

	</section>

<main id="MAIN0">

	<section id="introduction">
<h2 title="Introduction">1. 序論</h2>

~INFORMATIVE

<p>
`~ScreenOrientationAPI^cite
は、~web~app用に，機器の現在の~screen方位の種別と角度を公開する。
また、機器の方位が変化したときには通知を供せる。
これは、多くのアリな~screen方位~用に，利用者~体験を~program的に順応することを，（~CSSとの共同で）~web~appに許容する。
この~APIは、~screenを特定0の方位に~lockすることも許容する。
これは、［
利用者が機器を物理的に回転しても，~screen方位~自体は変化してはならない
］ような，~gameなどの~appにて有用になる。
◎
For web applications, the Screen Orientation API exposes the type and angle of a device's current screen orientation, and can provide notification if the device's orientation changes. This allows web applications to programmatically adapt the user experience for many possible screen orientations (in concert with CSS). The API also allows locking the screen to a particular orientation. This is useful in applications such as computer games where users physically rotate the device but the screen orientation itself mustn't change.
</p>

		<section id="goals">
<h3 title="Goals">1.1. 目標</h3>

<ul>
	<li>
必要な所で，~screen方位に対する制御を
— 【特定0の~screen方位を】末端利用者に押し付けることなく —
~web~appに許容する。
◎
Allow a web application to have control over screen orientation where needed and without being intrusive to end users.
</li>
	<li>
より良い利用者~体験を~supportするため、~web~appが~screen方位の変化に応じて更新できるよう，その情報を開発者に供する。
◎
Support a better user experience by providing developers with information on screen orientation changes so web applications can update correspondingly.
</li>
</ul>

		</section>
		<section id="examples">
<h3 title="Examples">1.2. 例</h3>

~INFORMATIVE

			<section id="locking-to-a-specific-orientation-and-unlocking">
<h4 title="Locking to a specific orientation and unlocking">1.2.1. 特定の方位への~lock法と~unlock法</h4>

<div class="example" id="example-1">

<p>
この例では，
“~lockする”
~buttonを押すと、~fullscreenへ~~移行するよう要請してから，~screenを反対の方位
【横置きなら縦置き, 縦置きなら横置き】
に~lockする。
“~unlockする”
~buttonを押すと、~screenを~unlockして，利用者が機器を回したら回転するようにする。
◎
In this example, clicking the "Lock" button makes a request to go into fullscreen and then lock the screen to the opposite orientation. Pressing the "Unlock" button unlocks the screen so it rotates if the user turns the device.
</p>

<p>
開発者~consoleは、方位の種別, 角度における変化を~logする。
◎
The developer console logs the change in orientation type and angle.
</p>

<pre class="lang-html">
&lt;script&gt;
function fullScreenCheck() {
  if (document.`fullscreenElement$0) return;
  return document.`documentElement$0.`requestFullscreen$0();
}

function updateDetails(%lockButton) {
  const %buttonOrientation = getOppositeOrientation();
  %lockButton.textContent = ``^${%buttonOrientation} に~lockする``^;
}

function getOppositeOrientation() {
  const { %type } = `screen$0.`orientation$0;
  return %type.startsWith("portrait") ? "landscape" : "portrait";
}

async function rotate(%lockButton) {
  try {
    await fullScreenCheck();
  } catch (%err) {
    console.error(%err);
  }
  const %newOrientation = getOppositeOrientation();
  await `screen$0.`orientation$0.`lock$0(%newOrientation);
  updateDetails(%lockButton);
}

function show() {
  const { %type, %angle } = `screen$0.`orientation$0;
  console.log(``^方位の種別は ${%type}, 角度は ${%angle}° です。``^);
}

`screen$0.`orientation$0.`addEventListener$0("change", () =&gt; {
  show();
  updateDetails(document.`getElementById$0("button"));
});

window.`addEventListener$0("load", () =&gt; {
  show();
  updateDetails(document.`getElementById$0("button"));
});
&lt;/script&gt;

&lt;button onclick="rotate(this)" id="button"&gt;
  ~lockする
&lt;/button&gt;
&lt;button onclick="`screen$0.`orientation$0.`unlock$0()"&gt;
  ~unlockする
&lt;/button&gt;
</pre>
</div>
			</section>
			<section id="locking-the-screen-before-calling-a-function">
<h4 title="Locking the screen before calling a function">1.2.2. 関数の~call前における~screenの~lock法</h4>

<div class="example" id="example-2">
<p>
この例は、~fullscreenへ~~移行するまで待機してから，
`ready()^m を~callする前に横置きに~lockする。
◎
This example waits to go into fullscreen, then locks to landscape before calling ready().
</p>

<pre class="lang-html">
&lt;script&gt;
function ready() {
  const { %type } = `screen$0.`orientation$0;
  console.log(``^~fullscreen化して ${%type} に~lockしました。``^);
}

async function start() {
  await document.`body$0.`requestFullscreen$0();
  await `screen$0.`orientation$0.`lock$0("landscape");
  ready();
}
&lt;/script&gt;
&lt;button onclick="start()"&gt;
  開始する
&lt;/button&gt;
</pre>
</div>

			</section>
			<section id="alerting-the-user-if-the-api-is-not-supported">
<h4 title="Alerting the user if the API is not supported">1.2.3. ~APIが~supportされないときに，利用者に~alertする</h4>

<div class="example" id="example-3">

<p>
この例では、［
`~ScreenOrientationAPI^cite
は~supportされない／
~screen`方位~lock$は却下された（ `lock()$m が返す~promiseは却下された）
］場合に，~screenを手動で回転して横置きにするよう，利用者に~alertする。
◎
In this example, if the Screen Orientation API is not supported, or the screen orientation lock() rejects, the user is alerted to rotate their screen manually to landscape.
</p>

<pre class="lang-html">
&lt;script&gt;
function start() {
  /* <span class="comment">
正しい方位にあるなら~appを開始する
◎
Start application when in correct orientation
</span> */
}
async function rotate() {
  try {
    await `screen$0.`orientation$0.`lock$0("landscape");
    start();
  } catch (%err) {
    console.error(%err);
  }
  const %matchLandscape = `matchMedia$0("(orientation: landscape)");
  if (%matchLandscape.`matches$0) return start();
  `addEventListener$0("`orientationchange$et", function listener() {
    %matchLandscape.`addListener$0(function mediaChange(%e) {
      if (!%e.`matches$0) return;
      `removeEventListener$0("`orientationchange$et", %listener);
      %matchLandscape.`removeListener$0(%mediaChange);
      start();
    });
  });
  alert("開始する前に~screenを横置きに回転してください。");
}
&lt;/script&gt;
&lt;button onclick="start()"&gt;
  開始する
&lt;/button&gt;
</pre>
<!-- 
To start, please rotate your screen to landscape.
 -->
</div>
			</section>
		</section>
	</section>
	<section id="_conventions">
<h2>【この訳に特有な表記規約】</h2>

<p>
この訳の，~algoや定義の記述に利用されている各種記号（ ~LET, ~EQ, ~IF, ~EACH (…), ~RET, 等々）の意味や定義の詳細は、~SYMBOL_DEF_REFを~~参照されたし。
</p>

<p>
`文書$ %文書 が
`可視@
であるとは、次を満たすことを意味する
`PAGE-VISIBILITY$r
⇒
%文書 が`属する閲覧文脈$の`可視性~状態を決定-$した結果 ~EQ `可視^i
</p>

<p class="trans-note">【
実際には， %文書 は`作動中の文書$であることも必要と思われるが、原文からは，はっきりしない。
】</p>

<p>
この仕様に現れる，所与の `ScreenOrientation$I ~objの
`担当の文書@
は、~objに`関連な設定群~obj$の`担当の文書$enVの略記である。
</p>

<p>
この仕様が対象にする`文書$は、次を満たすものに限られる
⇒
それが`属する閲覧文脈$ ~NEQ ~NULL
</p>

	</section>
	<section id="extensions-to-the-screen-interface">
<h2 title="Extensions to the Screen interface">2. `Screen^I ~interfaceに対する拡張</h2>

<p id="dom-screen">
この仕様は、 `Screen$I ~interface `CSSOM-VIEW$r を拡張する：
◎
The CSSOM View Module specification defines the Screen interface, which this specification extends:
</p>

<pre class="idl">
partial interface `Screen$I {
  [`SameObject$] readonly attribute `ScreenOrientation$I `orientation$m;
};
</pre>

<dl class="idl-def">
	<dt id="orientation-attribute">
`orientation@m
◎
2.1 orientation attribute
</dt>
	<dd>
この属性は、現在の［
方位, 角度
］, および［
`onchange^et ~eventがあったかどうか
］を供する。
◎
↓</dd>
	<dd>
取得子は、 `ScreenOrientation$I の~instanceを返す。
~UAは、この属性を返す前に
<a href="#reading-the-screen-orientation">§ ~screen方位の読取n法</a>
に従って，その値を初期化しておくモノトスル。
◎
The Screen.orientation attribute is an instance of ScreenOrientation. This attribute provides the current orientation, current angle and whether there was an onchange event. The user agent MUST run the update the orientation information algorithm steps to initialize the values and return the Screen.orientation attribute.
</dd>
</dl>


	</section>
	<section id="screenorientation-interface">
<h2 title="ScreenOrientation interface">3. `ScreenOrientation^I ~interface</h2>

<pre class="idl">
[`Exposed$=Window]
interface `ScreenOrientation@I : `EventTarget$I {
  `Promise$&lt;`undefined$&gt; `lock$m(`OrientationLockType$I %orientation);
  `undefined$ `unlock$m();
  readonly attribute `OrientationType$I `type$m;
  readonly attribute `unsigned short$ `angle$m;
  attribute `EventHandler$I `onchange$m;
};

enum `OrientationLockType@I {
  "`any$oL",
  "`natural$oL",
  "`landscape$oL",
  "`portrait$oL",
  "`portrait-primary$oL",
  "`portrait-secondary$oL",
  "`landscape-primary$oL",
  "`landscape-secondary$oL"
};

enum `OrientationType@I {
  "`portrait-primary$oT",
  "`portrait-secondary$oT",
  "`landscape-primary$oT",
  "`landscape-secondary$oT"
};
</pre>

<div>

<p>
`OrientationLockType$I 列挙は、~screenをどの方位に~lockできるかを表現する。
各種~値の意味は：
</p>

<table><thead><tr>
<th>値
<th>表現する方位
</thead><tbody>

<tr><td>`any@oL
<td>`全~方位$

<tr><td>`natural@oL
<td>`自然な方位$

<tr><td>`landscape@oL
<td>`横置き方位$

<tr><td>`portrait@oL
<td>`縦置き方位$

<tr><td>`portrait-primary@oL
<td>`縦置き首-方位$

<tr><td>`portrait-secondary@oL
<td>`縦置き副-方位$

<tr><td>`landscape-primary@oL
<td>`横置き首-方位$

<tr><td>`landscape-secondary@oL
<td>`横置き副-方位$
</tbody></table>

◎
The OrientationLockType enum represents the screen orientations to which a screen can be locked: the "any" enum value represents the any orientation, the "natural" enum represents the natural orientation, the "landscape" enum represents the landscape orientation, the "portrait" enum represents the portrait orientation, the "portrait-primary" enum represents the portrait-primary orientation, the "portrait-secondary" enum represents the portrait-secondary orientation, the "landscape-primary" enum represents the landscape-primary orientation, and the "landscape-secondary" enum represents the landscape-secondary orientation.
</div>

<div>
<p>
`OrientationType$I 列挙は、現在の実際の~screen方位を表現する
— ~screenにどの~lockが適用されたかを問わず：
</p>

<table><thead><tr>
<th>値
<th>表現する方位
</thead><tbody>

<tr><td>`portrait-primary@oT
<td>`縦置き首-方位$

<tr><td>`portrait-secondary@oT
<td>`縦置き副-方位$

<tr><td>`landscape-primary@oT
<td>`横置き首-方位$

<tr><td>`landscape-secondary@oT
<td>`横置き副-方位$
</tbody></table>

◎
The OrientationType enum represents the actual current screen orientation that the screen is in irrespective of which lock is applied: the "portrait-primary" enum represents the portrait-primary orientation, the "portrait-secondary" enum represents the portrait-secondary orientation, the "landscape-primary" enum represents the landscape-primary orientation, and the "landscape-secondary" enum represents the landscape-secondary orientation.
</div>

<dl class="idl-def">
	<dt id="lock-method-lock-screen-to-a-specific-orientation">
`lock(orientation)@m
</dt>
	<dd>
~screenを特定の方位に~lockする。
`lock-bad-argument^test
`lock-basic^test
◎
3.1. lock() method: Lock screen to a specific orientation
tests: 2
</dd>
	<dd>
その~method手続きは
⇒
`方位~lockを適用する$( コレの`担当の文書$, %orientation )
◎
When the lock() method is invoked, the user agent MUST run the apply an orientation lock steps to the responsible document using orientation.
</dd>

	<dt id="unlock-method-unlock-screen-to-default-orientation">
`unlock()@m
</dt>
	<dd>
~screenを既定の方位に~unlockする。
◎
3.2 unlock() method: Unlock screen to default orientation
</dd>
	<dd>
<p>
その~method手続きは：
</p>
		<ol>
			<li>
%文書 ~LET コレの`担当の文書$
</li>
			<li>
`方位を~lockする$( %文書, %文書 の`既定の~screen方位$ )
</li>
		</ol>

◎
When the unlock() method is invoked, the user agent MUST run the steps to lock the orientation of the responsible document to its default screen orientation. 
</dd>
	<dd class="note">注記：
`unlock()$m は~promiseを返さない
— `既定の~screen方位$に~lockすることに等価なので。
その方位は~UAに既知でないこともある。
よって，~UAは、新たにどの方位になるのか，あるいは方位は変化するかどうかさえ予測できない。
◎
Note: Why does unlock() not return a promise?
◎
unlock() does not return a promise because it is equivalent to locking to the default screen orientation which might or might not be known by the user agent. Hence, the user agent can not predict what the new orientation is going to be and even if it is going to change at all.
</dd>
	<dd class="issue">
`104$issue：
`Promise for unlock()? question^en
【以下、未訳】
◎
Issue 104: Promise for unlock()? question
◎
I understand that this might not be possible from the note -
◎
unlock() does not return a Promise because it is equivalent to locking to the default orientation which might or might not be known by the user agent. Hence, the user agent can not predict what the new orientation is going to be and even if it is going to change at all.
◎
I am working on building an app that uses WebVR. Entering VR mode requires going fullscreen and then locking orientation to landscape. This works perfectly.
◎
However exiting this mode when phone is in portrait orientation, on tested Android devices, results in the browser bar and menu disappearing and a large white space appearing under the app. Dragging down on the screen reveals the browser bar and covers the white space, you can not then drag back up.
◎
orientation unlock issue
◎
I've overcome this issue using the following code
◎
screen.orientation.unlock();
setTimeout( () => {
    fullscreen.exit();
}, 0 );

A cleaner solution would be something like -

screen.orientation.unlock().then( () => {
    fullscreen.exit();
});
</dd>

	<dt id="type-attribute-get-current-orientation">
`type@m
</dt>
	<dd>
現在の方位を取得する。
◎
3.3 type attribute: Get current orientation
</dd>
	<dd>
その取得子~手続きは
⇒
~RET コレの`担当の文書$の`現在の方位~種別$
◎
When getting the type attribute, the user agent MUST return the responsible document's current orientation type.
</dd>

	<dt id="angle-attribute-get-orientation-angle">
`angle@m
</dt>
	<dd>
現在の方位~角度を取得する。
◎
3.4 angle attribute: Get orientation angle
</dd>
	<dd>
その取得子~手続きは
⇒
~RET コレの`担当の文書$の`現在の方位~角度$
◎
When getting the angle attribute, the user agent MUST return the responsible document's current orientation angle.
</dd>
	<dd class="note">
<p>注記：
この属性は、利用者が機器を自然な方位から反時計回りに，どれだけ回したかを表現する。
機器が反時計回りに 90度d回転されたなら、それを補うように，~screenは 90度d時計回りに回転するので、
`angle$m は 90 を返す。
◎
Note: What does the value given for angle represent?
◎
angle represents how far the user has turned the device counterclockwise from the natural orientation. When the device is rotated 90° counterclockwise, the screen compensates by rotating 90° clockwise, so angle returns 90.
</p>

<p>
`~screen方位~値~表$にて，機器がどう回転されたかに依存して角度がどう変化するかを示す。
◎
The screen orientation values table shows how the angle changes depending on the how the device is rotated.
</p>

<p>
この~propが返す値は、常に範囲 { 0 〜 359 } に入る。
負な値を返すことは決してない。
◎
The value returned by this property is always in the range 0-359. It never returns negative values.
</p>
	</dd>

	<dt id="onchange-attribute-handle-orientation-changes">
`onchange@m
</dt>
	<dd>
方位~変化を取扱う。
◎
3.5 onchange attribute: Handle orientation changes
</dd>
	<dd>
この属性は、`~event~handler$であり，対応する`~event~handler~event型$は `change^et である。
◎
The onchange attribute is an event handler whose corresponding event handler event type is "change".
</dd>
</dl>

	</section>
	<section id="extensions-to-the-document-interface">
<h2 title="Extensions to the Document interface">4. `Document$I ~interfaceに対する拡張</h2>

		<section id="internal-slots">
<h3 title="Internal Slots">4.1. 内部~slot</h3>

<p>
各 `文書$は次に挙げる内部~slotを有する：
◎
Internal Slot｜Description
</p>

<dl>
	<dt>`orientationLock@sl</dt>
	<dd>
`文書$の`方位~lock$を
`OrientationType$I 値からなる`有順序~集合$として表現する。
◎
The [[orientationLock]] represents a document's orientation lock as an ordered set of OrientationType.
</dd>

	<dt>`defaultOrientation@sl</dt>
	<dd>
0 個以上の方位
【 `OrientationType$I 値（ `OrientationLockType$I 値？）】
からなる`有順序~集合$
— この~APIや他の手段により明示的に~lockされていないときに、~lockされる~screen方位を与える。
◎
An ordered set of orientations to which the screen orientation is locked when not explicitly locked by this API or any other means.
</dd>
	<dd class="trans-note">【
この内部~slotは、どこでどう設定されるのか？
— この仕様~内には見当たらないが、`既定の~screen方位$をそのまま参照するのかもしれない。
】</dd>

	<dt>`orientationPendingPromise@sl</dt>
	<dd>
~NULL または `Promise$I 。
`Promise^I ならば、~supportされるいずれかの方位に~screenを~lockする要請を表現する。
この~promiseは、方位に~lockするのに成功したなら解決され，失敗したときは却下される。
◎
Either null or a Promise. When assigned a Promise, that promise represents a request to lock the screen to one of the supported orientations. The promise resolves after locking the orientation succeeds or rejects if locking fails.
</dd>
</dl>

		</section>
	</section>
	<section id="concepts">
<h2 title="Concepts">5. 概念</h2>

<p>
用語
`~screen@
は、
`CSSOM-VIEW$r による［
`Window$I に結付けられた出力-機器の~screen
］に等価とする。
【`~webに公開される~screen区画$を指す？】
◎
The term screen is equivalent to the screen of the output device associated to the Window, as per [CSSOM-VIEW].
</p>

<p>
この仕様にて定義される各~algoは、各`文書$用に
`orientationPendingPromise$sl
があるものと見做す。
◎
Algorithms defined in this specification assume that for each document there is an [[orientationPendingPromise]].
</p>

		<section id="screen-orientation-types-and-locks">
<h3 title="Screen orientation types and locks">5.1. ~screen方位の種別と~lock</h3>

<dl>
	<dt>
`横置き首-方位@
（ `landscape-primary^en ）
</dt>
	<dd>
<p>
`横置き方位$のうち，一方を指す：
</p>
		<ul>
			<li>
`自然な方位$は横置きである場合、それに一致する（その位置に保持されているときの）方位。
</li>
			<li>
`自然な方位$は縦置きである場合、~UAは，`~screen方位~値~表$に示される 2 つの選択肢から【対応する角度を】選ぶことになる。
</li>
		</ul>
◎
Landscape-primary is an orientation where the screen width is greater than the screen height. If the device's natural orientation is landscape, then it is in landscape-primary when held in that position. If the device's natural orientation is portrait, the user agent sets landscape-primary from the two options as shown in the screen orientation values table.
</dd>

	<dt>
`横置き副-方位@
（ `landscape-secondary^en ）
</dt>
	<dd>
`横置き方位$のうち，`横置き首-方位$でない方。
◎
Landscape-secondary is an orientation where the screen width is greater than the screen height. If the device's natural orientation is landscape, it is in landscape-secondary when rotated 180º from its natural orientation. If the device's natural orientation is portrait, the user agent sets landscape-secondary from the two options as shown in the screen orientation values table.
</dd>

	<dt>
`縦置き首-方位@
（ `portrait-primary^en ）
</dt>
	<dd>
<p>
`縦置き方位$のうち，一方を指す：
</p>
		<ul>
			<li>
`自然な方位$は縦置きである場合、それに一致する（その位置に保持されているときの）方位。
</li>
			<li>
`自然な方位$は横置きである場合、~UAは，`~screen方位~値~表$に示される 2 つの選択肢から【対応する角度を】選ぶことになる。
</li>
		</ul>
◎
Portrait-primary is an orientation where the screen width is less than or equal to the screen height. If the device's natural orientation is portrait, then it is in portrait-primary when held in that position. If the device's natural orientation is landscape, the user agent sets portrait-primary from the two options as shown in the screen orientation values table.
</dd>

	<dt>
`縦置き副-方位@
（ `portrait-secondary^en ）
</dt>
	<dd>
`縦置き方位$のうち，`縦置き首-方位$でない方。
◎
Portrait-secondary is an orientation where the screen width is less than or equal to the screen height. If the device's natural orientation is portrait, then it is in portrait-secondary when rotated 180º from its natural position. If the device's natural orientation is landscape, the user agent sets portrait-secondary from the two options as shown in the screen orientation values table.
</dd>

	<dt>
`縦置き方位@
（ `portrait^en ）
</dt>
	<dd>
［
~screen横幅 ~LTE ~screen縦幅
］であるときの， 2 つあり得る方位の総称。
~screenを縦置きに~lockすることは、~platform規約に依存して，［
`縦置き首-方位$／`縦置き副-方位$
］またはこの両者を表現し得る。
◎
Portrait is an orientation where the screen width is less than or equal to the screen height and depending on platform convention locking the screen to portrait can represent portrait-primary, portrait-secondary or both.
</dd>

	<dt>
`横置き方位@
（ `landscape^en ）
</dt>
	<dd>
［
~screen横幅 ~GT ~screen縦幅
］であるときの， 2 つあり得る方位の総称。
~screenを横置きに~lockすることは、~platform規約に依存して，［
`横置き首-方位$／`横置き副-方位$
］またはこの両者を表現し得る。
◎
Landscape is an orientation where the screen width is greater than the screen height and depending on platform convention locking the screen to landscape can represent landscape-primary, landscape-secondary or both.
</dd>

	<dt>
`自然な方位@
（ `natural^en ）
</dt>
	<dd>
機器の通例の方位に依存して，［
`縦置き首-方位$, `横置き首-方位$
］いずれかを指す。
この方位は、通例的に下層の~OSから供される。
◎
Natural is an orientation that refers to either portrait-primary or landscape-primary depending on the device's usual orientation. This orientation is usually provided by the underlying operating system.
</dd>
	<dd class="trans-note">【
よくあるスマホなら、縦置き首-方位を指すであろう。
あるいは、~OSの環境設定に基づくこともあるかもしれない。
】</dd>

	<dt>
`全~方位@
（ `any^en ）
</dt>
	<dd>
［
`縦置き首-方位$,
`縦置き副-方位$,
`横置き首-方位$,
`横置き副-方位$
］の総称。
~screenは、これら どの方位にも~lockできることを意味する。
◎
Any is an orientation that means the screen can be locked to any one of portrait-primary, portrait-secondary, landscape-primary and landscape-secondary.
</dd>
</dl>

<p>
`既定の~screen方位@
は、現在の`方位~lock$は無いときに~screenが~lockされる方位たちの集合である。
この方位は、［
機器の~OS／~UA
］により決定されるか（例：`§~WebAppManifestとの相互作用$），末端利用者により制御される。
◎
The default screen orientation is the set of orientations to which the screen is locked when there is no current orientation lock. This orientation is determined by the device's operating system, or the user agent (e.g., § 6.2 Interaction with Web Application Manifest ), or controlled by the end-user.
</p>

<p class="issue">
`150$issue：
なぜ方位たちの集合とされている？
（ `104$issue にも関係する）
◎
Issue 150: Definition of default orientation
◎
Currently default orientation is defined with the following:
• A &lt;a&gt;document&lt;/a&gt;'s &lt;dfn&gt;default orientation&lt;/dfn&gt; is the set of orientations to which the screen orientation is locked when it is not explicitly locked by this API or any other means.
◎
It would be great to get some clarification on why default orientation is a set? From looking at the android docs it looks like the system decides on one orientation if none is specified.
◎
@mounirlamouri Could you please explain this further?
◎
Relates to #104
</p>

		</section>
		<section id="reading-the-screen-orientation">
<h3 title="Reading the screen orientation">5.2. ~screen方位の読取n法</h3>

<p>
どの`文書$ %文書 にも
`現在の方位~種別@,
`現在の方位~角度@
がある：
◎
All documents have a current orientation type and a current orientation angle.＼
</p>
<ul>
	<li>
どちらも， %文書 の作成-時に初期化されるベキである
— 他の場合、それらが初回に~accessされたとき，値が読取られる前に初期化するモノトスル。
~UAは、それらを初期化するときは，次を遂行するモノトスル
⇒
%文書 の`方位~情報を更新する$
◎
Both of them SHOULD be initialized when the document is created, otherwise they MUST be initialized the first time they are accessed and before their value is read. The user agent MUST update the orientation information of the document to initialize them.
</li>
	<li>
%文書 の［
`現在の方位~種別$, `現在の方位~角度$
］は、［
所与のどの方位~種別にも特定の角度が結付けられる
］イミで強く~linkされる。
【下記を見よ。】
◎
For a given document, the current orientation type and the current orientation angle are strongly linked in the sense that for any given type, there will be a specific angle associated.
</li>
</ul>

<p>
機器の`自然な方位$により，常に［
縦置き，横置き
］のうち一方の首-方位が決定される
— その結果、それに関係する副-方位も決定されることになる：
◎
One primary orientation will always be determined by the natural orientation of the device and this will then determine the secondary value of its related orientation.
</p>
<ul>
	<li>
例えば，ある機器が その自然な`縦置き方位$に保持されているとき、`現在の方位~種別$は `portrait-primary$oT になり， `portrait-secondary$oT 方位は そこから 180度d回転した位置になる。
◎
For example a device held in its natural portrait orientation would have a current orientation of portrait-primary and its portrait-secondary orientation would be its position when rotated 180°.
</li>
	<li>
もう一方の［
首-方位（ `*-primary^oT 値）／副-方位（ `*-secondary^oT 値）
］が［
90度d, 270度d
］どちらの角度に結付けられるかは、~UAに委ねられる
— 例えば、次に挙げるいくつかに基づき得る
⇒＃
機器に選好される角度 ／
利用者から選好された方位 ／
~app開始するときの現在の方位
◎
The user agent can associate the other *-primary and *-secondary values at will. For example, it can be based on the device preferred angles, the user's preferred orientations or the current orientation when the application starts.
</li>
</ul>

<p>
次に与える`~screen方位~値~表$に、アリな方位~種別
— `portrait-primary$oT,
`portrait-secondary$oT,
`landscape-primary$oT,
`landscape-secondary$oT —
を呈示する。
この表は、［
機器の`自然な方位$により決定される［
首-, 副-
］方位~値（ “1” ）
］, および［
もう一方の［
首-, 副-
］方位~値（ “2” ）を設定するために~UAに可用な可能性
］を示す：
◎
The screen orientation values table presents the possible orientation types: portrait-primary, portrait-secondary, landscape-primary and landscape-secondary. The table shows the primary and secondary values that are determined by the device's natural orientation and the possibilities available to the user agent for setting the other primary and secondary orientation values.
</p>


<table>
<caption>
`~screen方位~値~表@
— 各~cell内の角度は、~UAが`現在の方位~角度$（ `angle$m ）に設定する値を与える。
† 副-方位 2 にあてがう角度は、首-方位 2 に利用されない方を選ぶとする。
◎
The screen orientation values table
</caption>

<thead><tr>
<th>`自然な方位$
◎
Natural Orientation
<th>
首-方位 1
◎
Primary Orientation 1
<th>
副-方位 1
◎
Secondary Orientation 1
<th>
首-方位 2
◎
Primary Orientation 2
<th>
副-方位 2
◎
Secondary Orientation 2
</thead><tbody>

<tr><td>
`縦置き方位$
◎
Portrait
<td class="preline">`縦置き首-方位$,
角度 0
◎
portrait-primary angle 0
<td class="preline">`縦置き副-方位$,
角度 180
◎
portrait-secondary angle 180
<td class="preline">`横置き首-方位$,
角度［ 90 ／ 270 ］
◎
landscape-primary User agent to set at either angle 90 or angle 270
<td class="preline">`横置き副-方位$,
角度［ 270 ／ 90 ］†
◎
landscape-secondary Set at the angle not used for landscape-primary

<tr><td>
`横置き方位$
◎
Landscape
<td class="preline">`横置き首-方位$,
角度 0
◎
landscape-primary angle 0
<td class="preline">`横置き副-方位$,
角度 180
◎
landscape-secondary angle 180
<td class="preline">`縦置き首-方位$,
角度［ 90 ／ 270 ］
◎
portrait-primary User agent to set at either angle 90 or angle 270
<td class="preline">`縦置き副-方位$
角度［ 270 ／ 90 ］†
◎
portrait-secondary Set at the angle not used for portrait-primary
</tbody></table>

<p>
~UAは，所与のどの`文書$に対しても、`~screen方位~値~表$に挙げられた選択肢から［
首-, 副-
］値を設定したなら，［
`現在の方位~種別$, `現在の方位~角度$
］の関係を一貫して保つモノトスル。
◎
Once the user agent has set the primary and secondary values from the options in the screen orientation values table, the current orientation type and the current orientation angle relation MUST be kept consistent for any given document.
</p>

<div class="practice">
<p class="practicelab" id="bp-screenorientation-angle-and-screenorientation-type-relationship">
最善な実施：
`ScreenOrientation$I の `angle$m と `type$m の関係性
◎
Best Practice 1: ScreenOrientation.angle and ScreenOrientation.type relationship
</p>

<p class="practicedesc">
~screen方位の［
種別, 角度
］の間に，機器どうしで関係性があるものとは、決して見做さないこと。
どう見做そうが間違いになる
— ある機器における種別 `landscape^oT 用の角度は［
90 ／ 270
］であっても、別の機器においては`自然な方位$に依存して［
0 または 180
］になるかもしれない。
代わりに，［
角度, 種別
］の関係性は、実行時に検査することが推奨される。
◎
Never assume any cross-devices relationship between the screen orientation type and the screen orientation angle. Any assumption would be wrong given that a device might have 90 and 270 as the angles for landscape types but another device will have 0 and 180, depending on its natural orientation. Instead, it is recommended to check during runtime the relationship between angle and type.
</p>
</div>

		</section>
		<section id="locking-the-screen-orientation">
<h3 title="Locking the screen orientation">5.3. ~screen方位の~lock法</h3>

<p>
~UAは、~screen方位を~lockするために［
`文書$, それが`属する閲覧文脈$
］が満たすための
`事前~lock条件@
を要求してもヨイ。
例えば，~UAは、`方位~lock$を許容するためには［
`文書$【が`属する閲覧文脈$】の`~top-level閲覧文脈$は、~fullscreen化されている
］ことを要求するかもしれない（
<a href="#interaction-with-fullscreen-api">§ `Fullscreen API^cite との相互作用</a>
を見よ）。
◎
The user agent MAY require a document and its associated browsing context to meet one or more pre-lock conditions in order to lock the screen orientation. For example, a user agent might require a document's top-level browsing context to be fullscreen (see § 6.1 Interaction with Fullscreen API ) in order to allow an orientation lock.
</p>

<p>
~UAは、~platform規約にて［
~appは~screen方位を変更-可能である
］ものと期待されていない場合には，~screen方位を~lockしようとする どの試みも却下してヨイ。
例えば，ほとんどの~desktop~platformでは、~appは~screen方位を変更し得ない。
◎
The user agent MAY reject all attempts to lock the screen orientation if the platform conventions do not expect applications to be able to change the screen orientation. For example, on most desktop platforms, applications can not change the screen orientation.
</p>

<p>
~screen方位の~lock法を~supportする~UAは、
`OrientationLockType$I 列挙を成す どの状態にも，~screenを~lockすることを許容するモノトスル。
◎
If the user agent supports locking the screen orientation, it MUST allow the screen to be locked to all of the states of the OrientationLockType enum.
</p>

<p>
`orientationLock$sl 内部~slotは、`文書$の`方位~lock$を表現する。
◎
The [[orientationLock]] internal slot represents the document's orientation lock.
</p>

<p>
`方位~lock@
が効くのは、~screenが特定の方位に成功裡に~lockされたときである。
◎
An orientation lock is in place when the screen has successfully been locked to a specific orientation.
</p>

			<section id="locking-to-the-default-orientation">
<h4 title="Locking to the default orientation">5.3.1. 既定の方位への~lock法</h4>

<p>
`文書$の視点からは、`既定の~screen方位$へ~lockすることは，~lockはもはや適用されないことを意味するので，~unlockすることに等価である。
◎
From the perspective of a document, locking to the default screen orientation is equivalent to unlocking because it means that it no longer has a lock applied.
</p>

<p class="note">注記：
~unlockされたとしても、 `defaultOrientation$sl が `any$oL （`全~方位$）しか包含しないとは限らない。
`既定の~screen方位$は機器に特有である見込みが高く、
`defaultOrientation$sl は，例えば
`portrait-primary$oT や `landscape-primary$oT
を包含することもある。
あるいは利用者は、~accessibilityの理由から何らかの［
~OS／~browser
］~levelの選好を介して，既定の方位を特定の方位に制約することもできる。
~UAはまた、既定の方位を設定することもできる
— 例：`§~WebAppManifestとの相互作用$。
◎
This does not mean that the [[defaultOrientation]] will only contain the item any. The default screen orientation is likely device-specific and [[defaultOrientation]] could for example contain portrait-primary and/or landscape-primary. Alternatively, the user could restrict the default orientation to a specific orientation via some OS or browser level preference for accessibility reasons. The user agent can also set the default orientation e.g., § 6.2 Interaction with Web Application Manifest .
</p>

			</section>
		</section>
	</section>
	<section id="interactions-with-other-specifications">
<h2 title="Interactions with other specifications">6. 他の仕様との相互作用</h2>

<p>
この節は、この仕様が~platformの関係する他の仕様とどう相互作用するかを説明する。
◎
This section explains how this specification interacts with other related specifications of the platform.
</p>

		<section id="interaction-with-fullscreen-api">
<h3 title="Interaction with Fullscreen API">6.1. `Fullscreen API^cite との相互作用</h3>

<p>
~UAは，`事前~lock条件$として、［
`~top-level閲覧文脈$にて`作動中の文書$【！文書】 %文書 が~fullscreenである
］間は，~screen方位を~lockしないよう排他的に制約してもヨイ。
~UAは，この`事前~lock条件$を適用する場合は、
%文書 の`~fullscreen要素$は空【おそらく ~EQ ~NULL を意味する】になり~screen`方位~lock$を適用するときは，次を遂行するモノトスル
⇒
`方位を~lockする$( %文書, %文書 の`既定の~screen方位$ )
◎
As a pre-lock condition, a user agent MAY restrict locking the screen orientation exclusively to when the top-level browsing context's document's is full screen. When that pre-lock condition applies, whenever the document's fullscreen element is empty and a screen orientation lock is applied, the user agent MUST lock the orientation of the document to the document's default screen orientation.
</p>

<p class="issue">
この節は、
`FULLSCREEN$r が［
文書が もはや~fullscreenでなくなったとき
］用の~hookを備えたなら，改善できよう。
`62$issue を見よ。
◎
Issue
This section could be improved if the [FULLSCREEN] specification had a hook for when the document is no longer fullscreen. See issue 62.
</p>

		</section>
		<section id="interaction-with-web-application-manifest">
<h3 title="Interaction with Web Application Manifest">6.2. ~WebAppManifestとの相互作用</h3>

~INFORMATIVE

<p>
`~WebAppManifest$は、`文書$の`既定の~screen方位$を設定することを，~web~appに許容する。
◎
The Web App Manifest allows web applications to set the document's default screen orientation.
</p>
		</section>
		<section id="interaction-with-css-device-adaptation">
<h3 title="Interaction with CSS Device Adaptation">6.3. `CSS Device Adaptation^cite との相互作用</h3>

~INFORMATIVE

<p>
`CSS Device Adaptation Module Level 1$cite
仕様は
— この文書とは独立に —
~CSSを利用している~web~page用に，~screen方位を~lockする仕方を定義する。
◎
The CSS Device Adaptation Module Level 1 specification defines, independently of this document, a way to lock the screen orientation for a web page using CSS.
</p>

		</section>
		<section id="interaction-with-web-content-accessibility-guidelines">
<h3 title="Interaction with Web Content Accessibility Guidelines">6.4. `Web Content Accessibility Guidelines^cite との相互作用</h3>

~INFORMATIVE

<p>
`Web Content Accessibility Guidelines (WCAG) 2.1$cite
は、~screen方位に関係する
<a href="~TR/WCAG21/#orientation">成功~判定基準</a>
を含んでいる。
その意図は、次を確保することにある
⇒
`本質的$な［
内容, 機能性
］は、表示-方位（縦置きか横置きか）に関わらず，すべて可用になる
◎
The Web Content Accessibility Guidelines (WCAG) 2.1 includes a Success Criterion related to screen orientation.
◎
​The intent of this Success Criterion is to ensure that all essential content and functionality is available regardless of the display orientation (portrait or landscape).＼
</p>

<p>
一部の~web~siteや~appは、~screenを自動的に特定0の表示-方位に設定して，［
利用者が、それに合致するよう自身の機器を回転するよう応答する
］ことを期待するが、自身の機器を固定的な方位に装着している利用者もある（例：電動車椅子の~arm上に）。
したがって，~web~siteや~appは、どちらの方位に対しても，`本質的$な［
内容, 機能性
］を必ず可用にして~supportする必要がある
— ［
内容の順序／機能性の手法
］には相違があってもよいが、［
内容, 機能性
］は常に可用にしなければナラナイ。
特定0の方位が`本質的$である場合、当の方位~要件を利用者に助言する必要がある。​
◎
Some websites and applications automatically set the screen to a particular display orientation and expect that users will respond by rotating their device to match.
◎
However, some users may have their devices mounted in a fixed orientation (e.g. on the arm of a power wheelchair). Therefore, websites and applications need to support both orientations by making sure essential content and functionality is available in each orientation. While the order of content and method of functionality may have differences the content and functionality must always be available. When a particular orientation is essential, the user needs to be advised of the orientation requirements.​
</p>

		</section>
	</section>
	<section id="algorithms">
<h2 title="Algorithms">7. ~algo</h2>

		<section id="updating-the-orientation-information">
<h3 title="Updating the orientation information">7.1. 方位~情報の更新-法</h3>

<div class="algorithm">
<p>
所与の
( `文書$ %文書 )
の
`方位~情報を更新する@
ときは、
に対し，次の手続きに従う：
`orientation-reading^test
◎
The steps to update the orientation information of a document are as follows:
tests: 1
</p>
<ol>
	<li>
~IF［
~screen横幅 ~GT ~screen縦幅
］
⇒
%文書 の`現在の方位~種別$ ~SET ［
`landscape-primary$oT ／ `landscape-secondary$oT
］【のうち，`自然な方位$に応じて適切な方】
◎
If the screen width is greater than the screen height, set the document's current orientation type to landscape-primary or landscape-secondary.
</li>
	<li>
~ELSE
⇒
%文書 の`現在の方位~種別$ ~SET［
`portrait-primary$oT ／ `portrait-secondary$oT
］【のうち，`自然な方位$に応じて適切な方】
◎
Otherwise, if the screen width is less than or equal to the screen height, set the document's current orientation type to portrait-primary or portrait-secondary.
</li>
	<li>
%文書 の`現在の方位~角度$ ~SET ［
表示域が描かれている方位
］から［
機器の`自然な方位$（すなわち，~screenの物理的な上端）
］までの時計回りによる，度d~~単位の角度。
これは、物理的な回転の逆回転を表す。
例えば、機器が時計回りに 90 度d回されていたなら、`現在の方位~角度$は， 270 度dになる。
`~screen方位~値~表$が、各~方位, それ結付けられる角度に関する各種~選択肢を与える。
`orientation-reading^test
◎
Set the document's current orientation angle to the clockwise angle in degrees between the orientation of the viewport as it is drawn and the natural orientation of the device (i.e., the top of the physical screen). This is the opposite of the physical rotation. In other words, if a device is turned 90 degrees on the right, the current orientation angle would be 270 degrees. The screen orientation values table gives the options for each orientation and possible associated angles.
tests: 1
</li>
</ol>
</div>

		</section>
		<section id="apply-an-orientation-lock">
<h3 title="Apply an orientation lock">7.2. 方位~lockを適用する</h3>

<div class="algorithm">
<p>
`方位~lockを適用する@
ときは、所与の
( `文書$ %文書, %方位 )
に対し，次の手続きに従う：
◎
The steps to apply an orientation lock to a document using orientation are as follows:
</p>
<ol>
	<li>
~IF［
~UAは、~screen方位の~lock法を~supportしない
］
⇒
~RET `NotSupportedError^E 例外で`却下される~promise$
◎
If the user agent does not support locking the screen orientation, return a promise rejected with a "NotSupportedError" DOMException and abort these steps.
</li>
	<li>
~IF［
`閲覧文脈~sandbox化( 方位~lock )~flag$ ~IN %文書 にて`作動中の~sandbox法~flag集合$
］~OR［
~UAは、方位~変更を遂行するための`事前~lock条件$を満たしていない
］
⇒
~RET
`SecurityError^E 例外で`却下される~promise$
`lock-sandboxed-iframe^test
◎
If the document's has the sandboxed orientation lock browsing context flag set, or user agent doesn't meet the pre-lock conditions to perform an orientation change, return a promise rejected with a "SecurityError" DOMException and abort these steps.
tests: 1
</li>
	<li>
%処理待ち~promise ~LET `新たな~promise$
◎
↓</li>
	<li>
%文書 の `orientationPendingPromise$sl ~SET %処理待ち~promise
`lock-basic^test
◎
Set doc's [[orientationPendingPromise]] to a newly-created promise.
tests: 1
</li>
	<li>
~RET %処理待ち~promise
— ただし、以降も並列的に継続する
◎
Return doc's [[orientationPendingPromise]] and in parallel: 
</li>
	<li>
%閲覧文脈~list ~LET 
【 %文書 が`属する閲覧文脈$の】`~top-level閲覧文脈$にて`作動中の文書$【！文書】の`子孫~閲覧文脈~list$
◎
Let browsing contexts be the list of the descendant browsing contexts of the top-level browsing context's document.
</li>
	<li>
<p>
%閲覧文脈~list を成す
~EACH( %閲覧文脈 )
に対し：
◎
If one of the browsing contexts's document's [[orientationPendingPromise]] is not null:
</p>
		<ol>
			<li>
%作動中の文書 ~LET %閲覧文脈 にて`作動中の文書$
◎
Let doc be the document which has a not null [[orientationPendingPromise]].
</li>
			<li>
~IF［
%作動中の文書 ~EQ %文書
］
⇒
~CONTINUE
【この段は、この訳による補完】
</li>
			<li>
~IF［
%作動中の文書 の `orientationPendingPromise$sl ~EQ ~NULL
］
⇒
~CONTINUE
◎
↑</li>
			<li>
`AbortError^E 例外で %作動中の文書 の `orientationPendingPromise$sl を`却下する$
◎
Reject doc's [[orientationPendingPromise]] with "AbortError" DOMException.
</li>
			<li>
%作動中の文書 の `orientationPendingPromise$sl ~SET ~NULL
◎
Set doc's [[orientationPendingPromise]] to null .
</li>
		</ol>
	</li>
	<li>
%方位~list ~LET 新たな`~list$
`lock-basic^test
◎
Let orientations be an empty list.
tests: 1
</li>
	<li>
<p>
%方位 に応じて：
◎
Depending on orientation value, do the following:
</p>
		<dl class="switch">
			<dt>`portrait-primary$oL</dt>
			<dt>`portrait-secondary$oL</dt>
			<dt>`landscape-primary$oL</dt>
			<dt>`landscape-secondary$oL</dt>
			<dd>
%方位~list に %方位 を付加する
◎
portrait-primary or portrait-secondary or landscape-primary or landscape-secondary
◎
Append orientation to orientations.
</dd>

			<dt>`landscape$oL</dt>
			<dd>
%方位~list に［
~platform規約に依存して，［
`landscape-primary$oT, `landscape-secondary$oT
］のうち片方または両方
］を付加する
◎
Depending on platform convention, append landscape-primary, or landscape-secondary, or both to orientations.
</dd>
			<dt>`portrait$oL</dt>
			<dd>
%方位~list に［
~platform規約に依存して，［
`portrait-primary$oT, `portrait-secondary$oT
］のうち片方または両方
］を付加する
◎
Depending on platform convention, append portrait-primary, or portrait-secondary, or both to orientations.
</dd>

			<dt>`natural$oL</dt>
			<dd>
%方位~list に［
`portrait-primary$oT, `landscape-primary$oT
］のうち［
`現在の方位~角度$ ~EQ 0
］になる方を付加する
◎
Append portrait-primary or landscape-primary to orientations such as the associated current orientation angle is 0.
</dd>
			<dt>`any$oL</dt>
			<dd>
%方位~list に次を付加する
⇒＃
`portrait-primary$oT,
`portrait-secondary$oT,
`landscape-primary$oT,
`landscape-secondary$oT
◎
Append portrait-primary, portrait-secondary, landscape-primary and landscape-secondary to orientations.
</dd>
		</dl>
	</li>
	<li>
`方位を~lockする$( `文書$, %方位~list )
◎
Lock the orientation of the document to orientations.
</li>
	<li>
~IF［
次回の`~animation~frame~task$の一部として方位を~lockした結果，方位は変化しなかった
］
⇒＃
`undefined^jv で %処理待ち~promise を`解決する$；
%文書 の `orientationPendingPromise$sl ~SET ~NULL
◎
If locking the orientation did not result in a change of orientation, as part of the next animation frame task, resolve [[orientationPendingPromise]] with undefined and set [[orientationPendingPromise]] to null.
</li>
</ol>

<p class="note">
方位を~lockした結果，方位が変化した場合、この~promiseは，方位が変化するときに解決されることになる
— <a href="#Screen-orientation-change">§~screen方位の変化</a>にて述べられるように。
◎
Note
If locking the orientation results in an orientation change, the promise will be resolved when the orientation will change as described in the § 7.5 Screen orientation change section.
</p>
</div>

		</section>
		<section id="locking-the-orientation">
<h3 title="Locking the orientation">7.3. 方位の~lock法</h3>

<div class="algorithm">
<p>
`方位を~lockする@
ときは、所与の
( `文書$ %文書, %方位~list )
に対し，次を走らすモノトスル：
◎
The steps to lock the orientation to orientation are as follows.
</p>

<ol>
	<li>
%文書 の `orientationLock$sl ~SET %方位~list
`lock-basic^test
◎
Set the document's [[orientationLock]] to orientations.
tests: 1
</li>
	<li>
<p>
~IF［
次のいずれかが満たされる
］…：
</p>
		<ul>
			<li>
`作動中の方位~lock$ `is not^en† %文書 の `orientationLock$sl
</li>
			<li>
`作動中の方位~lock$ `is^en† %方位~list
</li>
		</ul>
<p>
…ならば
⇒
~RET
</p>
<p class="trans-note">【†
これらの集合の比較は何に基づく？
】</p>
◎
If the active orientation lock is not the document's [[orientationLock]], abort these steps.
◎
If the active orientation lock value is equal to orientations value, abort these steps.
</li>
	<li>
<p>
~IF［
%方位~list は 1 個の値 %方位 のみからなる
］：
◎
If orientations contains only one value, run the following sub-steps:
• Let orientation be the value contained in orientations.
</p>
		<ol>
			<li>
［
%文書 の`現在の方位~種別$ ~EQ %方位
］になるように，表示域がどう描かれるかを変更する
◎
Change how the viewport is drawn so that the document's current orientation type will be equal to orientation.
</li>
			<li>
変化が起きた後， `those^en 手続き【どの手続き？】が再び走るまで、
%文書 【が`属する閲覧文脈$】の`~top-level閲覧文脈$の~screen方位が変化するのを防止する。
◎
After the change has happened, prevent the document's top-level browsing context's screen orientation from changing until those steps are run again.
</li>
			<li>
~RET
◎
Abort these steps.
</li>
		</ol>
	</li>
	<li>
~IF［
%文書 の`現在の方位~種別$ ~NIN %方位~list
］
⇒
表示域の描かれ方を［
%文書 の`現在の方位~種別$が %方位~list 内のある値に等しくなる
］よう変更する
◎
If the document's current orientation type is not part of orientations, change how the viewport is drawn such as the document's current orientation type will be equal to one of orientations' values.
</li>
	<li>
~ELSE
⇒
~platform規約に依存して、表示域の描かれ方を %方位~list 内の［
%文書 の`現在の方位~種別$でない~screen方位~種別
］に合致するよう変更する
◎
Otherwise, depending on platform conventions, change how the viewport is drawn in order to make it match another screen orientation type. However, it has to be part of orientations.
</li>
	<li>
`those^en 手続き【どの手続き？】が再び走るまで，~screen方位を［
%方位~list 内のある値
］に変更することを利用者に許容する。
現在の~screen方位を定義する手法は、~platform規約に合致する必要がある。
◎
Allow the user to change the screen orientation to any value part of orientations and only those values until those steps are run again. The method to define the current screen orientation has to match the platform conventions.
</li>
</ol>
</div>

		</section>
		<section id="determining-the-active-orientation-lock">
<h3 title="Determining the active orientation lock">7.4. 作動中の方位~lockの決定-法</h3>

<div class="algorithm">
<p>
`作動中の方位~lock@
を決定するときは、次を走らすモノトスル：
◎
The steps to determine the active orientation lock are as follows:
</p>

<ol>
	<li>
%文書たち ~LET 次を満たす`文書$からなる集合
⇒
［
`可視$である
］~AND［
`属する閲覧文脈$は`~top-level閲覧文脈$である
］
◎
↓</li>
	<li>
~IF［
%文書たち を成す`文書$は 1 個だけ
］
⇒
~RET その文書の `orientationLock$sl
◎
If there is only one top-level browsing context with a document that is visible per [PAGE-VISIBILITY], the active orientation lock is the document's [[orientationLock]].
</li>
	<li>
~IF［
%文書たち を成す`文書$のうち~focusされているものは 1 個だけ
］
⇒
~RET その文書の `orientationLock$sl
◎
Otherwise, if there are more than one top-level browsing context with a document that is visible per [PAGE-VISIBILITY] but only one of those documents is focused, the active orientation lock is the focused document's [[orientationLock]].
</li>
	<li>
~RET ［
この状況用に~platform規約により言明される方位があるならば その方位（たち） ／
~ELSE_ 【 %文書たち を成す`文書$のうち？】最後に~focusされた`文書$の `orientationLock$sl
］
◎
Otherwise, the active orientation lock SHOULD be the latest focused document's [[orientationLock]], unless stated otherwise by the platform conventions.
</li>
</ol>
</div>

<div class="algorithm">
<p>
`作動中の方位~lock$が変化したときは、次を走らすモノトスル
⇒
`方位を~lockする$( `文書$, `文書$の `orientationLock$sl )
【どの文書？】
◎
Whenever the active orientation lock changes, the user agent MUST run the steps to lock the orientation of the document to the document's [[orientationLock]].
</p>
</div>

<div class="algorithm">
<p>
`~top-level閲覧文脈$が`~navigate$されたときは、次を走らすモノトスル
⇒
`方位を~lockする$( `文書$, `文書$の `defaultOrientation$sl )
【どの文書？】
◎
Whenever a top-level browsing context is navigated, the user agent MUST lock the orientation of the document to the document's [[defaultOrientation]].
</p>
</div>

		</section>
		<section id="Screen-orientation-change">
<h3 title="Screen orientation change">7.5. ~screen方位の変化</h3>

<div class="algorithm">
<p>
表示域の角度が変化したときは、~UAは，次回の`~animation~frame~task$ %~task の一部として次の手続きを走らすモノトスル：
`onchange-event^test
◎
Whenever the viewport's angle changes, the user agent MUST run the following steps as part of the next animation frame task:
tests: 1
</p>

<ol>
	<li>
%閲覧文脈~list ~LET `~top-level閲覧文脈$にて`作動中の文書$【！文書】の`子孫~閲覧文脈~list$
◎
Let browsing contexts be the list of the descendant browsing contexts of the top-level browsing context's document.
</li>
	<li>
<p>
%閲覧文脈~list を成す
~EACH( %閲覧文脈 )
に対し：
◎
For each context in browsing contexts, run the following sub-steps:
</p>
		<ol>
			<li>
%文書 ~LET %閲覧文脈 にて`作動中の文書$
◎
Let doc be the context's active document.
</li>
			<li>
~IF［
%文書 は`可視$でない
］
⇒
~CONTINUE
◎
If doc is not visible per [PAGE-VISIBILITY], abort these steps.
</li>
			<li>
%文書 の`方位~情報を更新する$
◎
Update the orientation information of doc.
</li>
			<li>
~IF［
この方位~変化は、（ `lock()$m の~callではなく，）利用者の~gestureにより誘発された（例：利用者が機器を回した）
］
⇒
%~task を、`利用者が生成した方位~変更により誘発された$ものと注釈する
【！when running the next step】
◎
If the orientation change was triggered by a user gesture such as the user turning the device, as opposed to a call to lock(), the task MUST be annotated with process user orientation change when running the next step.
</li>
			<li>
`~eventを発火する$( %文書 の `screen.orientation$m ~obj, `change^et )
◎
Fire an event named change at doc's Screen.orientation object.
</li>
			<li>
<p>
~IF［
%文書 の `orientationPendingPromise$sl ~NEQ ~NULL
］：
◎
If doc's [[orientationPendingPromise]] is not null:
</p>
				<ol>
					<li>
`undefined^jv で
%文書 の `orientationPendingPromise$sl を`解決する$
◎
Resolve doc's [[orientationPendingPromise]] with undefined.
</li>
					<li>
%文書 の `orientationPendingPromise$sl ~SET ~NULL
◎
Set doc's [[orientationPendingPromise]] to null .
</li>
				</ol>
			</li>
		</ol>
	</li>
</ol>
</div>

<div class="algorithm">
<p>
`文書$ %文書 が`可視$になったときは、
【！in other words after the now visible algorithm is run】
次回の`~animation~frame~task$ %~task の一部として，次の手続きを走らすモノトスル：
◎
Whenever a document becomes visible per [PAGE-VISIBILITY], in other words after the now visible algorithm is run, the user agent MUST run the following substeps as part of the next animation frame task:
</p>

<ol>
	<li>
%文書 の`方位~情報を更新する$
◎
↓</li>
	<li>
<p>
~IF［
前~段を遂行する前後で %文書 の［
`現在の方位~種別$, `現在の方位~角度$
］いずれかが変化した
］：
◎
Let type and angle be respectively the document's current orientation type and current orientation angle.
◎
Update the orientation information of the document.
◎
If type is different from the document's current orientation type or angle from the document's current orientation angle, run the following sub-steps:
</p>
		<ol>
			<li>
~IF［
この方位~変化は、（ `lock()$m の~callではなく，）利用者の~gestureにより誘発された（例：利用者が機器を回した）
］
⇒
%~task を、`利用者が生成した方位~変更により誘発された$ものと注釈する
【！when running the next step】
◎
If the orientation change was triggered by a user gesture such as the user turning the device, as opposed to a call to lock(), the task MUST be annotated with process user orientation change when running the next step.
</li>
			<li>
`~eventを発火する$( %文書 の `screen.orientation$m, `change^et )
◎
Fire an event named change at the document's Screen.orientation object.
</li>
			<li>
<p>
~IF［
%文書 の`orientationPendingPromise$sl ~NEQ ~NULL
］：
◎
If the document's [[orientationPendingPromise]] is not null:
</p>
				<ol>
					<li>
`undefined^jv で %文書 の `orientationPendingPromise$sl を`解決する$
◎
Resolve the document's [[orientationPendingPromise]] with undefined.
</li>
					<li>
%文書 の `orientationPendingPromise$sl ~SET ~NULL
◎
Set the document's [[orientationPendingPromise]] to null.
</li>
				</ol>
			</li>
		</ol>
	</li>
</ol>
</div>

<p>
上の~algoを走らせている`~task$は、
`利用者が生成した方位~変更により誘発された@
ものと注釈され得る。
【この定義は、 `requestFullscreen()$m から利用される。`FULLSCREEN$r 】
◎
An algorithm is triggered by a user generated orientation change if the task in which the algorithm is running is annotated with process user orientation change.
</p>

<p class="note">
開発者は、`可視$でない`文書$の `screen.orientation$m ~objは、方位~変化~event【 `orientationchange$et 】を受取らないことを自覚する必要がある。
これは、可視でない~web~appにおける，~layout等々に対する不必要な変化を防止するためである。
◎
Developers need to be aware that a Screen.orientation object from a document that is not visible, as per [PAGE-VISIBILITY], will not receive an orientation change event. This is to prevent unnecessary changes to layout, etc. in the non-visible web application.
</p>

<p class="issue">
この節は、
`PAGE-VISIBILITY$r 仕様が文書の`可視性~状態$が変化したとき用の~hookを備えていれば，改善することもできる。
`77$issue
【そのような~hookは、`可視~化時の外部~algo$として，すでに策定されている。】
◎
Issue
This section could be improved if the [PAGE-VISIBILITY] specification had a hook for when the document becomes visible and hidden. issue 77.
</p>


		</section>
	</section>
	<section id="privacy-and-security-considerations">
<h2 title="Privacy and Security Considerations">8. ~privacyと~securityの考慮点</h2>
~INFORMATIVE

		<section id="access-to-aspects-of-a-user-s-local-computing-environment">
<h3 title="Access to aspects of a user’s local computing environment">8.1. 利用者に局所的な環境を成す各種~側面への~access</h3>

<p>
この文書に指定した~APIは、機器の~screen方位の種別, 角度に~accessでき，指紋収集~行路になり得る。
◎
The screen orientation type and angle of the device can be accessed with the API specified in this document, and can be a potential fingerprinting vector.
</p>

<p>
~screen方位の種別は、すでに，~screenの横幅, 縦幅を利用して知れる。
実施においては、~APIのうち［
機器の角度, 首-／副-~screen方位
］に関するものが供する追加的な情報は、有力な攻撃から利用されるとは見込まれていない。
◎
The screen orientation type can already be known by using the screen width and height. In practice, the additional information provided with the API concerning the angle of the device and the primary or secondary screen orientation is unlikely to be used by any competent attack.
</p>

		</section>
	</section>
	<section id="dependencies">
<h2 title="Dependencies">依存関係</h2>

<p>
以下に挙げる用語は…
【以下、この節の内容は省略する。代わりに、用語には参照先への~linkを直にあてがっている。】
</p>

	</section>
<!-- 
	<section id="conformance">
<h2 title="Conformance">10. 適合性</h2>

As well as sections marked as non-normative...
	</section>
 -->

	<section id="acknowledgments">
<h2 title="Acknowledgments">謝辞</h2>

<p>
有用な~commentを寄せられた次の方々に謝意を：
</p>

<div lang="en-x-a0">
Thanks Christophe Dumez, Anne van Kesteren, Chundong Wang, Fuqiao Xue, and Chaals McCathie Nevile for their useful comments.
</div>

<p>
この~APIの初期~設計に寄与された
`Chris Jones^en, `Jonas Sicking^en
両氏に特別な謝意を。
◎
Special thanks to Chris Jones and Jonas Sicking for their contributions to the initial design of this API.
</p>
	</section>
</main></div>
