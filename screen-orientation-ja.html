<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<title>The Screen Orientation API （日本語訳）</title>

<link rel="stylesheet" href="common.css" type="text/css">
<link rel="stylesheet" href="common-w3c.css" type="text/css">

<style>
.test {
	display: block;
	min-width: 1em;
	text-align:right;
}
</style>

<script src="common0.js"></script>
<script src="common1.js" async></script>

<script>

Util.ready = function(){
	const source_data = {
		generate: expand,
	};
	Util.switchWordsInit(source_data);
}

function expand(){
	const class_map = this.class_map;
	const tag_map = this.tag_map;
	const link_map = this.link_map;

	return this.html.replace(
		/%[\w\-~一-鿆あ-ん]+|`(.*?)([$@^])(\w*)/g,
		create_html
	);

	function create_html(match, key, indicator, klass){
if(!indicator) {//%
	return `<var>${match.slice(1)}</var>`;
}

let href = '';
let href1 = '';
{
	const n = key.indexOf('＠');
	if(n > 0) {
		href1 = key.slice(n + 1);
		key = key.slice(0, n);
	}
}
let text = key;

switch(klass){
case 'r': // ref
	text = `[${key}]`;
	href = `#bib-${key.toLowerCase()}`;
	break;
case 'm':
	const n = text.indexOf('(');
	if(n > 0){
		key = text.slice(0, n);
		text = key + text.slice(n).replace(/\w+/g, '<var>$&</var>');
	}
	break;
case 'oT': // literal
case 'oL': // literal
case 'l': // literal
	text = `"<code class="literal">${key}</code>"`
	break;
case 'sl': // JS internal slot
	text = `[[${key}]]`;
	break;
case 'test':
	return (
`<span class="test">《~test： <a href="https://w3c-test.org/screen-orientation/${key}.html">${key}</a>》</span>`
	);
	break;
case 'en':
	return `<span lang="en">${key}</span>`
	break;
}

let tag = tag_map[klass];
if(tag) {
	let classname = class_map[klass];
	classname = classname ? ` class="${classname}"` : '';
	text = `<${tag}${classname}>${text}</${tag}>`;
}

if(indicator !== '^'){
	href = href1 || link_map[ klass ? `${klass}.${key}` : key ] || href;
	if(!href){
		console.log(match); // check error
		return match;
	}

	switch(indicator){
	case '$':
		text = `<a href="${href}">${text}</a>`;
		break;
	case '@':
		text = `<dfn id="${href.slice(1)}">${text}</dfn>`;
		break;
	}
}

return text;

	}
}
</script>

<script type="text/plain" id="_source_data">

●●options

spec_title:The Screen Orientation API
spec_date:2022-10-21
trans_update:2022-10-24
source_checked:221021
original_url:https://w3c.github.io/screen-orientation/
	abbr_url:SCREEN-ORIENTATION
spec_status:ED
ref_id_prefix:bib-
ref_id_lowercase:true
site_nav:uievents
conformance:w3c
copyright:2022,permissive
trans_1st_pub:2021-01-05

●●class_map
et:event-type
E:error
sl:js-slot
jv:js-value
v:value
test:test

●●tag_map
I:code
m:code
mb:code
E:code
et:code
sl:span
c:code
v:code
jv:code
i:i
cite:cite
test:span

●●original_id_map
	dom-orientationlocktype:dfn-orientationlocktype
	dom-orientationtype:dfn-orientationtype

●●mdn_urls

dom-screenorientation:API/ScreenOrientation
	dom-orientationlocktype:API/OrientationLockType
	dom-orientationtype:API/OrientationType

●●link_map

	●idl

Exposed:~WEBIDLjs#Exposed
SameObject:~WEBIDLjs#SameObject

E.AbortError:~WEBIDL#aborterror
E.InvalidStateError:~WEBIDL#invalidstateerror
E.NotSupportedError:~WEBIDL#notsupportederror
E.SecurityError:~WEBIDL#securityerror

Promise:~WEBIDL#idl-promise
I.Promise:~WEBIDL#idl-promise
undefined:~WEBIDL#idl-undefined
unsigned short:~WEBIDL#idl-unsigned-short

I.DOMException:~WEBIDL#idl-DOMException
I.Document:~DOM4#concept-document
I.Document:~DOM4#document
	？I.Document:~HTMLdom#document
I.EventHandler:~WAPI#eventhandler
I.EventTarget:~DOM4#eventtarget
	I.Screen:~TR/cssom-view-1/#screen
I.Screen:~CSSOMVIEW#screen
I.Window:~WINDOW#window

I.ScreenOrientation:#dom-screenorientation
I.OrientationLockType:#dom-orientationlocktype
I.OrientationType:#dom-orientationtype

	ScreenOrientation
m.lock:#dom-screenorientation-lock
m.unlock:#dom-screenorientation-unlock
m.type:#dom-screenorientation-type
m.angle:#dom-screenorientation-angle
m.onchange:#dom-screenorientation-onchange

m.orientation:#dom-screen-orientation

mb.orientation:~APPMANIFEST#dfn-orientation

	OrientationLockType
oL.any:#dom-orientationlocktype-any
oL.natural:#dom-orientationlocktype-natural
oL.landscape:#dom-orientationlocktype-landscape
oL.portrait:#dom-orientationlocktype-portrait
oL.portrait-primary:#dom-orientationlocktype-portrait-primary
oL.portrait-secondary:#dom-orientationlocktype-portrait-secondary
oL.landscape-primary:#dom-orientationlocktype-landscape-primary
oL.landscape-secondary:#dom-orientationlocktype-landscape-secondary

	OrientationType
oT.portrait-primary:#dom-orientationtype-portrait-primary
oT.portrait-secondary:#dom-orientationtype-portrait-secondary
oT.landscape-primary:#dom-orientationtype-landscape-primary
oT.landscape-secondary:#dom-orientationtype-landscape-secondary

sl.orientationPendingPromise:#dfn-orientationpendingpromise
sl.angle:#dfn-angle
sl.type:#dfn-type

et.change:#dfn-change

	●用語
縦置き方位:#dfn-portrait
横置き方位:#dfn-landscape
自然な方位:#dfn-natural
全~方位:#dfn-any
	縦置き:#dfn-portrait
	横置き:#dfn-landscape
	自然:#dfn-natural
首-方位:#dfn-primary
	横置き首-方位:#dfn-primary
	縦置き首-方位:#dfn-primary
副-方位:#dfn-secondary
	横置き副-方位:#dfn-secondary
	縦置き副-方位:#dfn-secondary

~screen方位:#dfn-screen-orientations
既定の~screen方位:#dfn-default-screen-orientation
現在の方位~種別:#dfn-current-orientation-type
現在の方位~角度:#dfn-current-orientation-angle
~screen方位~値~表:#dfn-screen-orientation-values-table
事前条件:#dfn-pre-lock-conditions
作動中の方位~lock:#dfn-active-orientation-lock
方位~obj:#dfn-associated-screenorientation
子孫~閲覧~文脈:#dfn-descendant-browsing-context
子孫~文書~群:#_descendant-documents
~lock:#dfn-lock-the-screen-orientation
~unlockされ:#dfn-unlocked
~screen方位を~lockする:#dfn-lock-the-screen-orientation
事前~lock条件:#dfn-pre-lock-conditions
現在の~lock~promiseを却下して~NULL化する:#dfn-reject-and-nullify-the-current-lock-promise
~screen方位を~lockしようと試行する:#dfn-try-to-lock-the-screen-orientation
~screen方位~変更~手続き:#dfn-screen-orientation-change-steps

	●用語（外部

解決する:~WEBIDLjs#resolve
却下する:~WEBIDLjs#reject
新たな~promise:~WEBIDLjs#a-new-promise
却下される~promise:~WEBIDLjs#a-promise-rejected-with
コレ:~WEBIDL#this
~THROW:~WEBIDL#dfn-throw

~UA:~INFRA#user-agent
~EACH:~INFRA#list-iterate
有順序~集合:~INFRA#ordered-set

~eventを発火する:~DOM4#concept-event-fire
文書:~DOM4#concept-document
	？文書:~HTMLdom#document
作動中の文書:~BROWSERS#active-document
作動中の~window:~BROWSERS#active-window
先祖~閲覧~文脈:~BROWSERS#ancestor-browsing-context
閲覧~文脈:~BROWSERS#browsing-context
属する閲覧~文脈:~BROWSERS#concept-document-bc
全部的に作動中:~BROWSERS#fully-active
~top-level閲覧~文脈:~BROWSERS#top-level-browsing-context
閲覧~文脈~容器:~BROWSERS#browsing-context-container

大域~taskを~queueする:~WAPI#queue-a-global-task
~DOM操作~task源:~WAPI#dom-manipulation-task-source
~event~handler~event型:~WAPI#event-handler-event-type
~event~handler:~WAPI#event-handlers
~event~handler~IDL属性:~WAPI#event-handler-idl-attributes
関連な大域~obj:~WAPI#concept-relevant-global

結付けられている文書:~WINDOW#concept-document-window
並列的:~HTMLINFRA#in-parallel
閲覧~文脈~sandbox化( 方位~lock )~flag:~ORIGIN#sandboxed-orientation-lock-browsing-context-flag
子孫~閲覧~文脈~list:~BROWSERS#list-of-the-descendant-browsing-contexts
作動中の~sandbox法~flag集合:~BROWSERS#active-sandboxing-flag-set

doc.可視性~状態:~HTMLinteraction#visibility-state
~page可視性~変化-時の手続き:~HTMLinteraction#page-visibility-change-steps

本質的:~TR/WCAG21/#dfn-essential

~navigate:~NAVI#navigate

~installした~web~app:~APPMANIFEST#dfn-installed-web-application

表示~mode:~MQ5#display-mode

	●用例（補完
0.requestFullscreen:~FULLSCREEN#dom-element-requestfullscreen
0.orientation:#dom-screen-orientation
0.lock:#dom-screenorientation-lock
0.unlock:#dom-screenorientation-unlock
0.screen:~CSSOMVIEW#dom-window-screen
0.fullscreenElement:~FULLSCREEN#dom-document-fullscreenelement
0.documentElement:~DOM4#dom-document-documentelement
0.addEventListener:~DOM4#dom-eventtarget-addeventlistener
0.getElementById:~DOM4#dom-nonelementparentnode-getelementbyid

	●●●●旧
	I.Screen:#dom-screen

	●他

●●words_table1
APPMANIFEST:appmanifest-ja.html

●●words_table

	●方位／UI／機器
副-:secondary::~
首-:primary::~
時計回り:clockwise::~
回転-:rotate::~
回転:rotation::~
	反対の:opposite
	ではない方:opposite
横置き:landscape:::~
	各種~機器どうし:cross-devices
縦置き:portrait:::~
unlock::::アンロック
	~lockすること:locking
pre-lock
fullscreen::::全スクリーン
	~click::::クリック
装着-:mount::~
描かれ:drawされ::~
度d:degree:deg:度°
	度d数:degrees
正立:upright:~
対面-:face:~
	手:hand
monitor::::モニター
携帯端末:mobile phone::~
縦横比:aspect ratio:~

	●IDL／型／構造
列挙:enum::~

	●処理一般
稼働時:runtime::~

	-:sub-steps
	%現在の~lock~promise:currentLockPromise
	-:descendantDocs
	-:docs
	%子孫~文書:doc
	%種別:type
	~top-level文書:topDocument
	%~screen方位:screenOrientation
	%子孫~文書:doc
	%方位:orientation

	取得子~手続き:When getting
	~method手続き:When 〜 is invoked, the user agent MUST
	これまでに:previously-
	~NULL化:nullify

	●保安
抵抗-:resist:~
私的:private:~:::プライベート
露呈-:reveal::露わに

	●仕様
達成基準:Success Criterion:~
	達成基準:criterion
末端-:end:~:::エンド
見做そう:assumeしよう:~
	どう見做そうが:Any assumption
順応-:adapt:~
助言-:advise:~
保つ:keepする:~

	~program的:programmatical
	自然になる:naturally
	共同で:in concert with
	よって:hence
	満たす:meet
	間違い:wrong
	でなくなった:stops being
	事前-条件:precondition
	-:is going to
	$r:Web Application Manifest
	$r:Web Content Accessibility Guidelines (WCAG) 2.1
	ようになり得る:potentially
	その逆:vice versa

	●未分類
車椅子:wheelchair:~
arm::::アーム
game::::ゲーム
排他的:exclusive::~
固定的:fixed:~
manifest:

	~~移行:go into
	~web~site:website
	表:table
	-:assign
	より大きい:greater
	その逆:vice versa


●●ref_normative

[appmanifest]
    ＜Web Application Manifest＞.
 Marcos Caceres; Kenneth Christiansen; Matt Giuca; Aaron Gustafson; 
Daniel Murphy; Anssi Kostiainen.  W3C. 17 February 2022. W3C Working 
Draft. URL: https://www.w3.org/TR/appmanifest/
[cssom-view]
    ＜CSSOM View Module＞. Simon Pieters.  W3C. 17 March 2016. W3C Working Draft. URL: https://www.w3.org/TR/cssom-view-1/
[dom]
    ＜DOM Standard＞. Anne van Kesteren.  WHATWG. Living Standard. URL: https://dom.spec.whatwg.org/
[fullscreen]
    ＜Fullscreen API Standard＞. Philip Jägenstedt.  WHATWG. Living Standard. URL: https://fullscreen.spec.whatwg.org/
[html]
    ＜HTML Standard＞. Anne van Kesteren; Domenic Denicola; Ian Hickson; Philip Jägenstedt; Simon Pieters.  WHATWG. Living Standard. URL: https://html.spec.whatwg.org/multipage/
[infra]
    ＜Infra Standard＞. Anne van Kesteren; Domenic Denicola.  WHATWG. Living Standard. URL: https://infra.spec.whatwg.org/
[mediaqueries]
    ＜Media Queries Level 4＞. Florian Rivoal; Tab Atkins Jr..  W3C. 25 December 2021. W3C Candidate Recommendation. URL: https://www.w3.org/TR/mediaqueries-4/
[RFC2119]
    ＜Key words for use in RFCs to Indicate Requirement Levels＞. S. Bradner.  IETF. March 1997. Best Current Practice. URL: https://www.rfc-editor.org/rfc/rfc2119
[RFC8174]
    ＜Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words＞. B. Leiba.  IETF. May 2017. Best Current Practice. URL: https://www.rfc-editor.org/rfc/rfc8174
[WCAG21]
    ＜Web Content Accessibility Guidelines (WCAG) 2.1＞. Andrew Kirkpatrick; Joshue O'Connor; Alastair Campbell; Michael Cooper.  W3C. 5 June 2018. W3C Recommendation. URL: https://www.w3.org/TR/WCAG21/
[WEBIDL]
    ＜Web IDL Standard＞. Edgar Chen; Timothy Gu.  WHATWG. Living Standard. URL: https://webidl.spec.whatwg.org/


●●trans_metadata
<p>
~THIS_PAGEは、~W3Cにより編集者草案として公開された
<a href="~SPEC_URL">The Screen Orientation API</a>
を日本語に翻訳したものです。
~PUB
</p>

●●spec_metadata

最新公表バージョン
	https://www.w3.org/TR/screen-orientation/
公表履歴
	https://www.w3.org/standards/history/screen-orientation
編集者草案
	https://w3c.github.io/screen-orientation/

テスト一式
	https://w3c-test.org/screen-orientation/
編集
	Marcos Cáceres (Apple Inc.)
フィードバック
	<a href="https://github.com/w3c/screen-orientation/">GitHub w3c/screen-orientation</a> (<a href="https://github.com/w3c/screen-orientation/pulls/">pull requests</a>, <a href="https://github.com/w3c/screen-orientation/issues/new/choose">new issue</a>, <a href="https://github.com/w3c/screen-orientation/issues/">open issues</a>)
ブラウザサポート
	https://caniuse.com/screen-orientation
commit 履歴
	https://github.com/w3c/screen-orientation/commits/
公表者
	<a href="https://www.w3.org/groups/wg/webapps">Web Applications WG</a>
</script>

</head>
<body>
<header>
	<hgroup>
<h1>The Screen Orientation API</h1>
	</hgroup>
</header>

<hr>

<div id="MAIN" hidden>

	<section id="abstract">
~ABSTRACT

<p>
`~screen方位~API^cite
（ `Screen Orientation API^en ）は、
機器の現在の~screen方位の種別と角度を公開する。
また、
機器の~screen方位が変化したときには~eventを配送する。
これは、［
多くのアリな~screen方位~用に，利用者~体験を~program的に順応すること
］を~CSSとの共同で~web~appに許容する。
この~APIは、［
~supportされる
］かつ［
ある種の事前-条件が満たされる
］ならば，~screen方位を~lockする能も供する。
これは、［
利用者が機器を物理的に回転しても，~screen方位~自体は変化してはならない
］ような，~computer~gameなどの~appにて有用になる。
◎
The Screen Orientation API exposes the type and angle of a device's current screen orientation, and dispatches events if the device's screen orientation changes. This allows web applications to programmatically adapt the user experience for many possible screen orientations in concert with CSS. If supported and if certain preconditions are met, the API also provides the ability to lock the screen orientation. This is useful in applications such as computer games where users physically rotate the device but the screen orientation itself mustn't change.
</p>

<p class="trans-note">【
~screen方位は、
表示~機器に相対的な，~screenが表示される方位を意味する
— “~screen” は、
物理-装置ではなく，その中に表示されるものである。
】</p>

	</section>
	<section id="sotd">
~STATUSofTHIS

<p>
これは、
編集者草案の公な複製です…
【以下、この節の内容は，~SOTD-W3Cに移譲。】
</p>

	</section>

<main id="MAIN0">

	<section id="_conventions">
<h2>【この訳に特有な表記規約】</h2>

<p>
この訳の，~algoや定義の記述に利用されている各種記号（ ~LET, ~EQ, ~IF, ~EACH (…), ~RET, 等々）の意味や定義の詳細は、
~SYMBOL_DEF_REFを~~参照されたし。
</p>

<p>
この仕様が対象にする`文書$は、
次を満たすものに限られる
⇒
それが`属する閲覧~文脈$ ~NEQ ~NULL
</p>

	</section>
	<section id="example-of-usage">
<h2 title="Example of usage">1. 用法を成す例</h2>

~INFORMATIVE

<div class="example" id="example-locking-to-a-specific-orientation-and-unlocking">
<p>
この例では、
“~lockする” ~buttonを~clickすると，
~fullscreenへ~~移行するよう要請してから，~screenを反対の方位
【横置きなら縦置き, 縦置きなら横置き】
に~lockする。
“~unlockする” ~buttonを~clickすると，
~screenを~unlockする。
◎
In this example clicking the "Lock" button requests to go into fullscreen and then locks the screen to the opposite orientation. clicking the "unlock" button unlocks the screen.
◎
Example 1: Locking to a specific orientation and unlocking
</p>

<pre class="lang-html">
&lt;script&gt;
function updateLockButton() {
  const %lockButton = document.`getElementById$0("button");
  const %newOrientation = getOppositeOrientation();
  %lockButton.textContent = ``^${%newOrientation} に~lockする``^;
}

function getOppositeOrientation() {
  return `screen$0
    .`orientation$0
    .startsWith("portrait") ? "landscape" : "portrait";
}

async function rotate(%lockButton) {
  if (!document.`fullscreenElement$0) {
    await document.`documentElement$0.`requestFullscreen$0();
  }
  const %newOrientation = getOppositeOrientation();
  await `screen$0.`orientation$0.`lock$0(%newOrientation);
  updateLockButton(%lockButton);
}

`screen$0.`orientation$0.`addEventListener$0("change", updateLockButton);

window.addEventListener("load", updateLockButton);
&lt;/script&gt;

&lt;button onclick="rotate(this)" id="button"&gt;
  ~lockする
&lt;/button&gt;
&lt;button onclick="`screen$0.`orientation$0.`unlock$0()"&gt;
  ~unlockする
&lt;/button&gt;
}
</pre>
</div>

	</section>
	<section id="concepts">
<h2 title="Concepts">2. 概念</h2>

<p>
~screen方位を ある `OrientationLockType$I %方位 に
`~lock@
するとは、
利用者は~screenを特定の`~screen方位$にしか回転できなくなることを意味する
【！- possibly at the exclusion of other orientations】。
~screenを どの方位へ回転できるかは、［
~UA／利用者~選好／
~OSの規約／
当の~screen自身
］により決定される。
例えば，`横置き方位$に~lockするとは、
~systemが許容するならば，
利用者は~screenを`縦置き方位$ではない方位
— `landscape-primary$oT, `landscape-secondary$oT —
に回転できることを意味する。
◎
To lock the screen orientation to an OrientationLockType orientation means that the screen can only be rotated by the user to a specific screen orientation - possibly at the exclusion of other orientations. The possible orientations to which the screen can be rotated is determined by the user agent, a user preference, the operating system's conventions, or the screen itself. For example, locking the orientation to landscape means that the screen can be rotated by the user to landscape-primary and maybe landscape-secondary if the system allows it, but won't change the orientation to portrait-secondary orientation.
</p>

<p>
所与の
`閲覧~文脈$ %A, %B に対し，
%A は %B の
`子孫~閲覧~文脈@
であるとは、
%B は %A の`先祖~閲覧~文脈$であることをいう。
◎
A browsing context A is called a descendant browsing context of a browsing context B if and only if B is an ancestor browsing context of A.
</p>

<p>
所与の`文書$ %文書 の
`子孫~文書~群@
は、
%文書 が`属する閲覧~文脈$の各`子孫~閲覧~文脈$にて`作動中の文書$からなる，~tree順序による`有順序~集合$である。
</p>

<p class="trans-note">【
用語 `子孫~文書~群$は、
他所を簡潔に述べるための，この訳による追加。
“~tree順序” は、
`閲覧~文脈$の`閲覧~文脈~容器$に基づく。
`子孫~閲覧~文脈~list$と同義にも見えるが、
その定義と同じく~shadow~treeも織り込まれるかどうかは，定かでない。
】</p>

		<section id="screen-orientation-types">
<h3 title="Screen orientation types">2.1. ~screen方位の種別</h3>

<p>
~screenは、
次に挙げるいずれかの
`~screen方位@
［
をとり得る／に`~lock$され得る
］：
◎
A screen can be in, or locked to, one of the following screen orientations:
</p>

<p class="trans-note">【
これらの方位は、
一般に（`自然な方位$を除き），複数の［
特定0の角度を指示する方位（ `OrientationType$I 列挙~値）
］からなる集合を表現する
（それらの総称である）。
】</p>

<dl>
	<dt>
`全~方位@
（ `any^en ）
◎
Any
</dt>
	<dd>
利用者は~screenを［
機器の~OS／末端-利用者
］により許容される どの方位にも回転できる。
◎
The screen can be rotated by the user to any orientation allowed by the device's operating system or by the end-user.
</dd>

	<dt>
`既定の~screen方位@
（ `default^en ）
◎
Default (unlocked)
</dt>
	<dd>
~screenが
`~unlockされ@
ている（ `unlocked^en ）こと
— すなわち、`作動中の方位~lock$ ~EQ ~NULL —
を表す，機器の既定の挙動。
この方位は、［
機器の~OS／~UA
］により決定されるか,
末端-利用者により制御されるか,
場合によっては`~installした~web~app$により設定される。
例えば，~screen方位が~unlockされている下では、
利用者が機器を回転するとき，方位~変化を `portrait-secondary$oL 以外
— `portrait-primary$oL, `landscape-primary$oL, `landscape-secondary$oL —
に制限する機器もあろう。
◎
The device's default behavior for when the screen is unlocked (i.e., the active orientation lock is null). This orientation is determined by the device's operating system, or the user agent, or controlled by the end-user, or possibly set by an installed web application. For example, when the screen orientation is unlocked and the user rotates the device, some devices will limit orientation changes to portrait-primary, landscape-primary, and landscape-secondary, but not to portrait-secondary.
</dd>

	<dt>
`横置き方位@
（ `landscape^en ）
◎
Landscape
</dt>
	<dd>
~screenの縦横比は、
横幅が縦幅より大きい。
◎
The screen's aspect ratio has a width greater than the height.
</dd>

	<dt>
`自然な方位@
（ `natural^en ）
◎
Natural
</dt>
	<dd>
機器の表示~用に最も自然とされる方位であり、［
~UA／利用者／~OS／~screen自身
］により決定される。
例えば、
~screenに対面している利用者が，自身の手で機器を正立に［
~viewして／保持して
］いるとき。
［
~computer~monitorにおいては `landscape-primary$oT ／
携帯端末においては `portrait-primary$oT
］が自然になることが共通的にある。
◎
The most natural orientation for the device's display as determined by the user agent, the user, the operating system, or the screen itself. For example, a device viewed, or held upright in the user's hand, with the screen facing the user. A computer monitor are commonly naturally landscape-primary, while a mobile phones are commonly naturally portrait-primary.
</dd>
	<dt>
`縦置き方位@
（ `portrait^en ）
◎
Portrait
</dt>
	<dd>
~screenの縦横比は、
縦幅が横幅より大きい。
◎
The screen's aspect ratio has a height greater than the width.
</dd>

	<dt>
`首-方位@
（ `primary^en ）
◎
Primary
</dt>
	<dd>
機器の~screenは［
`縦置き方位$／`横置き方位$
］用の`自然な方位$にある。
◎
The device's screen natural orientation for either portrait or landscape.
</dd>

	<dt>
`副-方位@
（ `secondary^en ）
◎
Secondary
</dt>
	<dd>
機器の~screenは［
`縦置き方位$／`横置き方位$
］用の`首-方位$ではない方にある。
◎
The opposite of the device's screen primary orientation for portrait or landscape.
</dd>
</dl>

		</section>
		<section id="the-current-screen-orientation-type-and-angle">
<h3 title="The current screen orientation type and angle">2.2. 現在の~screen方位の種別と角度</h3>

<p>
出力~機器の~screenには、
次に挙げる概念が結付けられる：
◎
The screen of the output device has the following associated concepts:
</p>

<dl>
	<dt>
`作動中の方位~lock@
◎
Active orientation lock
</dt>
	<dd>
次のいずれか
⇒＃
~NULL（~screenは，`~unlockされ$ている）／
`OrientationLockType$I として表現される`~screen方位$（~screenは，この方位に`~lock$されている）
◎
The screen orientation, represented as a OrientationLockType, to which the screen is locked, or null when unlocked.
</dd>

	<dt>
`現在の方位~角度@
◎
Current orientation angle
</dt>
	<dd>
~screenが その`自然な方位$から時計回りに回転された角度を
— `~screen方位~値~表$から導出されるとおり —
度d数として与える。
◎
The angle in degrees that the screen is rotated clockwise from its natural orientation as derived by the screen orientation values table.
</dd>

	<dt>
`現在の方位~種別@
◎
Current orientation type
</dt>
	<dd>
`OrientationType$I として表現される`~screen方位$。
◎
The screen orientation of the screen, represented as a OrientationType.
</dd>
</dl>

<p>
［
`現在の方位~種別$, `現在の方位~角度$
］用にアリな値は、
次の`~screen方位~値~表$に呈示される。
この表は、［
機器の`自然な方位$により決定される［
首-, 副-
］方位~値
］および［
もう一方の（代替な）［
首-, 副-
］方位~値
］を設定するために`~UA$に可用な可能性を指定する：
◎
The screen orientation values table presents the possible value for the current orientation type and current orientation angle. The table specifies the primary and secondary values that are determined by the device's natural orientation and the possibilities available to the user agent for setting the other primary and secondary orientation values.
</p>

<div>
<table>
<caption>
`~screen方位~値~表@
</caption>

<thead><tr>
<th>`自然な方位$
</th><th>`首-方位$
</th><th>`副-方位$
</th><th>`首-方位$（代替）
</th><th>`副-方位$（代替）
</th></tr></thead><tbody>

<tr><td>`縦置き方位$
</td><td class="preline">`portrait-primary$oT,
角度 0
</td><td class="preline">`portrait-secondary$oT,
角度 180
</td><td class="preline">`landscape-primary$oT,
角度［ 90 ／ 270 ］
</td><td class="preline">`landscape-secondary$oT,
角度［ 270 ／ 90 ］†
</td></tr><tr><td>`横置き方位$
</td><td class="preline">`landscape-primary$oT,
角度 0
</td><td class="preline">`landscape-secondary$oT,
角度 180
</td><td class="preline">`portrait-primary$oT,
角度［ 90 ／ 270 ］
</td><td class="preline">`portrait-secondary$oT
角度［ 270 ／ 90 ］†
</td></tr></tbody></table>

<p>†
副-方位（代替）にあてがう角度は、
首-方位（代替）に利用されない方を選ぶとする。
</p>

◎
The screen orientation values table
◎
In the natural orientation is...｜Primary Orientation｜Secondary Orientation｜Primary Orientation (alternative)｜Secondary Orientation (alternative)
Portrait｜portrait-primary
angle 0｜portrait-secondary
angle 180｜landscape-primary
angle 90 or angle 270｜landscape-secondary
Set at the angle not used for landscape-primary.
Landscape｜landscape-primary
angle 0｜landscape-secondary
angle 180｜portrait-primary
angle 90 or angle 270｜portrait-secondary
The angle not used for portrait-primary.
</div>

<div class="advisement">
<p id="bp-angle-and-type-relationship">
最善な実施
— `angle$m と `type$m の関係性
⇒
~screen方位の［
種別, 角度
］の間に，機器どうしで関係性があるものとは、
決して見做さないこと。
どう見做そうが間違いになる
— ある機器における種別 `landscape^oT 用の角度は［
90 ／ 270
］であっても、
別の機器においては`自然な方位$に依存して［
0 または 180
］になるかもしれない。
代わりに，［
角度, 種別
］の関係性は、
稼働時に検査することが推奨される。
◎
Best Practice 1: angle and type relationship
◎
Never assume any cross-devices relationship between the screen orientation type and the screen orientation angle. Any assumption would be wrong given that a device might have 90 and 270 as the angles for landscape types but another device will have 0 and 180, depending on its natural orientation. Instead, it is recommended to check during runtime the relationship between angle and type.
</p>
</div>

		</section>
	</section>
	<section id="extensions-to-the-screen-interface">
<h2 title="Extensions to the Screen interface">3. `Screen^I ~interfaceに対する拡張</h2>

<pre class="idl">
partial interface `Screen$I {
  [`SameObject$] readonly attribute `ScreenOrientation$I `orientation@m;
};
</pre>

<p>
各 `Window$I ~objには、
`方位~obj@
が結付けられる
— それは、
`Screen$I の `orientation$m 属性（すなわち、 `window.screen.orientation^c ）にあてがわれる `ScreenOrientation$I ~instanceである。
◎
The Window object has an associated ScreenOrientation, which is a Screen's orientation object (i.e., the ScreenOrientation instance at window.screen.orientation).
</p>

	</section>
	<section id="screenorientation-interface">
<h2 title="ScreenOrientation interface">4. `ScreenOrientation^I ~interface</h2>

<pre class="idl">
[`Exposed$=Window]
interface `ScreenOrientation@I : `EventTarget$I {
  `Promise$&lt;`undefined$&gt; `lock$m(`OrientationLockType$I %orientation);
  `undefined$ `unlock$m();
  readonly attribute `OrientationType$I `type$m;
  readonly attribute `unsigned short$ `angle$m;
  attribute `EventHandler$I `onchange$m;
};
</pre>

		<section id="internal-slots">
<h3 title="Internal Slots">4.1. 内部~slot</h3>

<p>
◎
Internal Slot 	Description
</p>
<dl>
	<dt>
`angle@sl
</dt>
	<dd>
~screenの最後に既知な`現在の方位~角度$を `unsigned short^c 型の度d数として表現する。
◎
Represents the screen's last known current orientation angle in degrees as an unsigned short.
</dd>

	<dt>
`type@sl
</dt>
	<dd>
~screen【！theScreen/ screen】の最後に既知な`現在の方位~種別$を `OrientationType$I 列挙~値として表現する。
◎
Represents the screen's last known current orientation type of theScreen/ screen as an OrientationType enum value.
</dd>
</dl>

		</section>
		<section id="lock-method">
<h3 title="lock() method">4.2. `lock()^m ~method</h3>

<p>
`~UA$は、
~screen方位を`~lock$するに先立って［
`文書$, それが`属する閲覧~文脈$
］が満たす必要がある 1 つ以上の
`事前~lock条件@
を要求してもヨイ。
例えば，［
`§ Web Application Manifest との相互作用＠#appmanifest-interaction$,
`§ Fullscreen API との相互作用＠#fullscreen-interaction$
］を見よ。
◎
↓When the lock() method is invoked with OrientationLockType orientation, the user agent MUST run the following steps.
◎
The user agent MAY require a document and its associated browsing context to meet one or more pre-lock conditions in order to lock the screen orientation. See 10. Interaction with Web Application Manifest 9. Interaction with Fullscreen API.
</p>

<div class="algo">
<p>
`lock(orientation)@m
~method手続きは：
◎
↑</p>
<ol>
	<li>
%文書 ~LET コレに`関連な大域~obj$に`結付けられている文書$
◎
Let document be this's relevant global object's associated Document.
</li>
	<li>
~IF［
%文書 は`全部的に作動中$でない
］
⇒
~RET `InvalidStateError$E 例外で`却下される~promise$
◎
If document is not fully active, return a promise rejected with an "InvalidStateError" DOMException.
</li>
	<li>
~IF［
`閲覧~文脈~sandbox化( 方位~lock )~flag$ ~IN %文書 にて`作動中の~sandbox法~flag集合$
］~OR［
%文書 は`事前~lock条件$を満たしていない
］~OR［
~lockすることは~security~riskになる
］
⇒
~RET `SecurityError$E 例外で`却下される~promise$
`lock-sandboxed-iframe^test
◎
If document has the sandboxed orientation lock browsing context flag set, or doesn't meet the pre-lock conditions, or locking would be a security risk, return a promise rejected with a "SecurityError" DOMException and abort these steps.
</li>
	<li>
~IF［
`~UA$は~screen方位を %orientation に~lockすることを~supportしない
］
⇒
~RET `NotSupportedError$E 例外で`却下される~promise$
◎
If the user agent does not support locking the screen orientation to orientation, return a promise rejected with a "NotSupportedError" DOMException and abort these steps.
</li>
	<li>
~IF［
%文書 .`orientationPendingPromise$sl ~NEQ ~NULL
］
⇒
`現在の~lock~promiseを却下して~NULL化する$( %文書, `AbortError$E 例外 )
`lock-basic^test
◎
If document's [[orientationPendingPromise]] is not null, reject and nullify the current lock promise of document with a "AbortError" DOMException.
</li>
	<li>
%文書 .`orientationPendingPromise$sl ~SET `新たな~promise$
`lock-basic^test
◎
Set document's [[orientationPendingPromise]] to a new promise.
</li>
	<li class="algo">
この段は`並列的$に遂行する
⇒
`~screen方位を~lockしようと試行する$( %文書, %orientation )
◎
Return document's [[orientationPendingPromise]].
◎
Try to lock the screen orientation of document to orientation.
</li>
	<li>
~RET %文書 .`orientationPendingPromise$sl
◎
↑</li>
</ol>
</div>

		</section>
		<section id="unlock-method">
<h3 title="unlock() method">4.3. `unlock()^m ~method</h3>

<div class="algo">
<p>
`unlock()@m
~method手続きは：
◎
When the unlock() method is invoked, the user agent MUST run the following steps:
</p>
<ol>
	<li>
%文書 ~LET コレに`関連な大域~obj$に`結付けられている文書$
◎
Let document be this's relevant global object's associated Document.
</li>
	<li>
~IF［
%文書 は`全部的に作動中$でない
］
⇒
~THROW `InvalidStateError$E
◎
If document is not fully active, throw an "InvalidStateError" DOMException.
</li>
	<li>
~IF［
%文書 .`orientationPendingPromise$sl ~NEQ ~NULL
］
⇒
`現在の~lock~promiseを却下して~NULL化する$( %文書, `AbortError$E 例外 )
◎
If document's [[orientationPendingPromise]] is not null, reject and nullify the current lock promise of document with a "AbortError" DOMException.
</li>
	<li class="algo">
この段は`並列的$に遂行する
⇒
`~screen方位を~lockしようと試行する$( %文書, `既定の~screen方位$ )
◎
Try to lock the screen orientation of document to the default screen orientation.
</li>
	<li>
~screenの`作動中の方位~lock$ ~SET ~NULL
◎
Set the screen's active orientation lock to null.
</li>
</ol>
</div>

<p class="note">注記：
`unlock()$m が~promiseを返さないのは、
それが`既定の~screen方位$に~lockすることに等価であり，
その方位は`~UA$に既知でないこともあるからである。
よって，~UAは、
新たに どの方位になるのか
— さらには、
方位が変化するかどうかさえも —
予測できない。
◎
Note: Why does unlock() not return a promise?
◎
unlock() does not return a promise because it is equivalent to locking to the default screen orientation which might or might not be known by the user agent. Hence, the user agent can not predict what the new orientation is going to be and even if it is going to change at all.
</p>

		</section>
		<section id="type-attribute">
<h3 title="type attribute">4.4. `type^m 属性</h3>

<div class="algo">
<p>
`type@m
取得子~手続きは
⇒
~RET コレ.`type$sl
◎
When getting, the type attribute returns this's [[type]].
</p>
</div>

		</section>
		<section id="angle-attribute">
<h3 title="angle attribute">4.5. `angle^m 属性</h3>

<div class="algo">
<p>
`angle@m
取得子~手続きは
⇒
~RET コレ.`angle$sl
◎
When getting, the angle attribute returns this's [[angle]].
</p>
</div>

<p class="note">注記：
`angle$m 属性は、
~screenが`自然な方位$からどれだけ回転されたかを表現する。
~screenがどう回転されたかに応じて角度がどう変化するかは、
`~screen方位~値~表$が指定する。
◎
Note: What does the value given for angle represent?
◎
The angle attribute represents how far the screen has rotated from it natural orientation. The screen orientation values table specifies how the angle changes depending on the how screen is rotated.
</p>

		</section>
		<section id="onchange-event-handler-attribute">
<h3 title="onchange event handler attribute">4.6. `onchange^m ~event~handler属性</h3>

<p>
`onchange@m
属性は、
`onchange$m `~event~handler$用の`~event~handler~IDL属性$である
— その`~event~handler~event型$は、
`change@et
である。
◎
The onchange attribute is an event handler IDL attribute for the onchange event handler, whose event handler event type is change.
</p>

		</section>
	</section>
	<section id="orientationlocktype-enum">
<h2 title="OrientationLockType enum">5. `OrientationLockType^I 列挙</h2>

<pre class="idl">
enum `OrientationLockType@I {
  `any$oL,
  `natural$oL,
  `landscape$oL,
  `portrait$oL,
  `portrait-primary$oL,
  `portrait-secondary$oL,
  `landscape-primary$oL,
  `landscape-secondary$oL
};
</pre>

<p>
`OrientationLockType$I 列挙は、
~screenを どの~screen方位に`~lock$できるようになり得るかを表現する：
◎
The OrientationLockType enum represents the screen orientations to which a screen can be potentially locked to.
</p>

<p class="note">注記：
~UAは、
アリな `OrientationLockType$I 値の下位集合
— 例： { `portrait-secondary$oT, `landscape-secondary$oT } —
しか~supportしないかもしれない。
◎
Note: Orientation support
◎
User agents might only support a subset of the possible OrientationLockType values. For example, a user agent might not support locking to the "portrait-secondary" or "landscape-secondary" orientations.
</p>

<div>
<table><thead><tr>
<th>値
</th><th>表現する方位
</th></tr></thead><tbody>

<tr><td>`any@oL
</td><td>`全~方位$

</td></tr><tr><td>`natural@oL
</td><td>`自然な方位$

</td></tr><tr><td>`landscape@oL
</td><td>`横置き方位$

</td></tr><tr><td>`portrait@oL
</td><td>`縦置き方位$

</td></tr><tr><td>`portrait-primary@oL
</td><td>`縦置き方位$かつ`首-方位$

</td></tr><tr><td>`portrait-secondary@oL
</td><td>`縦置き方位$かつ`副-方位$

</td></tr><tr><td>`landscape-primary@oL
</td><td>`横置き方位$かつ`首-方位$

</td></tr><tr><td>`landscape-secondary@oL
</td><td>`横置き方位$かつ`副-方位$
</td></tr></tbody></table>

◎
"any" represents any.
◎
"natural" represents natural.
◎
"landscape" represents landscape.
◎
"portrait" represents portrait.
◎
"portrait-primary" represents. portrait-primary,
◎
"portrait-secondary" represents portrait-secondary.
◎
"landscape-primary" represents landscape-primary.
◎
"landscape-secondary" represents landscape-secondary.
</div>

	</section>
	<section id="orientationtype-enum">
<h2 title="OrientationType enum">6. `OrientationType^I 列挙</h2>

<pre class="idl">
enum `OrientationType@I {
  `portrait-primary$oT,
  `portrait-secondary$oT,
  `landscape-primary$oT,
  `landscape-secondary$oT
};
</pre>

<p>
`OrientationType$I 列挙~値は、
~screenの`現在の方位~種別$を表現するために利用される：
◎
The OrientationType enum values are used to represent the screen's current orientation type.
</p>

<div>
<table><thead><tr>
<th>値
</th><th>表現する方位
</th></tr></thead><tbody>

<tr><td>`portrait-primary@oT
</td><td>`縦置き方位$かつ`首-方位$

</td></tr><tr><td>`portrait-secondary@oT
</td><td>`縦置き方位$かつ`副-方位$

</td></tr><tr><td>`landscape-primary@oT
</td><td>`横置き方位$かつ`首-方位$

</td></tr><tr><td>`landscape-secondary@oT
</td><td>`横置き方位$かつ`副-方位$
</td></tr></tbody></table>

◎
"portrait-primary" represents portrait-primary.
◎
"portrait-secondary" represents portrait-secondary.
◎
"landscape-primary" represents landscape-primary.
◎
"landscape-secondary" represents landscape-secondary.
</div>

	</section>
	<section id="extensions-to-the-document-interface">
<h2 title="Extensions to the Document interface">7. `Document$I ~interfaceに対する拡張</h2>

		<section id="internal-slots-0">
<h3 title="Internal Slots">7.1. 内部~slot</h3>

<p>
`Document$I ~interfaceは、
次に挙げる内部~slotで拡張される：
◎
The Document interface is extended with the following internal slots:
◎
Internal Slot 	Description
</p>

<dl>
	<dt>
`orientationPendingPromise@sl
</dt>
	<dd>
次のいずれか
⇒＃
~NULL ／
ある `Promise$I （~supportされるいずれかの方位に~screenを~lockする要請を表現する）
◎
Either null or a Promise. When assigned a Promise, that promise represents a request to lock the screen orientation.
</dd>
</dl>

		</section>
	</section>
	<section id="algorithms">
<h2 title="Algorithms">8. ~algo</h2>

		<section id="initializing-the-screenorientation-object">
<h3 title="Initializing the ScreenOrientation object">8.1. `ScreenOrientation^I ~objの初期化-法</h3>

<div class="algo">
<p>
`閲覧~文脈$ %文脈 が作成されたときは、
次を走らすモノトスル：
◎
When a browsing context context is created, the user agent MUST:
</p>
<ol>
	<li>
%~screen方位 ~LET %文脈 【にて`作動中の~window$】の`方位~obj$
◎
Let screenOrientation be context's associated ScreenOrientation.
</li>
	<li>
%~screen方位 .`type$sl ~SET ~screenの`現在の方位~種別$
◎
Initialize screenOrientation's [[type]] internal slot to the screen's current orientation type.
</li>
	<li>
%~screen方位 .`angle$sl ~SET ~screenの`現在の方位~角度$
◎
Initialize screenOrientation's [[angle]] internal slot to the screen's screen's current orientation angle.
</li>
</ol>
`orientation-reading^test
</div>

		</section>
		<section id="rejecting-a-document-s-current-lock-promise">
<h3 title="Rejecting a document's current lock promise">8.2. 文書の現在の~lock~promiseの却下-法</h3>

<div class="algo">
<p>
`現在の~lock~promiseを却下して~NULL化する@
ときは、
所与の
( `文書$ %文書, `DOMException$I %例外 )
に対し，次を走らすモノトスル：
◎
When steps require to reject and nullify the current lock promise of Document document with DOMException exception, the user agent MUST:
</p>
<ol>
	<li>
%~promise ~LET %文書 .`orientationPendingPromise$sl
◎
Let promise be document's [[orientationPendingPromise]].
</li>
	<li>
~Assert：
%~promise ~NEQ ~NULL
◎
Assert: promise is not null.
</li>
	<li class="algo">
次を走らす`大域~taskを~queueする$( `~DOM操作~task源$, %文書 に`関連な大域~obj$ )
⇒
%例外 で %~promise を`却下する$
◎
Queue a global task on the DOM manipulation task source with document's relevant global object to reject promise with exception.
</li>
	<li>
%文書 .`orientationPendingPromise$sl ~SET ~NULL
◎
Set document's [[orientationPendingPromise]] to null.
</li>
</ol>
`orientation-locking^test
</div>

		</section>
		<section id="try-to-lock-the-screen-orientation">
<h3 title="Try to lock the screen orientation">8.3. ~screen方位を~lockしようと試行する</h3>

<div class="algo">
<p>
`~screen方位を~lockしようと試行する@
ときは、
所与の
( `文書$ %文書, `OrientationLockType$I %方位【！lock】 )
に対し，次を遂行するモノトスル
— この手続きは、
常に`並列的$に遂行されることになる：
◎
When steps require to try to lock the screen orientation of Document document to OrientationLockType lock, the user agent MUST perform do the following steps in parallel:
</p>
<ol>
	<li>
%~top-level文書 ~LET %文書 の`~top-level閲覧~文脈$にて`作動中の文書$
◎
Let topDocument be document's top-level browsing context's active document.
</li>
	<li>
<p>
%~top-level文書 の`子孫~文書~群$を成す
~EACH( %子孫~文書 )
に対し：
◎
Let descendantDocs be an ordered set consisting of topDocument's descendant browsing contexts' active documents, if any, in tree order.
◎
For each doc in descendantDocs:
</p>
		<ol>
			<li>
~IF［
%子孫~文書 ~EQ %文書
］
⇒
~CONTINUE
◎
If doc is document, continue.
</li>
			<li>
~IF［
%子孫~文書 .`orientationPendingPromise$sl ~EQ ~NULL
］
⇒
~CONTINUE
◎
If doc [[orientationPendingPromise]] is null, continue.
</li>
			<li>
`現在の~lock~promiseを却下して~NULL化する$( %子孫~文書, `AbortError$E 例外 )
◎
Reject and nullify the current lock promise of doc with an "AbortError" DOMException.
</li>
		</ol>
	</li>
	<li>
<p>
~screen方位を %方位 に`~lock$するよう試みる
— 必要とされるなら、
~platform規約に依存して，
%文書 の表示域の描かれ方を %方位 に合致するよう変更する
◎
Attempt to lock the screen orientation to orientation, and, if necessary, and depending on platform conventions, change how the viewport is drawn to match orientation.＼
</p>

<p>
~IF［
この試みが［
これまでに確立された利用者~選好, ~platform制限, その他の理由
］いずれかに因り失敗した
］：
◎
If the attempt fails due to previously-established user preference, or platform limitation, or any other reason:
</p>
		<ol>
			<li>
~IF［
%文書 .`orientationPendingPromise$sl ~NEQ ~NULL
］
⇒
`現在の~lock~promiseを却下して~NULL化する$( %文書, `NotSupportedError$E 例外 )
◎
If the document's [[orientationPendingPromise]] is not null, reject and nullify the current lock promise of document with "NotSupportedError" DOMException.
</li>
			<li>
~RET
◎
Abort these steps.
</li>
		</ol>

<div class="note">
<p>注記：
これは、
次のいずれかの場合に起こり得る：
</p>
		<ul>
			<li>
利用者が［
~web~appが~screen方位を変更する
］ことを防止する選好を設定した
</li>
			<li>
~UAではなく下層の~platformが，~screen方位を所与の %方位 に~lockすることを許容していない
</li>
		</ul>
◎
Note

This can happen if the user has set a preference that prevents web applications from changing the screen orientation, or if the underlying platform, rather than the user agent, does not allow locking the screen orientation to the given orientation.
</div>
	</li>
	<li>
<p>
%~promise ~LET %文書 .`orientationPendingPromise$sl
◎
Let promise be document's [[orientationPendingPromise]].
</p>

<p class="note">注記：
~promiseは `change$et ~eventを発火した後に解決する必要があるので、［
~eventの~handler関数が `lock()$m を~callしても，中止されない
］よう参照を保つ。
◎
Note

As the promise needs to resolve after a "change" event is fired, we keep a reference to prevent it from being aborted by an event's handler function calling lock().
</p>
	</li>
	<li>
%文書 .`orientationPendingPromise$sl ~SET ~NULL
◎
Set document's [[orientationPendingPromise]] to null.
</li>
	<li class="algo">
<p>
次を走らす`大域~taskを~queueする$( `~DOM操作~task源$, %文書 に`関連な大域~obj$ )：
◎
Queue a global task on the DOM manipulation task source with document's relevant global object to:
</p>
		<ol>
			<li>
`~screen方位~変更~手続き$( %~top-level文書 )
◎
Run the screen orientation change steps with topDocument.
</li>
			<li>
~IF［
%~promise ~NEQ ~NULL
］
⇒
`undefined^jv で %~promise を`解決する$
◎
If promise is not null, resolve promise with undefined.
</li>
		</ol>
	</li>
	<li>
~IF［
%文書 は`全部的に作動中$でなくなった
］
⇒
`現在の~lock~promiseを却下して~NULL化する$( %文書, `AbortError$E 例外 )
◎
If document stops being fully active while in parallel, reject and nullify the current lock promise of document with an "AbortError" DOMException.
</li>
</ol>
</div>

		</section>
		<section id="screen-orientation-change">
<h3 title="Screen orientation change">8.4. ~screen方位の変化</h3>

<div class="algo">
<p>
［
~UAが`~top-level閲覧~文脈$用に~screen方位を変更するよう決定した／
利用者が`~top-level閲覧~文脈$を異なる~screenへ移動した
］ときは、
次を走らす
⇒
`~screen方位~変更~手続き$( `~top-level閲覧~文脈$にて`作動中の文書$ )
◎
When a user-agent determines that the screen's orientation has changed for a top-level browsing context, or the user moves the top-level browsing context to a different screen, then run the screen orientation change steps with the top-level browsing context's active document.
</p>
`onchange-event^test
</div>

<div class="algo">
<p>
`~screen方位~変更~手続き@
は、
所与の
( `文書$ %文書 )
に対し，次に従う：
◎
The screen orientation change steps for Document document are as follows:
</p>
<ol>
	<li>
~IF［
%文書 の`可視性~状態$doc ~EQ `hidden^l
］
⇒
~RET
◎
If document's visibility state is "hidden", abort these steps.
</li>
	<li>
%種別 ~LET ~screenの`現在の方位~種別$
◎
↓</li>
	<li>
%角度 ~LET ~screenの`現在の方位~角度$
◎
Let type and angle be the screen's current orientation type and current orientation angle, respectively.
</li>
	<li>
%~screen方位 ~LET %文書 に`関連な大域~obj$の`方位~obj$
◎
Let screenOrientation be document's relevant global object's associated ScreenOrientation.
</li>
	<li>
~IF［
%種別 ~EQ %~screen方位 .`type$sl
］~AND［
%角度 ~EQ %~screen方位 .`angle$sl
］
⇒
~RET
◎
If type is equal to screenOrientation's [[type]] and angle is equal to screenOrientation's [[angle]], abort these steps.
</li>
	<li>
%~screen方位 ~LET %文書【！doc】 に`関連な大域~obj$の`方位~obj$
◎
Let screenOrientation be doc's relevant global object's associated ScreenOrientation.
</li>
	<li>
%~screen方位 .`angle$sl ~SET %角度
◎
Set screenOrientation's [[angle]] to angle.
</li>
	<li>
%~screen方位 .`type$sl ~SET %種別
◎
Set screenOrientation's [[type]] to type.
</li>
	<li>
`~eventを発火する$( %~screen方位, `change$et )
◎
Fire an event named "change" at screenOrientation.
</li>
	<li>
<p>
%文書 の`子孫~文書~群$を成す
~EACH( %子孫~文書 )
に対し：
</p>
		<ol>
			<li class="algo">
次を走らす`大域~taskを~queueする$( `~DOM操作~task源$, %子孫~文書 に`関連な大域~obj$ )
⇒
`~screen方位~変更~手続き$( %子孫~文書 )
</li>
		</ol>
◎
Let docs be an ordered set consisting of document's descendant browsing contexts's active documents, if any, in tree order.
◎
For each doc in docs, queue a global task on the DOM manipulation task source with doc's relevant global object to run the screen orientation change steps with doc.
</li>
</ol>
</div>

		</section>
		<section id="handling-page-visibility-changes">
<h3 title="Handling page visibility changes">8.5. ~page可視性~変化の取扱い</h3>

<div class="algo">
<p>
`~page可視性~変化-時の手続き$は、
所与の
( %文書 )
に対し：
◎
The page visibility change steps given document are as follows:
</p>
<ol>
	<li>
~IF［
%文書 の`可視性~状態$doc ~EQ `hidden^l
］
⇒
~RET
◎
If document's visibility state is "hidden", terminate these steps.
</li>
	<li>
`~screen方位~変更~手続き$( %文書 に`関連な大域~obj$に`結付けられている文書$ )
◎
Run the screen orientation change steps with document's relevant global object's associated Document.
</li>
</ol>
</div>

<p class="note">注記：
開発者は、［
`文書$の`可視性~状態$doc ~EQ `hidden^l
］の間は［
方位~変化~event【 `change$et 】を受取らなくなる
］ことを自覚する必要がある
（`文書$が再び可視になったなら、方位~変化~eventを受取るようになる）。
◎
Note

Developers need to be aware that documents with a "hidden" visibility state will not receive an orientation change event. However, once the document becomes visible again, it will receive the change event.
</p>

		</section>
		<section id="handling-navigation">
<h3 title="Handling navigation">8.6. ~naviの取扱い</h3>

<div class="algo">
<p>
`~top-level閲覧~文脈$が`~navigate$されたときは、
次の手続きを走らすモノトスル：
◎
When a top-level browsing context is navigated, the user agent MUST run the following steps:
</p>
<ol>
	<li>
%文書 ~LET コレに`関連な大域~obj$に`結付けられている文書$
◎
Let document be this's relevant global object's associated Document.
</li>
	<li>
~IF［
%文書 .`orientationPendingPromise$sl ~NEQ ~NULL
］
⇒
`現在の~lock~promiseを却下して~NULL化する$( %文書, `AbortError$E 例外 )
◎
If document's [[orientationPendingPromise]] is not null, reject and nullify the current lock promise of document with a "AbortError" DOMException.
</li>
	<li>
`~screen方位を~lockしようと試行する$( %文書, `既定の~screen方位$ )
◎
Try to lock the screen orientation of document to the default screen orientation.
</li>
	<li>
~screenの`作動中の方位~lock$ ~SET ~NULL
◎
Set the screen's active orientation lock to null.
</li>
</ol>
</div>

		</section>
	</section>
	<section id="fullscreen-interaction">
<h2 title="Interaction with Fullscreen API">9. `Fullscreen API^cite との相互作用</h2>

<p>
~UAは、
`事前~lock条件$として，
`lock()$m の利用を単純な~fullscreen文書 `fullscreen$r に制約するベキである。
【 “単純な（ `simple^en ）” とは何を意味する？】
◎
A user agent SHOULD restrict the use of lock() to simple fullscreen documents as a pre-lock condition. [fullscreen]
</p>

	</section>
	<section id="appmanifest-interaction">
<h2 title="Interaction with Web Application Manifest">10. `Web Application Manifest^cite との相互作用</h2>

<p>
`appmanifest$r は、［
~manifestの `orientation$mb ~memberを介して，`文書$の`既定の~screen方位$を設定する
］ことを~web~appに許容する。
◎
The Web Application Manifest specification allows web applications to set the default screen orientation via the the orientation member.
</p>

<p>
~UAは、
`事前~lock条件$として，［
`~installした~web~app$は、
`表示~mode$ `fullscreen^v で呈示される
］ことを要求するベキである。
◎
A user agent SHOULD require installed web applications to be presented in display mode be "fullscreen" as a pre-lock condition.
</p>

	</section>
	<section id="accessibility-considerations">
<h2 title="Accessibility considerations">11. ~accessibilityの考慮点</h2>

<p>
利用者は，自身の機器を固定的な方位（例：車椅子の~arm上に）に装着することもあるので、
開発者は，［
`~screen方位を~lockする$とき，利用者が自身の機器を回転する
］よう期待する場合には［
`WCAG21$r の`~screen方位に関する達成基準＠~TR/WCAG21/#orientation$
］を自覚する必要がある。
この達成基準は、
`本質的$な［
内容, 機能性
］すべてが［
`~screen方位$に関わらず，可用になる
］ようにする。
~web~appは、
特定0の方位が`本質的$であるときは，利用者に方位~要件を助言しなければナラナイ。
◎
As users can have their devices mounted in a fixed orientation (e.g. on the arm of a wheelchair), developers that expect users to rotate their device when locking the screen orientation need to be aware of the Web Content Accessibility Guidelines (WCAG) 2.1's Orientation Success Criterion. The criterion makes it essential that content and functionality is available regardless of the screen orientation. When a particular orientation is essential, web applications must advise the user of the orientation requirements.
</p>

	</section>
	<section id="privacy-and-security-considerations">
<h2 title="Privacy and Security Considerations">12. ~privacyと~securityの考慮点</h2>

~INFORMATIVE

<p>
~screenの［
`現在の方位~種別$,
`現在の方位~角度$
］は、
いずれも指紋収集~行路になり得る。
~UAは、
指紋収集に抵抗するためとして（例：私的~閲覧），次のようにしてもヨイ：
◎
A screen's type and angle are a potential fingerprinting vector. To resist fingerprinting (e.g., in private browsing), user agents MAY:
</p>
<ol>
	<li>
【 `type$m 属性は、】
常に，`首-方位$
（~screenの縦横比に応じて［
`portrait-primary$oT ／ `landscape-primary$oT
いずれか）
を返す。
◎
Depending on the screen's aspect ratio, always return either "portrait-primary" or "landscape-primary".
</li>
	<li>
`angle$m 属性は、
常に 0 を返す。
◎
Always return 0 for the value of the angle attribute.
</li>
	<li>
~screen方位が変化した場合、
`現在の方位~種別$が［
`縦置き方位$から`横置き方位$へ, またはその逆へ変化した
］ときに限り， `change$et ~eventを発火する。
これは、［
機器が どう保持されているか露呈されない
］よう利用者の~privacyを保護することに加え，［
`副-方位$が指紋収集~行路として利用される
］ことを防止する。
◎
If the screen orientation changes, only fire the change event when the current orientation type changes from portrait to landscape, or vice versa. This both protects user's privacy by not revealing how a device is being held, and prevents using the secondary orientation as a fingerprinting vector.
</li>
</ol>

	</section>
</main></div>
