<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<title>Screen Orientation （日本語訳）</title>

<link rel="stylesheet" href="common.css" type="text/css">
<link rel="stylesheet" href="common-w3c.css" type="text/css">

<style>
.test {
	display: block;
	min-width: 1em;
	text-align:right;
}
</style>

<script src="common0.js"></script>
<script src="common1.js" async></script>

<script>

Util.ready = function(){
	const source_data = {
		generate: expand,
	};
	Util.switchWordsInit(source_data);
}

function expand(){
	const class_map = this.class_map;
	const tag_map = this.tag_map;
	const link_map = this.link_map;

	return this.html.replace(
		/%[\w\-~一-鿆あ-ん]+|`(.*?)([$@^])(\w*)/g,
		create_html
	);

	function create_html(match, key, indicator, klass){
if(!indicator) {//%
	return `<var>${match.slice(1)}</var>`;
}

let href = '';
let href1 = '';
{
	const n = key.indexOf('＠');
	if(n > 0) {
		href1 = key.slice(n + 1);
		key = key.slice(0, n);
	}
}
let text = key;

switch(klass){
case 'r': // ref
	text = `[${key}]`;
	href = `#bib-${key.toLowerCase()}`;
	break;
case 'm':
	const n = text.indexOf('(');
	if(n > 0){
		key = text.slice(0, n);
		text = key + text.slice(n).replace(/\w+/g, '<var>$&</var>');
	}
	break;
case 'oT': // literal
case 'oL': // literal
case 'l': // literal
	text = `"<code class="literal">${key}</code>"`
	break;
case 'sl': // JS internal slot
	text = `[[${key}]]`;
	break;
case 'test':
	return (
`<span class="test">《~test： <a href="https://wpt.live/screen-orientation/${key}.html">${key}</a>》</span>`
	);
	break;
case 'en':
	return `<span lang="en">${key}</span>`
	break;
}

let tag = tag_map[klass];
if(tag) {
	let classname = class_map[klass];
	classname = classname ? ` class="${classname}"` : '';
	text = `<${tag}${classname}>${text}</${tag}>`;
}

if(indicator !== '^'){
	href = href1 || link_map[ klass ? `${klass}.${key}` : key ] || href;
	if(!href){
		console.log(match); // check error
		return match;
	}

	switch(indicator){
	case '$':
		text = `<a href="${href}">${text}</a>`;
		break;
	case '@':
		text = `<dfn id="${href.slice(1)}">${text}</dfn>`;
		break;
	}
}

return text;

	}
}
</script>

<script type="text/plain" id="_source_data">

●●options

spec_title:Screen Orientation
spec_date:2023-05-04
trans_update:2023-05-06
source_checked:221025
original_url:https://w3c.github.io/screen-orientation/
	abbr_url:SCREEN-ORIENTATION
spec_status:ED
ref_id_prefix:bib-
ref_id_lowercase:true
site_nav:uievents
conformance:w3c
copyright:2023,permissive
trans_1st_pub:2021-01-05

●●class_map
et:event-type
E:error
sl:js-slot
v:value
test:test

●●tag_map
I:code
m:code
mb:code
E:code
et:code
sl:span
c:code
v:code
i:i
cite:cite
test:span

●●original_id_map
	dom-orientationlocktype:dfn-orientationlocktype
	dom-orientationtype:dfn-orientationtype

●●mdn_urls

dom-screenorientation:API/ScreenOrientation
	dom-orientationlocktype:API/OrientationLockType
	dom-orientationtype:API/OrientationType

●●link_map

	●idl

Exposed:~WEBIDLjs#Exposed
SameObject:~WEBIDLjs#SameObject

E.AbortError:~WEBIDL#aborterror
E.InvalidStateError:~WEBIDL#invalidstateerror
E.NotSupportedError:~WEBIDL#notsupportederror
E.SecurityError:~WEBIDL#securityerror

Promise:~WEBIDL#idl-promise
I.Promise:~WEBIDL#idl-promise
undefined:~WEBIDL#idl-undefined
unsigned short:~WEBIDL#idl-unsigned-short

I.DOMException:~WEBIDL#idl-DOMException
I.Document:~DOM4#concept-document
I.Document:~DOM4#document
	？I.Document:~HTMLdom#document
I.EventHandler:~WAPI#eventhandler
I.EventTarget:~DOM4#eventtarget
	I.Screen:~TR/cssom-view-1/#screen
I.Screen:~CSSOMVIEW#screen
I.Window:~WINDOW#window

I.ScreenOrientation:#dom-screenorientation
I.OrientationLockType:#dom-orientationlocktype
I.OrientationType:#dom-orientationtype

	ScreenOrientation
m.lock:#dom-screenorientation-lock
m.unlock:#dom-screenorientation-unlock
m.type:#dom-screenorientation-type
m.angle:#dom-screenorientation-angle
m.onchange:#dom-screenorientation-onchange

m.orientation:#dom-screen-orientation

mb.orientation:~APPMANIFEST#dfn-orientation

	OrientationLockType
oL.any:#dom-orientationlocktype-any
oL.natural:#dom-orientationlocktype-natural
oL.landscape:#dom-orientationlocktype-landscape
oL.portrait:#dom-orientationlocktype-portrait
oL.portrait-primary:#dom-orientationlocktype-portrait-primary
oL.portrait-secondary:#dom-orientationlocktype-portrait-secondary
oL.landscape-primary:#dom-orientationlocktype-landscape-primary
oL.landscape-secondary:#dom-orientationlocktype-landscape-secondary

	OrientationType
oT.portrait-primary:#dom-orientationtype-portrait-primary
oT.portrait-secondary:#dom-orientationtype-portrait-secondary
oT.landscape-primary:#dom-orientationtype-landscape-primary
oT.landscape-secondary:#dom-orientationtype-landscape-secondary

sl.orientationPendingPromise:#dfn-orientationpendingpromise
sl.angle:#dfn-angle
sl.initialType:#dfn-initialtype
sl.type:#dfn-type

文書~unload時の片付け手続き:~HTMLlifecycle#unloading-document-cleanup-steps
~screen方位を全部的に~unlockする手続き:#dfn-fully-unlock-the-screen-orientation-steps
~screen方位を~unlockする:#dfn-unlock-the-screen-orientation

et.change:#dfn-change

	●用語
縦置き方位:#dfn-portrait
横置き方位:#dfn-landscape
自然な方位:#dfn-natural
全~方位:#dfn-any
	縦置き:#dfn-portrait
	横置き:#dfn-landscape
	自然:#dfn-natural
首-方位:#dfn-primary
	横置き首-方位:#dfn-primary
	縦置き首-方位:#dfn-primary
副-方位:#dfn-secondary
	横置き副-方位:#dfn-secondary
	縦置き副-方位:#dfn-secondary

~screen方位:#dfn-screen-orientations
既定の~screen方位:#dfn-default-screen-orientation
現在の方位~種別:#dfn-current-orientation-type
現在の方位~角度:#dfn-current-orientation-angle
~screen方位~値~list:#dfn-screen-orientation-values-lists
事前条件:#dfn-pre-lock-conditions
作動中の方位~lock:#dfn-active-orientation-lock
方位~obj:#dfn-associated-screenorientation
~screen方位を~lockする:#dfn-lock-the-screen-orientation
~lock:#dfn-lock-the-screen-orientation
~screen方位を~unlockする:#dfn-unlock-the-screen-orientation
~unlockされ:#dfn-unlock-the-screen-orientation
事前~lock条件:#dfn-pre-lock-conditions
現在の~lock~promiseを却下して~NULL化する:#dfn-reject-and-nullify-the-current-lock-promise
方位~lockを適用する:#dfn-apply-orientation-lock
~screen方位~変更~手続き:#dfn-screen-orientation-change-steps
~screen方位を全部的に~unlockする手続き:#dfn-fully-unlock-the-screen-orientation-steps
共通な安全性~検査:#dfn-common-safety-checks

	●用語（外部

~promiseを解決する:~WEBIDLjs#resolve
~promiseを却下する:~WEBIDLjs#reject
新たな~promise:~WEBIDLjs#a-new-promise
却下される~promise:~WEBIDLjs#a-promise-rejected-with
コレ:~WEBIDL#this
~THROW:~WEBIDL#dfn-throw

~UA:~INFRA#user-agent
~EACH:~INFRA#list-iterate
有順序~集合:~INFRA#ordered-set

~eventを発火する:~DOM4#concept-event-fire
文書:~DOM4#concept-document
	？文書:~HTMLdom#document

~top-level辿可能:~HTMLds#top-level-traversable
~node~navigable:~HTMLds#node-navigable
子孫~navigable群:~HTMLds#descendant-navigables
nav.作動中の文書:~HTMLds#nav-document
nav.~top-level辿可能:~HTMLds#nav-top
全部的に作動中:~HTMLds#fully-active

閲覧~文脈:~HTMLds#browsing-context
属する閲覧~文脈:~HTMLds#concept-document-bc
~top-level閲覧~文脈:~HTMLds#top-level-browsing-context
bc.作動中の~window:~HTMLds#active-window
bc.作動中の文書:~HTMLds#active-document

~taskを~queueする:~WAPI#queue-a-task
大域~taskを~queueする:~WAPI#queue-a-global-task
~DOM操作~task源:~WAPI#dom-manipulation-task-source
利用者~対話~task源:~WAPI#user-interaction-task-source
~event~handler~event型:~WAPI#event-handler-event-type
~event~handler:~WAPI#event-handlers
~event~handler~IDL属性:~WAPI#event-handler-idl-attributes
関連な大域~obj:~WAPI#concept-relevant-global

結付けられている文書:~WINDOW#concept-document-window
並列的:~HTMLINFRA#in-parallel
作動中の~sandbox法~flag集合:~ORIGIN#active-sandboxing-flag-set
閲覧~文脈~sandbox化( 方位~lock )~flag:~ORIGIN#sandboxed-orientation-lock-browsing-context-flag

doc.可視性~状態:~HTMLinteraction#visibility-state
可視性~状態を更新する:~HTMLinteraction#update-the-visibility-state

本質的:~TR/WCAG21/#dfn-essential

~installした~web~app:~APPMANIFEST#dfn-installed-web-application

表示~mode:~MQ5#display-mode

単純~fullscreen文書:~FULLSCREEN#simple-fullscreen-document
~fullscreenから抜出る:~FULLSCREEN#exit-fullscreen


	●用例（補完
0.requestFullscreen:~FULLSCREEN#dom-element-requestfullscreen
0.orientation:#dom-screen-orientation
0.lock:#dom-screenorientation-lock
0.unlock:#dom-screenorientation-unlock
0.screen:~CSSOMVIEW#dom-window-screen
0.fullscreenElement:~FULLSCREEN#dom-document-fullscreenelement
0.documentElement:~DOM4#dom-document-documentelement
0.addEventListener:~DOM4#dom-eventtarget-addeventlistener
0.getElementById:~DOM4#dom-nonelementparentnode-getelementbyid
0.type:#dom-screenorientation-type


	●他

●●words_table1
APPMANIFEST:appmanifest-ja.html

●●words_table

	●方位／UI／機器
副-:secondary::~
首-:primary::~
反時計回り:counter-clockwise::~
回転-:rotate::~
回転:rotation::~
	反対の:opposite
	ではない方:opposite
横置き:landscape:::~
	各種~機器どうし:cross-devices
縦置き:portrait:::~
unlock::::アンロック
	~lockすること:locking
pre-lock
fullscreen::::全スクリーン
抜出る:exitする::抜け出る

	~click::::クリック
装着-:mount::~
描かれ:drawされ::~
度d:degree:deg:度°
	度d数:degrees
正立:upright:~
対面-:face:~
	手:hand
monitor::::モニター
携帯端末:mobile phone::~
縦横比:aspect ratio:~

	●処理一般
稼働時:runtime::~
片付け:cleanup::~
unload:
	-:sub-steps
	%現在の~lock~promise:currentLockPromise
	-:descendantDocs
	%子孫~文書:doc
	-:doc
	%種別:type
	%~top-level文書:topDocument
	%~screen方位:screenOrientation
	%方位:orientation

	取得子~手続き:When getting
	~method手続き:When 〜 is invoked, the user agent MUST
	これまでに:previously-
	~NULL化:nullify

	●保安
抵抗-:resist:~
私的:private:~:::プライベート
露呈-:reveal::露わに
安全性:safety:~

	●仕様
達成基準:Success Criterion:~
	達成基準:criterion
末端-:end:~:::エンド
見做そう:assumeしよう:~
	どう見做そうが:Any assumption
順応-:adapt:~
助言-:advise:~
保つ:keepする:~

	~program的:programmatical
	自然になる:naturally
	~~並行して:alongside
	よって:hence
	満たす:meet
	間違い:wrong
	でなくなった:stops being
	事前-条件:precondition
	-:is going to
	$r:Web Application Manifest
	$r:Web Content Accessibility Guidelines (WCAG) 2.1
	ようになり得る:potentially
	その逆:vice versa
	助けに:help
	制約されない:unrestricted

	●未分類
列挙:enum::~
辿可能:traversable::辿り可能
車椅子:wheelchair:~
arm::::アーム
game::::ゲーム
排他的:exclusive::~
固定的:fixed:~
manifest::::マニフェスト

	存続する限り:for the life of
	~~移行:go into
	~web~site:website
	表:table
	-:assign
	より大きい:greater
	その逆:vice versa





●●ref_normative

[appmanifest]
    ＜Web Application Manifest＞.
 Marcos Caceres; Kenneth Christiansen; Matt Giuca; Aaron Gustafson; Daniel Murphy; Anssi Kostiainen.  W3C. 25 January 2023. W3C Working Draft. URL: https://www.w3.org/TR/appmanifest/
[cssom-view]
    ＜CSSOM View Module＞. Simon Pieters.  W3C. 17 March 2016. W3C Working Draft. URL: https://www.w3.org/TR/cssom-view-1/
[dom]
    ＜DOM Standard＞. Anne van Kesteren.  WHATWG. Living Standard. URL: https://dom.spec.whatwg.org/
[fullscreen]
    ＜Fullscreen API Standard＞. Philip Jägenstedt.  WHATWG. Living Standard. URL: https://fullscreen.spec.whatwg.org/
[HTML]
    ＜HTML Standard＞. Anne van Kesteren; Domenic Denicola; Ian Hickson; Philip Jägenstedt; Simon Pieters.  WHATWG. Living Standard. URL: https://html.spec.whatwg.org/multipage/
[infra]
    ＜Infra Standard＞. Anne van Kesteren; Domenic Denicola.  WHATWG. Living Standard. URL: https://infra.spec.whatwg.org/
[mediaqueries-5]
    ＜Media Queries Level 5＞. Dean Jackson; Florian Rivoal; Tab Atkins Jr.; Daniel Libby.  W3C. 18 December 2021. W3C Working Draft. URL: https://www.w3.org/TR/mediaqueries-5/
[RFC2119]
    ＜Key words for use in RFCs to Indicate Requirement Levels＞. S. Bradner.  IETF. March 1997. Best Current Practice. URL: https://www.rfc-editor.org/rfc/rfc2119
[RFC8174]
    ＜Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words＞. B. Leiba.  IETF. May 2017. Best Current Practice. URL: https://www.rfc-editor.org/rfc/rfc8174
[WCAG21]
    ＜Web Content Accessibility Guidelines (WCAG) 2.1＞. Andrew Kirkpatrick; Joshue O'Connor; Alastair Campbell; Michael Cooper.  W3C. 5 June 2018. W3C Recommendation. URL: https://www.w3.org/TR/WCAG21/
[WEBIDL]
    ＜Web IDL Standard＞. Edgar Chen; Timothy Gu.  WHATWG. Living Standard. URL: https://webidl.spec.whatwg.org/


●●trans_metadata
<p>
~THIS_PAGEは、~W3Cにより編集者草案として公開された
<a href="~SPEC_URL">Screen Orientation</a>
を日本語に翻訳したものです。
~PUB
</p>

●●spec_metadata

最新公表バージョン
	https://www.w3.org/TR/screen-orientation/
公表履歴
	https://www.w3.org/standards/history/screen-orientation
編集者草案
	https://w3c.github.io/screen-orientation/

テスト一式
	https://wpt.live/screen-orientation/
編集
	Marcos Cáceres (Apple Inc.)
前任編集者
	Mounir Lamouri (Google Inc.)
	Johanna Herman (Invited Expert)

フィードバック
	<a href="https://github.com/w3c/screen-orientation/">GitHub w3c/screen-orientation</a> (<a href="https://github.com/w3c/screen-orientation/pulls/">pull requests</a>, <a href="https://github.com/w3c/screen-orientation/issues/new/choose">new issue</a>, <a href="https://github.com/w3c/screen-orientation/issues/">open issues</a>)
ブラウザサポート
	https://caniuse.com/screen-orientation
commit 履歴
	https://github.com/w3c/screen-orientation/commits/
公表者
	<a href="https://www.w3.org/groups/wg/webapps">Web Applications WG</a>
</script>

</head>
<body>
<header>
	<hgroup>
<h1>スクリーン方位 — Screen Orientation</h1>
	</hgroup>
</header>

<hr>

<div id="MAIN" hidden>
	<section id="abstract">
◎要約

<p>
`~screen方位^cite（ `Screen Orientation^en ）仕様は、
機器の~screen方位~用の種別と角度を標準~化することに加え，
~screen方位を［
~lockする／~unlockする
］ための手段を供する。
この仕様により定義される~APIは、
機器の現在の~screen方位の種別と角度を公開することに加え，
それが変化したときに~eventを配送する。
これは、
~web~appが，
複数の~screen方位~用に［
利用者~体験を~program的に順応する
］ことを可能化する
— ~CSSと~~並行して働くように。
この~APIは、［
ある種の事前-条件の下で，~screen方位を~lockする
］ことも許容する。
これは、
~computer~gameなど，［
利用者が機器を物理的に回転しても，~screen方位~自体は変化するべきでない~app
］用に特に有用になる。
◎
The Screen Orientation specification standardizes the types and angles for a device's screen orientation, and provides a means for locking and unlocking it. The API, defined by this specification, exposes the current type and angle of the device's screen orientation, and dispatches events when it changes. This enables web applications to programmatically adapt the user experience for multiple screen orientations, working alongside CSS. The API also allows for the screen orientation to be locked under certain preconditions. This is particularly useful for applications such as computer games, where users physically rotate the device, but the screen orientation itself should not change.
</p>

<p class="trans-note">【
~screen方位は、
表示~機器に相対的な，~screenが表示される方位を意味する
— “~screen” は、
物理-装置ではなく，その中に表示されるものである。
】</p>

	</section>
	<section id="sotd">
◎位置付け

<p>
これは、
編集者草案の公な複製です…
【以下、この節の内容は，~SOTD-W3Cに移譲。】
</p>

	</section>

<main id="MAIN0">

	<section id="_conventions">
<h2>【この訳に特有な表記規約】</h2>

◎表記記号

<p>
原文に現れる次に挙げる用語は、
`HTML$r による用法と整合でないので，対応する用語に置換している：
</p>
<ul>
	<li>
`~top-level閲覧~文脈$ → `~top-level辿可能$
</li>
	<li>
`文書$の`~top-level閲覧~文脈$ → `文書$の`~node~navigable$の`~top-level辿可能$nav
</li>
	<li>
`文書$が`属する閲覧~文脈$ → `文書$の`~node~navigable$
</li>
</ul>

	</section>
	<section id="example-of-usage">
<h2 title="Example of usage">1. 用法を成す例</h2>

◎非規範的

<div class="example" id="example-locking-to-a-specific-orientation-and-unlocking">
<p>
この例では、
“~lockする” ~buttonを~clickすると，
~fullscreenへ~~移行するよう要請してから，~screenを反対の方位
【横置きなら縦置き, 縦置きなら横置き】
に~lockする。
“~unlockする” ~buttonを~clickすると，
~screenを~unlockする。
◎
In this example clicking the "Lock" button requests to go into fullscreen and then locks the screen to the opposite orientation. clicking the "unlock" button unlocks the screen.
◎
Example 1: Locking to a specific orientation and unlocking
</p>

<pre class="lang-html">
&lt;script&gt;
function updateLockButton() {
  const %lockButton = document.`getElementById$0("button");
  const %newOrientation = getOppositeOrientation();
  %lockButton.textContent = ``^${%newOrientation} に~lockする``^;
}

function getOppositeOrientation() {
  return `screen$0
    .`orientation$0
    .`type$0
    .startsWith("portrait") ? "landscape" : "portrait";
}

async function rotate(%lockButton) {
  if (!document.`fullscreenElement$0) {
    await document.`documentElement$0.`requestFullscreen$0();
  }
  const %newOrientation = getOppositeOrientation();
  await `screen$0.`orientation$0.`lock$0(%newOrientation);
  updateLockButton(%lockButton);
}

`screen$0.`orientation$0.`addEventListener$0("change", updateLockButton);

window.addEventListener("load", updateLockButton);
&lt;/script&gt;

&lt;button onclick="rotate(this)" id="button"&gt;
  ~lockする
&lt;/button&gt;
&lt;button onclick="`screen$0.`orientation$0.`unlock$0()"&gt;
  ~unlockする
&lt;/button&gt;
}
</pre>
</div>

	</section>
	<section id="concepts">
<h2 title="Concepts">2. 概念</h2>

<p>
所与の `OrientationLockType$I %方位 に
`~screen方位を~lockする@
（ `lock^en する）とは、
利用者は，~screenを特定の`~screen方位$にしか回転できなくなることを意味する
【！- possibly at the exclusion of other orientations】。
~screenを どの方位へ回転できるかは、
【所与の %方位 に加えて，】［
~UA／
利用者-選好／
~OSの規約／
当の~screen自身
］により決定される。
例えば，`横置き方位$に~lockするとは、
~systemが許容するならば，
利用者は~screenを`縦置き方位$ではない方位
— `landscape-primary$oT, `landscape-secondary$oT —
に回転できることを意味する。
◎
To lock the screen orientation to an OrientationLockType orientation means that the screen can only be rotated by the user to a specific screen orientation - possibly at the exclusion of other orientations. The possible orientations to which the screen can be rotated is determined by the user agent, a user preference, the operating system's conventions, or the screen itself. For example, locking the orientation to landscape means that the screen can be rotated by the user to landscape-primary and maybe landscape-secondary if the system allows it, but won't change the orientation to portrait-secondary orientation.
</p>

<p>
`~screen方位を~unlockする@
（ `unlock^en する）
とは、
末端-利用者が制約されない
— すなわち、
~systemが許容するどの`~screen方位$にも~screenを回転できる —
ようにすることをいう。
◎
To unlock the screen orientation the end user is unrestricted to rotate the screen to any screen orientation that the system allows.
</p>

		<section id="screen-orientation-types">
<h3 title="Screen orientation types">2.1. ~screen方位の種別</h3>

<p>
~screenは、
次に挙げるいずれかの
`~screen方位@
［
をとり得る／に`~lock$され得る
］：
◎
A screen can be in, or locked to, one of the following screen orientations:
</p>

<p class="trans-note">【
これらの方位は、
一般に（`自然な方位$を除き），複数の［
特定0の角度を指示する方位（ `OrientationType$I 列挙~値）
］からなる集合を表現する
（それらの総称である）。
】</p>

<dl>
	<dt>
`全~方位@
（ `any^en ）
◎
Any
</dt>
	<dd>
利用者は~screenを［
機器の~OS／末端-利用者
］により許容される どの方位にも回転できる。
◎
The screen can be rotated by the user to any orientation allowed by the device's operating system or by the end-user.
</dd>

	<dt>
`既定の~screen方位@
（ `default^en ）
◎
Default (unlocked)
</dt>
	<dd>
~screenが`~unlockされ$ていること
— すなわち、`作動中の方位~lock$ ~EQ ~NULL —
を表す，機器の既定の挙動。
この方位は、［
機器の~OS／~UA
］により決定されるか,
末端-利用者により制御されるか,
場合によっては`~installした~web~app$により設定される。
例えば，~screen方位が~unlockされている下では、
利用者が機器を回転するとき，方位~変化を `portrait-secondary$oL 以外
— `portrait-primary$oL, `landscape-primary$oL, `landscape-secondary$oL —
に制限する機器もあろう。
◎
The device's default behavior for when the screen is unlocked (i.e., the active orientation lock is null). This orientation is determined by the device's operating system, or the user agent, or controlled by the end-user, or possibly set by an installed web application. For example, when the screen orientation is unlocked and the user rotates the device, some devices will limit orientation changes to portrait-primary, landscape-primary, and landscape-secondary, but not to portrait-secondary.
</dd>

	<dt>
`横置き方位@
（ `landscape^en ）
◎
Landscape
</dt>
	<dd>
~screenの縦横比は、
横幅が縦幅より大きい。
◎
The screen's aspect ratio has a width greater than the height.
</dd>

	<dt>
`自然な方位@
（ `natural^en ）
◎
Natural
</dt>
	<dd>
機器の表示~用に最も自然とされる方位であり、［
~UA／利用者／~OS／~screen自身
］により決定される。
例えば、
~screenに対面している利用者が，自身の手で機器を正立に［
~viewして／保持して
］いるとき。
［
~computer~monitorにおいては `landscape-primary$oT ／
携帯端末においては `portrait-primary$oT
］が自然になることが共通的にある。
◎
The most natural orientation for the device's display as determined by the user agent, the user, the operating system, or the screen itself. For example, a device viewed, or held upright in the user's hand, with the screen facing the user. A computer monitor are commonly naturally landscape-primary, while a mobile phones are commonly naturally portrait-primary.
</dd>
	<dt>
`縦置き方位@
（ `portrait^en ）
◎
Portrait
</dt>
	<dd>
~screenの縦横比は、
縦幅が横幅より大きい。
◎
The screen's aspect ratio has a height greater than the width.
</dd>

	<dt>
`首-方位@
（ `primary^en ）
◎
Primary
</dt>
	<dd>
機器の~screenは［
`縦置き方位$／`横置き方位$
］用の`自然な方位$にある。
◎
The device's screen natural orientation for either portrait or landscape.
</dd>

	<dt>
`副-方位@
（ `secondary^en ）
◎
Secondary
</dt>
	<dd>
機器の~screenは［
`縦置き方位$／`横置き方位$
］用の`首-方位$ではない方にある。
◎
The opposite of the device's screen primary orientation for portrait or landscape.
</dd>
</dl>

<p class="trans-note">【
`自然な方位$は，常に`首-方位$に~~分類されるので、
180° 回転した方位は，`副-方位$になる。
】【
`自然な方位$が`縦置き方位$であるならば、
2 つある`横置き方位$のうち，自然な方位から［
反時計回りに 90° 回転された方が`首-方位$,
逆に回転された方が`副-方位$
］になる
（縦置きと横置きを入れ替えた場合も同様）
— `~screen方位~値~list$を見よ。
以前は、
どちらが首-方位になるか指定されていなかった。
】</p>

		</section>
		<section id="the-current-screen-orientation-type-and-angle">
<h3 title="The current screen orientation type and angle">2.2. 現在の~screen方位の種別と角度</h3>

<p>
出力~機器の~screenには、
次に挙げる概念が結付けられる：
◎
The screen of the output device has the following associated concepts:
</p>

<dl>
	<dt>
`作動中の方位~lock@
◎
Active orientation lock
</dt>
	<dd>
次のいずれか
⇒＃
~NULL（~screenは，`~unlockされ$ている）／
`OrientationLockType$I として表現される`~screen方位$（~screenは，この方位に`~lock$されている）
◎
The screen orientation, represented as a OrientationLockType, to which the screen is locked, or null when unlocked.
</dd>

	<dt>
`現在の方位~角度@
◎
Current orientation angle
</dt>
	<dd>
~screenが その`自然な方位$から反時計回りに回転された角度を［
`~screen方位~値~list$から導出される度d数
］として与える。
◎
The angle in degrees that the screen is rotated counter-clockwise from its natural orientation as derived by the screen orientation values list.
</dd>

	<dt>
`現在の方位~種別@
◎
Current orientation type
</dt>
	<dd>
`OrientationType$I として表現される`~screen方位$。
◎
The screen orientation of the screen, represented as a OrientationType.
</dd>
</dl>

<p>
次に与える
`~screen方位~値~list@
が、
所与の~screenの`自然な方位$において［
各~screen方位~種別に結付けられる角度
］を標準~化する：
◎
The screen orientation values lists below standardize the angles associated with each screen orientation type for screens with different natural orientations:
</p>
<ul>
	<li>
`自然な方位$は`縦置き方位$である場合
⇒＃
`portrait-primary$oT は 0° ／
`landscape-primary$oT は 90° ／
`portrait-secondary$oT は 180° ／
`landscape-secondary$oT は 270°
◎
For screens with a natural portrait orientation:
• portrait-primary: 0°
• landscape-primary: 90°
• portrait-secondary: 180°
• landscape-secondary: 270°
</li>
	<li>
`自然な方位$は`縦置き方位$である場合
⇒＃
`landscape-primary$oT は 0° ／
`portrait-primary$oT は 90° ／
`landscape-secondary$oT は 180° ／
`portrait-secondary$oT は 270°
◎
For screens with a natural landscape orientation:
• landscape-primary: 0°
• portrait-primary: 90°
• landscape-secondary: 180°
• portrait-secondary: 270°
</li>
</ul>

		</section>
	</section>
	<section id="extensions-to-the-document-interface">
<h2 title="Extensions to the Document interface">3. `Document^I ~interfaceに対する拡張</h2>

		<section id="internal-slots-0">
<h3 title="Internal Slots">3.1. 内部~slot</h3>

<p>
`Document$I ~interfaceは、
次に挙げる内部~slotで拡張される：
◎
The Document interface is extended with the following internal slots:
◎
Internal Slot 	Description
</p>

<dl>
	<dt>
`orientationPendingPromise@sl
</dt>
	<dd>
次のいずれか
⇒＃
~NULL ／
ある `Promise$I （~supportされるいずれかの方位に~screenを~lockする要請を表現する）
◎
Either null or a Promise. When assigned a Promise, that promise represents a request to lock the screen orientation.
</dd>
</dl>

		</section>
	</section>
	<section id="extensions-to-the-screen-interface">
<h2 title="Extensions to the Screen interface">4. `Screen^I ~interfaceに対する拡張</h2>

<pre class="idl">
partial interface `Screen$I {
  [`SameObject$] readonly attribute `ScreenOrientation$I `orientation@m;
};
</pre>

<p>
各 `Window$I ~objには、
`方位~obj@
が結付けられる
— それは、
`Screen$I の `orientation$m 属性（すなわち、 `window.screen.orientation^c ）にあてがわれる `ScreenOrientation$I ~instanceである。
◎
The Window object has an associated ScreenOrientation, which is a Screen's orientation object (i.e., the ScreenOrientation instance at window.screen.orientation).
</p>

	</section>
	<section id="screenorientation-interface">
<h2 title="ScreenOrientation interface">5. `ScreenOrientation^I ~interface</h2>

<pre class="idl">
[`Exposed$=Window]
interface `ScreenOrientation@I : `EventTarget$I {
  `Promise$&lt;`undefined$&gt; `lock$m(`OrientationLockType$I %orientation);
  `undefined$ `unlock$m();
  readonly attribute `OrientationType$I `type$m;
  readonly attribute `unsigned short$ `angle$m;
  attribute `EventHandler$I `onchange$m;
};
</pre>

		<section id="internal-slots">
<h3 title="Internal Slots">5.1. 内部~slot</h3>

<p>
◎
Internal Slot 	Description
</p>
<dl>
	<dt>
`angle@sl
</dt>
	<dd>
~screenの最後に既知な`現在の方位~角度$を［
`~screen方位~値~list$から導出されるとおり，
`unsigned short^c 型の度d数
］として表現する。
◎
Represents the screen's last known current orientation angle in degrees as an unsigned short as derived from the screen orientation values lists.
</dd>

	<dt>
`initialType@sl
</dt>
	<dd>
`閲覧~文脈$が作成された時点における，~screenの`現在の方位~種別$を表現する。
◎
Represents the screen's current orientation type when the browsing context was created.
</dd>

	<dt>
`type@sl
</dt>
	<dd>
~screenの最後に既知な`現在の方位~種別$を `OrientationType$I 列挙~値として表現する。
◎
Represents the screen's last known current orientation type as an OrientationType enum value.
</dd>
</dl>

		</section>
		<section id="lock-method">
<h3 title="lock() method">5.2. `lock()^m ~method</h3>

<p>
`~UA$は、
`~screen方位を~lockする$に先立って［
`文書$, その`~node~navigable$
］が満たす必要がある 1 つ以上の
`事前~lock条件@
を要求してもヨイ。
例えば，［
`§ Web Application Manifest との相互作用＠#appmanifest-interaction$,
`§ Fullscreen API との相互作用＠#fullscreen-interaction$
］を見よ。
◎
↓When the lock() method is invoked with OrientationLockType orientation, the user agent MUST run the following steps.
◎
The user agent MAY require a document and its associated browsing context to meet one or more pre-lock conditions in order to lock the screen orientation. See 10. Interaction with Web Application Manifest and 9. Interaction with Fullscreen API.
</p>

<div class="algo">
<p>
`lock(orientation)@m
~method手続きは：
◎
↑</p>
<ol>
	<li>
%文書 ~LET コレに`関連な大域~obj$に`結付けられている文書$
◎
Let document be this's relevant global object's associated Document.
</li>
	<li>
<p>
`共通な安全性~検査$( %文書 )
</p>

<p>
例外が投出されたときは，~catchして
⇒
~RET その例外で`却下される~promise$
</p>
◎
Run the common safety checks with document. If an exception is thrown, return a promise rejected with that exception and abort these steps.
</li>
	<li>
~IF［
`~UA$は~screen方位を %orientation に~lockすることを~supportしない
］
⇒
~RET `NotSupportedError$E 例外で`却下される~promise$
◎
If the user agent does not support locking the screen orientation to orientation, return a promise rejected with a "NotSupportedError" DOMException and abort these steps.
</li>
	<li>
~IF［
%文書 .`orientationPendingPromise$sl ~NEQ ~NULL
］
⇒
`現在の~lock~promiseを却下して~NULL化する$( %文書, "`AbortError$E" )
`lock-basic^test
◎
If document's [[orientationPendingPromise]] is not null, reject and nullify the current lock promise of document with an "AbortError".
</li>
	<li>
%文書 .`orientationPendingPromise$sl ~SET `新たな~promise$
`lock-basic^test
◎
Set document's [[orientationPendingPromise]] to a new promise.
</li>
	<li>
`方位~lockを適用する$( %文書, %orientation )
◎
Apply orientation lock orientation to document.
</li>
	<li>
~RET %文書 .`orientationPendingPromise$sl
◎
Return document's [[orientationPendingPromise]].
</li>
</ol>
</div>

		</section>
		<section id="unlock-method">
<h3 title="unlock() method">5.3. `unlock()^m ~method</h3>

<div class="algo">
<p>
`unlock()@m
~method手続きは：
◎
When the unlock() method is invoked, the user agent MUST run the following steps:
</p>
<ol>
	<li>
%文書 ~LET コレに`関連な大域~obj$に`結付けられている文書$
◎
Let document be this's relevant global object's associated Document.
</li>
	<li>
`共通な安全性~検査$( %文書 )
◎
Run the common safety checks with document. If an exception is thrown, re-throw that exception and abort these steps.
</li>
	<li>
~IF［
~screenの`作動中の方位~lock$ ~EQ ~NULL
］
⇒
~RET
◎
If screen's active orientation lock is null, return undefined.
</li>
	<li>
~IF［
%文書 .`orientationPendingPromise$sl ~NEQ ~NULL
］
⇒
`現在の~lock~promiseを却下して~NULL化する$( %文書, "`AbortError$E" )
◎
If document's [[orientationPendingPromise]] is not null, reject and nullify the current lock promise of document with an "AbortError".
</li>
	<li>
`方位~lockを適用する$( %文書 )
◎
Apply orientation lock null to document.
</li>
</ol>
</div>

<p class="note">注記：
`unlock()$m が~promiseを返さないのは、
それが`既定の~screen方位$に~lockすることに等価であり，
その方位は`~UA$に既知でないこともあるからである。
よって，~UAは、
新たに どの方位になるのか
— さらには、
方位が変化するかどうかさえも —
予測できない。
◎
Note: Why does unlock() not return a promise?
◎
unlock() does not return a promise because it is equivalent to locking to the default screen orientation which might or might not be known by the user agent. Hence, the user agent can not predict what the new orientation is going to be and even if it is going to change at all.
</p>

		</section>
		<section id="common-safety-checks">
<h3 title="Common Safety Checks">5.4. 共通な安全性~検査</h3>

<div class="algo">
<p>
`共通な安全性~検査@
は、
所与の
( `文書$ %文書 )
に対し：
◎
The common safety checks for a Document document are the following steps:
</p>
<ol>
	<li>
~IF［
%文書 は`全部的に作動中$でない
］
⇒
~THROW `InvalidStateError$E
`non-fully-active^test
◎
If document is not fully active, throw an "InvalidStateError" DOMException.
</li>
	<li>
~IF［
`閲覧~文脈~sandbox化( 方位~lock )~flag$ ~IN %文書 にて`作動中の~sandbox法~flag集合$
］
⇒
~THROW `SecurityError$E
`lock-sandboxed-iframe^test
◎
If document has the sandboxed orientation lock browsing context flag set, throw "SecurityError" DOMException.
</li>
	<li>
~IF［
%文書 の`可視性~状態$doc ~EQ `hidden^l
］
⇒
~THROW `SecurityError$E
`hidden_document^test
◎
If document's visibility state is "hidden", throw "SecurityError" DOMException.
</li>
</ol>
</div>

		</section>
		<section id="type-attribute">
<h3 title="type attribute">5.5. `type^m 属性</h3>

<div class="algo">
<p>
`type@m
取得子~手続きは
⇒
~RET コレ.`type$sl
◎
When getting, the type attribute returns this's [[type]].
</p>
</div>

		</section>
		<section id="angle-attribute">
<h3 title="angle attribute">5.6. `angle^m 属性</h3>

<div class="algo">
<p>
`angle@m
取得子~手続きは
⇒
~RET コレ.`angle$sl
◎
When getting, the angle attribute returns this's [[angle]].
</p>
</div>

<p class="note">注記：
`angle$m 属性は、
~screenが`自然な方位$からどれだけ回転されたかを表現する。
~screenがどう回転されたかに応じて角度がどう変化するかは、
`~screen方位~値~list$が指定する。
◎
Note: What does the value given for angle represent?
◎
The angle attribute represents how far the screen has rotated from it natural orientation. The screen orientation values list specifies how the angle changes depending on the how screen is rotated.
</p>

		</section>
		<section id="onchange-event-handler-attribute">
<h3 title="onchange event handler attribute">5.7. `onchange^m ~event~handler属性</h3>

<p>
`onchange@m
属性は、
`onchange$m `~event~handler$用の`~event~handler~IDL属性$である
— その`~event~handler~event型$は、
`change@et
である。
◎
The onchange attribute is an event handler IDL attribute for the onchange event handler, whose event handler event type is change.
</p>

		</section>
	</section>
	<section id="orientationlocktype-enum">
<h2 title="OrientationLockType enum">6. `OrientationLockType^I 列挙</h2>

<pre class="idl">
enum `OrientationLockType@I {
  `any$oL,
  `natural$oL,
  `landscape$oL,
  `portrait$oL,
  `portrait-primary$oL,
  `portrait-secondary$oL,
  `landscape-primary$oL,
  `landscape-secondary$oL
};
</pre>

<p>
`OrientationLockType$I 列挙は、
~screenを どの~screen方位に`~lock$できるようになり得るかを表現する：
◎
The OrientationLockType enum represents the screen orientations to which a screen can be potentially locked.
</p>

<p class="note">注記：
~UAは、
アリな `OrientationLockType$I 値の下位集合
— 例： { `portrait-secondary$oT, `landscape-secondary$oT } —
しか~supportしないかもしれない。
◎
Note: Orientation support
◎
User agents might only support a subset of the possible OrientationLockType values. For example, a user agent might not support locking to the "portrait-secondary" or "landscape-secondary" orientations.
</p>

<div>
<table><thead><tr>
<th>値
</th><th>表現する方位
</th></tr></thead><tbody>

<tr><td>`any@oL
</td><td>`全~方位$

</td></tr><tr><td>`natural@oL
</td><td>`自然な方位$

</td></tr><tr><td>`landscape@oL
</td><td>`横置き方位$

</td></tr><tr><td>`portrait@oL
</td><td>`縦置き方位$

</td></tr><tr><td>`portrait-primary@oL
</td><td>`縦置き方位$かつ`首-方位$

</td></tr><tr><td>`portrait-secondary@oL
</td><td>`縦置き方位$かつ`副-方位$

</td></tr><tr><td>`landscape-primary@oL
</td><td>`横置き方位$かつ`首-方位$

</td></tr><tr><td>`landscape-secondary@oL
</td><td>`横置き方位$かつ`副-方位$
</td></tr></tbody></table>

◎
"any" represents any.
◎
"natural" represents natural.
◎
"landscape" represents landscape.
◎
"portrait" represents portrait.
◎
"portrait-primary" represents portrait-primary,
◎
"portrait-secondary" represents portrait-secondary.
◎
"landscape-primary" represents landscape-primary.
◎
"landscape-secondary" represents landscape-secondary.
</div>

	</section>
	<section id="orientationtype-enum">
<h2 title="OrientationType enum">7. `OrientationType^I 列挙</h2>

<pre class="idl">
enum `OrientationType@I {
  `portrait-primary$oT,
  `portrait-secondary$oT,
  `landscape-primary$oT,
  `landscape-secondary$oT
};
</pre>

<p>
`OrientationType$I 列挙~値は、
~screenの`現在の方位~種別$を表現するために利用される：
◎
The OrientationType enum values are used to represent the screen's current orientation type.
</p>

<div>
<table><thead><tr>
<th>値
</th><th>表現する方位
</th></tr></thead><tbody>

<tr><td>`portrait-primary@oT
</td><td>`縦置き方位$かつ`首-方位$

</td></tr><tr><td>`portrait-secondary@oT
</td><td>`縦置き方位$かつ`副-方位$

</td></tr><tr><td>`landscape-primary@oT
</td><td>`横置き方位$かつ`首-方位$

</td></tr><tr><td>`landscape-secondary@oT
</td><td>`横置き方位$かつ`副-方位$
</td></tr></tbody></table>

◎
"portrait-primary" represents portrait-primary.
◎
"portrait-secondary" represents portrait-secondary.
◎
"landscape-primary" represents landscape-primary.
◎
"landscape-secondary" represents landscape-secondary.
</div>

	</section>
	<section id="algorithms">
<h2 title="Algorithms">8. ~algo</h2>

		<section id="initializing-the-screenorientation-object">
<h3 title="Initializing the ScreenOrientation object">8.1. `ScreenOrientation^I ~objの初期化-法</h3>

<div class="algo">
<p>
`閲覧~文脈$ %文脈 が作成されたときは、
次を走らすモノトスル：
◎
When a browsing context context is created, the user agent MUST:
</p>
<ol>
	<li>
%~screen方位 ~LET %文脈 【にて`作動中の~window$bc】の`方位~obj$
◎
Let screenOrientation be context's associated ScreenOrientation.
</li>
	<li>
%~screen方位 .`initialType$sl ~SET ~screenの`現在の方位~種別$
◎
Initialize screenOrientation's [[initialType]] internal slot to the screen's current orientation type.
</li>
	<li>
%~screen方位 .`type$sl ~SET ~screenの`現在の方位~種別$
◎
Initialize screenOrientation's [[type]] internal slot to the screen's current orientation type.
</li>
	<li>
%~screen方位 .`angle$sl ~SET ~screenの`現在の方位~角度$
◎
Initialize screenOrientation's [[angle]] internal slot to the screen's current orientation angle.
</li>
</ol>
`orientation-reading^test
</div>

		</section>
		<section id="rejecting-a-document-s-current-lock-promise">
<h3 title="Rejecting a document's current lock promise">8.2. 文書の現在の~lock~promiseの却下-法</h3>

<div class="algo">
<p>
`現在の~lock~promiseを却下して~NULL化する@
ときは、
所与の
( `文書$ %文書, 文字列【！DOMString】 %例外~名 )
に対し，次を走らすモノトスル：
◎
When steps require to reject and nullify the current lock promise of Document document with a DOMString exceptionName, the user agent MUST:
</p>
<ol>
	<li>
%~promise ~LET %文書 .`orientationPendingPromise$sl
◎
↓</li>
	<li>
~Assert：
%~promise ~NEQ ~NULL
◎
Assert: [[orientationPendingPromise]] is not null. 
◎
Let promise be document's [[orientationPendingPromise]].
</li>
	<li>
<p>
`大域~taskを~queueする$( `~DOM操作~task源$, %文書 に`関連な大域~obj$, 次の手続き )
◎
Queue a global task on the DOM manipulation task source with document's relevant global object to＼
</p>

<div class="algo">
手続きは
⇒
`~promiseを却下する$( %~promise, 新たな %例外~名 `DOMException$I )
</div>
◎
reject promise with a new exceptionName DOMException.
</li>
	<li>
%文書 .`orientationPendingPromise$sl ~SET ~NULL
◎
Set document's [[orientationPendingPromise]] to null.
</li>
</ol>
`orientation-locking^test
</div>

		</section>
		<section id="applying-an-orientation-lock">
<h3 title="Applying an orientation lock ">8.3. 方位~lockの適用-法</h3>

<div class="algo">
<p>
`方位~lockを適用する@
ときは、
所与の
( `文書$ %文書, `OrientationLockType$I %方位 （省略時は ~NULL ）)
に対し，次を遂行するモノトスル：
◎
When steps require to apply orientation lock of OrientationLockType? orientation to Document document, the user agent MUST perform do the following steps:
</p>
<ol>
	<li>
<p>
~IF［
%文書 `stops being^en `全部的に作動中$ `while in^en `並列的$†
］~AND［
%文書 .`orientationPendingPromise$sl ~NEQ ~NULL
］
⇒
`現在の~lock~promiseを却下して~NULL化する$( %文書, "`AbortError$E" )
</p>

<p class="trans-note">【†
この段は、
並列的に遂行されていないにもかかわらず，
“並列的” が利用されている
— その意図が はっきりしない
（単に， “%文書 は`全部的に作動中$でない” ？）。
】</p>
◎
If document stops being fully active while in parallel, and [[orientationPendingPromise]] is not null, reject and nullify the current lock promise of document with an "AbortError".
</li>
	<li>
%~top-level文書 ~LET %文書 の`~node~navigable$の`~top-level辿可能$navにて`作動中の文書$nav
◎
Let topDocument be document's top-level browsing context's active document.
</li>
	<li>
<p>
%~top-level文書 の`~node~navigable$の`子孫~navigable群$を成す
~EACH( %~navigable )
に対し：
◎
Let descendantDocs be an ordered set consisting of topDocument's descendant navigables's active documents, if any, in tree order.
◎
For each doc in descendantDocs:
</p>
		<ol>
			<li>
%子孫~文書 ~LET %~navigable にて`作動中の文書$nav
◎
↑</li>
			<li>
~IF［
%子孫~文書 ~EQ %文書
］
⇒
~CONTINUE
◎
If doc is document, continue.
</li>
			<li>
~IF［
%子孫~文書 .`orientationPendingPromise$sl ~EQ ~NULL
］
⇒
~CONTINUE
◎
If doc [[orientationPendingPromise]] is null, continue.
</li>
			<li>
`現在の~lock~promiseを却下して~NULL化する$( %子孫~文書, "`AbortError$E" )
◎
Reject and nullify the current lock promise of doc with an "AbortError".
</li>
		</ol>
	</li>
	<li class="algo">
<p>
この段は`並列的$に走らす：
◎
Run the following sub-steps in parallel:
</p>
		<ol>
			<li>
~IF［
%文書 は`全部的に作動中$でない
］~AND［
%文書 .`orientationPendingPromise$sl ~NEQ ~NULL
］
⇒＃
`現在の~lock~promiseを却下して~NULL化する$( %文書, "`AbortError$E" )；
~RET
◎
If document has stopped being fully active, and if the document's [[orientationPendingPromise]] is not null, reject and nullify the current lock promise of document with an "AbortError" and abort these steps.
</li>
			<li>
~IF［
%方位 ~EQ ~NULL
］
⇒
`~screen方位を~unlockする$
◎
If orientation is null, unlock the screen orientation.
</li>
			<li>
<p>
~ELSE：
◎
Otherwise,＼
</p>
				<ol>
					<li>
%方位 に`~screen方位を~lockする$よう試みる
— ~platform規約に依存して，
%文書 の表示域の描かれ方を %方位 に合致するよう変更する
◎
attempt to lock the screen orientation to orientation. Depending on platform conventions, change how the viewport is drawn to match orientation.
</li>
					<li>
<p>
~IF［
前~段の試みは失敗した
（これまでに確立された利用者-選好, ~platform制限, その他の何らかの理由に因り）
］：
◎
If the attempt fails due to previously-established user preference, or platform limitation, or any other reason:
</p>
						<ol>
							<li>
~screenの`作動中の方位~lock$ ~SET ~NULL
◎
Set the screen's active orientation lock to null.
</li>
							<li>
<p>
`~taskを~queueする$【`大域~taskを~queueする$】( `~DOM操作~task源$, %文書 に`関連な大域~obj$, 次の手続き )：
◎
Queue a task on the DOM manipulation task source with document's relevant global object to:
</p>

<div class="algo">
<p>
手続きは：
</p>
								<ol>
									<li>
~IF［
%文書 .`orientationPendingPromise$sl ~NEQ ~NULL
］
⇒
`現在の~lock~promiseを却下して~NULL化する$( %文書, "`NotSupportedError$E" )
◎
If the document's [[orientationPendingPromise]] is not null, reject and nullify the current lock promise of document with a "NotSupportedError".
</li>
									<li>
<p>
`Abort these steps.^en
</p>

<p class="trans-note">【
この段は、
実際には，この手続きの外に置かれるべきに思われる。
~RET を意味するこの段は，ここに在っても無為であることに加え、
そうしなければ，上で`作動中の方位~lock$を設定する段も無為になるので。
】</p>
									</li>
								</ol>
</div>
							</li>
							<li>
【~RET （上の訳注を見よ。）】
</li>
						</ol>
<div class="note">
<p>注記：
これは、
次のいずれかの場合に起こり得る：
</p>
						<ul>
							<li>
利用者が［
~web~appが~screen方位を変更する
］ことを防止する選好を設定した
</li>
							<li>
~UAではなく下層の~platformが，所与の %方位 に~screen方位を~lockすることを許容していない
【これに該当するかどうかは、 %方位 にも依存するかもしれない。】
</li>
						</ul>
◎
Note

This can happen if the user has set a preference that prevents web applications from changing the screen orientation, or if the underlying platform, rather than the user agent, does not allow locking the screen orientation to the given orientation.
</div>
					</li>
				</ol>
			</li>
			<li>
~screenの`作動中の方位~lock$ ~SET %方位
◎
Set the screen's active orientation lock to orientation＼
</li>
			<li>
［
`現在の方位~種別$, `現在の方位~角度$
］を［
`~screen方位$に対する変更を反映する
］よう更新する
◎
and update the current orientation type and current orientation angle to reflect any changes to the screen orientation.
</li>
		</ol>
	</li>
	<li>
<p>
`大域~taskを~queueする$( `~DOM操作~task源$, %文書 に`関連な大域~obj$, 次の手続き )：
◎
Queue a global task on the DOM manipulation task source with document's relevant global object to:
</p>

<div class="algo">
<p>
手続きは：
◎
↑</p>
		<ol>
			<li>
<p>
%~promise ~LET %文書 .`orientationPendingPromise$sl
◎
Let promise be document's [[orientationPendingPromise]].
</p>

<p class="note">注記：
~promiseは `change$et ~eventを発火した後に解決する必要があるので、［
~eventの~handler関数が `lock()$m を~callしても，中止されない
］よう参照を保つ。
◎
Note

As the promise needs to resolve after a "change" event is fired, we keep a reference to prevent it from being aborted by an event's handler function calling lock().
</p>
			</li>
			<li>
%文書 .`orientationPendingPromise$sl ~SET ~NULL
◎
Set document's [[orientationPendingPromise]] to null.
</li>
			<li>
`~screen方位~変更~手続き$( %~top-level文書 )
◎
Run the screen orientation change steps with topDocument.
</li>
			<li>
~IF［
%~promise ~NEQ ~NULL
］
⇒
`~promiseを解決する$( %~promise )
◎
If promise is not null, resolve promise with undefined.
</li>
		</ol>
</div>
	</li>
</ol>
</div>

		</section>
		<section id="screen-orientation-change">
<h3 title="Screen orientation change">8.4. ~screen方位の変化</h3>

<div class="algo">
<p>
所与の`~top-level辿可能$ %辿可能 に対し，
［
~UAが %辿可能 用に~screen方位を変更するよう決定した／
利用者が %辿可能 を異なる~screenへ移動した
］ときは、
次を走らす
⇒
`~screen方位~変更~手続き$( %辿可能 にて`作動中の文書$nav )
◎
When a user-agent determines that the screen's orientation has changed for a top-level browsing context, or the user moves the top-level browsing context to a different screen, then run the screen orientation change steps with the top-level browsing context's active document.
</p>
`onchange-event^test
</div>

<div class="algo">
<p>
`~screen方位~変更~手続き@
は、
所与の
( `文書$ %文書 )
に対し，次に従う：
◎
The screen orientation change steps for Document document are as follows:
</p>
<ol>
	<li>
~IF［
%文書 の`可視性~状態$doc ~EQ `hidden^l
］
⇒
~RET
◎
If document's visibility state is "hidden", abort these steps.
</li>
	<li>
%種別 ~LET ~screenの`現在の方位~種別$
◎
↓</li>
	<li>
%角度 ~LET ~screenの`現在の方位~角度$
◎
Let type and angle be the screen's current orientation type and current orientation angle.
</li>
	<li>
%~screen方位 ~LET %文書 に`関連な大域~obj$の`方位~obj$
◎
Let screenOrientation be document's relevant global object's associated ScreenOrientation.
</li>
	<li>
~IF［
%種別 ~EQ %~screen方位 .`type$sl
］~AND［
%角度 ~EQ %~screen方位 .`angle$sl
］
⇒
~RET
◎
If type is equal to screenOrientation's [[type]] and angle is equal to screenOrientation's [[angle]], abort these steps.
</li>
	<li>
<p>
`大域~taskを~queueする$( `利用者~対話~task源$, %文書 に`関連な大域~obj$, 次の手続き )
◎
Queue a global task on the user interaction task source with document's relevant global object to＼
</p>

<div class="algo">
<p>
手続きは：
◎
perform the following steps:
</p>
		<ol>
			<li>
%~screen方位 .`angle$sl ~SET %角度
◎
Set screenOrientation's [[angle]] to angle.
</li>
			<li>
%~screen方位 .`type$sl ~SET %種別
◎
Set screenOrientation's [[type]] to type.
</li>
			<li>
`~eventを発火する$( %~screen方位, `change$et )
◎
Fire an event named "change" at screenOrientation.
</li>
		</ol>
</div>
	</li>
	<li>
%文書 の`~node~navigable$の`子孫~navigable群$を成す
~EACH( %~navigable )
に対し【！不要：if any, in tree order】
⇒
`~screen方位~変更~手続き$( %~navigable にて`作動中の文書$nav )
◎
Let descendantDocs be an ordered set consisting of document's descendant navigables's active documents, if any, in tree order.
◎
For each doc in descendantDocs, run the screen orientation change steps with doc.
</li>
</ol>
</div>

		</section>
		<section id="handling-page-visibility-changes">
<h3 title="Handling page visibility changes">8.5. ~page可視性~変化の取扱い</h3>

<p>
`~screen方位~変更~手続き$が走るのは、
`HTML$r の`可視性~状態を更新する$ときである。
◎
[HTML]'s update the visibility state runs the screen orientation change steps.
</p>

<p class="note">注記：
開発者は、［
`文書$の`可視性~状態$doc ~EQ `hidden^l
］の間は［
方位~変化~event【 `change$et 】を受取らなくなる
］ことを自覚する必要がある
（`文書$が再び可視になったなら、方位~変化~eventを受取るようになる）。
◎
Note

Developers need to be aware that documents with a "hidden" visibility state will not receive an orientation change event. However, once the document becomes visible again, it will receive the change event.
</p>

		</section>
		<section id="handling-unloading-documents">
<h3 title="Handling unloading documents">8.6. 文書~unload時の取扱い</h3>

<div class="algo">
<p>
`文書~unload時の片付け手続き$を所与の
( `文書$ %文書 )
の下で走らすときは、
次も走らすモノトスル
⇒
~IF［
【！%文書 は ある`~top-level閲覧~文脈$にて`作動中の文書$navである】
%文書 ~EQ %文書 の`~node~navigable$の`~top-level辿可能$navにて`作動中の文書$nav
］
⇒
`~screen方位を全部的に~unlockする手続き$( %文書 )
◎
Whenever the unloading document cleanup steps run with a document, the user agent MUST run the following steps:
• If document is not a top-level browsing context's active document, abort these steps.
• Run the fully unlock the screen orientation steps with document.
</p>
</div>

		</section>
		<section id="fully-unlocking-the-orientation">
<h3 title="Fully unlocking the orientation">8.7. 方位の全部的な~unlock法</h3>

<div class="algo">
<p>
`~screen方位を全部的に~unlockする手続き@
は、
所与の
( `文書$ %文書 )
に対し，次に従う：
◎
The fully unlock the screen orientation steps for Document document are as follows:
</p>
<ol>
	<li>
~IF［
%文書 .`orientationPendingPromise$sl ~NEQ ~NULL
］
⇒
`現在の~lock~promiseを却下して~NULL化する$( %文書, "`AbortError$E" )
◎
If document's [[orientationPendingPromise]] is not null, reject and nullify the current lock promise of document with an "AbortError".
</li>
	<li>
`方位~lockを適用する$( %文書 の`~node~navigable$の`~top-level辿可能$navにて`作動中の文書$nav )
◎
Let topDocument be document's top-level browsing context's active document.
◎
Apply orientation lock null to topDocument.
</li>
</ol>
</div>

		</section>
	</section>
	<section id="fullscreen-interaction">
<h2 title="Interaction with Fullscreen API">9. `Fullscreen API^cite との相互作用</h2>

<p>
~UAは、
`事前~lock条件$として，
`lock()$m の利用を`単純~fullscreen文書$ `fullscreen$r に制約するベキである。
◎
A user agent SHOULD restrict the use of lock() to simple fullscreen documents as a pre-lock condition. [fullscreen]
</p>

<p>
`文書$ %文書 が`~fullscreenから抜出る$ `fullscreen$r ときは、
次も走らすとする
⇒
`~screen方位を全部的に~unlockする手続き$( %文書 )
◎
When a document exits fullscreen, it also runs the fully unlock the screen orientation steps. [fullscreen]
</p>

	</section>
	<section id="appmanifest-interaction">
<h2 title="Interaction with Web Application Manifest">10. `Web Application Manifest^cite との相互作用</h2>

<p>
`appmanifest$r は、［
~manifestの `orientation$mb ~memberを介して，`文書$の`既定の~screen方位$を設定する
］ことを~web~appに許容する。
◎
The Web Application Manifest specification allows web applications to set the default screen orientation via the the orientation member.
</p>

<p>
~UAは、
`事前~lock条件$として，［
`~installした~web~app$は、
`表示~mode$ `fullscreen^v で呈示される
］ことを要求するベキである。
◎
A user agent SHOULD require installed web applications to be presented in the "fullscreen" display mode as a pre-lock condition.
</p>

	</section>
	<section id="accessibility-considerations">
<h2 title="Accessibility considerations">11. ~accessibilityの考慮点</h2>

<p>
利用者は，自身の機器を固定的な方位（例：車椅子の~arm上に）に装着することもあるので、
開発者は，［
`~screen方位を~lockする$とき，利用者が自身の機器を回転する
］よう期待する場合には［
`WCAG21$r の`~screen方位に関する達成基準＠~TR/WCAG21/#orientation$
］を自覚する必要がある。
この達成基準は、
`本質的$な［
内容, 機能性
］すべてが［
`~screen方位$に関わらず，可用になる
］ようにする。
~web~appは、
特定0の方位が`本質的$であるときは，利用者に方位~要件を助言しなければナラナイ。
◎
As users can have their devices mounted in a fixed orientation (e.g. on the arm of a wheelchair), developers that expect users to rotate their device when locking the screen orientation need to be aware of the Web Content Accessibility Guidelines (WCAG) 2.1's Orientation Success Criterion. The criterion makes it essential that content and functionality is available regardless of the screen orientation. When a particular orientation is essential, web applications must advise the user of the orientation requirements.
</p>

	</section>
	<section id="privacy-and-security-considerations">
<h2 title="Privacy and Security Considerations">12. ~privacyと~securityの考慮点</h2>

<p>
~screenの［
`現在の方位~種別$,
`現在の方位~角度$
］は、
いずれも指紋収集~行路になり得る。
以下に挙げる軽減は、［
機器が どう保持されているかを露呈しないこと
］により利用者の~privacyを保護する助けになることに加え，［
`副-方位$の種別, それに結付けられた角度
］が指紋収集~目的に利用されることを防止する。
◎
A screen's type and angle are a potential fingerprinting vector. The following mitigation help protect a user's privacy by not revealing how a device is being held, and also prevents the secondary orientation type and associated angles from being user for fingerprinting purposes.
</p>

<p>
~UAは、
指紋収集に抵抗するためとして（例：私的~閲覧），次のようにしてもヨイ：
◎
To resist fingerprinting (e.g., in private browsing), user agents MAY:
</p>
<ul>
	<li>
`~top-level辿可能$が存続する限り，［
~screenの`自然な方位$ ~EQ `initialType$sl
］であったかのように挙動する。
◎
For the life of a top-level browsing context, behave as as if screen's natural orientation is [[initialType]].
</li>
	<li>
`type$m 取得子は、［
`portrait-primary$oT ／ `landscape-primary$oT
］（`首-方位$）のみを返すよう制約する。
— どちらを返すかは、
~screenの縦横比により決定する。
◎
Restrict the possible return values of the type getter to "portrait-primary" or "landscape-primary". The screen aspect ratio determines which is returned.
</li>
	<li>
`angle$m 取得子は［
`現在の方位~種別$が `initialType$sl に合致するならば 0 ／
~ELSE_ 90
］を返す。
◎
If the current orientation type matches [[initialType]], return 0 for the angle getter. Otherwise, return 90.
</li>
	<li>
~screen方位が変化した場合に `change$et ~eventを発火するのは、
`現在の方位~種別$が［
`縦置き方位$から`横置き方位$へ, またはその逆へ変化した
］ときに限る。
◎
If the screen orientation changes, only fire the change event when the current orientation type changes from portrait to landscape, or vice versa.
</li>
</ul>

	</section>
</main></div>
