<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<title>The HTTP QUERY Method（日本語訳）</title>

<link rel="stylesheet" href="common.css" type="text/css">
<link rel="stylesheet" href="http-common.css" type="text/css">

<script src="common0.js"></script>
<script src="http-common.js"></script>
<script src="common1.js" async></script>

<script type="text/plain" id="_source_data">

●●options

spec_title:The HTTP QUERY Method
spec_date:2023-12-11
trans_update:2024-01-02
source_checked:231211
original_url:https://httpwg.org/http-extensions/draft-ietf-httpbis-safe-method-w-body.html
	abbr_url:HTTPquery
spec_status:IETFID
page_state_key:HTTP
no_original_dfn:true
ref_rfc:true
	ref_id_prefix:
site_nav:network,http
trans_1st_pub:2024-01-02

●●class_map

●●tag_map

●●original_id_map

references:
normative:
informative:

●●mdn_urls

●●link_map

~cache~key:~HTTPcache#cache-key

	●§

●●words_table1

●●words_table

	●略語
SQL:

	●処理
	通過-:pass through
	事前に:ahead of time
	得られた:yield

	●保安

	●仕様
機能:function:~
協調-:coordinate:~
組入れな:incorporateしな:組み入れな
処置:disposition::~
隙間:gap:~
	隙間を~~埋める:spans the gap between
配役-:cast:~
選んで:chooseして:~
仮の:hypotheticalな:~

	による難がある:suffers from
	に関して:with regards to
	かまわない:free to
	ではなく:as opposed to
	事前に明らか:readily apparent
	はい:Yes
	〜によっては:depending
	効率的でない:inefficient
	有意でない:insignificant
	互いに協調していない:uncoordinated
	挙げる:illustrate
	~~説明:illustrate
	~~説明:illustration
	無い下では:absent
	長大過ぎる:too voluminous
	望ましい:desirable
	従って:per

	●言い換え
	~MIME型$:media type
	算出-用の:computing
	発見-可能:discoverable
	視野が絞られた:scoped
	~target~URI$:the effective request URI
	要請~target$:Request URI
	要請~target$:request URI
	算出-用の:computing
	`内容~符号法$:content encoding
	~~代替策:variation
	素な~text:plain-text
	~redirectを伴わない:with direct response
	~redirectを伴う:with indirect response
	と伴に:while identifying

	●未分類
kilo-::::キロ
	~kilo-~byte:kilobyte



●●ref_key_map


●●ref_normative

[RFC2119]
    Bradner, S., "Key words for use in RFCs to Indicate Requirement Levels", BCP 14, ~RFC2119, March 1997
[RFC8174]
    Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words", BCP 14, ~RFC8174, May 2017
[HTTP]
    Fielding, R., Ed., Nottingham, M., Ed., and J. Reschke, Ed., "HTTP Semantics", STD 97, ~RFC9110, June 2022
[HTTP-CACHING]
    Fielding, R., Ed., Nottingham, M., Ed., and J. Reschke, Ed., "HTTP Caching", STD 98, ~RFC9111, June 2022,


●●trans_metadata
<p>
~THIS_PAGEは、
~IETF により Internet-Draft として公表された，
<a href="~SPEC_URL">The HTTP QUERY Method</a>
を日本語に翻訳したものです。
~PUB
</p>

●●spec_metadata

Workgroup
	HTTP
公表者
	<a href="https://httpwg.org/">HTTP Working Group</a>
位置付け
	Internet-Draft
意図される位置付け
	Standards Track
失効日
	日付から半年後
編集／著作者アドレス
	<a href="mailto:julian.reschke@greenbytes.de">Julian Reschke</a> (greenbytes GmbH)
	<a href="mailto:malhotrasahib@gmail.com">Ashok Malhotra</a>
	<a href="mailto:jasnell@gmail.com">James M Snell</a>

課題追跡
	https://github.com/httpwg/http-extensions/labels/safe-method-w-body
履歴
	https://datatracker.ietf.org/doc/draft-ietf-httpbis-safe-method-w-body/
commit 履歴
	https://github.com/httpwg/http-extensions/commits/main/draft-ietf-httpbis-safe-method-w-body.xml
HTTP WG mailing list
	ietf-http-wg@w3.org
	<a href="https://lists.w3.org/Archives/Public/ietf-http-wg/">archive</a>

HTTP 拡張仕様草案
	https://github.com/httpwg/http-extensions#draft-http-extension-specifications
現在の Internet-Draft のリスト
	https://datatracker.ietf.org/drafts/current/
</script>

</head>
<body>

<header>
	<hgroup>
<h1>HTTP QUERY メソッド</h1>
<p lang="en">The HTTP QUERY Method</p>
	</hgroup>
</header>

<div id="MAIN" hidden>
	<section>
◎要約

<p>
この仕様は、
新たな~HTTP`~method$として `QUERY^m を定義する。
それは，`安全$かつ`冪等$な要請~methodであり、
それを伴う`要請$は，`内容$を運べる。
◎
This specification defines a new HTTP method, QUERY, as a safe, idempotent request method that can carry request content.
</p>

	</section>
	<section>
<h2 title="Editorial Note">編集上の注記</h2>

<p>
この注記は、
~RFCとして公表する前に除去されることになる。
【以下，この節の内容は、冒頭の “この文書についての詳細” に移譲。】
◎
This note is to be removed before publishing as an RFC.
</p>

	</section>
	<section id="status-of-memo">
<h2 title="Status of This Memo">このメモの位置付け</h2>

<p class="trans-note">【
この節の内容は
`~IETF日本語訳 共通~page＠~IETFcommon#status-draft$に移譲。
】</p>

	</section>
	<section id="copyright">
<h2 title="Copyright Notice">著作権の告知</h2>

<p lang="en">
Copyright (c) 2023 IETF Trust and the persons identified as the document authors. All rights reserved.
</p>

	</section>

<main id="MAIN0">

	<section id="intro">
<h2 title="Introduction">1. 序論</h2>

<p>
この仕様は、［
`内容$を包含する，`安全$かつ`冪等$な要請
］を為すための手段として，
~HTTP `QUERY^m 要請~methodを定義する。
◎
This specification defines the HTTP QUERY request method as a means of making a safe, idempotent request that contains content.
</p>

<p>
これが望ましくなるのは、
要請~内に伝達される~dataが要請の~URI【`要請~target$】の中に符号化されるには長大過ぎるときが，最も多い。
例えば、
次のような共通的な~queryは，相互運用可能であるが：
◎
Most often, this is desirable when the data conveyed in a request is too voluminous to be encoded into the request's URI. For example, while this is an common and interoperable query:
</p>

<pre class="lang-http">
GET /feed?q=foo&amp;limit=10&amp;sort=-published HTTP/1.1
Host: example.org
</pre>

<p>
~query~parameterを何~kilo-~byteか以上に拡張した場合、
そうならないであろう
— 多くの実装は、
それら【~URI】の~sizeに対し上限を設置するので。
これらの上限は［
既知でない／事前に発見-可能でない
］ことが多い
— 要請は、
互いに協調しない多くの~systemを通過し得るので。
加えて、
何らかの~dataを`~target~URI$内に表出することは，効率的でない
— ~dataは、
妥当な~URIを成すよう符号化される必要があるので。
◎
if the query parameters extend to several kilobytes or more of data it may not be, because many implementations place limits on their size. Often these limits are not known or discoverable ahead of time, because a request can pass through many uncoordinated systems. Additionally, expressing some data in the target URI is inefficient, because it needs to be encoded to be a valid URI.
</p>

<p>
~query~parameterを`要請~target$【！要請~URI】の中へ直に符号化することは、
実質的に，~query入力を成すアリな あらゆる組合nそれぞれを別個な`資源$として配役することでもあるので、
応用によっては望ましくないこともある。
◎
Encoding query parameters directly into the request URI also effectively casts every possible combination of query inputs as distinct resources. Depending on the application, that may not be desirable.
</p>

<p>
`GET$m を利用することの代替として、
多くの実装は，~HTTP `POST$m ~methodを用立てて~queryを遂行する
— 下の例で~~説明されるとおり。
この事例では、
探索-演算に対する入力~parameterは，要請の`内容$の中に渡される
— `要請~target$【！要請~URI】を利用するのではなく。
◎
As an alternative to using GET, many implementations make use of the HTTP POST method to perform queries, as illustrated in the example below. In this case, the input parameters to the search operation are passed along within the request content as opposed to using the request URI.
</p>

<div class="example">
<p>
ある探索を要請している~HTTP `POST$m の典型的な利用：
◎
A typical use of HTTP POST for requesting a search
</p>

<pre class="lang-http">
POST /feed HTTP/1.1
Host: example.org
Content-Type: application/x-www-form-urlencoded

q=foo&amp;limit=10&amp;sort=-published
</pre>
</div>

<p>
しかしながら，この~~代替策には、
`GET$m と同じ【異なる？】基本的な制限による難
— 要請の送信-先である［
`資源$や`~server$
］に特有な知識が無い下では、
`安全$かつ`冪等$な~queryを遂行するかどうかが，事前に明らかでない難 —
がある。
◎
This variation, however, suffers from the same basic limitation as GET in that it is not readily apparent -- absent specific knowledge of the resource and server to which the request is being sent -- that a safe, idempotent query is being performed.
</p>

<p>
`QUERY^m ~methodは、
`GET$m の利用と `POST$m の利用の隙間を~~埋める解決策を供する。
~query演算への入力は、
`POST$m と同じく，要請の`内容$の中に渡される
— `要請~target$【！要請~URI】の一部としてではなく。
しかしながら， `POST$m と違って、
この~methodは明示的に`安全$かつ`冪等$であり，
~cachingや自動的な再試行の様な機能を運用することを許容する。
◎
The QUERY method provides a solution that spans the gap between the use of GET and POST. As with POST, the input to the query operation is passed along within the content of the request rather than as part of the request URI. Unlike POST, however, the method is explicitly safe and idempotent, allowing functions like caching and automatic retries to operate.
</p>

<p>
この文書~内の~keyword "MUST" …
【以下、この段落の内容は`~IETF日本語訳 共通~page＠~IETFcommon#requirements-notation$に移譲。】
◎
The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in BCP 14 [RFC2119] [RFC8174] when, and only when, they appear in all capitals, as shown here.
</p>

	</section>
	<section id="search">
<h2 title="QUERY">2. `QUERY^m</h2>

<p>
`QUERY^m ~methodは、
~server側の~queryを起動するために利用される。
~HTTP `GET$m ~methodは，［
~serverが`~target~URI$により識別される`資源$の`表現$
］を返すよう要請するが
（ `HTTP$r `~target資源の決定-法＠~HTTPsem#target.resource§
にて定義されるとおり）、
それとは違って `QUERY^m ~methodは，［
`~target~URI$【！the effective request URI】に視野が絞られた，何らかの~dataが成す集合
］にわたって［
（要請の`内容$により述べられる）
~query演算を遂行する
］よう~serverに依頼するために利用される。
対する応答~内に返される`内容$は、
`~target~URI$【！the effective request URI】により識別される`資源$の`表現$とは見做せない。
◎
The QUERY method is used to initiate a server-side query. Unlike the HTTP GET method, which requests that a server return a representation of the resource identified by the target URI (as defined by Section 7.1 of [HTTP]), the QUERY method is used to ask the server to perform a query operation (described by the request content) over some set of data scoped to the effective request URI. The content returned in response to a QUERY cannot be assumed to be a representation of the resource identified by the effective request URI.
</p>

<p>
~queryは、
要請の`内容$が定義する。
実装は、
当の内容が適切な~query意味論を供する限りにおいて
— `QUERY^m 要請【！~method】に伴われる`~MIME型$を問わず —
当の内容を利用してもヨイ。
◎
The content of the request defines the query. Implementations MAY use a request content of any media type with the QUERY method, provided that it has appropriate query semantics.
</p>

<p>
 `QUERY^m 要請は、
`要請~target$【！要請~URI】により識別される資源に関して`安全$かつ`冪等$である。
すなわち、
`QUERY^m 要請は，~targetされた資源の状態を改めない。
しかしながら，~serverには、
`QUERY^m 要請を処理している間に，
算出-用の資源や~memory資源を割振ることが
— さらには、
追加的な~HTTP`資源$を作成して，
それを通して応答を検索取得できるようにすることも —
期待され得る。
◎
QUERY requests are both safe and idempotent with regards to the resource identified by the request URI. That is, QUERY requests do not alter the state of the targeted resource. However, while processing a QUERY request, a server can be expected to allocate computing and memory resources or even create additional HTTP resources through which the response can be retrieved.
</p>

<p>
`QUERY^m 要請に対する成功裡な応答には、
当の演算の最終-処置として，何らかの指示を供することが期待される。
一例として，
ある成功裡な~queryにおいて得られた結果が無い場合、
`204$st 応答により表現できる。
当の応答が`内容$を内包する場合、
それが，演算の結果を述べることが期待される。
~serverは、
一部の事例では， `QUERY^m 要請に対し間接的に応答することを選んでもよい
— ［
代替する`要請~target$【！要請~URI】を指定している `Location$h ~header
］を伴う `3xx$st 応答を返して、［
そこから~HTTP `GET$m 要請を利用して結果を検索取得できる
］ようにすることにより。
`例＠#examples§ にて，
成功裡な `QUERY^m 要請と対する応答を成す様々な規範的でない例を挙げる。
◎
A successful response to a QUERY request is expected to provide some indication as to the final disposition of the operation. For instance, a successful query that yields no results can be represented by a 204 No Content response. If the response includes content, it is expected to describe the results of the operation. In some cases, the server may choose to respond indirectly to the QUERY request by returning a 3xx Redirection with a Location header field specifying an alternate Request URI from which the results can be retrieved using an HTTP GET request. Various non-normative examples of successful QUERY responses are illustrated in Section 4.
</p>

<p>
`QUERY^m ~methodの意味論は、
要請~messageが次に挙げる いずれかの`条件付き要請~header$ `HTTP$r を内包する場合には，
“条件付き `QUERY^m” に変化する
⇒＃
`If-Modified-Since$h,
`If-Unmodified-Since$h,
`If-Match$h,
`If-None-Match$h,
`If-Range$h
◎
The semantics of the QUERY method change to a "conditional QUERY" if the request message includes an If-Modified-Since, If-Unmodified- Since, If-Match, If-None-Match, or If-Range header field ([HTTP], Section 13).＼
</p>

<p class="trans-note">【
条件付き要請~headerとされるものが
— 現在は無いとしても —
他にもあれば、
それらも対象になると思われる。
】</p>

<p>
条件付き `QUERY^m は、［
`条件付き要請~header$（たち）により述べられる状況下に限り，
~queryを遂行する
］よう要請する。
しかしながら，重要なこととして、
そのような条件は，［
収集された探索-演算の結果ではなく，当の`~target資源$の状態
］に対し評価されることに注意。
◎
A conditional QUERY requests that the query be performed only under the circumstances described by the conditional header field(s). It is important to note, however, that such conditions are evaluated against the state of the target resource itself as opposed to the collected results of the search operation.
</p>

		<section>
<h3 title="Caching">2.1. ~cache法</h3>

<p>
`QUERY^m ~methodに対する応答は、
`~cache可能$である
— ~cacheは、
それを利用して，後続な `QUERY^m 要請を満足してもヨイ
（ `HTTP-CACHING$r `~cacheからの応答の構築-法＠~HTTPcache#constructing.responses.from.caches§
に従う下で）。
◎
The response to a QUERY method is cacheable; a cache MAY use it to satisfy subsequent QUERY requests as per Section 4 of [HTTP-CACHING]).
</p>

<p>
~query用の`~cache~key$ `HTTP-CACHING$r には、
当の要請の`内容$を組入れなければナラナイ。
そのためには、
~cacheは，
まず当の内容を次に従って正規化するベキである
— 【`~cache~key$における】意味論的に有意でない相違点を除去して，
それにより~cache効率を改善するために：
◎
The cache key for a query (see Section 2 of [HTTP-CACHING]) MUST incorporate the request content. When doing so, caches SHOULD first normalize request content to remove semantically insignificant differences, thereby improving cache efficiency, by:
</p>
<ul>
	<li>
`内容~符号法$（たち）を除去する。
◎
Removing content encoding(s)
</li>
	<li>
<p>
当の要請が `Content-Type$h ~fieldを伴う場合、
その値に与えられた`~MIME型$ %~MIME型 を利用して：
◎
↓</p>
		<ul>
			<li>
%~MIME型 の接尾辞（例： "`+json^c" ）により指示される［
形式~規約に関する知識
］に基づいて正規化する。
◎
Normalizing based upon knowledge of format conventions, as indicated by the any media type suffix in the request's Content-Type field (e.g., "+json")
</li>
			<li>
%~MIME型 により指示される［
当の`内容$自体の意味論に関する知識
］に基づいて正規化する。
◎
Normalizing based upon knowledge of the semantics of the content itself, as indicated by the request's Content-Type field.
</li>
		</ul>
	</li>
</ul>

<p>
そのような正規化は、
もっぱら，`~cache~key$を生成する目的で遂行されることに注意
— それは、
当の要請~自体を変更するものではない。
◎
Note that any such normalization is performed solely for the purpose of generating a cache key; it does not change the request itself.
</p>

		</section>
	</section>
	<section id="field.accept-query">
<h2 title="The &quot;Accept-Query&quot; Header Field">3. `Accept-Query^h ~header</h2>

<p>
`資源$は、
`QUERY^m ~method用の~supportと伴に［
当の資源に利用してもよい特定の~query形式の`~MIME型$（たち）
］を直に通達するためとして，
`Accept-Query^h 応答~headerを利用してもヨイ。
◎
The "Accept-Query" response header field MAY be used by a resource to directly signal support for the QUERY method while identifying the specific query format media type(s) that may be used.
</p>

<pre class="bnf">
Accept-Query
	= 1#`media-type$p
</pre>

<p>
`Accept-Query^h ~headerは、［
~commaで分離された（省略可能な~parameterを伴う）`~MIME型$
］たちが成す~listを指定する。
`HTTP$r
◎
The Accept-Query header field specifies a comma-separated listing of media types (with optional parameters) as defined by Section 8.3.1 of [HTTP].
</p>

<p>
`Accept-Query^h ~headerに~listされる~MIME型たちの順序は、
有意でない。
◎
The order of types listed by the Accept-Query header field is not significant.
</p>

<p>
`Accept-Query^h の値は、
~server上の同じ~pathを共有する あらゆる~URIに適用される
— 言い換えれば、
`query$p 成分は無視される。
同じ`資源$への要請たちが異なる `Accept-Query^h 値を返す場合、
最も近過去に受信した新鮮な値が利用される
（ `HTTP-CACHING$r `鮮度＠~HTTPcache#expiration.model§
に従って）。
◎
Accept-Query's value applies to every URI on the server that shares the same path; in other words, the query component is ignored. If requests to the same resource return different Accept-Query values, the most recently received fresh (per Section 4.2 of [HTTP-CACHING]) value is used.
</p>

	</section>
	<section id="examples">
<h2 title="Examples">4. 例</h2>

<p>
この節における規範的でない例は、［
~SQLに基づく~query構文に基づく，単純な素な~text
］を用立てる
— ~queryの結果は、
~commaで分離された値たちとして返される。
これは、
仮の形式であり，~~説明~目的に限られる。
実装は、［
要請, 応答
］どちらにも，自身が望む形式を利用してかまわない。
◎
The non-normative examples in this section make use of a simple, hypothetical plain-text based query syntax based on SQL with results returned as comma-separated values. This is done for illustration purposes only. Implementations are free to use any format they wish on both the request and response.
</p>

		<section>
<h3 title="Simple QUERY with a Direct Response">4.1. ~redirectを伴わない単純な~query</h3>

<p>
~redirectを伴わない単純な~query：
◎
A simple query with a direct response:
</p>

<pre class="lang-http">
QUERY /contacts HTTP/1.1
Host: example.org
Content-Type: example/query
Accept: text/csv

select surname, givenname, email limit 10
</pre>

<p>
対する応答：
◎
Response:
</p>

<pre class="lang-http">
HTTP/1.1 200 OK
Content-Type: text/csv

surname, givenname, email
Smith, John, john.smith@example.org
Jones, Sally, sally.jones@example.com
Dubois, Camille, camille.dubois@example.net
</pre>

		</section>
		<section>
<h3 title="Simple QUERY with indirect response (303 See Other)">4.2. ~redirect（ `303^st ）を伴う単純な~query</h3>

<p>
~redirect（ `303$st ）を伴う単純な~query：
◎
A simple query with an Indirect Response (303 See Other):
</p>

<pre class="lang-http">
QUERY /contacts HTTP/1.1
Host: example.org
Content-Type: example/query
Accept: text/csv

select surname, givenname, email limit 10
</pre>

<p>
対する応答：
◎
Response:
</p>

<pre class="lang-http">
HTTP/1.1 303 See Other
Location: http://example.org/contacts/query123
</pre>

<p>
~query応答を~fetchする：
◎
Fetch Query Response:
</p>

<pre class="lang-http">
GET /contacts/query123 HTTP/1.1
Host: example.org
</pre>

<p>
対する応答：
◎
Response:
</p>

<pre class="lang-http">
HTTP/1.1 200 OK
Content-Type: text/csv

surname, givenname, email
Smith, John, john.smith@example.org
Jones, Sally, sally.jones@example.com
Dubois, Camille, camille.dubois@example.net
</pre>

		</section>
	</section>
	<section>
<h2 title="Security Considerations">5. ~securityの考慮点</h2>

<p>
`QUERY^m ~methodは、
`HTTP$r にて述べられるとおり，［
すべての~HTTP~methodと同じ一般な~security考慮点
］の~subjectになる。
◎
The QUERY method is subject to the same general security considerations as all HTTP methods as described in [HTTP].
</p>

	</section>
	<section>
<h2 title="IANA Considerations">6. ~IANA考慮点</h2>

<p>
~IANAには、
`~HTTP~method~registry＠~IANA-a/http-methods/$cite
内に `QUERY^m ~methodを追加することが要請される
（ `HTTP$r `~method~registry＠~HTTPinfra#method.registry§
を見よ）。
◎
IANA is requested to add QUERY method in the permanent registry at &lt;http://www.iana.org/assignments/http-methods&gt; (see Section 16.1.1 of [HTTP]).
</p>

<div>
<table id="table-1"><thead><tr>
<th>~method名前
<th>`安全$か
<th>`冪等$か
<th>仕様
<tbody>

<tr>
<td>`QUERY^m
<td>はい
<td>はい
<td>`§ 2＠#search$
</tbody></table>

◎
Table 1
Method Name 	Safe 	Idempotent 	Specification
QUERY 	Yes 	Yes 	Section 2
</div>

	</section>
	<section id="change.log">
<h2 title="Appendix A. Change Log">付録 A. 変更~log</h2>

<p>
この節は、
~RFCとして公表する前に除去されることになる。
【以下，この節の内容は、未訳。】
◎
This section is to be removed before publishing as an RFC.
</p>

	</section>
</main></div>
