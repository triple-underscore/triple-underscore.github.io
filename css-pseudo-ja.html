<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<title>CSS Pseudo-Elements Module Level 4 （日本語訳）</title>

<link rel="stylesheet" href="common.css" type="text/css">
<link rel="stylesheet" href="common-css.css" type="text/css">
<style>
@namespace svg url(http://www.w3.org/2000/svg);

svg|svg{
	background-color: var(--bg-color-1);
}
svg|path{
	stroke-width: 3;
	stroke: var(--K-color);
	fill: none;
}
svg|text{
	font:bold 14px monospace;
	text-anchor:middle;
	fill: var(--K-color);
}
svg|text.label{
	text-anchor:start;
}
svg|text.comment{
	font:italic 12px monospace;
}
svg|rect{
	stroke-width: 3;
	stroke: var(--K-color);
	fill: var(--G-bg);
}

.railroad {
	overflow: auto;
}

</style>

<script src="common0.js" ></script>
<script src="common1.js" async></script>

<script>

Util.ready = function(){
	const source_data = {
		generate: expand,
	};

	Util.switchWordsInit(source_data);
}

function expand(){
	const link_map = this.link_map;
	let context_prop = '';
	const class_map = this.class_map;
	const tag_map = this.tag_map;

	return this.html.replace(
		/%[\w\-~一-鿆]+|`(.*?)([$@^])(\w*)/g,
		create_html
	);

	function create_html(match, key, indicator, klass){
if(!indicator) {//%
	return `<var>${match.slice(1)}</var>`;
}

let href = '';
let href1 = '';
{
	const n = key.indexOf('＠');
	if(n > 0) {
		href1 = key.slice(n + 1);
		key = key.slice(0, n);
	}
}
let text = key;

switch(klass){
case 'r':
	text = `[${key}]`;
	href = `#biblio-${key.toLowerCase()}`;
	break;
case 'p':
	if( indicator === '@') {
		context_prop = `#valdef-${key}-`;
	}
	break;
case 'pe': 
	text = `::${key}`;
	break;
case 'ps': 
	text = `:${key}`;
	break;
case 't':
	text = `&lt;${key}&gt;`;
	break;
case 'v':
	href = context_prop + key;
	break;
case 'm':
	const n = text.indexOf('(');
	if(n > 0){
		key = text.slice(0, n);
		text = key + text.slice(n).replace(/\w+/g, '<var>$&</var>');
	}
	break;
case 'l':
	text = `"<code class="literal">${text}</code>"`;
	break;
case 'U':
	text = `U+${key}`;
	break;
case 'en':
	return `<span lang="en">${key}</span>`;
	break;
case 'xCode':
	return `<a id="_ex-html-${key}">＊</a>`;
	break;
case 'dgm':
	return `<a id="_dgm-${key}"></a>`;
	break;
case 'issue':
	href = `~CSSissue/${key}`;
	text = `課題 #${key}`;
	break;
}

let tag = tag_map[klass];
if(tag) {
	let classname = class_map[klass];
	classname = classname ? ` class="${classname}"` : '';
	text = `<${tag}${classname}>${text}</${tag}>`;
}


if(indicator !== '^'){
	href = href1 || link_map[ klass ? `${klass}.${key}` : key ] || href;
	if(!href){
		console.log(match); // check error
		return match;
	}

	switch(indicator){
	case '$':
		text = `<a href="${href}">${text}</a>`;
		break;
	case '@':
		text = `<dfn id="${href.slice(1)}">${text}</dfn>`;
		break;
	default:
		console.log(match);
		return match;
	}
}

return text;

	}
}
</script>

<script type="text/plain" id="_source_data">


●●options

spec_title:CSS Pseudo-Elements Module Level 4
spec_date:2024-06-20
trans_update:2024-06-21
source_checked:201013
page_state_key:CSS
original_url:https://drafts.csswg.org/css-pseudo-4/
	abbr_url:CSSPSEUDO
spec_status:ED
ref_id_prefix:biblio-
ref_id_lowercase:true
site_nav:selector,css
conformance:css
copyright:2024,permissive
trans_1st_pub:2017-09-01


●●class_map
p:property
css:css
ps:pseudo
pe:pseudo
d:descriptor
e:element
a:attr
v:value
uc:char-prop
U:code-point
cn:cp-name

●●tag_map
p:code
t:var
css:code
ps:code
pe:code
d:code
I:code
m:code
e:code
a:code
v:code
c:code
samp:samp
uc:b
U:span
cn:span
em:em
i:i

●●original_id_map
dom-csspseudoelement-pseudo:dom-csspseudoelement-pseudo-type

●●mdn_urls
selectordef-after:CSS/::after
selectordef-before:CSS/::before
file-selector-button:CSS/::file-selector-button
selectordef-first-letter:CSS/::first-letter
selectordef-first-line:CSS/::first-line
selectordef-grammar-error:CSS/::grammar-error
selectordef-marker:CSS/::marker
selectordef-placeholder:CSS/::placeholder
selectordef-selection:CSS/::selection
selectordef-spelling-error:CSS/::spelling-error
selectordef-target-text:CSS/::target-text

csspseudoelement:API/CSSPseudoElement

●●link_map

Exposed:~WEBIDLjs#Exposed
CSSOMString:~CSSOM1#cssomstring
I.CSSPseudoElement:#csspseudoelement
I.CSSStyleDeclaration:~CSSOM1#cssstyledeclaration
I.Element:~DOM4#element
I.EventTarget:~DOM4#eventtarget
I.CSSStyleDeclaration:~CSSOM1#cssstyledeclaration

m.type:#dom-csspseudoelement-type
m.element:#dom-csspseudoelement-element
m.pseudo:#dom-csspseudoelement-pseudo
m.~pseudoE:#dom-element-pseudo
m.parent:#dom-csspseudoelement-parent
m.getComputedStyle:~CSSOM1#dom-window-getcomputedstyle


pe.after:#selectordef-after
pe.before:#selectordef-before
pe.details-content:#selectordef-details-content
pe.file-selector-button:#selectordef-file-selector-button
pe.first-letter:#selectordef-first-letter
pe.first-line:#selectordef-first-line
pe.grammar-error:#selectordef-grammar-error
pe.marker:#selectordef-marker
pe.placeholder:#selectordef-placeholder
pe.postfix:#selectordef-first-letter-postfix
pe.prefix:#selectordef-first-letter-prefix
pe.selection:#selectordef-selection
pe.spelling-error:#selectordef-spelling-error
pe.target-text:#selectordef-target-text
pe.part():~CSSSHADOWPARTS#selectordef-part

ps.placeholder-shown:~SELECTORS4#placeholder-shown-pseudo
ps.target:~SELECTORS4#target-pseudo
ps.root:~SELECTORS4#root-pseudo

d.inherits:~CSSPV1#descdef-property-inherits

p.background:~CSSBG#propdef-background
p.background-color:~CSSBG#propdef-background-color
p.box-shadow:~CSSBG#propdef-box-shadow
p.caret-color:~CSSUI#propdef-caret-color
p.color:~CSSCOLOR#propdef-color
	p.color:https://drafts.csswg.org/css-color-3/#color0
p.content:~CSSCONTENT#propdef-content
p.cursor:~CSSUI#propdef-cursor
p.display:~CSSDISP#propdef-display
p.direction:~CSSWM#propdef-direction
p.forced-color-adjust:~CSSCOLORADJUST#propdef-forced-color-adjust
p.initial-letter:~CSSINLINE#propdef-initial-letter
p.line-height:~CSSINLINE#propdef-line-height
	p.line-height:~CSS22#propdef-line-height
p.opacity:~CSSCOLOR#propdef-opacity
p.outline:~CSSUI#propdef-outline
p.ruby-position:~CSSRUBY#propdef-ruby-position
p.text-align:~CSSTEXT#propdef-text-align
p.text-emphasis-position:~CSSTEXTDECOR#propdef-text-emphasis-position
	p.text-emphasis-position:~CSSTEXTDECOR4#propdef-text-emphasis-position
p.text-decoration:~CSSTEXTDECOR#propdef-text-decoration
	/css-text-decor-4/#propdef-text-decoration
p.text-emphasis:~CSSTEXTDECOR#propdef-text-emphasis
	/css-text-decor-4/#propdef-text-emphasis
p.text-orientation:~CSSWM#propdef-text-orientation
p.text-shadow:~CSSTEXTDECOR#propdef-text-shadow
	p.text-shadow:~CSSTEXTDECOR4#propdef-text-shadow
p.text-underline-position:~CSSTEXTDECOR#propdef-text-underline-position
p.text-underline-offset:~CSSTEXTDECOR4#propdef-text-underline-offset
p.text-transform:~CSSTEXT#propdef-text-transform
p.list-style-position:~CSSLIST#propdef-list-style-position
p.unicode-bidi:~CSSWM#propdef-unicode-bidi
p.writing-mode:~CSSWM#propdef-writing-mode

p.stroke-color:https://drafts.fxtf.org/fill-stroke-3/#propdef-stroke-color
p.fill-color:https://drafts.fxtf.org/fill-stroke-3/#propdef-fill-color
p.stroke-width:https://drafts.fxtf.org/fill-stroke-3/#propdef-stroke-width
	~SVGpainting#StrokeWidthProperty

v.none:~CSSCONTENT#valdef-content-none
v.inline:~CSSDISP#valdef-display-inline
v.transparent:~CSSCOLOR#valdef-color-transparent
v.currentcolor:~CSSCOLOR#valdef-color-currentcolor
v.list-item:~CSSDISP#valdef-display-list-item

v.spelling-error:~CSSWG/css-text-decor-4/#valdef-text-decoration-line-spelling-error
	#valdef-text-decoration-line-spelling-error
v.grammar-error:~CSSWG/css-text-decor-4/#valdef-text-decoration-line-grammar-error

v.HighlightText:~CSSCOLOR#valdef-color-highlighttext
v.Highlight:~CSSCOLOR#valdef-color-highlight
v.MarkText:~CSSCOLOR#valdef-color-marktext
v.Mark:~CSSCOLOR#valdef-color-mark

v.revert:~CASCADE#valdef-all-revert
v.revert-layer:~CASCADE#valdef-all-revert-layer
v.inherit:~CASCADE#valdef-all-inherit
v.unset:~CASCADE#valdef-all-unset

t.pseudo-element-selector:~SELECTORS4#typedef-pseudo-element-selector

e.textarea:~HEfomrs#the-textarea-element
e.input:~HEinput#the-input-element
e.details:~HEinteractive#the-details-element

a.exportparts:~CSSSHADOWPARTS#element-attrdef-html-global-exportparts

	●用語

~treeに留まる疑似要素:#tree-abiding
~partの様な疑似要素:#part-like-pseudo-elements
仮想の~tag列:#fictional-tag-sequence
整形される最初の行l:#first-formatted-line
最初の字lを成す~text:#first-letter-text
最初の字l:#first-letter
強調~overlay:#highlight-overlay
強調~疑似要素:#highlight-pseudo-element
~pairにされた既定の強調~色:#paired-default-highlight-colors

	●用語（CSS

継承-:~CASCADE#css-inheritance
継承:~CASCADE#css-inheritance
継承d~prop:~CASCADE#inherited-property
初期~値:~CASCADE#initial-value
使用~値:~CASCADE#used-value
指定d値:~CASCADE#specified-value
継承d値:~CASCADE#inherited-value
~cascaded値:~CASCADE#cascaded-value
出自:~CASCADE#origin
作者~出自:~CASCADE#cascade-origin-author

出自の要素:~SELECTORS4#originating-element
最終的な出自の要素:~SELECTORS4#ultimate-originating-element
選択子:~SELECTORS4#selector
疑似要素:~SELECTORS4#pseudo-element
下位-疑似要素:~SELECTORS4#sub-pseudo-element

~custom~prop:~CSSVAR#custom-property

塊~整形~文脈:~CSSDISP#block-formatting-context
行内~整形~文脈:~CSSDISP#inline-formatting-context
塊~容器:~CSSDISP#block-container
行内~level:~CSSDISP#inline-level
行内~levelの~box:~CSSDISP#inline-level-box
行内~box:~CSSDISP#inline-box
塊~level:~CSSDISP#block-level
行内~塊:~CSSDISP#inline-block
包含塊:~CSSDISP#containing-block
~flow外:~CSSDISP#out-of-flow
~flow内:~CSSDISP#in-flow
置換され:~CSSDISP#replaced-element
根~要素:~CSSDISP#root-element

独立な整形~文脈を確立-:~CSSDISP#establish-an-independent-formatting-context
	塊:~CSSDISP#block
	行内:~CSSDISP#inline
	行内塊:~CSSDISP#valdef-display-inline-block

塊-軸:~CSSWM#block-axis
書字~mode:~CSSWM#writing-mode

~marker~box:~CSSLIST#marker
~list~item:~CSSLIST#list-item

~typographic文字~単位:~CSSTEXT#typographic-character-unit
~Unicode字種:~CSSTEXT#unicode-general-category
単語~分離子:~CSSTEXT#word-separator
内容~言語:~CSSTEXT#content-language

行l~box:~CSSINLINE#line-box
先頭字:~CSSINLINE#initial-letter
埋没~頭字:~CSSINLINE#dropped-initial
沈込み頭字:~CSSINLINE#sunken-initial
持上げ頭字:~CSSINLINE#raised-initial
根~行内~box:~CSSINLINE#root-inline-box

複-柱~容器:~CSSMCOL#multi-column-container

~table包装~box:~CSSTABLE#table-wrapper-box

有位置:~CSSPOS#positioned-box
~style属性:~CSSSTYLEATTR#style-attribute0

文法に則って構文解析-:~CSSSYN#css-parse-something-according-to-a-css-grammar

~box断片:~CSSBREAK#box-fragment

装飾線:~CSSTEXTDECOR#line-decoration
圏点:~CSSTEXTDECOR#emphasis-marks

登録-済み~custom~prop:~CSSPV1#registered-custom-property

強制d色~mode:~CSSCOLORADJUST#forced-colors-mode

	●用語（他
url.素片:~URL1#concept-url-fragment

	●補完
~box:~CSSDISP#box
~box~tree:~CSSDISP#box-tree
内容~box:~CSSBOX#content-box
~border~box:~CSSBOX#border-box
	~text連なり:~CSSDISP#text-run


●●words_table1
pseudoE:pseudo

CSSTEXTDECOR4:https://drafts.csswg.org/css-text-decor-4/

●●words_table



	●CSS
選択-:select::~
選択:selection::~
疑似:pseudo::~
出自の:originating::~
出自:origin::~
	出自にする:originating
巻戻した:roll backした:巻き戻した
柱:column::::カラム
包装:wrapper::~
色付けら:colorさ::~
cascaded::::カスケード
part:

	下位porp:longhand
	style付け:styling
	~cascade法:cascading／:cascading rule

	●構造
	~treeに留まる:tree-abiding
	children
閉じて:closeして:~
閉じた:closeした:~
開く:openする:~
	また開く:re-open
封入-:enclose:~
後続-:follow:~
先行-:precede:~
仮想の:fictional::~
	留まる:abiding
付-:attach:~
隣接な:adjacentな:隣接する

	要素~~単位／~boxに対応する:fit
	最も内縁:innermost
	文書~全体にわたる:document-wide
	~DOM要素:document-sourced element in the document tree
	~DOM要素:elements in the document source tree
	~DOM要素:real document element
	~DOM要素:real element
	~DOM内の:real
	-:intervening
	介在している:intervening
	対象の~text:associated text
	対象の~text:qualifying text
	子:immediate children
	直前:just before
	直前 immediately before
	直後 immediately after
	属する:belong
	-:lower-level
	~pairにされ:paired

	●文字／言語
約物:punctuation::~
Dutch:::オランダ語
文法的:grammatical:~
字種:general category:~
	文:sentence
双方向-:bidirectional::~
書字:writing::~
	~colon 1 個の:one-colon

	^uc:Letter
	^uc:Number
	^uc:Symbol
	^uc:Punctuation
	^uc:Open Punctuation
	^uc:Dash Punctuation
	-:opening punctuation and dashes

	●UI／呈示
copy::::コピー
paste::::ペースト
隠され:hideされ:~
強調:highlight::~
仮入力:placeholder:~
欄:field:~
操作o:operation::操作
展開-:expand:~
	開閉可能:can be expanded or collapsed
開かれ:openされ:~

	作動中でない:inactive
	誤り:error
	消えていくように:out
	薄くする:dim
	選択-用の:selector

	●塗り
overlay:
	::over 層
積層-:stack::~
alpha:
塗られ:paintされ::~
塗法:paint 法::塗り方
	painting
塗ng:painting::塗り
上面:over:~
	最も手前:topmost
	背後:below
	直ぐ:immediately
描かれ:drawされ:~
描く:drawする:~
描いて:drawして:~
	描くのを:drawing:
描直す:redrawする:描き直す
描法:drawing:描き方
覆う:coverする:~
遮る:obscureする:~
遮られ:obscureされ:~
膜:wash:~
影:shadow::~
不透明度:opacity::~
半透明:semi-transparent:~
	~~覆う:create a 〜 to coat
	透けて見える:can show through
	highlighting
滲み:wash:~
fill::::フィル
太さ:thickness:~
	太さ:thick

	^v:yellow
	^v:red
	^v:orange
	^v:green
	^v:blue

	●layout
	flow外:out-of-flow
	~border~box:border-box:
	生成し直-:regenerate
	置換されない:non-replaced
	置換される:replaced
首要:principal::主要
外方:outward:~
部位:portion:~
重合して:overlapして:重なり合って
区分:segment:~
	増減-:both increase and decrease

	●text 組版
em:
typographic::::タイポグラフィック
外形線:outline::~
字l:letter::字°
	最初の字l:first-letter
	最初の行l:first-line
アキ:spacing::~
先頭字:initial letter::~
	先頭字:initial cap
頭字:cap::~
埋没:dropped::~
	埋没~頭字:drop cap／drop-letter／Drop Caps
持上げ:raised::持ち上げ
沈込み:sunken::沈み込み
上線:overline::~
下線:underline::~

取消線:line-through::打消線
打消線:strike-through::~
圏点:emphasis mark::~
	Punctuation
装飾:decoration::~
装飾線:line decoration::~
植字用:typesetting::~
折返した:wrapした::折り返した
回込む:wrap aroundする::回り込む
span:
	すき間なく:tight
引用符:quotation mark:~
	（それを括っている）:opening
切落とさ:truncateさ:切り落とさ

	●仕様
拙い:poorな:~
地位:status:~
都合:convenience:~
誂える:tailorする:あつらえる
競合-:conflict:~
解決策:solution:~
判明して:proveされて:~
見出法:find 法:見出し方
	overriding
増補-:enhance:~
魔法:magic:~
高処理能:performant:~
普通の:ordinaryな:~
調節:tweak:~
強制d:forced::強制
収容-:accomodate:~
装う:masqueradeする:~

	可能性:possibility
	小さな:minor
	~~実際:In fact
	にもなり得る:may in fact
	:whereas
	:Issue
	？:sure
	までは:at the moment
	の支持を受けて:in favor of
	~~個々の:their respective
	他方／が:however
	とは限らず／ない〜であっても:not necessarily
	seem
	note
	thank
	very:
	Issue:
	potentially
	なり得る:potential
	Level
	次のことを~~念頭に:Recall that
	優先される:over have precedence
	価する:worth
	他に比べ:relatively
	〜限り:insofar
	~supportされない:unsupported
	定義し直-:redefine
	実装されてない:unimplemented
	論の最中にある under discussion
	書かれ:written
	書き直し:rewrote
	働き方:way things work
	選ぶ:choose する
	〜とする:assume
	〜とするとき:assuming
	例示-:illustrate
	-:remember
	caused
	指せるように:refer
	指す:refer
	書いている:writing
	-:exactly
	失う:lose
	適用-:application
	とする:suppose
	の他に:besides
	直接間接を問わず:potentially indirectly
	緩く:looseに
	依存-:dependent
	~~非常に:highly
	継承-不能:non-inheritable
	違える:differently
	事実:fact
	書き出す:writing out
	するよう，〜を書き出した結果:If we assume ...
	~~直に:immediately
	-:unlisted
	あるいは:alternatively
	〜から除外された:the exclusion of
	-:collectively
	属さない:excluding
	属する:belong
	~~求まれる:looking for 〜 more than
	~~伝えて:hearing
	ありがたい:appreciate
	注記:note
	原因に:caused
	精緻~化:fine-tune
	〜全般:〜-wide
	きちんと:well-


	●言い換え

	`強調~疑似要素$の~cascade:highlight cascade
	根~要素（ `root$ps ）:::root custom property match
	綴りが誤っている:misspelled
	とされた:flag
	型~選択子:tag selector
	対象:target or object
	にもなる:that happen to be
	向けに:against
	各〜ごと:every

	●未分類
存続期間:lifetime:~
現れる:appearする:~
近似-:approximate:~
勝つ:winする:優先される
綴り:spelling:~
収まる:fitする:~
片:fragment:~
編集-:edit:~
慣習:tradition:~
図形:shape:~
同一性:identity:~
component::::コンポーネント

	同時に:simultaneous
	得られ:get
	埋め方:how to fill out
	保つ:kept
	またがり:cross
	され続け:continue
	-:execute
	h2:level-2 header
	-:source
	-:-sourced
	~NULL性:nullness
	列:sequence
	日付~入力:date-input
	年, 月, 日:year-month-day
	住所録:address book
	~obj~model:OM
	we
	bare
	~targetにされ:targeted
	変わり得る:varying
	得られ:yield
	以前の:previous
	前掲の:earlier
	周り:around
	のみ／すぐ:just
	残り:rest
	の始め:at the beginning
	始めの所:beginning
	:non-
	:anything
	全体:throughout
	一部分:piece
	一部は〜でもあり:a subset of
	同様に:like
	だけ:alone
	しか〜ない:solely
	他の，〜部分:the rest
	を与える数:numeric
	最終的には:finally
	-:anyone
	^en:congruent
	まで:as far as
	各種:each type of

●●html_code_list

■first-line-pseudo-1
<p>これは、いくぶん長い HTML 段落であり、何行かに分断される。
最初の行は、 ::first-line によりスタイルされる。
他の行は、段落内の普通の行として扱われることになる。</p>

<P>This is a somewhat long HTML paragraph
that will be broken into several lines.
The first line will be styled
by the ‘::first-line’ pseudo-element.
The other lines will be treated
as ordinary lines in the paragraph.</P>

■first-text-line-1
<div><p style="display: inline-block">Hello<br>Goodbye</p> etcetera</div>

<DIV><P STYLE="display: inline-block">Hello<BR>Goodbye</P> etcetera</DIV>

■first-text-line-2
<div>
  <p>最初の段落</p>
  <p>二番目の段落</p>
</div>

<DIV>
  <P>First paragraph</P>
  <P>Second paragraph</P>
</DIV>

■first-text-line-3
<div>
  <p>＜<div::first-line><p::first-line>＞最初の段落＜</p::first-line></div::first-line>＞</p>
  <p>＜<p::first-line>＞二番目の段落＜</p::first-line>＞</p>
</div>

<DIV>
  <P><DIV::first-line><P::first-line>First paragraph</P::first-line></DIV::first-line></P>
  <P><P::first-line>Second paragraph</P::first-line></P>
</DIV>

■first-line-inheritance-1
<p>＜<p::first-line>＞これは、いくぶん長い HTML 段落であり、何行＜</p::first-line>＞かに分断される。
最初の行は、 ::first-line によりスタイルされる。
他の行は、段落内の普通の行として扱われることになる。</p>

<P><p::first-line>This is a somewhat long HTML paragraph
that</p::first-line> will be broken into several lines.
The first line will be styled
by the ‘::first-line’ pseudo-element.
The other lines will be treated
as ordinary lines in the paragraph.</p>

■first-line-inheritance-2
<p>＜<p::first-line>＞これは、いくぶん長い HTML ＜</p::first-line>＞段落であり、何行かに分断される。
最初の行は、 ::first-line によりスタイルされる。
他の行は、段落内の普通の行として扱われることになる。</p>

<p><p::first-line>This is a somewhat long</p::first-line> HTML paragraph
that will be broken into several lines.
The first line will be styled
by the ‘::first-line’ pseudo-element.
The other lines will be treated
as ordinary lines in the paragraph.</p>

■first-line-inheritance-3
<p>＜<span>＞これは、いくぶん長い HTML 段落であり、何行かに分断される。＜</span>＞
最初の行は、 ::first-line によりスタイルされる。
他の行は、段落内の普通の行として扱われることになる。</p>

<p><span>This is a somewhat long HTML paragraph
that will be broken into several lines.</span>
The first line will be styled
by the ‘::first-line’ pseudo-element.
The other lines will be treated
as ordinary lines in the paragraph.</p>

■first-line-inheritance-4
<p>＜<p::first-line><span>＞これは、いくぶん長い HTML 段落であり、何行＜</span></p::first-line><span>＞かに分断される。＜</span>＞
最初の行は、 ::first-line によりスタイルされる。
他の行は、段落内の普通の行として扱われることになる。</p>

<p><p::first-line><span>This is a somewhat long HTML paragraph
that</span></p::first-line><span> will be broken into several lines.</span>
The first line will be styled
by the ‘::first-line’ pseudo-element.
The other lines will be treated
as ordinary lines in the paragraph.</p>

■first-letter-application-1
<div><p style="display: inline-block">Hello<br>Goodbye</p> etcetera</div>

<DIV><P STYLE="display: inline-block">Hello<BR>Goodbye</P> etcetera</DIV>

■first-letter-tree-1
<div>
  <p><span>最初の数個の単語</span>
  と段落の残りの内容。
</div>

<div>
  <p><span>The first few words</span>
  and the rest of the paragraph.
</div>

■first-letter-tree-2
<div>
  <p><span>＜<div::first-letter><p::first-letter>＞最＜</…></…>＞初の数個の単語</span>
  と段落の残りの内容。
</div>

<div>
  <p><span><div::first-letter><p::first-letter>T</…></…>he first few words</span>
  and the rest of the paragraph.
</div>

■first-letter-tree-3
<div>
  <p><span>最初の数個の単語</span>
  と段落の残りの内容。
</div>

<div>
  <p><span>“The first few words</span>
  and the rest of the quotation.
</div>

■first-letter-tree-4
<div>
  <p><span><div::first-letter><p::first-letter>＜<div::first-letter::prefix><p::first-letter::prefix>＞“＜</…></…>＞最</…></…>初の数個の単語</span>
  と段落の残りの内容。
</div>

<div>
  <p><span><div::first-letter><p::first-letter><div::first-letter::prefix><p::first-letter::prefix>“</…></…>T</…></…>he first few words</span>
  and the rest of the paragraph.
</div>


■highlight-cascade-1
<p>これと<em>これを</em>強調します。</p>

<p>Highlight this <em>and this</em>.</p>

■highlight-cascade-2
<p class="warning">ある<strong>とても重要な情報</strong></p>

<p class="warning">Some <strong>very important information</strong></p>

■interactions-1
<p>このテキストは、一行に収まらない。</p>

Some text that ends up on two lines

■interactions-2
<p>
  <p::first-line>
    <p::first-letter>
      こ
    </p::first-letter>
    のテキストは、一行に
  </p::first-line>
  収まらない。
</p>

<p>
  <p::first-line>
    <p::first-letter>
      S
    </p::first-letter>
    ome text that
  </p::first-line>
  ends up on two lines
</p>

●●ref_normative

[AV1-ISOBMFF]
    ＜AV1 Codec ISO Media File Format Binding＞. Draft Deliverable. URL: https://aomediacodec.github.io/av1-isobmff/
[CSS-BACKGROUNDS-3]
    Elika Etemad; Brad Kemper. ＜CSS Backgrounds and Borders Module Level 3＞. URL: https://drafts.csswg.org/css-backgrounds/
[CSS-BREAK-4]
    Rossen Atanassov; Elika Etemad. ＜CSS Fragmentation Module Level 4＞. URL: https://drafts.csswg.org/css-break-4/
[CSS-CASCADE-5]
    Elika Etemad; Miriam Suzanne; Tab Atkins Jr.. ＜CSS Cascading and Inheritance Level 5＞. URL: https://drafts.csswg.org/css-cascade-5/
[CSS-CASCADE-6]
    Elika Etemad; Miriam Suzanne; Tab Atkins Jr.. ＜CSS Cascading and Inheritance Level 6＞. URL: https://drafts.csswg.org/css-cascade-6/
[CSS-COLOR-4]
    Chris Lilley; Tab Atkins Jr.; Lea Verou. ＜CSS Color Module Level 4＞. URL: https://drafts.csswg.org/css-color-4/
[CSS-COLOR-ADJUST-1]
    Elika Etemad; et al. ＜CSS Color Adjustment Module Level 1＞. URL: https://drafts.csswg.org/css-color-adjust-1/
[CSS-CONTENT-3]
    Elika Etemad; Dave Cramer. ＜CSS Generated Content Module Level 3＞. URL: https://drafts.csswg.org/css-content-3/
[CSS-DISPLAY-4]
    ＜CSS Display Module Level 4＞. Editor's Draft. URL: https://drafts.csswg.org/css-display-4/
[CSS-INLINE-3]
    Dave Cramer; Elika Etemad. ＜CSS Inline Layout Module Level 3＞. URL: https://drafts.csswg.org/css-inline-3/
[CSS-LISTS-3]
    Elika Etemad; Tab Atkins Jr.. ＜CSS Lists and Counters Module Level 3＞. URL: https://drafts.csswg.org/css-lists-3/
[CSS-MULTICOL-1]
    Florian Rivoal; Rachel Andrew. ＜CSS Multi-column Layout Module Level 1＞. URL: https://drafts.csswg.org/css-multicol/
[CSS-RUBY-1]
    Elika Etemad; et al. ＜CSS Ruby Annotation Layout Module Level 1＞. URL: https://drafts.csswg.org/css-ruby-1/
[CSS-SYNTAX-3]
    Tab Atkins Jr.; Simon Sapin. ＜CSS Syntax Module Level 3＞. URL: https://drafts.csswg.org/css-syntax/
[CSS-TABLES-3]
    François Remy; Greg Whitworth; David Baron. ＜CSS Table Module Level 3＞. URL: https://drafts.csswg.org/css-tables-3/
[CSS-TEXT-3]
    Elika Etemad; Koji Ishii; Florian Rivoal. ＜CSS Text Module Level 3＞. URL: https://drafts.csswg.org/css-text-3/
[CSS-TEXT-4]
    Elika Etemad; et al. ＜CSS Text Module Level 4＞. URL: https://drafts.csswg.org/css-text-4/
[CSS-TEXT-DECOR-4]
    Elika Etemad; Koji Ishii. ＜CSS Text Decoration Module Level 4＞. URL: https://drafts.csswg.org/css-text-decor-4/
[CSS-UI-4]
    Florian Rivoal. ＜CSS Basic User Interface Module Level 4＞. URL: https://drafts.csswg.org/css-ui-4/
[CSS-VARIABLES-1]
    Tab Atkins Jr.. ＜CSS Custom Properties for Cascading Variables Module Level 1＞. URL: https://drafts.csswg.org/css-variables/
[CSS-VARIABLES-2]
    ＜CSS Custom Properties for Cascading Variables Module Level 2＞. Editor's Draft. URL: https://drafts.csswg.org/css-variables-2/
[CSS-WRITING-MODES-3]
    Elika Etemad; Koji Ishii. ＜CSS Writing Modes Level 3＞. URL: https://drafts.csswg.org/css-writing-modes-3/
[CSS-WRITING-MODES-4]
    Elika Etemad; Koji Ishii. ＜CSS Writing Modes Level 4＞. URL: https://drafts.csswg.org/css-writing-modes-4/
[CSS2]
    Bert Bos; et al. ＜Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification＞. URL: https://drafts.csswg.org/css2/
[CSS22]
    Bert Bos. ＜Cascading Style Sheets Level 2 Revision 2 (CSS 2.2) Specification＞. URL: https://drafts.csswg.org/css2/
[CSSOM-1]
    Daniel Glazman; Emilio Cobos Álvarez. ＜CSS Object Model (CSSOM)＞. URL: https://drafts.csswg.org/cssom/
[DOM]
    Anne van Kesteren. ＜DOM Standard＞. Living Standard. URL: https://dom.spec.whatwg.org/
[FILL-STROKE-3]
    Elika Etemad; Tab Atkins Jr.. ＜CSS Fill and Stroke Module Level 3＞. URL: https://drafts.fxtf.org/fill-stroke/
[HTML]
    Anne van Kesteren; et al. ＜HTML Standard＞. Living Standard. URL: https://html.spec.whatwg.org/multipage/
[RFC2119]
    S. Bradner. ＜Key words for use in RFCs to Indicate Requirement Levels＞. March 1997. Best Current Practice. URL: https://datatracker.ietf.org/doc/html/rfc2119
[SELECTORS-4]
    Elika Etemad; Tab Atkins Jr.. ＜Selectors Level 4＞. URL: https://drafts.csswg.org/selectors/
[UAX44]
    Ken Whistler. ＜Unicode Character Database＞. 6 September 2023. Unicode Standard Annex #44. URL: https://www.unicode.org/reports/tr44/tr44-32.html
[URL]
    Anne van Kesteren. ＜URL Standard＞. Living Standard. URL: https://url.spec.whatwg.org/
[WEBIDL]
    Edgar Chen; Timothy Gu. ＜Web IDL Standard＞. Living Standard. URL: https://webidl.spec.whatwg.org/

●●ref_informative

[CSS-BACKGROUNDS-4]
    Bert Bos; Elika J. Etemad; Lea Verou. ＜CSS Backgrounds and Borders Module Level&nbsp;4＞. Proposal for a CSS module. URL: https://drafts.csswg.org/css-backgrounds-4/
[CSS-CASCADE-4]
    Elika Etemad; Tab Atkins Jr.. ＜CSS Cascading and Inheritance Level 4＞. URL: https://drafts.csswg.org/css-cascade-4/
[CSS-DISPLAY-3]
    Elika Etemad; Tab Atkins Jr.. ＜CSS Display Module Level 3＞. URL: https://drafts.csswg.org/css-display/
[CSS-FONTS-4]
    Chris Lilley. ＜CSS Fonts Module Level 4＞. URL: https://drafts.csswg.org/css-fonts-4/
[CSS-SHADOW-PARTS-1]
    Tab Atkins Jr.; Fergal Daly. ＜CSS Shadow Parts＞. URL: https://drafts.csswg.org/css-shadow-parts/
[CSS-TEXT-DECOR-3]
    Elika Etemad; Koji Ishii. ＜CSS Text Decoration Module Level 3＞. URL: https://drafts.csswg.org/css-text-decor-3/
[HTML5]
    Ian Hickson; et al. ＜HTML5＞. URL: https://www.w3.org/html/wg/drafts/html/master/
[SELECTORS-3]
    Tantek Çelik; et al. ＜Selectors Level 3＞. URL: https://drafts.csswg.org/selectors-3/
[UAX29]
    Josh Hadley. ＜Unicode Text Segmentation＞. 16 August 2023. Unicode Standard Annex #29. URL: https://www.unicode.org/reports/tr29/tr29-43.html
[WEB-ANIMATIONS-1]
    Brian Birtles; et al. ＜Web Animations＞. URL: https://drafts.csswg.org/web-animations-1/


●●trans_metadata
<p>
~THIS_PAGEは、~W3Cにより編集者草案として公開された
<a href="~SPEC_URL">CSS Pseudo-Elements Module Level 4</a>
を日本語に翻訳したものです。
~PUB
</p>

●●spec_metadata

最新公表バージョン
	https://www.w3.org/TR/css-pseudo-4/
公表履歴
	https://www.w3.org/standards/history/css-pseudo-4/

フィードバック
	<a href="https://github.com/w3c/csswg-drafts/labels/css-pseudo-4">CSSWG Issues Repository</a>

編集
	Daniel Glazman (Disruptive Innovations)
	<a href="http://fantasai.inkedblade.net/contact">Elika J. Etemad / fantasai</a> (Apple)
	<a href="mailto:stearns@adobe.com">Alan Stearns</a> (Adobe Systems Inc.)

Suggest an Edit for this Spec
	<a href="https://github.com/w3c/csswg-drafts/blob/main/css-pseudo-4/Overview.bs">GitHub Editor</a>
テスト一式
	https://wpt.fyi/results/css/css-pseudo/
commit 履歴
	https://github.com/w3c/csswg-drafts/commits/main/css-pseudo-4

</script>

<body>

<template id="_persisted_parts">

<pre
	class="presentation"
	id="_dgm-first-line-pseudo-2"
>
<mark style="text-decoration: underline">これは、いくぶん長い HTML 段落であり、何行</mark>
かに分断される。最初の行は、 ::first-line
によりスタイルされる。他の行は、段落内の普通
の行として扱われることになる。
</pre>
<!-- 
THIS IS A SOMEWHAT LONG HTML PARAGRAPH THAT
will be broken into several lines. The first
line will be styled by the ‘::first-line’
pseudo-element. The other lines will be 
treated as ordinary lines in the paragraph.
-->

<pre
	class="presentation"
	id="_dgm-first-line-pseudo-3"
>
<mark style="text-decoration: underline">これは、いくぶん長い HTML</mark>
段落であり、何行かに分断さ
れる。最初の行は、 ::first-
line によりスタイルされる。
他の行は、段落内の普通の行
として扱われることになる。
</pre>

<!-- 
THIS IS A SOMEWHAT LONG
HTML paragraph that will
be broken into several
lines. The first line will
be styled by the
‘::first-line’ pseudo-
element. The other lines
will be treated as ordinary
lines in the paragraph.
-->

<x-diagram
	id="_ex-first-letter2"
	aria-describedby="_dgm-first-letter2"
	style="width:8em; border:thin solid silver;" lang="en"
>
<span style="display:inline-block; float: left; font-size: 300%; font-style:italic; line-height:1em">“A</span> bird in the hand is worth two in the bush,” says an old proverb.
</x-diagram>
<!-- first-letter2.gif -->


<x-diagram
	id="_dgm-first-letter-pseudo-1"
	class="railroad"
>

<svg class="railroad-diagram" height="139" viewBox="0 0 775.0 139" width="775.0" xmlns="http://www.w3.org/2000/svg">
 <g transform="translate(.5 .5)">
  <g>
   <path d="M20 38v20m10 -20v20m-10 -10h20"></path>
  </g>
  <g>
   <path d="M40 48h0.0"></path>
   <path d="M255.5 48h0.0"></path>
   <path d="M40.0 48a10 10 0 0 0 10 -10v-8a10 10 0 0 1 10 -10"></path>
   <g>
    <path d="M60.0 20h175.5"></path>
   </g>
   <path d="M235.5 20a10 10 0 0 1 10 10v8a10 10 0 0 0 10 10"></path>
   <path d="M40.0 48h20"></path>
   <g>
    <path d="M60.0 48h0.0"></path>
    <path d="M235.5 48h0.0"></path>
    <g class="non-terminal ">
     <path d="M60.0 48h0.0"></path>
     <path d="M88.5 48h0.0"></path>
     <rect height="22" width="28.5" x="60" y="37"></rect>
     <text x="74.25" y="52">P</text>
    </g>
    <path d="M88.5 48h10"></path>
    <g>
     <path d="M98.5 48h0.0"></path>
     <path d="M235.5 48h0.0"></path>
     <path d="M98.5 48a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path>
     <g>
      <path d="M118.5 28h97.0"></path>
     </g>
     <path d="M215.5 28a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path>
     <path d="M98.5 48h20"></path>
     <g>
      <path d="M118.5 48h0.0"></path>
      <path d="M215.5 48h0.0"></path>
      <path d="M118.5 48h10"></path>
      <g>
       <path d="M128.5 48h0.0"></path>
       <path d="M205.5 48h0.0"></path>
       <path d="M128.5 48h20"></path>
       <g class="non-terminal ">
        <path d="M148.5 48h4.25"></path>
        <path d="M181.25 48h4.25"></path>
        <rect height="22" width="28.5" x="152.75" y="37"></rect>
        <text x="167" y="52">P</text>
       </g>
       <path d="M185.5 48h20"></path>
       <path d="M128.5 48a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path>
       <g class="non-terminal ">
        <path d="M148.5 78h0.0"></path>
        <path d="M185.5 78h0.0"></path>
        <rect height="22" width="37" x="148.5" y="67"></rect>
        <text x="167" y="82">Zs</text>
       </g>
       <path d="M185.5 78a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path>
      </g>
      <path d="M205.5 48h10"></path>
      <path d="M128.5 48a10 10 0 0 0 -10 10v29a10 10 0 0 0 10 10"></path>
      <g>
       <path d="M128.5 97h77.0"></path>
      </g>
      <path d="M205.5 97a10 10 0 0 0 10 -10v-29a10 10 0 0 0 -10 -10"></path>
     </g>
     <path d="M215.5 48h20"></path>
    </g>
   </g>
   <path d="M235.5 48h20"></path>
  </g>
  <g>
   <path d="M255.5 48h0.0"></path>
   <path d="M324.0 48h0.0"></path>
   <path d="M255.5 48h20"></path>
   <g class="non-terminal ">
    <path d="M275.5 48h0.0"></path>
    <path d="M304.0 48h0.0"></path>
    <rect height="22" width="28.5" x="275.5" y="37"></rect>
    <text x="289.75" y="52">L</text>
   </g>
   <path d="M304.0 48h20"></path>
   <path d="M255.5 48a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path>
   <g class="non-terminal ">
    <path d="M275.5 78h0.0"></path>
    <path d="M304.0 78h0.0"></path>
    <rect height="22" width="28.5" x="275.5" y="67"></rect>
    <text x="289.75" y="82">N</text>
   </g>
   <path d="M304.0 78a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path>
   <path d="M255.5 48a10 10 0 0 1 10 10v40a10 10 0 0 0 10 10"></path>
   <g class="non-terminal ">
    <path d="M275.5 108h0.0"></path>
    <path d="M304.0 108h0.0"></path>
    <rect height="22" width="28.5" x="275.5" y="97"></rect>
    <text x="289.75" y="112">S</text>
   </g>
   <path d="M304.0 108a10 10 0 0 0 10 -10v-40a10 10 0 0 1 10 -10"></path>
  </g>
  <g>
   <path d="M324.0 48h0.0"></path>
   <path d="M735.0 48h0.0"></path>
   <path d="M324.0 48a10 10 0 0 0 10 -10v-8a10 10 0 0 1 10 -10"></path>
   <g>
    <path d="M344.0 20h371.0"></path>
   </g>
   <path d="M715.0 20a10 10 0 0 1 10 10v8a10 10 0 0 0 10 10"></path>
   <path d="M324.0 48h20"></path>
   <g>
    <path d="M344.0 48h0.0"></path>
    <path d="M715.0 48h0.0"></path>
    <g class="non-terminal ">
     <path d="M344.0 48h0.0"></path>
     <path d="M474.5 48h0.0"></path>
     <rect height="22" width="130.5" x="344" y="37"></rect>
     <text x="409.25" y="52">P − (Ps ∪ Pd)</text>
    </g>
    <path d="M474.5 48h10"></path>
    <g>
     <path d="M484.5 48h0.0"></path>
     <path d="M715.0 48h0.0"></path>
     <path d="M484.5 48a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path>
     <g>
      <path d="M504.5 28h190.5"></path>
     </g>
     <path d="M695.0 28a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path>
     <path d="M484.5 48h20"></path>
     <g>
      <path d="M504.5 48h0.0"></path>
      <path d="M695.0 48h0.0"></path>
      <path d="M504.5 48h10"></path>
      <g>
       <path d="M514.5 48h0.0"></path>
       <path d="M685.0 48h0.0"></path>
       <path d="M514.5 48h20"></path>
       <g class="non-terminal ">
        <path d="M534.5 48h0.0"></path>
        <path d="M665.0 48h0.0"></path>
        <rect height="22" width="130.5" x="534.5" y="37"></rect>
        <text x="599.75" y="52">P − (Ps ∪ Pd)</text>
       </g>
       <path d="M665.0 48h20"></path>
       <path d="M514.5 48a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path>
       <g class="non-terminal ">
        <path d="M534.5 78h46.75"></path>
        <path d="M618.25 78h46.75"></path>
        <rect height="22" width="37" x="581.25" y="67"></rect>
        <text x="599.75" y="82">Zs</text>
       </g>
       <path d="M665.0 78a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path>
      </g>
      <path d="M685.0 48h10"></path>
      <path d="M514.5 48a10 10 0 0 0 -10 10v29a10 10 0 0 0 10 10"></path>
      <g>
       <path d="M514.5 97h170.5"></path>
      </g>
      <path d="M685.0 97a10 10 0 0 0 10 -10v-29a10 10 0 0 0 -10 -10"></path>
     </g>
     <path d="M695.0 48h20"></path>
    </g>
   </g>
   <path d="M715.0 48h20"></path>
  </g>
  <path d="M 735.0 48 h 20 m -10 -10 v 20 m 10 -20 v 20"></path>
 </g>
</svg>
</x-diagram>

</template>

<header>
	<hgroup>
<h1>疑似要素 — CSS Pseudo-Elements Module Level 4</h1>
	</hgroup>

</header>

<div id="MAIN" hidden>
	<section id="abstract">
◎要約

<p>
この~CSS~moduleは、
疑似要素を定義する。
それは、
~CSS描画-~treeの［
選択して~styleできる部位
］を表現する抽象的な要素である。
◎
This CSS module defines pseudo-elements, abstract elements that represent portions of the CSS render tree that can be selected and styled.
</p>

~CSSisaLANG

	</section>
	<section id="sotd">
◎位置付け

<p>
これは、編集者草案の公な複製です…
【以下、この節の他の内容は，~SOTD-CSSに移譲。】
</p>

<p>
次に挙げる特能は、
`~risk下＠~CSScommon#at-risk$にあり，
勧告候補の期間中に落とされるかもしれません：
◎
The following features are at-risk, and may be dropped during the CR period:
</p>
<ul>
	<li>
`first-letter$pe の`下位-疑似要素$【！下位-要素】 `prefix$pe, `postfix$pe
◎
the ::prefix and ::postfix sub-elements of ::first-letter
</li>
</ul>

	</section>

<main id="MAIN0">

	<section id="intro">
<h2 title="Introduction">1. 序論</h2>

◎非規範的

<p>
`疑似要素$は、［
文書~言語により明示的に作成される要素
］を超える［
文書の抽象的な要素
］を表現する。
疑似要素は［
文書~treeを成す要素~~単位に制約されない
］ので、［
文書の~tree構造に対応付けられない部位
］であっても［
選択して~styleする
］ために利用できる。
一例として，
`first-line$pe 疑似要素は、
`出自の要素$の`整形される最初の行l$
— ~layoutにおいて~textを`折返した後^emにおけるそれ —
の内容を選択でき，［
その行lにだけ，段落の残りと異なる~styleをあてがう
］ことを許容する。
◎
Pseudo-elements represent abstract elements of the document beyond those elements explicitly created by the document language. Since they are not restricted to fitting into the document tree, they can be used to select and style portions of the document that do not necessarily map to the document’s tree structure. For instance, the ::first-line pseudo-element can select content on the first formatted line of an element after text wrapping, allowing just that line to be styled differently from the rest of the paragraph.
</p>

<p>
各~疑似要素には、
その`出自の要素$が結付けられる。
疑似要素の構文は、
`<var>(疑似要素の名前)</var>^pe の形をとる。
この~moduleは、［
~CSSに存在する疑似要素
］, および［
それらをどう~styleできるか
］を定義する。
疑似要素についての［
より一般な情報, 構文, 他の`選択子$との相互作用
］については、
`SELECTORS-4$r を見よ。
◎
Each pseudo-element is associated with an originating element and has syntax of the form ::name-of-pseudo. This module defines the pseudo-elements that exist in CSS and how they can be styled. For more information on pseudo-elements in general, and on their syntax and interaction with other selectors, see [SELECTORS-4].
</p>

	</section>
	<section id="typographic-pseudos">
<h2 title="Typographic Pseudo-elements">2. ~typographic疑似要素</h2>

		<section id="first-line-pseudo">
<h3 title="First-Line Text: the ::first-line pseudo-element">2.1. 最初の行lを成す~text： `first-line^pe 疑似要素</h3>

<p>
`first-line@pe
`疑似要素$は、
その`出自の要素$の`整形される最初の行l$の内容を表現する。
◎
The ::first-line pseudo-element represents the contents of the first formatted line of its originating element.
</p>

<div class="example">

<div>
<p>
次の規則は、
“各 `p^e 要素ごとに，その最初の行lに下線を引く”
【！“各 `p^e 要素ごとに その最初の行lを成す字lたちを大文字に変更する”】
ことを意味する：
</p>

<pre class="lang-css">
p::first-line { `text-decoration$p: underline }
</pre>

◎
The rule below means “change the letters of the first line of every p element to uppercase”:
• p::first-line { text-transform: uppercase }
</div>

<p>
選択子 `p::first-line^css に合致する~DOM要素は無い。
それが合致するのは、［
~UAが各 `p^e 要素の始めの所に自動的に挿入することになる，疑似要素
］である。
◎
The selector p::first-line does not match any real document element. It instead matches a pseudo-element that the user agent will automatically insert at the beginning of every p element.
</p>
</div>

<p class="note">注記：
最初の行lの長さは、
いくつもの要因
— ~pageの横幅, ~font~size, 等々 —
に依存することに注意。
◎
Note: Note that the length of the first line depends on a number of factors, including the width of the page, the font size, etc.
</p>

<div class="example" id="first-line-example">

<p>
例えば，次のような普通の~HTML段落は：
◎
For example, given an ordinary HTML [HTML5] paragraph such as:
</p>

`first-line-pseudo-1^xCode

<p>
当の要素の横幅に依存して，
次のように何~行lかに分断されるであろう：
◎
Depending on the width of the element, its lines might be broken as follows:
</p>

`first-line-pseudo-2^dgm

<p>
あるいは、
次のように：
◎
or alternately as follows:
</p>

`first-line-pseudo-3^dgm
</div>

			<section id="first-text-line">
<h4 title="Finding the First Formatted Line">2.1.1. 整形される最初の行lの見出法</h4>

<p>
~CSSにおいては、
`first-line$pe 疑似要素の効果があるのは，
`塊~容器$に付されたときに限られる：
◎
In CSS, the ::first-line pseudo-element can only have an effect when attached to a block container:
</p>
<ul>
	<li>
`塊~容器$のうち［
`行内~整形~文脈$を確立するもの
］の
`整形される最初の行l@
は、
その最初の`行l~box$を成す`行内~level$の内容を表現する。
◎
The first formatted line of a block container that establishes an inline formatting context represents the inline-level content of its first line box.
</li>
	<li>
［
`塊~容器$／`複-柱~容器$
］のうち［
`塊~level$の（かつ`~table包装~box$でない）内容を包含するもの
］の`整形される最初の行l$は、［
その`~flow内$にある`塊~level$の子のうち，最初のもの
］の`整形される最初の行l$になる。
そのような行lは存在しない場合、
`整形される最初の行l$は無い。
◎
The first formatted line of a block container or multi-column container that contains block-level content (and is not a table wrapper box) is the first formatted line of its first in-flow block-level child. If no such line exists, it has no first formatted line.
</li>
</ul>

<p class="note">注記：
`整形される最初の行l$は、空にもなり得る。
例えば，
`&lt;p&gt;&lt;br&gt;First…^samp
における `p^e の最初の行lが包含する字lは無い。
したがって単語 “First” は、`整形される最初の行l$上には無く，
`p::first-line^css により影響されないことになる。
◎
Note: The first formatted line can be an empty line. For example, the first line of the p in &lt;p&gt;&lt;br&gt;First… doesn’t contain any letters. Thus the word “First” is not on the first formatted line, and will not be affected by p::first-line.
</p>

<div class="note">
<p>注記：
`塊~容器$のうち`塊~整形~文脈$に関与しないもの†の最初の行lは、その先祖~要素の`整形される最初の行l$にはなり得ない。
【† おそらく、 “`独立な整形~文脈を確立-$するもの” と記される方が正確aと思われる。】
したがって，次の~markup：
</p>

`first-text-line-1^xCode

<p>
における `div^e の`整形される最初の行l$は、
行l “Hello” ではなく，`行内~塊$（ `p^e ）全体を包含する行lになる。
</p>

◎
Note: The first line of a block container that does not itself participate in a block formatting context cannot be the first formatted line of an ancestor element. Thus, in &lt;DIV&gt;&lt;P STYLE="display: inline-block"&gt;Hello&lt;BR&gt;Goodbye&lt;/P&gt; etcetera&lt;/DIV&gt; the first formatted line of the DIV is not the line “Hello”, but rather the line that contains that entire inline block.
</div>

<p>
複数個の `first-line$pe 疑似要素が同じ`整形される最初の行l$を表現する場合、それらは，各自の`出自の要素$たちと同じ順序で入子にされる。
この行lを成す`行内~level$の内容
— その`根~行内~box$を成す断片も含む —
は、
最も内縁な `first-line$pe `疑似要素$の中に入子にされる。
◎
When a first formatted line is represented by multiple ::first-line pseudo-elements, they are nested in the same order as their originating elements. The inline-level contents of this line—including its root inline box fragment—are nested within the innermost ::first-line pseudo-element.
</p>

<div class="example">
<p>
次の~markupを考える：
◎
Consider the following markup:
</p>

`first-text-line-2^xCode

<p>
各~要素の `first-line$pe 疑似~要素を表現するよう，`仮想の~tag列$を書き出した結果は、次の様になろう：
◎
If we assume a fictional tag sequence to represent the elements’ ::first-line pseudo elements, it would be something like:
</p>

`first-text-line-3^xCode
</div>

			</section>
			<section id="first-line-styling">
<h4 title="Styling the ::first-line Pseudo-element">2.1.2. `first-line^pe 疑似要素の~style法</h4>

<p>
`first-line$pe 疑似要素により生成される`~box$は、
`行内~levelの~box$によるそれと類似に挙動するが，
一定の制約がある。
`first-line$pe 疑似要素には、
次に挙げる~propが適用される：
◎
The ::first-line pseudo-element’s generated box behaves similar to that of an inline-level box, but with certain restrictions. The following CSS properties apply to a ::first-line pseudo-element:
</p>

<ul>
	<li>
すべての~font~prop
`CSS-FONTS-4$r
◎
all font properties (see [CSS-FONTS-4])
</li>
	<li>
`color$p, `opacity$p ~prop
`CSS-COLOR-4$r
◎
the color and opacity properties (see [CSS-COLOR-4])
</li>
	<li>
すべての背景~prop
`CSS-BACKGROUNDS-4$r
◎
all background properties (see [CSS-BACKGROUNDS-4])
</li>
	<li>
植字用~propのうち，行内~要素に適用されるもの
`CSS-TEXT-3$r
◎
any typesetting properties that apply to inline elements (see [CSS-TEXT-3])
</li>
	<li>
すべての~text装飾~prop
`CSS-TEXT-DECOR-3$r
◎
all text decoration properties (see [CSS-TEXT-DECOR-3])
</li>
	<li>
`ruby-position$p ~prop
`CSS-RUBY-1$r
◎
the ruby-position property (see [CSS-RUBY-1])
</li>
	<li>
行内~layout~propのうち，行内~要素に適用されるもの
`CSS-INLINE-3$r
◎
any inline layout properties that apply to inline elements (see [CSS-INLINE-3])
</li>
	<li>
その他、
~~個々の仕様により，
`first-line$pe に適用されるものと定義された~prop
◎
any other properties defined to apply to ::first-line by their respective specifications
</li>
</ul>

<p>
~UAは、
他の~propも適用してヨイ
— ただし、
次に挙げる~propは除外される
⇒＃
`writing-mode$p,
`direction$p,
`text-orientation$p
◎
User agents may apply other properties as well except for the following excluded properties:
• writing-mode
• direction
• text-orientation
</p>

<p class="note">注記：
`first-line$pe に `line-height$p を設定すると、
`根~行内~box$を成す断片のうち［
最初の行lの内容を包装するもの
］へ継承されるので，
最初の行l~boxの縦幅は増減され得る。
◎
Note: Setting line-height on ::first-line inherits to the fragment of the root inline box that wraps the contents of the first line, and therefore can both increase and decrease the height of the first line box.
</p>

			</section>
			<section id="first-line-inheritance">
<h4 title="Inheritance and the ::first-line Pseudo-element">2.1.3. 継承と `first-line^pe 疑似要素</h4>

<p>
最初の行l上に生じる子を成す`~box断片$は、
`first-line$pe 疑似要素から標準な`継承d~prop$を`継承-$する
— 上で除外した~propを除いて。
他の~propは、
`~custom~prop$ `CSS-VARIABLES-1$r
も含め，すべて `first-line$pe 疑似要素の［
疑似要素でない親
］から継承する
（最初の行l上には生じない子~要素の部位は、
常に，そのような親から継承する）。
◎
During CSS inheritance, the fragment of a child that occurs on the first line inherits any standard inherited properties—except the properties excluded above—from the ::first-line pseudo-element. For all other properties, including all custom properties [CSS-VARIABLES-1], inheritance is from the non-pseudo parent. (The portion of a child element that does not occur on the first line always inherits from the non-pseudo parent.)
</p>

<div class="example">
<p>
共通的な（標準な`継承d~prop$の）事例では、
`first-line$pe 疑似要素［
から／の中へ
］の`継承$は、
`first-line^pe を表現する
`仮想の~tag列@
（ `fictional tag sequence^en ）を書き出すことで解せる。
◎
In the common case (of standard inherited CSS properties), inheritance into and from a ::first-line pseudo-element can be understood by writing out a fictional tag sequence to represent ::first-line.＼
</p>

<p>
`前掲の例＠#first-line-example$を考える。
最初の描画~事例では、
`仮想の~tag列$は，次のようになる：
◎
Consider the earlier example; in case of the first rendering, the fictional tag sequence would be:
</p>

`first-line-inheritance-1^xCode

<p>
2 番目の描画~事例では：
◎
And in the case of the second rendering:
</p>

`first-line-inheritance-2^xCode
</div>

<div class="example">
<p>
疑似要素が~DOM要素を分断する場合、
その効果は，［
要素を閉じてから，また開く
］ような`仮想の~tag列$で記述できることが多い。
前掲の例を，その最初の文が `span^e 要素に包摂されるよう~mark-upしたとする：
◎
If a pseudo-element breaks up a real element, the effect can often be described by a fictional tag sequence that closes and then re-opens the element. Suppose we mark up the earlier example with a span element encompassing the first sentence:
</p>

`first-line-inheritance-3^xCode

<p>
最初の描画における効果は、
次の`仮想の~tag列$と類似になろう：
◎
The effect of the first rendering would be similar to the following fictional tag sequence:
</p>

`first-line-inheritance-4^xCode

<p class="trans-note">【
分断された `span^e のうち最初の行lに属する方は、
`first-line^pe 疑似要素の中に入子にされるので，
`first-line^pe から継承することになる。
】</p>
</div>

			</section>
		</section>
		<section id="first-letter-pseudo">
<h3 title="First-Letter Text: ::first-letter pseudo-element and its ::prefix and ::postfix children">2.2. 最初の字lを成す~text： `first-letter^pe 疑似要素, その子 `prefix^pe, `postfix^pe</h3>

<figure>
<p class="alt" id="_dgm-first-letter2">
`先頭字$（この例では埋没~頭字）には、
その前にある（それを括っている）引用符も含まれる。
◎
A drop-cap initial letter, including the opening quotation mark before it.
</p>
</figure>

<p>
`first-letter@pe
`疑似要素$は、
その`出自の要素$の
`最初の字lを成す~text@
を表現する
— それは、
要素の`最初の字l$, および それに結付けられた約物からなる。
要素の
`最初の字l@
は、
要素の`整形される最初の行l$にある［
`~Unicode字種$［
`Letter^uc（ `L*^uc ）／
`Number^uc（ `N*^uc ）／
`Symbol^uc（ `S*^uc ）
］に属する`~typographic文字~単位$
］のうち最初のものである。
`first-letter$pe 疑似要素は、［
`先頭字$（  “持上げ頭字” や “埋没~頭字” ）などの共通的な~typographic効果
］を作成するときに利用できる。
◎
The ::first-letter pseudo-element represents the first Letter, Number, or Symbol (Unicode category L*, N*, or S*) typographic character unit on the first formatted line of its originating element (the first letter) as well as its associated punctuation. Collectively, this text is the first-letter text. The ::first-letter pseudo-element can be used to create “initial caps” and “drop caps”, which are common typographic effects.
</p>

<div class="example">
<p>
例えば，次の規則は、［
`CSS-INLINE-3$r にて定義される `initial-letter$p ~prop
］を利用して，各［
`h2^e に後続する段落
］ごとに 2 行lに~spanする埋没~頭字を作成する：
◎

For example, the following rule creates a 2-line drop-letter on every paragraph following a level-2 header, using the initial-letter property defined in [CSS-INLINE-3]:
</p>

<pre class="lang-css">
h2 + p::first-letter { initial-letter: 3; }
</pre>
</div>

<p class="note">注記：
`最初の字l$は、
数字にもなり得る
— 例： “67 億もの大金…” の "6" など。
◎
Note: The first letter may in fact be a digit, e.g., the “6” in “67 million dollars is a lot of money.”
</p>

<p>
［
`最初の字l$, それに隣接な約物
］に独立な~style付けを許容するため、
`最初の字l$に［
先行して／後続して
］いて，それに結付けられる約物は，
`first-letter$pe `疑似要素$の`下位-疑似要素$［
`prefix@pe
（ `::first-letter::prefix^css ）／
`postfix@pe
（ `::first-letter::postfix^css ）
］により表現される。
`§ 最初の字l, それに結付けられる約物＠#first-letter-pattern$
を見よ。
◎
To allow independent styling of the first letter itself and its adjacent punctuation, associated preceding punctuation is represented by the ::prefix sub-pseudo-element of the ::first-letter pseudo-element (::first-letter::prefix); and associated following punctuation is represented by the ::postfix sub-pseudo-element of the ::first-letter pseudo-element (::first-letter::postfix). See § 2.2.1 First Letters and Associated Punctuation, below.
</p>

<p class="trans-note">【
これらの下位-疑似要素は、
現時点では `first-letter$pe “~~専用” だが，
将来には他の疑似要素との組合nも定義されるかもしれない。
】</p>

			<section id="first-letter-pattern">
<h4 title="First Letters and Associated Punctuation">2.2.1. 最初の字l, それに結付けられる約物</h4>

<p>
`CSS-TEXT-3$r
`§ 文字と字l＠~CSSTEXT#characters$
に説明されるとおり、
`~typographic文字~単位$は，複数個の~Unicode符号位置からなり得る。
例えば，結合~文字は、
その基底~文字と伴に保つモノトスル。
また，一部の言語には、
ある種の字lの組合nを扱う方法について，追加的な規則もある。
例えば~Dutchでは、
要素の始めに 字lの組合n "ij" が現れる場合，［
両~字lとも `first-letter$pe 疑似要素の中にある
］と見なされるベキである
`UAX29$r
。
~UAは，［
`最初の字l$を選定するとき
］は、［
`first-letter$pe 疑似要素の<em>`包含塊$</em>の`内容~言語$
］による［
最初の字lに対する慣習
］を反映するよう［
自身による`~typographic文字~単位$の定義
］を誂えるベキである。
◎
As explained in CSS Text 3 § 1.4 Characters and Letters, a typographic character unit can include more than one Unicode codepoint. For example, combining characters must be kept with their base character. Also, languages may have additional rules about how to treat certain letter combinations. In Dutch, for example, if the letter combination "ij" appears at the beginning of an element, both letters should be considered within the ::first-letter pseudo-element. [UAX29] When selecting the first letter, the UA should tailor its definition of typographic character unit to reflect the first-letter traditions of the ::first-letter pseudo-element’s containing block’s content language.
</p>

<div>
<p>
`first-letter$pe 疑似要素の`最初の字lを成す~text$には、
その`最初の字l$に［
先行する／後続する
］文字~並びとして，次を満たすものを含めるモノトスル：
</p>
<ul>
	<li>
<p>
次に挙げる文字のみからなる：
</p>
		<ul>
			<li>
約物
— すなわち、
`~Unicode字種$ `Punctuation^uc （ `P*^uc ）に属するもの `UAX44$r
</li>
			<li>
~typographic~space
— すなわち、
`~Unicode字種$ `Zs^uc に属する, かつ［
`3000^U `IDEOGRAPHIC SPACE^cn ／`単語~分離子$
］`以外^emの文字
</li>
		</ul>
	</li>
	<li>
文字~並びが`最初の字l$に後続する場合、
それを成すどの約物も，`~Unicode字種$［
`Open Punctuation^uc （ `Ps^uc ）／
`Dash Punctuation^uc（ `Pd^uc ）
］には属さない。
</li>
	<li>
文字~並びの［
最初／最後
］の文字は、
文字~並びが`最初の字l$に［
先行する／後続する
］場合には，~typographic~spaceでない。
</li>
</ul>

<p class="trans-note">【
［
“先行する” ／ “後続する”
］の意味は、
双方向-~textにおける並替ngの［
前, 後
］どちらに基づく？
】</p>
◎
Preceding and following punctuation must also be included as part of the first-letter text in the ::first-letter pseudo-element as follows:
• All punctuation—i.e, characters that belong to the Punctuation (P*) Unicode general category [UAX44]—that precedes the first letter.
• Any Punctuation other than opening punctuation and dashes—i.e. characters that belong to the Punctuation (P*) Unicode general category, excluding Open Punctuation (Ps) and Dash Punctuation (Pd)—that follows the first letter.
• Any intervening typographic space—i.e. characters that belong to the Zs Unicode general category [UAX44] other than U+3000 IDEOGRAPHIC SPACE or any word-separator characters
</div>

<div class="note">注記：
<p>
非正式には，
`最初の字lを成す~text$の~patternは、
概ね（ `Zs^uc から除外された単語~分離子を無視するなら）
`(P (Zs|P)*)? (L\|N\|S) ((Zs|P−(Ps|Pd))* (P−(Ps|Pd))?^c
として，あるいは
`([P] [Zs P]*)? [L N S] ([Zs [P--[Ps Pd]]]* [P--[Ps Pd]])?^c
としても表現できる。
◎
Informally represented, the first-letter text’s pattern here can be roughly (ignoring the exclusion of word separators from Zs) represented as (P (Zs|P)*)? (L\|N\|S) ((Zs|P−(Ps|Pd))* (P−(Ps|Pd))? or, alternatively, ([P] [Zs P]*)? [L N S] ([Zs [P--[Ps Pd]]]* [P--[Ps Pd]])?
</p>

`first-letter-pseudo-1^dgm
</div>

<p>
［
`~typographic文字~単位$, それらの~Unicode~prop
］についての情報は、
`CSS-TEXT-3$r ［
`§ 文字と字l＠~CSSTEXT#characters$,
`§ 文字の~prop＠~CSSTEXT#character-properties$
］を見よ。
◎
See CSS Text 3 § 1.4 Characters and Letters and CSS Text 3 § E Characters and Properties for more information on typographic character units and their Unicode properties. [CSS-TEXT-3]
</p>

			</section>
			<section id="first-letter-application">
<h4 title="Finding the First-Letter Text">2.2.2. 最初の字lを成す~textの見出法</h4>

<p>
`first-line$pe と同じく、
`first-letter$pe 疑似要素が効果を発揮するのは，
`塊~容器$に付されたときに限られる。
その`最初の字lを成す~text$は、［
その`出自の要素$の`整形される最初の行l$において`行内~整形~文脈$に関与している`行内~level$の内容
］のうち，最初に来るものになる
— 同じ行lに他の`~flow内$にある内容（画像や行内~tableなど）が先行していないならば。
◎
As with ::first-line, the ::first-letter pseudo-element can only have an effect when attached to a block container. Its first-letter text is the first such inline-level content participating in the inline formatting context of its originating element’s first formatted line, if it is not preceded by any other in-flow content (such as images or inline tables) on its line.
</p>

<p>
この目的においては、
`~marker~box$は，`~flow外$にあったかのように無視される。
一方で，要素が`~flow内$にある［
`before$pe ／ `after$pe
］内容を有する場合、
`最初の字lを成す~text$は，
そのような生成d内容も要素の内容に`含める^em下で選定される。
◎
For this purpose, any marker boxes are ignored, as if they were out-of-flow. However, if an element has in-flow ::before or ::after content, the first-letter text is selected from the content of the element including that generated content.
</p>

<div class="example">
<p>
例えば，次の規則が与えられた下では：
</p>

<pre class="lang-css">
p::before {content: "Note: "}
</pre>

<p>
選択子 `p::first-letter^css は、
"Note" の "N" に合致する。
</p>

◎
Example: After the rule p::before {content: "Note: "}, the selector p::first-letter matches the "N" of "Note".
</div>

<p>
対象の~textは存在しない場合、［
`最初の字lを成す~text$,
`first-letter$pe 疑似要素
］どちらも無い。
◎
If no qualifying text exists, then there is no first-letter text and no ::first-letter pseudo-element.
</p>

<p class="note">注記：
`整形される最初の行l$が空なときは、
`first-letter$pe 合致するものは無い。
例えば，~HTML片
`&lt;p&gt;&lt;br&gt;First...^samp
には、
最初の行lが包含する字lは無いので，
`first-letter^pe に合致するものも無い。
特に，2 行l目にある “First” の “F” には合致しない。
◎
Note: When the first formatted line is empty, ::first-letter will not match anything. For example, in this HTML fragment: &lt;p&gt;&lt;br&gt;First... the first line doesn’t contain any letters, so ::first-letter doesn’t match anything. In particular, it does not match the “F” of “First”, which is on the second line.
</p>

<div class="note">
<p>
注記：
`first-line$pe と同じく，［
`塊~容器$のうち`塊~整形~文脈$に関与しないもの†
］の`最初の字lを成す~text$は、
先祖~要素の`最初の字lを成す~text$にはなり得ない。
【† おそらく、 “`独立な整形~文脈を確立-$するもの” と記される方が正確aと思われる。】
したがって，次の~markup：
</p>

`first-letter-application-1^xCode

<p>
における
`div^e の`最初の字l$は "H" ではない。
事実，`div^e には最初の字lは無い。
</p>
◎
Note: As with ::first-line, the first-letter text of a block container that does not participate in a block formatting context cannot be the first-letter text of an ancestor element. Thus, in &lt;DIV&gt;&lt;P STYLE="display: inline-block"&gt;Hello&lt;BR&gt;Goodbye&lt;/P&gt; etcetera&lt;/DIV&gt; the first letter of the DIV is not the letter “H”. In fact, the DIV doesn’t have a first letter.
</div>

<p>
`最初の字lを成す~text$のある部位が次の行lに包装される場合、
その部位は，もはや `first-letter$pe `疑似要素$の一部を形成しない。
◎
Any portion of the first-letter text that is wrapped to the next line no longer forms part of the ::first-letter pseudo-element.
</p>

			</section>
			<section id="first-letter-tree">
<h4 title="Inheritance and Box Tree Structure of the First-Letter Pseudo-elements">2.2.3. `first-letter^pe 疑似要素の継承と~box~tree構造</h4>

<p>
`first-letter$pe 疑似要素は、
それが表現する`最初の字lを成す~text$を~~直に包装する
— その~textが子孫~内にある場合でも。
複数個の `first-letter$pe 疑似要素が同じ`最初の字lを成す~text$を表現する場合、
それらは，各自の`出自の要素$たちと同じ順序で入子にされ、
`継承$は，それに則って挙動する。
◎
The ::first-letter pseudo-element is wrapped immediately around the first-letter text it represents, even if that text is in a descendant. When a first-letter text is represented by multiple ::first-letter pseudo-elements, they are nested in the same order as their originating elements. Inheritance behaves accordingly.
</p>

<div class="example">
<p>
次の~markupを考える：
◎
Consider the following markup:
</p>

`first-letter-tree-1^xCode

<p>
`first-letter$pe 疑似要素（たち）を表現するよう，`仮想の~tag列$を書き出した結果は、
次の様になろう：
◎
If we assume a fictional tag sequence to represent the elements’ ::first-letter pseudo-elements, it would be something like:
</p>

`first-letter-tree-2^xCode
</div>

<p>
`first-letter$pe の［
`prefix^pe ／ `postfix^pe
］`疑似要素$が存在する場合、
それらは最も内縁な `first-letter$pe の中に入子にされ，
他においては `first-letter^pe 自身と類似に解釈される。
◎
If any ::first-letter::prefix or ::first-letter::postfix pseudo-elements exist, they are nested within the innermost ::first-letter, and otherwise interpreted similar to ::first-letter itself.
</p>

<div class="example">
<p>
次の~markupを考える：
◎
Consider the following markup:
</p>

`first-letter-tree-3^xCode

<p>
`first-letter$pe 疑似要素（たち）を表現するよう，`仮想の~tag列$を書き出した結果は、
次の様になろう：
◎
If we assume a fictional tag sequence to represent the elements’ ::first-letter pseudo-elements, it would be something like:
</p>

`first-letter-tree-4^xCode
</div>

<p>
［
`最初の字lを成す~text$を形成する文字たち
］が複数個の要素にまたがる場合
（ `&lt;p&gt;‘&lt;em&gt;T...^samp 内の `‘T^samp のように）、
~UAは，
`first-letter$pe 疑似要素
（および，その`下位-疑似要素$ `prefix$pe ／ `postfix$pe ）
を それらの要素のうち［
いずれか／すべて
］から作成しても，単純に［
疑似要素（たち）を作成しない
］ことにしてもヨイ。
`最初の字lを成す~text$が行lの始端に来ない場合
（例えば，［
双方向-~textの並替ng／
`~list~item$用の`~marker~box$が
<code class="css">`list-style-position$p: `inside^v</code>
を伴うこと
］に因り）、
~UAには，疑似要素（たち）を作成することは要求されない。
◎
If the characters that would form the first-letter text are not all in the same element (as the ‘T in &lt;p&gt;‘&lt;em&gt;T...), the user agent may create the ::first-letter pseudo-element (and its ::prefix or ::postfix sub-elements, if any) from one of the elements, or all elements, or simply not create the pseudo-element(s). Additionally, if the first-letter text is not at the start of the line (for example due to bidirectional reordering, or due to a list item marker with list-style-position: inside), then the user agent is not required to create the pseudo-element(s).
</p>

<p>
`first-letter$pe 疑似要素は、
`first-line$pe 疑似要素の中に包含されるので
— 同じ行l上の`行内~box$と同じく —
`first-line^pe から（直接間接を問わず）継承する。
◎
A ::first-letter pseudo-element is contained within any ::first-line pseudo-elements, and thus inherits (potentially indirectly) from ::first-line, the same as any inline box on the same line.
</p>

			</section>
			<section id="first-letter-styling">
<h4 title="Styling the First-Letter Pseudo-element">2.2.4. `first-letter^pe 疑似要素の~style法</h4>

<p>
~CSSにおける［
`first-letter$pe `疑似要素$,
および その`下位-疑似要素$としての［
`prefix$pe, `postfix$pe
］`疑似要素$
］は、
`行内~box$に類似する。
これらには、
次に挙げる~propが適用される：
◎
In CSS a ::first-letter pseudo-element (and its ::prefix and ::postfix sub-elements) is similar to an inline box. The following properties apply to ::first-letter, ::first-letter::prefix, and ::first-letter::postfix pseudo-elements:
</p>
<ul>
	<li>
すべての~font~prop
`CSS-FONTS-4$r
◎
all font properties (see [CSS-FONTS-4])
</li>
	<li>
`color$p,
`opacity$p
~prop
`CSS-COLOR-4$r
◎
the color and opacity properties (see [CSS-COLOR-4])
</li>
	<li>
すべての背景~prop
`CSS-BACKGROUNDS-4$r
◎
all background properties (see [CSS-BACKGROUNDS-4])
</li>
	<li>
植字用~propのうち，行内~要素に適用されるもの
`CSS-TEXT-4$r
◎
any typesetting properties that apply to inline elements (see [CSS-TEXT-4])
</li>
	<li>
すべての~text装飾~prop
`CSS-TEXT-DECOR-4$r
◎
all text decoration properties (see [CSS-TEXT-DECOR-4])
</li>
	<li>
行内~layout~propのうち，行内~要素に適用されるもの
`CSS-INLINE-3$r
◎
any inline layout properties that apply to inline elements (see [CSS-INLINE-3])
</li>
	<li>
各種
~margin／~padding
~prop
`CSS22$r
◎
margin and padding properties (see [CSS22])
</li>
	<li>
各種~border~prop,
`box-shadow$p
`CSS-BACKGROUNDS-4$r ）
◎
border properties and box-shadow (see [CSS-BACKGROUNDS-4])
</li>
	<li>
その他、
~~個々の仕様により，
`first-letter$pe に適用されるものと定義された~prop
◎
any other properties defined to apply to ::first-letter by their respective specifications
</li>
</ul>

<p>
~UAは、
他の~propを適用してもヨイ。
しかしながら，そのような~propが `first-letter$pe に適用されても、［
`first-letter^pe により表現される`最初の字lを成す~text$
］を成すものは，変化し得ない。
◎
User agents may apply other properties as well. However, in no case may the application of such unlisted properties to ::first-letter change what first-letter text is represented by that ::first-letter.
</p>

<p class="note">注記：
~CSSの以前の~levelでは、
~UAには、［
字lが成す図形に基づいて［
行l高さ, 縦幅や横幅
］を選ぶ／
~font~sizeを近似する／
~layoutを遂行するときに ~glyph外形線を織り込む
］ことも許容されていた。
そのような緩く定義された魔法の可能性は、
意図的に除去された
— ［
意図される利用事例（`埋没~頭字$／`持上げ頭字$）には拙い解決策である
］ことが判明しているのみならず，相互運用能の問題の原因にもなるので。
［
埋没~頭字／持上げ頭字
］の明示的な取扱いは、
`initial-letter$p `CSS-INLINE-3$r を見よ。
◎
Note: In previous levels of CSS, user agents were allowed to choose a line height, width, and height based on the shape of the letter, to approximate font sizes; and to take the glyph outline into account when performing layout. The possibility of such loosely-defined magic has been intentionally removed, as it proved to be a poor solution for the intended use case (drop caps and raised caps), yet caused interoperability problems. See initial-letter in [CSS-INLINE-3] for explicitly handling drop caps and raised caps.
</p>

			</section>
		</section>
	</section>
	<section id="highlight-pseudos">
<h2 title="Highlight Pseudo-elements">3. 強調~用の疑似要素</h2>

		<section id="highlight-selectors">
<h3 title="Selecting Highlighted Content: the ::selection, ::target-text, ::spelling-error, and ::grammar-error pseudo-elements">3.1. 強調された内容の選択-法： `selection^pe, `target-text^pe, `spelling-error^pe, `grammar-error^pe 疑似要素</h3>

<p>
`強調~疑似要素@
（ `highlight pseudo-element^en ）は，［
文書~内で，特定0の地位が与えられた部位
］を表現し、
その地位を利用者に指示するため，概して他と異なる~styleがあてがわれる。
例えば，文書の選択された部位は、
概して，それを表す地位を指示するよう強調される
（代替する背景~色と前景~色, あるいは色~滲みが与えられる）。
`強調~疑似要素$として、
以下に挙げるものが定義される：
◎
The highlight pseudo-elements represent portions of a document that have been given a particular status and are typically styled differently to indicate that status to the user. For example, selected portions of the document are typically highlighted (given alternate background and foreground colors, or a color wash) to indicate their selected status. The following highlight pseudo-elements are defined:
</p>

<dl>
	<dt>`selection@pe</dt>
	<dd>
この疑似要素は、［
未来にアリな，何らかの~UA操作o
］の対象として選定された，文書のある部位を表現する。
例えば、［
~copy操作oにより複製される／~paste操作oにより置換される
］ことになる，編集-可能な~text欄の中の選択された~textに適用される。
◎
The ::selection pseudo-element represents the portion of a document that has been selected as the target or object of some possible future user-agent operation(s). It applies, for example, to selected text within an editable text field, which would be copied by a copy operation or replaced by a paste operation.
</dd>

	<dt>`target-text@pe</dt>
	<dd>
この疑似要素は、
文書~URLの`素片$urlにより直に~targetにされた~textがあれば，それを表現する。
◎
The ::target-text pseudo-element represents text directly targeted by the document URL’s fragment, if any.
</dd>
	<dd class="note">注記：
~URLの`素片$urlが要素を~targetにしているときは、
`target$ps 疑似要素を利用して それを選定できるが，
`target-text$pe には合致しない。
`target-text^pe が合致するのは、
自身が`素片$urlの~targetにされた~textに限られる。
【どのような状況が該当するのか、よくわからない（要素ではなく，~textを~targetにする素片とは？）。】
◎
Note: When a URL fragment targets an element, the :target pseudo-element can be used to select it, but ::target-text does not match anything. It only matches text that is itself targeted by the [fragment].
</dd>

	<dt>`spelling-error@pe</dt>
	<dd>
~UAにより綴りが誤っているとされた，~textの部位を表現する。
◎
The ::spelling-error pseudo-element represents a portion of text that has been flagged by the user agent as misspelled.
</dd>

	<dt>`grammar-error@pe</dt>
	<dd>
~UAにより文法的に不正とされた，~textの部位を表現する。
◎
The ::grammar-error pseudo-element represents a portion of text that has been flagged by the user agent as grammatically incorrect.
</dd>
</dl>

<p>
`強調~疑似要素$は、
要素~treeに収まるとは限らず，入子ng構造を尊守せずに要素~境界を任意にまたがり得る。
◎
The highlight pseudo-elements do not necessarily fit into the element tree, and can arbitrarily cross element boundaries without honoring its nesting structure.
</p>

<p class="note">注記：
~CSSの将来~levelでは、
~custom強調~疑似要素を作成する仕方も導入され得る。
◎
Note: A future level of CSS may introduce ways to create custom highlight pseudo-elements.
</p>

		</section>
		<section id="highlight-styling">
<h3 title="Styling Highlights">3.2. 強調の~style法</h3>

<div>
<p>
`強調~疑似要素$を~styleできる~propは、
~AND↓ を満たすものに制限される：
</p>
<ul>
	<li>
~layoutに影響しない。
【`~securityと~privacyの考慮点＠#highlight-security$を見よ】
</li>
	<li>
~~非常に動的な環境においても高処理能に適用できる。
</li>
	<li>
加えて（相互運用能を確保するため），
`要求される区画＠#highlight-bounds$の中における その描画は、
`強調~overlay$の（~UAにより決定される）正確な限界域には依存しない。
</li>
</ul>
◎
The highlight pseudo-elements can only be styled by a limited set of properties that do not affect layout and can be applied performantly in a highly dynamic environment—and additionally (to ensure interoperability) whose rendering within the required area is not dependent on the exact (UA-determined) bounds of the highlight overlay.＼
</div>

<p>
次に挙げる~propは、
`強調~疑似要素$に適用される：
◎
The following properties apply to the highlight pseudo-elements:
</p>
<ul>
	<li>
`color$p
</li>
	<li>
`background-color$p
</li>
	<li>
`text-decoration$p とそれに結付けられた各種~prop
（【下位propの他に，】 `text-underline-position$p, `text-underline-offset$p も含む【他にもあるかも？】）。
◎
text-decoration and its associated properties (including text-underline-position and text-underline-offset)
</li>
	<li>
`text-shadow$p
</li>
	<li>
`stroke-color$p, `fill-color$p, `stroke-width$p
</li>
	<li>
`~custom~prop$ `CSS-VARIABLES-1$r
◎
custom properties [CSS-VARIABLES-1]
</li>
</ul>

<p>
`強調~疑似要素$には、
`forced-color-adjust$p ~propを設定できない
— しかしながら、
その`出自の要素$に適用された`強制d色~mode$があれば，それを尊守するモノトスル
（したがって、
`出自の要素$の `forced-color-adjust$p の値による制御の~subjectになる）。
◎
The forced-color-adjust property cannot be set on highlight pseudo-elements; however a highlight pseudo-element must honor any forced colors mode applied to its originating element (and is therefore subject to the control of the originating element’s forced-color-adjust value).
</p>

<p class="issue">
ここに含められるべき~propは、
他にもあるか？
◎
Are there any other properties that should be included here?
</p>

<p class="note">注記：
`color$p ~propは、
次に挙げるものの色も設定する
⇒＃
~text,
~textに適用されているすべての`装飾線$（下線, 上線, 取消線）,
［`出自の要素$, その先祖や子孫］により~textに適用される`圏点$（ `text-emphasis$p ）
◎
Note: The color property sets the color of both the text and all line decorations (underline, overline, line-through) and emphasis marks (text-emphasis) applied to the text by the originating element and its ancestors and descendants.
</p>

<p class="note">注記：
歴史的に，（これを書いている時点で）相互運用可能に~supportされているのは、［
`color$p ／ `background-color$p
］に限られている。
◎
Note: Historically (and at the time of writing) only color and background-color have been interoperably supported.
</p>

		</section>
		<section id="highlight-ua-styles">
<h3 title="Default UA Styles">3.3. 既定の~UA~style</h3>

<p>
既定の~UA~stylesheet用として、
次の追加が推奨される：
◎
The following additions are recommended for the default UA stylesheet:
</p>

<pre class="lang-css">
/* <span class="comment">
［
綴り／文法
］の誤りに対する既定の~style法を，調整-可能な仕方で表現する：
◎
Represent default spelling/grammar error styling in an adjustable way
</span> */
:root::spelling-error { text-decoration-line: spelling-error; }
:root::grammar-error  { text-decoration-line: grammar-error; }
</pre>

<p>
一部の`強調~疑似要素$は、
`~pairにされた既定の強調~色@
— ~UAにより供され，一緒に［
利用される／上書きされる
］既定の［
`color$p, `background-color$p
］を有するベキである
— `§ ~pairにされた既定＠#paired-defaults$
を見よ。
それらは、
`selection$pe 用には［
`HighlightText$v, `Highlight$v
］に対応するベキであり，
`target-text$pe 用には［
`MarkText$v, `Mark$v
］に対応するベキである。
◎
Some highlight pseudo-elements should have paired default highlight colors—a default color and background-color provided by the UA that are either used or overridden together, see § 3.3.1 Paired Defaults. For ::selection they should correspond to HighlightText and Highlight, while for ::target-text they should correspond to MarkText and Mark.
</p>

<p>
~UAは、
追加的な効果を適用して強調された内容の呈示を増補してもヨイ
— 例えば、
強調された~text以外の内容を薄くする／
利用者-ヤリトリや計時に基づいて強調~styleが消えていくよう遷移する。
これらは、
~CSSにより制御されない。
◎
UAs may apply additional effects to enhance the presentation of highlighted content, for example dimming content other than the highlighted text or transitioning out a highlight style based on user interactions or timing. These are not controlled by CSS.
</p>

<p class="issue">
強調の呈示に対する~UAによる［
~CSSにより制御される仕方による調節
］は、
現在 `6853$issueにて論の最中にある。
◎
UA tweaks to the presentation of highlights in ways that are controlled by CSS are currently under discussion in Issue 6853.
</p>

			<section id="paired-defaults">
<h4 title="Paired Defaults">3.3.1. ~pairにされた既定</h4>

<p>
互換性の理由により、
`~pairにされた既定の強調~色$は，［
`color$p, `background-color$p
］どちらも`作者~出自$から`~cascaded値$が得られた
（または、
それらの値が作者~出自から継承された）
ときに限り，`使用~値$になるモノトスル。
強調~色が［
`revert$v ／ `revert-layer$v
］のときは、
~cascadeを巻戻した`後^emの出自が，~cascaded値の`出自$を決定する。
◎
For compatibility reasons, paired default highlight colors must only be used when neither color nor background-color yield a cascaded value from the author origin (or inherit their value from the author origin). When a highlight color is revert or revert-layer, the origin after rolling back the cascade determines the cascaded value’s origin.
</p>

<p class="note">注記：
この規則は、
互換性を得るためにあるので，
`fill-color$p や `stroke-color$p の様な他の類似な~propには適用されない。
◎
Note: Because this rule is for compatibility reasons, it does not apply to other similar properties like fill-color or stroke-color.
</p>

<div class="example">

<p>
例えば、
次の~markupが与えられたなら：
◎
For example, given the following markup:
</p>
<pre class="lang-html">&lt;p&gt;Highlight this &lt;em&gt;and this&lt;/em&gt;.&lt;/p&gt;
</pre>

<p>
次に挙げる各~規則は、
どれも
— 作者により与えられた場合には —
`em^e 要素における `selection$pe 用の既定の `background-color$p を抑止することになる：
◎
Any of the following rules would suppress the default background-color for ::selection in the &lt;em&gt; element if given by the author:
</p>

<pre class="lang-css">
em::selection { color: initial; }
em::selection { color: inherit; }
em::selection { color: unset; }
em::selection { color: green; }
p::selection { color: green; }
</pre>
</div>

			</section>
		</section>
		<section id="highlight-bounds">
<h3 title="Area of a Highlight">3.4. 強調を成す区画</h3>

<p>
`各種 強調~用の疑似要素＠#highlight-selectors$
— `selection$pe,
`target-text$pe,
`spelling-error$pe,
`grammar-error$pe —
ごとに，
文書~全体~用の
`強調~overlay@
が存在する
— その作動中な部位は、
対応する`強調~疑似要素$により表現される。
◎
For each type of highlighting (see § 3.1 Selecting Highlighted Content: the ::selection, ::target-text, ::spelling-error, and ::grammar-error pseudo-elements) there exists a single highlight overlay for the entire document, the active portions of which are represented by the corresponding highlight pseudo-element.＼
</p>

<p>
各`~box$は、
自身が直に包含する［
~text／`置換され$る内容
］に対応する，~overlayの一部分を所有する：
◎
Each box owns the piece of the overlay corresponding to any text or replaced content directly contained by the box.
</p>
<ul>
	<li>
~text用には、
~overlayは，少なくとも~em~box全体を覆うモノトスル。
また、
~em~boxを行l~box辺まで更に［
上へ／下へ
］拡張してもヨイ。
文字~間のアキもまた，~overlay区画に含めてもヨイ
— そのようなアキは、［
両側の文字とも包含する要素のうち，最も内縁なもの
］に属し，両~文字とも選択されたとき選択される。
◎
For text, the corresponding overlay must cover at least the entire em box and may extend further above/below the em box to the line box edges. Spacing between two characters may also be part of the overlay area, in which case it belongs to the innermost element that contains both characters and is selected when both characters are selected.
</li>
	<li>
`置換され$る内容に対する~overlayは、
置換される~obj全体を覆うモノトスル。
また、
要素の`内容~box$全体を含むように外方へ拡張してもヨイ。
◎
For replaced content, the associated overlay must cover at least the entire replaced object, and may extend outward to include the element’s entire content box.
</li>
	<li>
~overlayはまた、
要素の`~border~box$の中の，他の区画を含んでもヨイ
— そのような区画は、［
区画を包含する要素のうち，最も内縁なもの
］に属する。
◎
The overlay may also include other areas within the border-box of an element; in this case, those areas belong to the innermost such element that contains the area.
</li>
	<li>
~overlayは，`行内~levelの~box$に対しては、［
`塊-軸$において、
~boxの~border辺の外側へ，~boxが属する`行l~box$の両~辺まで
］拡張してもヨイ。
◎
For an inline-level box, the overlay may extend outside its border edges in the block axis as far as the edges of its line box.
</li>
</ul>

<p class="issue">
次を見よ：
<span lang="en">
`F2F minutes＠https://lists.w3.org/Archives/Public/www-style/2008Nov/0022.html$,
`dbaron’s message＠https://lists.w3.org/Archives/Public/www-style/2008Oct/0268.html$,
`Daniel’s thread＠https://lists.w3.org/Archives/Public/www-style/2010May/0247.html$,
`Gecko notes＠https://lists.w3.org/Archives/Public/www-style/2010May/0261.html$,
`Opera notes＠https://lists.w3.org/Archives/Public/www-style/2010May/0366.html$,
`Webkit notes＠https://lists.w3.org/Archives/Public/www-style/2010May/0280.html$
</span>
◎
See F2F minutes, dbaron’s message, Daniel’s thread, Gecko notes, Opera notes, Webkit notes
</p>

<p class="issue">
これは、
働き方を正しく述べているのか？
◎
Not sure if this is the correct way of describing the way things work.
</p>

		</section>
		<section id="highlight-cascade">
<h3 title="Cascading and Per-Element Highlight Styles">3.5. ~cascade法と要素ごとの強調~style</h3>

<p>
各~要素は、
作動中な自前の部位に`強調~overlay$を描く
— それは、［
当の要素を`出自の要素$とする各`強調~疑似要素$
］に指定された~styleを受取る。
複数の~styleが競合する場合、
~cascadeの結果により決定される~styleが勝つ。
◎
Each element draws its own active portions of the highlight overlays, which receives the styles specified by the corresponding highlight pseudo-element styles for which that element is the originating element. When multiple styles conflict, the winning style is determined by the cascade.
</p>

<p>
所与の~supportされる~propに対し，~cascadeにより［
値が与えられなかった／値［
`inherit$v ／ `unset$v
］が与えられた
］ときには、
その`指定d値$は，`出自の要素$の親~要素の対応している`強調~疑似要素$から継承により決定される
— 当の~propが`継承d~prop$であるか否かを問わず
（`登録-済み~custom~prop$の場合、
その `inherits$d 記述子を問わず
【！`~custom~prop$の場合は，`継承-$するよう登録されたか否かに関わらず】）。
◎
When any supported property is not given a value by the cascade, or given a value of inherit or unset, its specified value is determined by inheritance from the corresponding highlight pseudo-element of its originating element’s parent element. This occurs regardless of whether that property is an inherited property (and regardless of whether that property is a custom property that is registered to inherit or not).
</p>

<p>
加えて，`根~要素$を出自にする`強調~疑似要素$用には：
◎
Additionally, for highlight pseudo-elements originating from the root element:
</p>
<ul>
	<li>
`color$p の`継承d値$は、
その`初期~値$ではなく，
`currentcolor$v になる。
◎
the inherited value of color is currentColor, not the initial value.
</li>
	<li>
`~custom~prop$は、
`根~要素$から継承される
◎
custom properties inherit from the root element.
</li>
</ul>

<div class="example">
<p>
例えば次の規則が：
◎
For example, if the following rules were applied:
</p>

<pre class="lang-css">
p::selection      { color: yellow; background: green; }
p &gt; em::selection { color: orange; }
em::selection     { color:    red; }
</pre>

<p>
次の~markupに適用されていた場合：
◎
to the following markup:
</p>

`highlight-cascade-1^xCode

<p>
`selection$pe 用の背景の強調~色は全体が `green^v になり、
`em^e 要素の外側, 内側の~text色は，順に `yellow^v, `orange^v になる。
◎
The selection highlight would be green throughout, with yellow text outside the &lt;em&gt; element and orange text inside it.
</p>
</div>

<p class="advisement">
複数の選択~styleを求める作者は、
文書~全体にわたる選択~style用に
`:root::selection^css を利用するベキである
— そうすれば、
子孫において きれいに上書きできるようになるので。
`selection$pe だけだと，~tree内の各 要素に適用され、
より特有な~styleが先祖にあっても，それを上書きすることになる。
◎
Authors wanting multiple selections styles should use :root::selection for their document-wide selection style, since this will allow clean overriding in descendants. ::selection alone applies to every element in the tree, overriding the more specific styles of any ancestors.
</p>

<div class="example">
<p>
例えば、
作者が次を指定していて：
◎
For example, if an author specified
</p>
<pre class="lang-css">
::selection { background: blue; }
p.warning::selection { background: red; }
</pre>

<p>
文書が次を含んでいる場合：
◎
and the document included
</p>

`highlight-cascade-2^xCode

<p>
"とても~~重要な~~情報" の強調は `blue^v になる
—  `strong^e 要素の `selection$pe は、
`::selection { background: blue; }^css 規則にも合致するので
（型~選択子が欠落なものは、暗黙な `*^css があることに注意）。
~style規則を次のように与えれば、意図される挙動
（強調は `p.warning^css の中では `red^v, 他所では `blue^v ）になる：
◎
The highlight would be blue over “very important information” because the &lt;strong&gt; element´s ::selection also matches the ::selection { background: blue; } rule. (Remember that * is implied when a tag selector is missing.) The style rules that would give the intended behavior (red highlight within p.warning, blue elsewhere) are
</p>

<pre class="lang-css">
:root::selection { background: blue; }
p.warning::selection { background: red; }
</pre>
</div>

<p>
次の例は、
`~custom~prop$の継承をデモる。
◎
The following example demonstrates the inheritance of custom properties.
</p>

<div class="example">
<p>
例えば，作者が次を指定した場合：
◎
For example, if an author specified
</p>

<pre class="lang-css">
:root {
   --background-color: green;
   --decoration-thickness: 10px;
   --decoration-color: purple;
}
::selection {
  --decoration-thickness: 1px;
  --decoration-color: green;
}
div::selection {
  --decoration-color: blue;
  background-color: var(--background-color, red);
  text-decoration-line: underline;
  text-decoration-style: line;
  text-decoration-thickness: var(--decoration-thickness, 5px);
  text-decoration-color: var(--decoration-color, red);
}
</pre>

<p>
`div^e において選択された内容は、
`div::selection^css による強調により，
その背景は `green^v になり,
太さ `1px^v の `blue^v な下線を伴う
— これらの~styleを与える~custom~prop：
◎
A div’s selection highlight would be a green background to the selected content, with a 1px thick blue underline.＼
</p>
<ul>
	<li>
`--background-color^p （背景）は、
`div::selection^css にも `selection$pe にも見出されないので，
根~要素（ `root$ps ）【！::root custom property match】からとられる。
◎
The --background-color custom property is not found on the div::selection nor ::selection so it is taken from the ::root custom property match.＼
</li>
	<li>
`--decoration-thickness^p （下線の太さ）は、
`強調~疑似要素$の~cascadeを介して `selection^pe から継承される。
◎
The --decoration-thickness property is inherited from ::selection via the highlight cascade＼
</li>
	<li>
`--decoration-color^p （下線の色）は、
`div::selection^css 内に見出される。
◎
and --decoration-color is found in div::selection itself.
</li>
</ul>
</div>

<p class="note">注記：
この挙動は、
標準な実施
— 文書~全般な~custom~propを `root$ps 上で定義すること —
を収容することが意図される。
◎
Note: This behavior is intended to accomodate the standard practice of defining document-wide custom properties on :root.
</p>

		</section>
		<section id="highlight-painting">
<h3 title="Painting the Highlight">3.6. 強調の塗法</h3>

			<section id="highlight-backgrounds">
<h4 title="Backgrounds">3.6.1. 背景</h4>

<p>
各 `強調~疑似要素$は、［
対応する`強調~overlay$を成す部位の上面
］に, かつ［
`有位置$な子孫（もしあれば）の直ぐ背後
］に背景（ `background$p ）を描く
（すなわち、
`CSS2.2 § E.2＠~CSS22/zindex.html$
段 8 の直前）。
［
`grammar-error$pe,
`spelling-error$pe,
`target-text$pe,
`selection$pe
］用の~overlayは、
後に挙げたものほど上面【利用者から見て手前】に描かれる。
◎
Each highlight pseudo-element draws its background over the corresponding portion of the highlight overlay, painting it immediately below any positioned descendants (i.e. just before step 8 in CSS2.2§E.2). The ::selection overlay is drawn over the ::target-text overlay which is drawn over the ::spelling-error overlay which is drawn over the ::grammar-error overlay.
</p>

			</section>
			<section id="highlight-shadows">
<h4 title="Shadows">3.6.2. 影</h4>

<p>
`強調~疑似要素$に適用されている `text-shadow$p は、
対応する`強調~overlay$用の背景の上面に描かれる
（かつ，対象の~textと その装飾に適用された元の【`出自の要素$の】 `text-shadow$p （それも適用され続ける）の上面に）。
その結果、
各~型の`強調~疑似要素$による~text影は，互いに積層される。
◎
Any text-shadow applying to a highlight pseudo-element is drawn over its corresponding highlight overlay background. Such text shadows also stack over each other (and over any original text-shadow applied to the text and its decorations, which continues to apply).
</p>

<p class="note">注記：
各`強調~overlay$用の背景は、
背後の層に属する影を遮るように，その上面に描かれる。
◎
Note: Since each highlight overlay background is drawn over any shadows belonging to the layer(s) below, a highlight overlay background can obscure lower-level shadows.
</p>

			</section>
			<section id="highlight-text">
<h4 title="Text and Text Decorations">3.6.3. ~textと~text装飾</h4>

<p>
`強調~疑似要素$は、［
対象の~text，および［
その~textに適用された~text装飾（影~以外）
］］の通常の描法を抑止する。
代わりに，最も手前にある作動中な`強調~overlay$は、
当の強調【疑似要素】の自前の `color$p を利用して，
当の~text（および，その装飾）を`強調~overlay$用の背景~すべての上面に描直す。
◎
A highlight pseudo-element suppresses the normal drawing of any associated text, and the text decorations (other than shadows) that had been applied to that text. Instead the topmost active highlight overlay redraws that text (and those decorations) over all the highlight overlay backgrounds using that highlight’s own color.
</p>

<p class="note">注記：
このことは、
影と違って，［
`装飾線$／`圏点$
］は［
当の~text用に描かれた強調~overlay用の背景
］により遮られないことを意味する。
◎
Note: This means that unlike shadows, line decorations and emphasis marks won’t be obscured by any highlight overlay backgrounds that are drawn for the associated text.
</p>

<p>
この目的においては、
`強調~疑似要素$の `color$p ~propに対する `currentcolor$v は，［
`作動中な^em［
`強調~疑似要素$層
］のうち，次に背後にあるもの
］の `color$p を表現し、
最終的には，次に~fall-backする
⇒
`color$p が指定されなかったとするとき，利用されることになる色
（［
`出自の要素$／介在している`疑似要素$（ `first-line$pe ／ `first-letter$pe など）
］により，それらに適用される色）
◎
For this purpose, currentColor on a highlight pseudo-element’s color property represents the color of the next active highlight pseudo-element layer below, falling back finally to the colors that would otherwise have been used (those applied by the originating element or an intervening pseudo-element such as ::first-line or ::first-letter).
</p>

<p class="note">注記：
したがって，要素【`出自の要素$】に指定された~text装飾は
（`装飾線$, `圏点$どちらも）、
当の疑似要素に指定された `color$p が `currentcolor$v でないならば，
その色で描かれる
— その元の【`出自の要素$の】［
色／~fill
］指定に関わらず。
◎
Note: The element’s own text decorations (both line decorations and emphasis marks) are thus drawn in the pseudo-element’s own color when that is not currentColor, regardless of their original color or fill specifications.
</p>

<p>
各 `強調~疑似要素$により導入された~text装飾は、
~textの元の装飾【`出自の要素$の装飾】の上面に，
それらの背景と同じ順序で積層され、
各自の自前の色で描かれる。
適用される通常の塗ng順序は、
`CSS2$r
`§ 付録 E＠~CSS22/zindex.html#painting-order$
に従う
— ［
下線, 上線, ~text, 取消線
］は、
この順に
— 後に挙げたものほど手前に —
描かれる。
しかしながら，
`selection$pe により適用される すべての~text装飾は、
代わりに，他の装飾~すべてより上に
— 【当の選択された】~textと伴に，最も手前にある一群の層として —
描いてもヨイ。
◎
Any text decorations introduced by each highlight pseudo-element are stacked in the same order as their backgrounds over the text’s original decorations and are all drawn, each decoration in its own color. The normal painting order applies, so as per CSS2 Appendix E, all underlines are drawn below overlines which are drawn below the text which is drawn below any line-throughs. However, text decorations applied by ::selection may instead all be drawn along with the text as a topmost set of layers above all other decorations.
</p>

<div class="example">
<p>
例えば、
元の~textは下線と打消線を伴っていて,
`selection$pe は下線を適用していて,
`target-text$pe は［
上線, 打消線
］を適用していると見做すなら、
次のどちらも適合tな塗ng順序になる：
◎
For example, assuming the original text has an underline and a strike-through, that ::selection applies an underline and ::target-text applies both overline and strike-through, the following are both conformant painting orders:
</p>

<div style="columns: 20em">
<ol style="break-inside: avoid; margin-top: 0;">
	<li>
元の下線
◎
original underline
</li>
	<li>
`selection$pe による下線
◎
::selection underline
</li>
	<li>
`target-text$pe による上線
◎
::target-text overline
</li>
	<li>
`selection$pe で色付けられた~text
◎
::selection-colored text
</li>
	<li>
元の打消線
◎
original strike-through
</li>
	<li>
`target-text$pe による打消線
◎
::target-text strike-through
</li>
</ol>

<ol style="break-inside: avoid; margin-top: 0;">
	<li>
元の下線
◎
original underline
</li>
	<li>
`target-text$pe による上線
◎
::target-text overline
</li>
	<li>
元の打消線
◎
original strike-through
</li>
	<li>
`target-text$pe による打消線
◎
::target-text strike-through
</li>
	<li>
`selection$pe による下線
◎
::selection underline
</li>
	<li>
`selection$pe で色付けられた~text
◎
::selection-colored text
</li>
</ol>
</div>
</div>

<p>
`強調~疑似要素$により導入される`装飾線$は、
その`出自の要素$に結付けられた~textに限り適用され，
子孫へは
— ~propの`継承$を介することを除いて —
伝播しない
（`上で述べた＠#highlight-cascade$とおり）。
◎
Line decorations introduced by highlight pseudo-elements apply only to the text associated with their originating element, and are not propagated to descendants except via property inheritance (as described above).
</p>

<p class="note">注記：
出自の要素の自前の装飾と違って、
強調~疑似要素に対し宣言された装飾は，［
`~flow外$にある要素／`行内~塊$
］へも伝播する
— その太さと位置は、
子孫どうしで変わり得る。
◎
Note: Unlike the originating element’s own decorations, decorations declared on a highlight pseudo-element propagate to out-of-flow elements and inline blocks, with thickness and position varying between descendants.
</p>

			</section>
			<section id="highlight-replaced">
<h4 title="Replaced Elements">3.6.4. 置換される要素</h4>

<p>
`置換され$ない内容に対しては、
~UAは［
`color$p, `background-color$p
］の指定d値を（~alpha~channelも含め）尊守するモノトスル。
`置換され$る内容に対しては、
~UAは［
内容が選択から透けて見えるような半透明な膜
］で~~覆うベキである。
この膜の色は［
`background-color$p の指定d値が `transparent$v でなければそれ ／
他の場合は `color$p の指定d値
］になるベキである
— ~UAは、
その~alpha~channelを調整してもヨイ。
◎
For non-replaced content, the UA must honor the color and background-color (including their alpha channels) as specified. However, for replaced content, the UA should create a semi-transparent wash to coat the content so that it can show through the selection. This wash should be of the specified background-color if that is not transparent, else of the specified color; however the UA may adjust the alpha channel.
</p>

			</section>
		</section>
		<section id="highlight-security">
<h3 title="Security and Privacy Considerations">3.7. ~securityと~privacyの考慮点</h3>

<p>
綴りや文法の誤りに対する~style付けは、
利用者の辞書の内容についての情報（利用者の名前や, 住所録の内容まで含み得る）
を漏洩し得るので、［
`spelling-error$pe ／ `grammar-error$pe
］を実装する~UAは，
そのような強調された区分の~style付けを~pageが読取れないよう防止するモノトスル。
【したがって、~layoutが変化するものなど，他の状態に影響して適用されたかどうか観測-可能になる~styleは、適用されないことになる。】
◎
Because the styling of spelling and grammar errors can leak information about the contents of a user’s dictionary (which can include the user’s name and even includes the contents of their address book!) UAs that implement ::spelling-error and ::grammar-error must prevent pages from being able to read the styling of such highlighted segments.
</p>

		</section>
	</section>
	<section id="treelike">
<h2 title="Tree-Abiding and Part-Like Pseudo-elements">4. ~treeに留まる疑似要素, ~partの様な疑似要素</h2>

<p>
`~treeに留まる疑似要素@
（ `tree-abiding pseudo-element^en ）は、
常に`~box~tree$の中の ある~boxに対応する。
それは、
`出自の要素$から`継承-$可能な~propすべてを継承する。
`継承-$可能でない~propは、
通例通り，各自の`初期~値$をとる。
`CSS-CASCADE-4$r
◎
Tree-abiding pseudo-elements always fit within the box tree. They inherit any inheritable properties from their originating element; non-inheritable properties take their initial values as usual. [CSS-CASCADE-4]
</p>

<p>
`~treeに留まる疑似要素$のうち一部は、
`~partの様な疑似要素@
（ `part-like pseudo-element^en ）でもあり，少し強い要件がある：
それは、
文書~tree内の［
ある，きちんと定義された所在
］にあったかのように動作する。
これは、［
当の疑似要素が~DOM要素であった
］かのように［
他の何らかの~platform特能とヤリトリする
］ことを可能化する。
◎
A subset of tree-abiding pseudo-elements, the part-like pseudo-elements, have slightly stronger requirements: they act as if they have a well-defined location in the document tree. This enables them to interact with some other platform features as if they were real elements.
</p>

<div class="example">
<p>
`~partの様な疑似要素$は，例えば、
それが属する~component用の `part()$pe として装うよう，
`exportparts$a 属性にて利用できる：
◎
For example, a part-like pseudo-element can be used in the exportparts attribute, to masquerade as a ::part() for the component it’s in:
</p>

<pre class="lang-html">
&lt;template id=custom-element-template&gt;
  &lt;p exportparts="::before : preceding-text"&gt;
    この中の `before$pe 疑似要素は `::part(preceding-text)^css を利用して~styleできます。
&lt;/template&gt;
</pre>
<!-- 
    You can style my ::before pseudo-element
    by using ::part(preceding-text), too!
-->
</div>

<p>
他が指定されない限り、
要素に適用される~CSS~propは，`~partの様な疑似要素$にも適用される。
◎
Unless otherwise specified, any CSS property that applies to elements applies to part-like pseudo-elements.
</p>

		<section id="generated-content">
<h3 title="Generated Content Pseudo-elements: ::before and ::after">4.1. 生成d内容~疑似要素： `before^pe, `after^pe</h3>

<p>
`content$p の算出d値が `none$v でないときは、
これらの疑似要素は，
その`出自の要素$の子であったかのように†［
`content$p に指定された内容を伴う~box
］を生成する。
【†したがって、出自の要素に指定された`継承d~prop$も継承することになる。】
◎
When their computed content value is not none, these pseudo-elements generate boxes as if they were immediate children of their originating element, with content as specified by content.
</p>

<dl>
	<dt>`before@pe</dt>
	<dt>`after@pe</dt>
	<dd>
`出自の要素$の実際の内容の［
直前（ `before^pe ）／ 直後（ `after^pe ）
］にあって［
`~box~tree$において要素の子になる
］ような，~style可能な疑似要素を表現する。
◎
Represents a styleable child pseudo-element immediately before the originating element’s actual content.
◎
Represents a styleable child pseudo-element immediately after the originating element’s actual content.
</dd>
</dl>

<p>
`before$pe, `after$pe は、
どちらも`~partの様な疑似要素$であり，
適用-可能な~propに関する制約は無い。
◎
Both ::before and ::after are part-like pseudo-elements; there is no restriction on what properties apply to them.
</p>

<div class="example">
<p>
例えば，次の規則は、
`class^a 属性~値が `note^v を含んでいる
各 `p^e 要素ごとに，その内容の前に文字列 "注記：" を挿入する：
◎
For example, the following rule inserts the string “Note: ” before the content of every &lt;p&gt; element whose class attribute has the value note:
</p>

<pre class="lang-css">
p.note::before { content: "注記：" }
</pre>
<!-- "Note: " -->

<p>
`display$p の初期~値は `inline$v なので、
これは`行内~box$を生成することになる。
`p^e の他の行内~boxである子と同様に，それは
`p^e の行内~整形~文脈に関与し，他の内容と行lを共有し得ることになる。
◎
Since the initial value of display is inline, this will generate an inline box. Like other inline children of &lt;p&gt;, it will participate in &lt;p&gt;’s inline formatting context, potentially sharing a line with other content.
</p>
</div>

<div class="p">
<p>
［
`before$pe ／ `after$pe
］疑似要素は：
</p>
<ul>
	<li>
定例の要素の内容と同じく，それを成す生成d内容は、
その`出自の要素$に適用されている［
`first-line$pe ／ `first-letter$pe
］疑似要素があれば，それらの一部を形成し得る。
</li>
	<li>
定例の子~要素と同じく，その`出自の要素$が`置換され$るときには抑止される。
</li>
</ul>
◎
As with the content of regular elements, the generated content of ::before and :after pseudo-elements can form part of any ::first-line and ::first-letter pseudo-elements applied to its originating element. Also as with regular child elements, the ::before and ::after pseudo-elements are suppressed when their parent, the originating element, is replaced.
</div>

		</section>
		<section id="marker-pseudo">
<h3 title="List Markers: the ::marker pseudo-element">4.2. ~list~marker：`marker^pe 疑似要素</h3>

<p>
`marker@pe
疑似要素は、
`~list~item$用に自動的に生成される`~marker~box$を表現する。
`CSS-DISPLAY-3$r, `CSS-LISTS-3$r
を見よ。
◎
The ::marker pseudo-element represents the automatically generated marker box of a list item. (See [CSS-DISPLAY-3] and [CSS-LISTS-3].)
</p>

<p>
`first-letter$pe は `marker$pe の内容を無視する（選定しない）。
◎
The contents of a ::marker are ignored (not selected) by ::first-letter.
</p>

<p class="issue">
`marker$pe と `first-line$pe の相互作用は、
現在，論の最中にある。
（ `4506$issue ）
◎
Interaction of ::marker and ::first-line is currently under discussion in Issue 4506.
</p>

<p>
`marker$pe は`~treeに留まる疑似要素$であるが，`~partの様な疑似要素$ではない。
`marker$pe 疑似要素に利用できる~propは限られている。
その~listは、
`CSS-LISTS-3$r
<a href="~CSSLIST#marker-properties">§ `marker^pe に適用される~prop</a>
にて定義される。
◎
::marker is a tree-abiding pseudo-element, but not part-like; only a limited set of properties can be used on the ::marker pseudo-element. This list is defined in CSS Lists 3 § 3.1.1 Properties Applying to ::marker.
</p>

<p>
選択子［
`::before::marker^css ／ `::after::marker^css
］は妥当であり、
それを利用すれば，`~list~item$にもなる［
`before$pe ／ `after$pe
］疑似要素の`~marker~box$を表現できる。
しかしながら， `::marker::marker^css は妥当でなく、
`marker$pe の `display$p ~propの算出d値は，それを成す `list-item$v の側面を常に失う。
◎
The ::before::marker or ::after::marker selectors are valid and can be used to represent the marker boxes of ::before or ::after pseudo-elements that happen to be list items. However ::marker::marker is invalid, and the computed value of display on ::marker always loses any list-item aspect.
</p>

<p class="issue">
`marker$pe も`下位-疑似要素$として［
`prefix$pe, `postfix$pe
］を有するべきか？
◎
Should ::marker also have ::prefix and ::postfix sub-elements?
</p>

		</section>
		<section id="placeholder-pseudo">
<h3 title="Placeholder Input: the ::placeholder pseudo-element">4.3. 仮入力： `placeholder^pe 疑似要素</h3>

<p>
`placeholder@pe
疑似要素は、
~form入力~欄~内の仮入力（ `placeholder^en ）~textを表現する：
それは、［
当の欄の埋め方についての~hint
］を利用者に供するような，入力~textを表現する。
例えば，日付~入力~欄の仮入力~textが
"<samp>YYYY/MM/DD</samp>" であったなら、
日付を与える数を［
年, 月, 日
］の順序で手入力することを明確化する。
この疑似要素は、
`~treeに留まる疑似要素$である。
◎
The ::placeholder pseudo-element represents placeholder text in an input field: text that represents the input and provides a hint to the user on how to fill out the form. For example, a date-input field might have the placeholder text “YYYY/MM/DD” to clarify that numeric dates are to be entered in year-month-day order. It is a tree-abiding pseudo-element.
</p>

<p class="example">
例えば，［
`input$e ／ `textarea$e
］要素~上の `placeholder^a 属性は、
`HTML$r の意味論に則って，仮入力~textを供する。
したがって， `placeholder$pe `疑似要素$は、
そのような仮入力~textが表示されているならば，それを表現する。
◎
For example, according to the semantics of [HTML] the placeholder attribute on the input and textarea elements provide placeholder text. The ::placeholder pseudo-element represents such text when it is displayed.
</p>

<p class="note">注記：
`placeholder-shown$ps という`疑似類^emも存在する
— それは、
仮入力~textを示している（~DOM内の）要素に適用され，
そのような要素を特別に~styleするために利用できる。
`placeholder$pe は、
仮入力~textを特定的に表現するので，
その能は他に比べ制限される。
◎
Note: There also exists a :placeholder-shown pseudo-class, which applies to (real) elements while they are showing placeholder text, and can be used to style such elements specially. ::placeholder specifically represents the placeholder text, and is thus relatively limited in its abilities.
</p>

<p>
`first-line$pe 疑似要素に適用されるすべての~propは、
`placeholder$pe 疑似要素にも適用される。
◎
All properties that apply to the ::first-line pseudo-element also apply to the ::placeholder pseudo-element.
</p>

<p class="issue">
`CSS-INLINE-3$r の~propは除外されるべきか？
[`5379$issue]
◎
Should [CSS-INLINE-3] properties be excluded? [Issue #5379]
</p>

<p>
対話的な媒体においては、
仮入力~textは，利用者が入力~欄に手入力し始めたときに隠されることが多い。
しかしながら、
これは要件ではない
— 入力~値と仮入力の両~textとも同時に可視にしてもヨイ。
正確な挙動は~UAにより定義されることに注意。
静的な媒体（印刷など）においては、
仮入力~textは，利用者が入力を手入力した後でも呈示することになる。
◎
In interactive media, placeholder text is often hidden once the user has entered input; however this is not a requirement, and both the input value and the placeholder text may be visible simultaneously. The exact behavior is UA-defined. Note that in static media (such as print) placeholder text will be present even after the user has entered input.
</p>

<p class="issue">
~supportされる~propとして `text-align$p も含めるよう，求めている作者も見受けられる。
例えば、
`ここの~comment＠http://css-tricks.com/almanac/selectors/p/placeholder/$を見よ。
◎
Authors seem to want text-align on the list of supported properties. See e.g. comments here.
</p>

<p class="note">注記：
`placeholder$pe は、［
対応している要素が要素~tree内にある仮入力
］も指せるようにすることが要請されている。
これがどう働くべきかは明瞭でないが、
そうするに価するかもしれない。
`2517$issue
を見よ。
<!-- 2417誤記 -->
◎
Note: It’s been requested that ::placeholder also refer to a placeholder which has a corresponding element in the element tree. It’s not clear how this should work, but it may be worth doing. See Issue 2417.
</p>

		</section>
		<section id="file-selector-button-pseudo">
<h3 title="File Selector Button: the ::file-selector-button pseudo-element">4.4. ~file選択-用の~button： `file-selector-button^pe 疑似要素</h3>

<p>
`file-selector-button@pe
疑似要素は、
`type=file^a を伴う `input^e 要素の内側にある~button【！`button^e】を
— ~UAが，それを具現化するならば —
~targetにする。
◎
The ::file-selector-button pseudo-element targets the &lt;button&gt; inside an &lt;input&gt; element with type=file, if the UA renders such a button.＼
</p>

<p>
`file-selector-button$pe 疑似要素は、
`~partの様な疑似要素$であり，適用-可能な~propに関する制約は無い。
◎
It is a part-like pseudo-element.
◎
There is no restriction on which properties apply to the ::file-selector-button pseudo-element.
</p>

<div class="example" id="file-selector-button-example">
<p>
次の例は、
~file選択-用の~buttonの周りに `green^v な~borderを示すべきである：
◎
For example, the following example should show a green border around the file selector button:
</p>

<pre class="lang-css">
::file-selector-button { border: 3px solid green }
</pre>
</div>

		</section>
		<section id="details-content-pseudo">
<h3 title="Expandable contents of details element: the ::details-content pseudo-element">4.5. `details^e 要素の展開-可能な内容： `details-content^pe 疑似要素</h3>

<p>
`details-content@pe
疑似要素は、
`details$e 要素~内の開閉可能な追加的な情報を~targetにする。
◎
The ::details-content pseudo-element targets the additional information in a a details element that can be expanded or collapsed.＼
</p>

<p>
`details-content$pe 疑似要素は、
`~partの様な疑似要素$であり，適用-可能な~propに関する制約は無い。
◎
It is a part-like pseudo-element.
◎
There is no restriction on which properties apply to the ::details-content pseudo-element.
</p>

<div class="example" id="details-content-example">
<p>
例えば，次の例は、
`details$e 要素が開かれたとき，
追加的な情報の不透明度を~animateすることになる：
◎
For example, the following example would animate the opacity of the additional information when the details element opens:
</p>

<pre class="lang-css">
details::details-content {
  opacity: 0;
  transition: content-visibility 300ms allow-discrete, opacity 300ms;
}

details[open]::details-content {
  opacity: 1;
}
</pre>
</div>

		</section>
	</section>
	<section id="interactions">
<h2 title="Overlapping Pseudo-element Interactions">5. 重合している疑似要素~間の相互作用</h2>

<div class="example" id="overlapping-example">
<p>
次のことを~~念頭に…：
◎
Recall that
</p>
<ul>
	<li>
［
`before$pe ／ `after$pe
］を成す内容は、
通常の~DOM要素であったかのように選択される。
◎
the contents of ::before and ::after are selected exactly as if they were normal elements in the document source tree
</li>
	<li>
`first-letter$pe は、
`整形される最初の行l$上にしか存在できないよう拘束される
— それを成す最初の字lに~~後続する~textは、
`first-letter$pe の境界を すき間なく回込む。
◎
the ::first-letter boundaries are tightly wrapped around the first letter text, and ::first-letter is constrained to exist solely on the first formatted line.
</li>
	<li>
`first-line$pe の［
始端は `包含塊$を与える要素の境界のすぐ内側／
終端は 行l上のすべての内容を閉じた後
］に挿入される。
◎
the ::first-line start is inserted just inside the containing block’s element boundary, and its end after the close of all content on the line
</li>
</ul>

<p>
…重合している疑似要素がどう相互作用するかを、
次の~CSS, ~HTMLに例示する。
◎
The following CSS and HTML example illustrates how overlapping pseudo-elements interact:
</p>

<pre class="lang-css">
p { color: red; font-size: 12pt }
p::first-letter { color: green; font-size: 200% }
p::first-line { color: blue }
</pre>

`interactions-1^xCode

<p>
各 `p^e 要素の最初の字lは、
色は `green^v, ~font~sizeは `24pt^v になる。
`整形される最初の行l$を成す残りの部分は `blue^v になり，
段落を成す他の部分は `red^v になる。
◎
The first letter of each P element will be green with a font size of ’24pt'. The rest of the first formatted line will be blue while the rest of the paragraph will be red.
</p>

<p>
単語 "~~収まらない" の直前で 行lが分断されるとするとき、
この片に対する`仮想の~tag列$は，次のようになろう：
◎
Assuming that a line break will occur before the word "ends", the fictional tag sequence for this fragment might be:
</p>

`interactions-2^xCode
</div>

	</section>
	<section id="cssom">
<h2 title="Additions to the CSS Object Model">6. ~CSS~obj~modelに対する追加</h2>

		<section id="CSSPseudoElement-interface">
<h3 title="Interface CSSPseudoElement">6.1. ~interface `CSSPseudoElement^I</h3>

<p>
`CSSPseudoElement^I ~interfaceは、
疑似要素も~event~targetになれるようにする。
◎
The CSSPseudoElement interface allows pseudo-elements to be event targets.
</p>

<pre class="idl">
[`Exposed$=Window]
interface `CSSPseudoElement@I : `EventTarget$I {
    readonly attribute `CSSOMString$ `type$m;
    readonly attribute `Element$I `element$m;
    readonly attribute (`Element$I or `CSSPseudoElement$I) `parent$m;
    `CSSPseudoElement$I? `pseudo$m(`CSSOMString$ %type);
};
</pre>

<p class="issue">
この~interfaceは、
設計~開発の下にあり，実装からの【！than？】~feedbackが~~求まれる。
特に，利用事例と問題について、
~CSS~WGに~~伝えていただくとありがたい。
◎
This interface is under design development, and this draft is looking for feedback more than implementation. The CSSWG would particularly appreciate hearing about use cases and problems.
</p>

<dl class="idl-def">
	<dt>`type@m</dt>
	<dd>
<p>
疑似要素の型を表現する文字列を返す。
とり得る値は：
◎
The type attribute is a string representing the type of the pseudo-element. This can be one of the following values:
</p>
		<dl>
			<dt>`::before^l</dt>
			<dd>
`before$pe 疑似要素を表現する。
◎
Represents the ::before pseudo-element.
</dd>

			<dt>`::after^l</dt>
			<dd>
`after$pe 疑似要素を表現する。
◎
Represents the ::after pseudo-element.
</dd>

			<dt>`::marker^l</dt>
			<dd>
`marker$pe 疑似要素を表現する。
◎
Represents the ::marker pseudo-element.
</dd>
		</dl>
	</dd>

	<dt>`element@m</dt>
	<dd>
この`疑似要素$の`最終的な出自の要素$を返す。
◎
The element attribute is the ultimate originating element of the pseudo-element.
</dd>

	<dt>`parent@m</dt>
	<dd>
この`疑似要素$の`出自の要素$を返す。
ほとんどの疑似要素においては，［
`parent$m, `element$m
］は同じ `Element$I ~objを返すが、
`下位-疑似要素$においては，［
`parent$m は `CSSPseudoElement$I ~obj ／
`element$m は `Element$I ~obj
］を返す。
◎
The parent attribute is the originating element of the pseudo-element. For most pseudo-elements parent and element will return the same Element; for sub-pseudo-elements, parent will return a CSSPseudoElement while element returns an Element.
</dd>

	<dt>`pseudo(type)@m</dt>
	<dd>
この~methodは、［
%type 引数が参照する`下位-疑似要素$が存在し得る, かつ妥当になる
］ならば，それを表現している `CSSPseudoElement$I ~obj【！~interface】を返す
— ~ELSE_ ~NULL を返す。
下の `~pseudoE()$m を見よ。
◎
The pseudo() method returns the CSSPseudoElement interface representing the sub-pseudo-element referenced in its argument, if such a sub-pseudo-element could exist and would be valid, and null otherwise. See pseudo() below.
</dd>
</dl>

<p class="note">注記：
この~interfaceは、
将来には拡張され得る
— 他の型の疑似要素にまで, および `CSSStyleDeclaration$I の `style^m 属性を通して~style情報を設定できるよう。
現在の機能性は、［
`web-animations-1$r ~supportするために必要なもの
］に制限されている。
◎
Note: This interface may be extended in the future to other pseudo-element types and/or to allow setting style information through a CSSStyleDeclaration style attribute. The current functionality is limited to that which is needed to support [web-animations-1].
</p>

		</section>
		<section id="window-interface">
<h3 title="pseudo() method of the Element interface">6.2. `Element^I ~interfaceの `pseudo()^m ~method</h3>

<p>
`Element$I ~interfaceには、
新たな~methodが追加される
— それは、
所与の要素により作成された所与の型の疑似要素を検索取得する：
◎
A new method is added to the Element interface to retrieve pseudo-elements created by a given element for a given type:
</p>

<pre class="idl">
partial interface `Element$I {
  `CSSPseudoElement$I? `~pseudoE$m(`CSSOMString$ %type);
};
</pre>

<dl class="idl-def">
	<dt>`~pseudoE(type)@m</dt>
	<dd>
この要素を`出自の要素$とする `CSSPseudoElement$I ~instanceのうち［
`type$m が %type に合致しているもの
］を検索取得するために利用される。
◎
The pseudo(CSSOMString type) method is used to retrieve the CSSPseudoElement instance of the type matching type associated with the element.＼
</dd>
	<dd>
<p>
その~method手続きは：
◎
When it is called, execute the following steps:
</p>
		<ol>
			<li>
%type ~SET %type 引数を `pseudo-element-selector$t の`文法に則って構文解析-$した結果
◎
Parse the type argument as a &lt;pseudo-element-selector&gt;, and let type be the result.
</li>
			<li>
~IF［
%type ~EQ `失敗^i
］
⇒
~RET ~NULL
◎
If type is failure, return null.
</li>
			<li>
~RET ［
コレを`出自の要素$とする疑似要素のうち，選択子 %type に合致するもの
］を表現している `CSSPseudoElement$I ~obj†
◎
Otherwise, return the CSSPseudoElement object representing the pseudo-element that would match the selector type with this as its originating element.
</li>
		</ol>
	</dd>
	<dd class="trans-note">【†
そのような疑似要素が実際に生成されていなくとも，それを表現する~objは在ると見なされることになる。
しかしながら、
例えば `::unknown^l が引数に渡されたときも `CSSPseudoElement^I ~objを返すことになるが，その `type$m 属性がとれる値は限られている
（関係する詳細は下に挙げる課題に）。
】</dd>
	<dd>
同じ`出自の要素$上の同じ`疑似要素$を表現するものとして返す値は、
観測-可能になる限り，常に同じ `CSSPseudoElement$I ~objにするモノトスル
（観測-可能にならない場合、
~UAは
— 自身の都合や処理能のためとして —
この~objを［
落として／生成し直して
］もヨイ）。
◎
Return values that represent the same pseudo-element on the same originating element must be, insofar as observable, always the same CSSPseudoElement object. (The UA may drop or regenerate the object for convenience or performance if this is not observable.)
</dd>
	<dd class="issue">
`~pseudoE()$m ~methodが返す値の［
同一性, 存続期間, ~NULL性
］（および，~errorなり得る事例）は、
依然として論の最中にある。
`3607$issue,
`3603$issue
を見よ。
◎
The identity, lifetime, and nullness of the return value (and potential error cases) of the pseudo() method is still under discussion. See Issue 3607 and Issue 3603.
</dd>
</dl>

		</section>
		<section id="getComputedStyle">
<h3 title="getComputedStyle()">6.3. `getComputedStyle()^m</h3>

<p>
`getComputedStyle()$m は、
2 個目の~parameter %pseudoElt が`強調~疑似要素$を指すときは，［
その強調は作動中で，他のすべての強調は作動中でなかった
］かのようにされた~styleを返す。
実際の強調~状態に依存する結果を返すと、［
多義性, ~privacy
］の~riskになり得るので。
◎
When the second parameter pseudoElt refers to a highlight pseudo-element, getComputedStyle() returns styles as if that highlight is active and all other highlights are inactive. This avoids the potential ambiguity and privacy risks of returning a result that depends on the actual highlight state.
</p>

		</section>
	</section>
	<section id="css2-compat">
<h2 title="Compatibility Syntax">7. 互換性~構文</h2>

<p>
`CSS2$r 向けに書かれた既存の~stylesheetとの互換性を得るため、
~UAは［
`before$pe ／ `after$pe ／ `first-letter$pe ／ `first-line$pe
］疑似要素~用には，以前の~colon 1 個の記法
（ `before^ps ／ `after^ps ／ `first-letter^ps ／ `first-line^ps ）
も受容するモノトスル。
◎
For compatibility with existing style sheets written against CSS Level 2 [CSS2], user agents must also accept the previous one-colon notation (:before, :after, :first-letter, :first-line) for the ::before, ::after, ::first-letter, and ::first-line pseudo-elements.
</p>

	</section>
	<section id="changes">
<h2 title="Changes">変更点</h2>

<dl>
	<dt>
<a href="~TR/2020/WD-css-pseudo-4-20201231/">2020年 12月 31日 作業草案</a>
からの有意な変更点：
◎
Significant changes since the 31 December 2020 Working Draft include:
</dt>
	<dd>
`first-letter$pe `疑似要素$に結付けられる約物に取組むため、
その`下位-疑似要素$として［
`prefix$pe, `postfix$pe
］を追加した。
（ `2040$issue ）
◎
Added ::first-letter::prefix and ::first-letter::postfix sub-pseudo-elements to address punctuation associated with the ::first-letter pseudo-element. (Issue 2040)
</dd>
	<dd>
<p>
`最初の字lを成す~text$の~patternを精緻~化した：
◎
Fine-tuned the first-letter text pattern:
</p>
		<ul>
			<li>
単語を分離する~spaceを除外した。
（ `5830$issue ）
◎
Excluded word-separating spaces from first-letter text. (Issue 5830)
</li>
			<li>
`最初の字l$に後続し得る約物から［
`Open Punctuation^uc,
`Dash Punctuation^uc
］を除外した。
（ `5830$issue ）
◎
Excluded dashes and opening punctuation from following punctuation. (Issue 5830)
</li>
			<li>
`最初の字l$を表現するものとして， `Symbol^uc（ `S*^uc ）許容した。
（ `5099$issue ）
◎
Allowed symbols to represent the first letter. (Issue 5099)
</li>
			<li>
`最初の字lを成す~text$は、
行l分断により切落とされることを明確化した
（ `2254$issue ）
◎
Clarified that the first-letter text is truncated by a line break. (Issue 2254)
</li>
		</ul>
	</dd>
	<dd>
`first-letter$pe の定義を書き直して明確化した。
例と注記を改善した。
◎
Rewrote and clarified definition of :first-letter, and improved examples and notes.
</dd>
	<dd>
`first-line$pe の定義を書き直して，明確化した。
例を改善した。
◎
Rewrote and clarified definition of ::first-line, and improved examples.
</dd>
	<dd>
`first-line$pe に対する `line-height$p の適用を定義した。
（ `2282$issue ）
◎
Defined application of line-height to ::first-line. (Issue 2282)
</dd>
	<dd>
`first-line$pe と `first-letter$pe の~box構造に関する相互作用を定義した。
◎
Defined box structure interaction of ::first-line and ::first-letter.
</dd>
	<dd>
`first-line$pe と`根~行内~box$の階層~順序を定義した。
（ `1384$issue ）
◎
Defined hierarchy order of ::first-line and the root inline box. (Issue 1384)
</dd>
	<dd>
`強調~疑似要素$の［
`color$p, `background-color$p
］用の`~pairにされた既定＠#paired-defaults$挙動を明確化した。
（ `6386$issue, `6774$issue, `6779$issue, `7837$issue ）
◎
Clarified paired default behavior of highlight pseudo-element color and background-color. (Issue 6386, Issue 6774, Issue 6779, Issue 7837)
</dd>
	<dd>
`強調~疑似要素$に対する`強制d色~mode$の適用を定義した。
（ `7264$issue ）
◎
Defined application of forced colors mode to highlight pseudo-elements. (Issue 7264)
</dd>
	<dd>
`強調~疑似要素$による各種~text装飾の［
塗ng順序,
伝播,
適用
］を明確化した。
（ `6022$issue, `6829$issue, `7101$issue ）
◎
Clarified painting order, propagation, and application of highlight pseudo-element text decorations. (Issue 6022, Issue 6829, Issue 7101)
</dd>
	<dd>
`強調~疑似要素$に適用される~propの~listから［
`caret-color$p, `cursor$p
］を除去した。
（ `4100$issue ）
◎
Removed caret-color and cursor from applying to highlight pseudo-elements. (Issue 4100)
</dd>
	<dd>
`強調~疑似要素$と `getComputedStyle()$m の相互作用を明確化した。
（ `6818$issue ）
◎
Clarified interaction of highlight pseudo-elements and getComputedStyle(). (Issue 6818)
</dd>
	<dd>
`疑似要素$に対する`~custom~prop$の適用を明確化した。
（ `6264$issue ）
◎
Clarified application of custom properties to pseudo-elements. (Issue 6264)
</dd>
	<dd>
`下位-疑似要素$に取組むため、
`CSSPseudoElement$I ~interfaceを［
`parent$m 属性,
`pseudo()$m ~method
］で拡張した。
（ `3836$issue ）
◎
Extended the CSSPseudoElement interface with a parent attribute and pseudo() method to address sub-pseudo-elements. (Issue 3836)
</dd>
	<dd>
~custom~propの値が`強調~疑似要素$の~cascadeからは見出されないときの挙動を，
根【 `root$ps 】からとるもの定義した。
（ `6641$issue ）
◎
Defined the behavior when custom property values are not found in the highlight cascade; they are taken from the root. (Issue 6641)
</dd>

	<dt>
`2019年 2月 25日 作業草案＠~TR/2019/WD-css-pseudo-4-20190225/$
からの有意な変更点
◎
Significant changes since the 25 February 2019 Working Draft include:
</dt>
	<dd>
`target-text$pe 疑似要素を追加した。
（ `5522$issue ）
◎
Added ::target-text pseudo-element. (Issue 5522)
</dd>
	<dd>
`inactive-selection^pe 疑似要素を除去した。
（ `4579$issue ）
◎
Removed ::inactive-selection. (Issue 4579)
</dd>
	<dd>
`file-selector-button$pe【！file-selectors-button】 疑似要素を追加した。
（ `5049$issue ）
◎
Added ::file-selectors-button pseudo-element. (Issue 5049)
</dd>
	<dd>
［
継承-可能, 継承-不能
］な~propの取扱いを違えるため、
`first-line$pe から~propを継承するときの規則を調整した
— 特定的に，`書字~mode$を制御する~propの適用能は、
~cascadeに影響するので除外される。
加えて，~custom~propとの相互作用も定義した。
（ `1097$issue ）
◎
Adjusted rules for inheritance of properties from ::first-line to handle inheritable vs non-inheritable properties differently, specifically excluded applicability of properties that control writing mode because they affect the cascade, and defined interaction with custom properties. (Issue 1097)
</dd>
	<dd>
`first-line$pe に許容される~propとして
— `text-emphasis-position$p と相似的になるよう —
`ruby-position$p を追加した。
（ `2998$issue ）
◎
Added ruby-position to properties allowed on ::first-line, analogous with text-emphasis-position. (Issue 2998)
</dd>
	<dd>
`first-letter$pe における最初の字lは、
前後の約物との合間にある~spaceも含めるようにした。
（ `5154$issue ）
◎
Included spaces between the first letter and its surrounding punctuation in ::first-letter. (Issue 5154)
</dd>
	<dd>
`marker$pe と `first-letter$pe の相互作用を定義した。
◎
Defined interaction of ::marker and ::first-letter.
</dd>
	<dd>
［
`::before::marker^css,
`::after::marker^css
］は、
妥当になるようにした。
（ `1793$issue ）
◎
Made ::before::marker and ::after::marker valid. (Issue 1793)
</dd>
	<dd>
`marker$pe に適用される`~propの~list＠~CSSWG/css-lists-3/#marker-properties$を
`CSS-LISTS-3$r に移動した（それに伴い，［
`content$p, `unicode-bidi$p, `direction$p
］も追加した）。
◎
Moved the list of properties applying to ::marker to [CSS-LISTS-3] (also adding content, unicode-bidi, and direction).
</dd>
	<dd>
`CSSPseudoElement$I ~interface用に許容される型として
`marker$pe を追加した。
（ `3763$issue ）
◎
Added ::marker to types allowed for CSSPseudoElement interface. (Issue 3763)
</dd>
	<dd>
`pseudo()$m が返す値を明確化した。
（ `3603$issue, `3607$issue ）
◎
Clarified return value of pseudo(). (Issues 3603 and 3607)
</dd>
	<dd>
`行内~levelの~box$の`強調~overlay$は、
`行l~box$の辺まで拡張することを許容した。
（ `5395$issue, `4624$issue ）
◎
Allowed highlight overlay of inline-level boxes to extend to the line box edges. (Issues 5395 and 4624)
</dd>
	<dd>
`強調~疑似要素$に対する `currentcolor$v は、［
~textは “強調されなかった” としたとき，利用されることになる色
］を利用することを明確化した
— `first-line$pe の様な疑似要素により供された色であっても。
（ `4625$issue ）
◎
Clarified that currentColor on a highlight pseudo-element uses the color that would be used if the text were not “highlighted”, even if that color was provided by a pseudo-element like ::first-line. (Issue 4625)
</dd>
	<dd>
`text-shadow$p が`強調~疑似要素$とどう相互作用するか定義した。
（ `3932$issue ）
◎
Defined how text-shadow interacts with highlight pseudo-elements. (Issue 3932)
</dd>
	<dd>
強調~疑似要素に適用される［
`既定の~UA~stylesheet＠#highlight-ua-styles$内の規則
］を改善した。
◎
Improved the default UA style sheet rules applying to highlight pseudo-elements.
</dd>

	<dt>
`2016 年 6月 7日 作業草案＠~TR/2016/WD-css-pseudo-4-20160607/$
からの変更点
◎
Changes since the 7 June 2016 Working Draft include:
</dt>
	<dd>
~UA~stylesheetにて，［
`spelling-error$pe ／ `grammar-error$pe
］に［
`spelling-error$v ／ `grammar-error$v
］を指定した。
◎
Specified spelling-error and grammar-error with ::spelling-error and ::grammar-error in the UA stylesheet.
</dd>
	<dd>
親, 子の強調~疑似要素の間の値の伝播を，~cascade法ではなく継承を利用するよう定義し直した。
`2474$issue, そこからの~linkにおける論点を見よ。
◎
Redefined value propagation between parent/child highlight pseudo-elements to use inheritance rather than cascading. See discussion in and linked from Issue 2474.
</dd>
	<dd>
強調~疑似要素 用に~supportされる~propの~listを精緻化した
— 例：
`stroke-color$p, `fill-color$p を追加して， `outline$p を除去した, 等々。
◎
Refined list of supported properties for highlight pseudo-elements, e.g. adding stroke-color/fill-color, removing outline, etc.
</dd>
	<dd>
強調~疑似要素 用の［
~text, ~text装飾
］の色がどう塗られるかを，明確化した。
◎
Clarified how text and text decoration colors are painted for highlight pseudo-elements.
</dd>
	<dd>
`CSSPseudoElement$I ~interfaceに `element$m 属性を追加した。
◎
Added the element attribute to the CSSPseudoElement interface.
</dd>
	<dd>
`CSSPseudoElement$I ~interface上の `type$m 属性がとる値たちを，対応する疑似要素に合致するように変更した。
◎
Changed the values of the type attribute on the CSSPseudoElement interface to match the corresponding pseudo-elements.
</dd>
	<dd>
~supportされる `CSSPseudoElement$I の型を抑制し、
実装されてない `style^m 属性は除去した。
◎
Reduced supported types of CSSPseudoElement and removed unimplemented style attribute.
</dd>
	<dd>
`window.getPseudoElements(elem,type)^m を `Element.pseudo(type)^m に変更した。
◎
Changed window.getPseudoElements(elem,type) to Element.pseudo(type).
</dd>
	<dd>
諸々の小さな明確化と修正点。
◎
Miscellaneous minor clarifications and fixes.
</dd>
</dl>

	</section>
	<section id="acknowledgements">
<h2 title="Acknowledgments">謝辞</h2>

<p>
この仕様に貢献された次の方々に：
◎
The editors would like to specifically thank the following individuals for their contributions to this specification:＼
</p>

<p lang="en">
Tab Atkins,
David Baron,
Oriol Brufau,
Razvan Caliman,
Chris Coyier,
Anders Grimsrud,
Vincent Hardy,
François Remy.
</p>

	</section>
</main></div>

