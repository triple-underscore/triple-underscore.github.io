<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<title>CSS Positioned Layout Module Level 4ï¼ˆæ—¥æœ¬èªè¨³ï¼‰</title>

<link rel="stylesheet" href="common.css" type="text/css">
<link rel="stylesheet" href="common-css.css" type="text/css">

<script src="common0.js"></script>
<script src="common1.js" async></script>

<script >

Util.ready = function(){
	const source_data = {
		generate: expand
	};
	Util.switchWordsInit(source_data);
}

function expand(){
	const class_map = this.class_map;
	const tag_map = this.tag_map;
	const link_map = this.link_map;

	return this.html.replace(
		/%[\w\-~ä¸€-é¿†ã‚-ã‚“]+|`(.*?)([$@^])(\w*)/g,
		create_html
	);

	function create_html(match, key, indicator, klass){
if(!indicator) {//%
	return `<var>${match.slice(1)}</var>`;
}

let href = '';
let href1 = '';
{
	const n = key.indexOf('ï¼ ');
	if(n > 0) {
		href1 = key.slice(n + 1);
		key = key.slice(0, n);
	}
}
let text = key;

switch(klass){
case 'r':
	text = `[${key}]`;
	href = `#biblio-${key.toLowerCase()}`;
	break;
case 't':
	text = `&lt;${key}&gt;`;
	break;
case 'pe':
	text = `::${key}`;
	break;
case 'f':
	text = `${key}()`;
	break;
case 'issue':
	href = `~CSSissue/${key}`;
	text = `èª²é¡Œ #${key}`;
	break;
case 'en':
	return `<span lang="en">${key}</span>`;
	break;
}

let tag = tag_map[klass];
if(tag) {
	let classname = class_map[klass];
	classname = classname ? ` class="${classname}"` : '';
	text = `<${tag}${classname}>${text}</${tag}>`;
}

if(indicator !== '^'){
	href = href1 || link_map[ klass ? `${klass}.${key}` : key ] || href;
	if(!href){
		console.log(match); // check error
		return match;
	}

	switch(indicator){
	case '$':
		text = `<a href="${href}">${text}</a>`;
		break;
	case '@':
		text = `<dfn id="${href.slice(1)}">${text}</dfn>`;
		break;
	default:
		console.log(match);
		return match;
	}
}

return text;

	}
}
</script>

<script type="text/plain" id="_source_data">

â—â—options

spec_title:CSS Positioned Layout Module Level 4
spec_date:2025-06-27
trans_update:2025-06-28
	source_checked:
page_state_key:CSS
original_url:https://drafts.csswg.org/css-position-4/
	abbr_url:CSSPOS4
spec_status:ED
ref_id_prefix:biblio-
ref_id_lowercase:true
site_nav:layouts,layout,css
conformance:css
copyright:2025,permissive
trans_1st_pub:2023-04-09

â—â—class_map
p:property
g:production
css:css
at:at-rule
t:type
pe:pseudo
e:element
v:value
f:func

â—â—tag_map
p:code
at:code
t:var
css:code
c:code
e:code
pe:code
v:code
f:code
i:i
em:em

â—â—mdn_urls
selectordef-backdrop:CSS/::backdrop
	propdef-overlay:CSS/overlay

â—â—original_id_map

â—â—link_map

pe.backdrop:#selectordef-backdrop

p.overlay:#propdef-overlay
p.transition:~TRANSITION#propdef-transition
p.z-index:~CSS2J#propdef-z-index
p.outline:~CSSUI#propdef-outline
p.border-collapse:~CSSTABLE#propdef-border-collapse
p.overflow:~CSSOVERFLOW3#propdef-overflow
p.opacity:~CSSCOLOR#propdef-opacity
p.visibility:~CSSDISP#propdef-visibility
p.mask:~MASKING1#propdef-mask
p.position:~CSSPOS#propdef-position
p.position-area:~CSSANCHOR#propdef-position-area
p.display:~CSSDISP#propdef-display
p.content:~CSSCONTENT#propdef-content


v.contents:~CSSDISP#valdef-display-contents
v.block:~CSSDISP#valdef-display-block
v.absolute:~CSSPOS#valdef-position-absolute
v.fixed:~CSSPOS#valdef-position-fixed
v.none:#valdef-overlay-none
v.auto:#valdef-overlay-auto
	v.none:~CSSCONTENT#valdef-content-none

f.linear:~CSSEASING#funcdef-linear

	â—ç”¨èª

æ–‡æ›¸ã‚’å¡—ã‚‹:#paint-a-document
ç©å±¤~æ–‡è„ˆã‚’å¡—ã‚‹:#paint-a-stacking-context
å¡Šã®è£…é£¾ã‚’å¡—ã‚‹:#paint-a-blocks-decorations
ç©å±¤~å®¹å™¨ã‚’å¡—ã‚‹:#paint-a-stacking-container
~boxã‚’è¡Œl~boxå†…ã§å¡—ã‚‹:#paint-a-box-in-a-line-box

ä¸Šç«¯~å±¤:#document-top-layer
ä¸Šç«¯~å±¤~å†…:#in-the-top-layer
ä¸Šç«¯~å±¤~æ ¹:#top-layer-root
åŒã˜ä¸Šç«¯~å±¤~å†…:#in-the-same-top-layer
ã‚ˆã‚Šé«˜ã„ä¸Šç«¯~å±¤~å†…:#in-a-higher-top-layer
ä¸Šç«¯~å±¤~å†…ã«æç”»ã•ã‚Œ:#render-in-the-top-layer
ä¸Šç«¯~å±¤~å†…ã«æç”»ã•ã‚Œã¦:#render-in-the-top-layer
ä¸Šç«¯~å±¤ã‹ã‚‰ã®é™¤å»-å¾…ã¡è¦ç´ ~ç¾¤:#pending-top-layer-removals
ä¸Šç«¯~å±¤ã‹ã‚‰é™¤å»ã™ã‚‹å‡¦ç†å¾…ã¡è¦ç´ ~ç¾¤:#pending-top-layer-removals
ä¸Šç«¯~å±¤ã«è¦ç´ ã‚’è¿½åŠ ã™ã‚‹:#add-an-element-to-the-top-layer
ä¸Šç«¯~å±¤ã‹ã‚‰è¦ç´ ã‚’é™¤å»ã™ã‚‹ã‚ˆã†è¦è«‹ã™ã‚‹:#request-an-element-to-be-removed-from-the-top-layer
ä¸Šç«¯~å±¤ã‹ã‚‰è¦ç´ ã‚’å³æ™‚ã«é™¤å»ã™ã‚‹:#remove-an-element-from-the-top-layer-immediately
ä¸Šç«¯~å±¤ã‹ã‚‰ã®é™¤å»ã‚’å‡¦ç†ã™ã‚‹:#process-top-layer-removals
å¸¯åŸŸå†…
å¸¯åŸŸ~å†…ã®å¤–å½¢ç·š:#in-band-outline
å¸¯åŸŸ~å¤–ã®å¤–å½¢ç·š:#out-of-band-outline

å›ºå®šçš„ãªåŒ…å«å¡Š:#fixed-containing-block
å±€æ‰€çš„ãªåŒ…å«å¡Š:#local-containing-block
~scrollå¯èƒ½ãªåŒ…å«å¡Š:#scrollable-containing-block

ç›¸å¯¾~ä½ç½®æ±ºã‚:~CSSPOS#relative-position
å¼µä»˜ãä½ç½®æ±ºã‚:~CSSPOS#sticky-position
çµ¶å¯¾~ä½ç½®æ±ºã‚:~CSSPOS#absolute-position
çµ¶å¯¾çš„ã«ä½ç½®ã•ã‚Œ:~CSSPOS#absolute-position
å›ºå®šdä½ç½®æ±ºã‚:~CSSPOS#fixed-position
å›ºå®šçš„ã«ä½ç½®ã•ã‚Œ:~CSSPOS#fixed-position
æœ‰ä½ç½®:~CSSPOS#positioned-box
é™çš„~ä½ç½®:~CSSPOS#static-position
çµ¶å¯¾~ä½ç½®æ±ºã‚åŒ…å«å¡Š:~CSSPOS#absolute-positioning-containing-block
å›ºå®šdä½ç½®æ±ºã‚åŒ…å«å¡Š:~CSSPOS#fixed-positioning-containing-block

ä¸Šç«¯~å±¤~styleè¦ç´ ~ç¾¤:#_top-layer-styled-elements
~canvas:~CSScommon#canvas

	â—ç”¨èªï¼ˆ CSS

è£œé–“-:~CSSVAL#interpolation
å‡ºè‡ª:~CASCADE#origin
~UA~stylesheet:~CASCADE#cascade-origin-ua

~box:~CSSDISP#box
~box~tree:~CSSDISP#box-tree
é¦–è¦~box:~CSSDISP#principal-box
æ ¹~è¦ç´ :~CSSDISP#root-element
è¡Œl~box:~CSSINLINE#line-box
è¡Œå†…~level:~CSSDISP#inline-level
è¡Œå†…~box:~CSSDISP#inline-box
å¡Š~levelã®~box:~CSSDISP#block-level-box
å¡Š~level:~CSSDISP#block-level
å¡Š~box:~CSSDISP#block-box
ç½®æ›dè¦ç´ :~CSSDISP#replaced-element
	ç½®æ›ã•ã‚Œ:~CSSDISP#replaced-element
~flowå†…:~CSSDISP#in-flow
~tableåŒ…è£…~box:~CSSTABLE#table-wrapper-box
~texté€£åˆ—:~CSSDISP#css-text-sequence
åŒ…å«å¡Š:~CSSDISP#containing-block
åˆæœŸ~åŒ…å«å¡Š:~CSSDISP#initial-containing-block

ç–‘ä¼¼è¦ç´ :~SELECTORS4#pseudo-element
å‡ºè‡ªã®è¦ç´ :~SELECTORS4#originating-element
~subject:~SELECTORS4#selector-subject

~styleè¦å‰‡:~CSSSYN#style-rule

~padding:~CSSBOX#padding
~padding~box:~CSSBOX#padding-box
~paddingè¾º:~CSSBOX#padding-edge
~margin~box:~CSSBOX#margin-box

å…¨éƒ¨çš„ã«~styleå¯èƒ½ãªç–‘ä¼¼è¦ç´ :~CSSPSEUDO#fully-styleable

~scrollå®¹å™¨:~CSSOVERFLOW3#scroll-container
~scrollport:~CSSOVERFLOW3#scrollport
~scrollå¯èƒ½ãª~overflow:~CSSOVERFLOW3#scrollable-overflow
~scrollå¯èƒ½ãª~overflowåŒºç”»:~CSSOVERFLOW3#scrollable-overflow-region
åˆæœŸ~scrollä½ç½®:~CSSOVERFLOW3#initial-scroll-position

æ–­ç‰‡:~CSSBREAK#fragment
å¤–å½¢ç·š:~CSSUI#outline-props

èƒŒæ™¯~ä½ç½®æ±ºã‚åŒºç”»:~CSSBG#background-positioning-area

ä¸é€æ˜ãªé»’:~CSSCOLOR#opaque-black

~easingé–¢æ•°:~CSSEASING#easing-function

ç©å±¤~æ–‡è„ˆ:~CSS2J#stacking-context
ç©å±¤-~level:~CSS2J#stack-level
è¡¨ç¤ºåŸŸ:~CSS2J#viewport
æµ®å‹•ä½“:~CSS2J#floats

é›¢æ•£çš„:~WANIM#discrete

	â—ç”¨èªï¼ˆä»–
æœ‰é †åº~é›†åˆ:~INFRA#ordered-set
~UA:~INFRA#user-agent
é™¤å»ã™ã‚‹:~INFRA#list-remove
set.ä»˜åŠ ã™ã‚‹:~INFRA#set-append
æœ‰é †åº~map:~INFRA#ordered-map

~treeé †åº:~DOM4#concept-tree-order
æ–‡æ›¸:~DOM4#concept-document
	I.Document:~DOM4#document â†’ æ–‡æ›¸
è¦ç´ :~DOM4#concept-element
	I.Element:~DOM4#element â†’ è¦ç´ 
~nodeæ–‡æ›¸:~DOM4#concept-node-document

~shadowã‚‚å«ã‚ãŸåºƒç¾©-å…ˆç¥–:~DOM4#concept-shadow-including-inclusive-ancestor

~popover:~HTMLpopover#_popover-element
å…·ç¾åŒ–ã•ã‚Œã¦:~HTMLrendering#being-rendered

~fullscreenè¦ç´ :~FULLSCREEN#fullscreen-element

â—â—words_table1

â—â—words_table

	â—layout
æœ‰ä½ç½®:positioned:~
å¼µä»˜ã:sticky::~
å›ºå®šçš„:fixed::~
å›ºå®šd:fixed::å›ºå®š
å›ºç€-:affix:~
é¦–è¦:principal::ä¸»è¦
table:
æµ®å‹•ä½“:float::~
	æµ®å‹•ä½“$:floating
æ‹¡å¹…é‡:extent:~
	å·¦ä¸Šéš…:top left corner

	â—å¡—ã‚Š
å¡—ng:painting:å¡—ã‚Š
å¡—ã‚‹:paintã™ã‚‹:~
å¡—ã‚‰ã‚Œ:paintã•ã‚Œ:~
å¡—ã‚‰ã›:paintã•ã›:~
	å¡—ã‚‰ã›ã‚‹:letting ã€œ paint
	ã€œã«ä¼´ã„ï¼Œå¡—ã‚‰ã‚Œã‚‹:along
ç©å±¤:stacking::~
ç©å±¤-:stack::~
å¾Œæ™¯:backdrop::~

å¤–å½¢ç·š:outline::~
è£…é£¾:decoration::~
ä¸‹ç·š:underline::~
	ä¸‹ç·š:underlining
ä¸Šç·š:overline::~
	ä¸Šç·š:overlining
æ‰“æ¶ˆç·š:line-through::~
é»’:black:~
æã‘:drawã§ã:~
å¸¯åŸŸ:band::~
	å¸¯åŸŸ~å†…ã®:in-band
	å¸¯åŸŸ~å¤–ã®:out-of-band
	åºƒã•ç„¡é™:infinite in extent
	ä¸Šå±¤:on top of
	ä¸Šç«¯~å±¤:top-layer
	ç”Ÿæˆ-:create

	â—CSS
åŒæ–¹å‘:bidirectional::~
åŒ…è£…:wrapper::~
easing:
scrollport::::ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«åŸŸ
å¤‰å½¢-:transform::~
å¤‰å½¢:transform::~

	`separate^v:separated
	`collapse^v:connected
	in collapsed-borders mode:~CSSTABLE#in-collapsed-borders-mode
	in separated-borders mode:~CSSTABLE#in-separated-borders-mode
	~UA~stylesheet:origin
	ç®—å‡ºdå€¤:compute to
	æœ‰ä½ç½®ã§ãªã„:non-positioned

	â—UI
popup:
popover:
fullscreen::::å…¨ã‚¹ã‚¯ãƒªãƒ¼ãƒ³
åˆ‡å–ã‚‰ã‚Œ:clipã•ã‚Œ:åˆ‡ã‚Šå–ã‚‰ã‚Œ
é®ã‚‰ã‚Œ:obscureã•ã‚Œ:~
é®ã‚‹:obscureã™ã‚‹:~
é‡åˆã—ã¦:overlapã—ã¦:é‡ãªã‚Šåˆã£ã¦
éš ã™:hideã™ã‚‹:~
fade-out:fade out:::ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆ
fade-in:fade in:::ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³

	è¦‹ä¸‹ã‚ã—ã¦ã„ã‚‹:looking down
	å›²ã£ã¦:surrounding

	â—å‡¦ç†
ç«¯æŠ˜ã£ã¦:bypassã—ã¦:~

	é™¤å»-å¾…ã¡è¦ç´ ~ç¾¤:pending ã€œ removals
	%æ–‡æ›¸:doc
	%è¦ç´ :el
	å‰å¾Œ:across ã€œ

	â—æ§‹é€ ï¼é–¢ä¿‚
ä¸å¯åˆ†:atomic:~
å‡ºè‡ª:origin::~
å‡ºè‡ªã®:originating::~
ä¸¦æ›¿ã‚‰ã‚Œ:reorderã•ã‚Œ:ä¸¦ã³æ›¿ãˆã‚‰ã‚Œ
å¾Œç¶š-:follow:~

	é…åˆ—ã—ç›´:rearrange
	ã€œã‹ã‚‰é †ã«:higher
	æ˜‡é †ã«:smallest first
	ã«ãŠã„ã¦æœ€å¾Œã«:end
	ä»–ã™ã¹ã¦ã®:everything else
	ä»–ã™ã¹ã¦ã®:of everything
	æœ€ã‚‚è¿‘ã„:nearest

	â—ä¿å®‰
æ¿«ç”¨:abuse:~
æ’ä¹…çš„:permanent:~

	â—ä»•æ§˜
è£é‡:discretion:~
æ—©æœŸ:early:~
å·®åˆ†:delta:~
æ‰€æœ‰æ¨©:ownership:~
èª¤ã‚Š:error:~
ä¿ãŸã‚Œ:keepã•ã‚Œ:~
è§£æ˜-:figure out:~

	ã»ã¨ã‚“ã©ã®å ´åˆ:most of the time
	ä½•ã‚’è¡ŒãŠã†ãŒ:regardless of what ã€œ might be doing
	ç¯€:chapter
	ãã‚Œã§ã‚‚:nevertheless
	ã‚‚ã£ã±ã‚‰:entirely
	æ€§è³ª:qualities
	æŒ‡ã™:refer
	ã¨ãã«ã¯:sometimes

	â—æœªåˆ†é¡
ç”»å®¶:painter:~
å’Œé ˜åŸŸ:union::~

	é…ç½®ã•ã›:opt
	ç¾ã‚Œã‚‹:appearã™ã‚‹
	å¾Œã§:later
	ã‚‚ã®:thing
	ã€œã«ã‚ã‚‹:anchored with its
	-:closer endpoint
	-:drawing
	é•·ã:long
	æœ‰ç„¡:presence
	ã€œã„ã‚‹é–“ã¯:as long as
	å†…ã«åœ¨ã‚‹:be in
	ãã®é€†ã‚’è¡Œã†:vice versa
	å…¥ã‚‹:enter
	å‡ºã‚‹:leave
	åˆ‡ã‚Šæ›¿ã‚ã‚‹:flip
	æƒã†:alignã™ã‚‹
	åœ°ç‚¹:point
	Îµ:none
	ã‚ˆã‚Šå¾Œ:earlier
	å°‘ã—ã°ã‹ã‚Š:tiny bit
	ä¸€è‡´:coincide


â—â—ref_normative

[CSS-ANCHOR-POSITION-1]
    Tab Atkins Jr.; Elika Etemad; Ian Kilpatrick. ï¼œCSS Anchor Positioningï¼. URL: https://drafts.csswg.org/css-anchor-position-1/
[CSS-BOX-4]
    Elika Etemad. ï¼œCSS Box Model Module Level 4ï¼. URL: https://drafts.csswg.org/css-box-4/
[CSS-BREAK-4]
    Rossen Atanassov; Elika Etemad. ï¼œCSS Fragmentation Module Level 4ï¼. URL: https://drafts.csswg.org/css-break-4/
[CSS-CASCADE-6]
    Elika Etemad; Miriam Suzanne; Tab Atkins Jr.. ï¼œCSS Cascading and Inheritance Level 6ï¼. URL: https://drafts.csswg.org/css-cascade-6/
[CSS-CONTENT-3]
    Elika Etemad; Dave Cramer. ï¼œCSS Generated Content Module Level 3ï¼. URL: https://drafts.csswg.org/css-content-3/
[CSS-DISPLAY-4]
    Elika Etemad; Tab Atkins Jr.. ï¼œCSS Display Module Level 4ï¼. URL: https://drafts.csswg.org/css-display/
[CSS-OVERFLOW-3]
    Elika Etemad; Florian Rivoal. ï¼œCSS Overflow Module Level 3ï¼. URL: https://drafts.csswg.org/css-overflow-3/
[CSS-POSITION-3]
    Elika Etemad; Tab Atkins Jr.. ï¼œCSS Positioned Layout Module Level 3ï¼. URL: https://drafts.csswg.org/css-position-3/
[CSS-PSEUDO-4]
    Daniel Glazman; Elika Etemad; Alan Stearns. ï¼œCSS Pseudo-Elements Module Level 4ï¼. URL: https://drafts.csswg.org/css-pseudo-4/
[CSS-TABLES-3]
    FranÃ§ois Remy; Greg Whitworth; David Baron. ï¼œCSS Table Module Level 3ï¼. URL: https://drafts.csswg.org/css-tables-3/
[CSS-UI-4]
    Florian Rivoal. ï¼œCSS Basic User Interface Module Level 4ï¼. URL: https://drafts.csswg.org/css-ui-4/
[CSS-VALUES-4]
    Tab Atkins Jr.; Elika Etemad. ï¼œCSS Values and Units Module Level 4ï¼. URL: https://drafts.csswg.org/css-values-4/
[CSS2]
    Bert Bos; et al. ï¼œCascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specificationï¼. URL: https://drafts.csswg.org/css2/
[DOM]
    Anne van Kesteren. ï¼œDOM Standardï¼. Living Standard. URL: https://dom.spec.whatwg.org/
[INFRA]
    Anne van Kesteren; Domenic Denicola. ï¼œInfra Standardï¼. Living Standard. URL: https://infra.spec.whatwg.org/
[RFC2119]
    S. Bradner. ï¼œKey words for use in RFCs to Indicate Requirement Levelsï¼. March 1997. Best Current Practice. URL: https://datatracker.ietf.org/doc/html/rfc2119
[SELECTORS-4]
    Elika Etemad; Tab Atkins Jr.. ï¼œSelectors Level 4ï¼. URL: https://drafts.csswg.org/selectors/

â—â—ref_informative

[CSS-COLOR-4]
    Chris Lilley; Tab Atkins Jr.; Lea Verou. ï¼œCSS Color Module Level 4ï¼. URL: https://drafts.csswg.org/css-color-4/
[CSS-EASING-2]
    ï¼œCSS Easing Functions Level 2ï¼. URL: https://drafts.csswg.org/css-easing/
[CSS-MASKING-1]
    Dirk Schulze; Brian Birtles; Tab Atkins Jr.. ï¼œCSS Masking Module Level 1ï¼. URL: https://drafts.csswg.org/css-masking-1/
[CSS-TRANSITIONS-1]
    David Baron; et al. ï¼œCSS Transitionsï¼. URL: https://drafts.csswg.org/css-transitions/
[CSS-WRITING-MODES-3]
    Elika Etemad; Koji Ishii. ï¼œCSS Writing Modes Level 3ï¼. URL: https://drafts.csswg.org/css-writing-modes-3/
[FULLSCREEN]
    Philip JÃ¤genstedt. ï¼œFullscreen API Standardï¼. Living Standard. URL: https://fullscreen.spec.whatwg.org/


â—â—trans_metadata

<p>
~THIS_PAGEã¯ã€~W3Cã«ã‚ˆã‚Šç·¨é›†è€…è‰æ¡ˆã¨ã—ã¦å…¬é–‹ã•ã‚ŒãŸ
<a href="~SPEC_URL">CSS Positioned Layout Module Level 4</a>
ã‚’æ—¥æœ¬èªã«ç¿»è¨³ã—ãŸã‚‚ã®ã§ã™ã€‚
~PUB
</p>

â—â—spec_metadata

ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
	<a href="https://github.com/w3c/csswg-drafts/labels/css-position-4">CSSWG Issues Repository</a>

ç·¨é›†
	<a href="http://fantasai.inkedblade.net/contact">Elika J. Etemad / fantasai</a> (Apple)
	<a href="http://xanthir.com/contact/">Tab Atkins Jr.</a> (Google)
Suggest an Edit for this Spec:
	<a href="https://github.com/w3c/csswg-drafts/blob/main/css-position-4/Overview.bs">GitHub Editor</a>

Suggest an Edit for this Spec
	<a href="https://github.com/w3c/csswg-drafts/blob/main/css-position-3/Overview.bs">GitHub Editor</a>
commit å±¥æ­´
	https://github.com/w3c/csswg-drafts/commits/main/css-position-3

</script>

<body>

<header>
	<hgroup>
<h1>CSS Positioned Layout Module Level 4</h1>
	</hgroup>
</header>

<div id="MAIN" hidden>
	<section id="abstract">
â—è¦ç´„

<p>
ã“ã®~moduleã¯ã€
`~CSSï¼ ~CSSSNAPSHOT$ã«ãŠã„ã¦åº§æ¨™ã«åŸºã¥ã„ã¦ï¼»
ä½ç½®ã™ã‚‹, ~offsetã™ã‚‹
ï¼½ãŸã‚ã®~schemeã¨ã—ã¦ï¼Œæ¬¡ã«æŒ™ã’ã‚‹ã‚‚ã®ã‚’å®šç¾©ã™ã‚‹ã€ï¼contains definesã€‘
â‡’ï¼ƒ
`ç›¸å¯¾~ä½ç½®æ±ºã‚$,
`å¼µä»˜ãä½ç½®æ±ºã‚$,
`çµ¶å¯¾~ä½ç½®æ±ºã‚$,
`å›ºå®šdä½ç½®æ±ºã‚$
â—
This module contains defines coordinate-based positioning and offsetting schemes of CSS: relative positioning, sticky positioning, absolute positioning, and fixed positioning.
</p>

<p>
ã¾ãŸã€
~CSSã®ï¼»
å¡—ngï¼æç”»
ï¼½~modelã‚‚å®šç¾©ã™ã‚‹ã€‚
â—
It also defines the painting/rendering model of CSS.
</p>

~CSSisaLANG

	</section>
	<section id="sotd">
â—ä½ç½®ä»˜ã‘

<p>
ã“ã‚Œã¯ã€
ç·¨é›†è€…è‰æ¡ˆã®å…¬ãªè¤‡è£½ã§ã™â€¦
ã€ä»¥ä¸‹ã€ã“ã®ç¯€ã®ä»–ã®å†…å®¹ã¯ï¼Œ~SOTD-CSSã«ç§»è­²ã€‚ã€‘
</p>

	</section>

<main id="MAIN0">

	<section id="intro">
<h2 title="Introduction">1. åºè«–</h2>

<p>
ã“ã‚Œã¯ã€
`css-position-3$r ã«å¯¾ã™ã‚‹æ—©æœŸ~å·®åˆ†~ä»•æ§˜ã§ã‚ã‚‹ã€‚
â—
This is an early delta spec over [css-position-3].
</p>

	</section>
	<section id="scrollable-cb">
<h2 title="Scrollable Containing Block">2. ~scrollå¯èƒ½ãªåŒ…å«å¡Š</h2>

<p>
æ‰€ä¸ã®`~scrollå®¹å™¨$ %å®¹å™¨ ãŒ`çµ¶å¯¾çš„ã«ä½ç½®ã•ã‚Œ$ãŸ~boxç”¨ã®`çµ¶å¯¾~ä½ç½®æ±ºã‚åŒ…å«å¡Š$ã‚’ç¢ºç«‹ã™ã‚‹ã¨ãï¼Œæ¬¡ã«æŒ™ã’ã‚‹ 3 ç¨®ã®`åŒ…å«å¡Š$ãŒåˆ©ç”¨ã•ã‚Œã‚‹ï¼š
â—
When a scroll container establishes an absolute positioning containing block for an absolutely positioned box, one of three possible containing blocks are used:
</p>
<dl>
	<dt>
%å®¹å™¨ ã®
`å›ºå®šçš„ãªåŒ…å«å¡Š@
â—
fixed containing block
</dt>
	<dd>
%å®¹å™¨ ã®`~scrollport$ã«å¯¾å¿œã™ã‚‹ã€‚
ã™ãªã‚ã¡ï¼Œ
%å®¹å™¨ ã®å†…ç¸ãª`~padding~box$ã‚’æˆã™è¾ºãŸã¡
ã€ã™ãªã‚ã¡ï¼Œ %å®¹å™¨ ã®`~paddingè¾º$ã€‘
ã«å¯¾å¿œã™ã‚‹ãŒã€
%å®¹å™¨ ã®å¤–ç¸ãªæ–‡è„ˆã¨ä¼´ã«~scrollã™ã‚‹
â€” %å®¹å™¨ ã®å†…å®¹ã¨ä¼´ã«ã§ã¯ãªãã€‚
â—
The fixed containing block of a scroll container corresponds to the scrollport, i.e. the inner padding box edges of the scroll container, but scrolling with the outer context, not the scroll containerâ€™s contents.
</dd>
	<dd>
æ–‡æ›¸ã«ã‚ˆã‚Šç¢ºç«‹ã•ã‚Œã‚‹`å›ºå®šçš„ãªåŒ…å«å¡Š$ã¯ã€
`å›ºå®šdä½ç½®æ±ºã‚åŒ…å«å¡Š$ã«ãªã‚‹ã€‚
â—
The fixed containing block established by the document is the fixed positioning containing block.
</dd>

	<dt>
%å®¹å™¨ ã®
`å±€æ‰€çš„ãªåŒ…å«å¡Š@
â—
local containing block
</dt>
	<dd>
%å®¹å™¨ ã®`~padding~box$ã‚’æˆã™è¾ºãŸã¡ã«å¯¾å¿œã™ã‚‹ãŒã€
`~scrollå¯èƒ½ãª~overflowåŒºç”»$ã«å›ºç€ã•ã‚Œï¼Œ
%å®¹å™¨ ã®å†…å®¹ã¨ä¼´ã«~scrollã™ã‚‹ã€‚
ã€`åˆæœŸ~scrollä½ç½®$ã«ãŠã„ã¦ã¯ï¼Œ %å®¹å™¨ ã®`~paddingè¾º$ã«ã¡ã‚‡ã†ã©é‡ãªã‚‹ã§ã‚ã‚ã†ã€‚ã€‘
â—
The local containing block of a scroll container corresponds to the padding box edges of the scroll container, but is affixed to the scrollable overflow area, and scrolls with the scroll containerâ€™s contents.
</dd>
	<dd>
æ–‡æ›¸ã«ã‚ˆã‚Šç¢ºç«‹ã•ã‚Œã‚‹`å±€æ‰€çš„ãªåŒ…å«å¡Š$ãŒï¼Œ`åˆæœŸ~åŒ…å«å¡Š$ã«ãªã‚‹ã€‚
â—
The local containing block established by the document is the initial containing block.
</dd>

	<dt>
%å®¹å™¨ ã®
`~scrollå¯èƒ½ãªåŒ…å«å¡Š@
â—
scrollable containing block
</dt>
	<dd>
%å®¹å™¨ ã®`~scrollå¯èƒ½ãª~overflowåŒºç”»$ã®`~paddingè¾º$ã«å¯¾å¿œã™ã‚‹
ã€ %å®¹å™¨ ã®`~paddingè¾º$ã§ã¯ãªãã€‘ã€‚
ã™ãªã‚ã¡ï¼Œï¼»
%å®¹å™¨ ã®`~scrollå¯èƒ½ãª~overflowåŒºç”»$ã®æ‹¡å¹…é‡
ï¼½ã‚’æ±ºå®šã™ã‚‹ã¨ãã®ï¼»
%å®¹å™¨ ã®å†…å®¹ã‚’å›²ã£ã¦ã„ã‚‹`~padding$ã®å¤–ç¸
ï¼½ã‚’æˆã™è¾ºã€‚
`CSS-OVERFLOW-3$r `Â§ ~scrollå¯èƒ½ãª~overflowï¼ ~CSSOVERFLOW3#scrollable$ ã‚’è¦‹ã‚ˆã€‚
`~scrollå¯èƒ½ãªåŒ…å«å¡Š$ã¯ã€
ã™ã¹ã¦ã®äº‹ä¾‹ã§ï¼Œå°‘ãªãã¨ã‚‚`å±€æ‰€çš„ãªåŒ…å«å¡Š$ã‚’åŒ…æ‘‚ã™ã‚‹ã€‚
â—
The scrollable containing block of a scroll container corresponds to the padding edge of the scroll containerâ€™s scrollable overflow area, i.e. the outer edge of the padding surrounding its content when determining the extent of its scrollable overflow area. See CSS Overflow 3 Â§ 2.2 Scrollable Overflow. In all cases the scrollable containing block at least encompasses the local containing block.
</dd>
	<dd class="note">æ³¨è¨˜ï¼š
ã“ã‚Œã¯ã€
`æµ®å‹•ä½“$ã‚’å«ã‚€ãŒï¼Œï¼»
`çµ¶å¯¾çš„ã«ä½ç½®ã•ã‚Œ$ãŸå­å­«,
å†…å®¹ãŒ~overflowã—ã¦ã„ã‚‹å­å­«~box,
`ç›¸å¯¾~ä½ç½®æ±ºã‚$ã®åŠ¹æœ,
å¤‰å½¢ã®åŠ¹æœ
ï¼½ã‚’ç„¡è¦–ã™ã‚‹
â€” ãã‚Œã‚‰ã¯ã€
ä»–ã§ã¯ï¼Œè‡ªèº«ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†~scrollå¯èƒ½ãªåŒºç”»ã‚’æ‹¡å¼µã™ã‚‹ã€‚
â—
Note: This includes floats, but ignores absolutely positioned descendants, content overflowing descendant boxes, and the effects of relative positioning and transforms, which do otherwise extend the scrollable area to display them.
</dd>
	<dd>
æ–‡æ›¸ã«ã‚ˆã‚Šç¢ºç«‹ã•ã‚Œã‚‹`~scrollå¯èƒ½ãªåŒ…å«å¡Š$ã¯ã€
`åˆæœŸ~åŒ…å«å¡Š$ã¨æ ¹~boxâ€ ã®`~margin~box$ã®å’Œé ˜åŸŸã«ãªã‚‹ã€‚
ã€â€  æœªå®šç¾©ãªç”¨èªã ãŒã€æ ¹~è¦ç´ ã®`é¦–è¦~box$ã‚’æŒ‡ã™ã¨æ€ã‚ã‚Œã‚‹ã€‚ã€‘
â—
The scrollable containing block established by the document is the union of the initial containing block and the margin box of the root box itself.
</dd>
</dl>

<p class="note">æ³¨è¨˜ï¼š
ã“ã‚Œã‚‰ã™ã¹ã¦ã¯ï¼Œä½•ã‚‰ã‹ã®ã‚¤ãƒŸã§`~padding~box$ã¸å¯¾å¿œã—ã¦ã„ã‚‹ãŒã€
ãã‚Œã‚‰ã¯ï¼Œ`~scrollå¯èƒ½ãª~overflow$ã‚’ä¼´ã†~boxã«ãŠã„ã¦ã¯ä¸€è‡´ã—ãªã„ã€‚
â—
Note: While all of these are in some sense corresponding to the padding box, they do not coincide for boxes with scrollable overflow.
</p>

<p class="issue">
`ä¸Šç«¯~å±¤$ç”¨ã«å¿…è¦ã«ãªã‚‹æ­£ç¢ºãªæ¦‚å¿µã‚’è§£æ˜ã™ã‚‹ã€‚
ãã‚Œã‚‰ã¯ã€
ãŠãã‚‰ãï¼Œï¼»
å„è‡ªã®å±¤ã«ç‰¹æœ‰ãªï¼Œå°‘ã—ã°ã‹ã‚Šç•°ãªã‚‹ä½•ã‹
ï¼½ã‚’è¡Œã†ã“ã¨ãŒæ±‚ã¾ã‚Œã‚‹ã€‚
â—
Figure out the exact concepts needed for top layer. They probably want to do something a tiny bit different, specific to their layer.
</p>

<p>
`çµ¶å¯¾çš„ã«ä½ç½®ã•ã‚Œ$ãŸ~boxã¯ã€
ä»–ãŒæŒ‡å®šã•ã‚Œãªã„é™ã‚Šï¼Œ`å±€æ‰€çš„ãªåŒ…å«å¡Š$ã‚’åˆ©ç”¨ã™ã‚‹ã€‚
ã‚ã‚‹ç¨®ã®~CSSç‰¹èƒ½ã¯ã€
ç•°ãªã‚‹`åŒ…å«å¡Š$ã‚’åˆ©ç”¨ã™ã‚‹ã‚ˆã†æŒ‡å®šã—å¾—ã‚‹ã€‚
ä¾‹ãˆã°ï¼š
â—
Unless otherwise specified, absolutely positioned boxes use the local containing block. Certain CSS features can specify a different containing block. For example,ï¼¼
</p>
<ul>
	<li>
`å›ºå®šçš„ã«ä½ç½®ã•ã‚Œ$ãŸ~boxã¯ã€
æ¦‚ã—ã¦ï¼Œæ–‡æ›¸ã®`å›ºå®šçš„ãªåŒ…å«å¡Š$ã‚’åˆ©ç”¨ã™ã‚‹ã€‚
â—
fixed positioned boxes typically use the documentâ€™s fixed containing block,ï¼¼
</li>
	<li>
`position-area$p ç”¨ã® `noneï¼ ~CSSANCHOR#valdef-position-area-none$v ä»¥å¤–ã®å€¤ã¯ã€
`çµ¶å¯¾çš„ã«ä½ç½®ã•ã‚Œ$ãŸ~boxã‚’`~scrollå¯èƒ½ãªåŒ…å«å¡Š$ã®ä¸­ã¸é…ç½®ã•ã›å¾—ã‚‹ã€‚
â—
and position-area values other than none can opt absolutely positioned boxes into the scrollable containing block.
</li>
</ul>

<p class="note">æ³¨è¨˜ï¼š
ç¾æ™‚ç‚¹ã§ã¯ï¼Œ
`å›ºå®šçš„ãªåŒ…å«å¡Š$ã‚’æŒ‡ã™ä»•æ–¹ã¯`å›ºå®šdä½ç½®æ±ºã‚åŒ…å«å¡Š$ã®ä»–ã«ç„¡ã„ãŒã€
å°†æ¥ã«ã¯è¿½åŠ ã•ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã€‚
â—
Note: There is not currently any way to refer to a fixed containing block other than the fixed positioning containing block, but one might be added in the future.
</p>

	</section>
	<section id="top-layer">
<h2 title="Top Layer">3. ä¸Šç«¯~å±¤</h2>

<p>
å„`æ–‡æ›¸$ã¯
`ä¸Šç«¯~å±¤@
ï¼ˆ `top layer^en ï¼‰ã‚’æœ‰ã™ã‚‹
â€” ãã‚Œã¯ã€
å½“ã®æ–‡æ›¸~å†…ã®`è¦ç´ $ãŸã¡ãŒæˆã™`æœ‰é †åº~é›†åˆ$ã§ã‚ã‚‹ã€‚
`ä¸Šç«¯~å±¤$ã‚’æˆã™å„~è¦ç´ ã¯ã€
é€šå¸¸ã«æ–‡æ›¸~treeå†…ã®ä½ç½®ã«åŸºã¥ã„ã¦~lay-outã•ã‚Œã‚‹ã“ã¨ã¯ãªãï¼Œ
`æ ¹~è¦ç´ $ã®åŒèƒã§ã‚ã£ãŸã‹ã®ã‚ˆã†ã«`~box$ã‚’ç”Ÿæˆã™ã‚‹ã€‚
`ä¸Šç«¯~å±¤$ã‚’æˆã™è¦ç´ ãŸã¡ã¯ï¼Œ`ä¸Šç«¯~å±¤$å†…ã«ç¾ã‚Œã‚‹é †åºã§æç”»ã•ã‚Œã€
ãã‚Œã‚‰ã®ã†ã¡æœ€å¾Œã®è¦ç´ ã¯ï¼Œä»–ã™ã¹ã¦ã®ä¸Šå±¤ã«æç”»ã•ã‚Œã‚‹ã€‚
â—
Documents have a top layer, an ordered set containing elements from the document. Elements in the top layer do not lay out normally based on their position in the document; instead they generate boxes as if they were siblings of the root element. Top layer elements are rendered in the order they appear in the top layer; the last element in the top layer is rendered on top of everything else.
</p>

<div class="note">
<p>æ³¨è¨˜ï¼š
ã“ã®ç‰¹åˆ¥ãªæç”»ã®æŒ™å‹•ã¯ã€
`ä¸Šç«¯~å±¤~å†…ã«æç”»ã•ã‚Œã¦$ã„ã‚‹ã€ï¼`ä¸Šç«¯~å±¤$å†…ã®ã€‘è¦ç´ ã«å¯¾ã—ï¼Œæ¬¡ã‚’ç¢ºä¿ã™ã‚‹
</p>
<ul>
	<li>
æ–‡æ›¸~å†…ã®ä½•ã‹ã«ã‚ˆã‚Šåˆ‡å–ã‚‰ã‚Œã‚‹ã“ã¨ã¯ãªã„ã€‚
</li>
	<li>
ï¼»
`ä¸Šç«¯~å±¤$å†…ã§è¦ç´ ã‚ˆã‚Šå¾Œã«ã‚ã‚‹ã‚‚ã®ã‚’é™¤ãæ–‡æ›¸~å†…ã®ä½•ã‹
ï¼½ã«ã‚ˆã‚Šé®ã‚‰ã‚Œã‚‹ã“ã¨ã¯ãªã„ã€‚
</li>
	<li>
`~popover$ã®æ§˜ãªã‚‚ã®ã¯ã€
ãã®å…ˆç¥–~è¦ç´ ãŒä½•ã‚’è¡ŒãŠã†ãŒï¼Œä¾æ‹ -å¯èƒ½ã«è¡¨ç¤ºã§ãã‚‹ã€‚
</li>
</ul>
â—
Note: This special rendering behavior ensures that elements in the top layer cannot be clipped by anything in the document, or obscured by anything except elements later in the top layer. This ensures that things like popovers can be displayed reliably, regardless of what their ancestor elements might be doing.
</div>

<p>
è¦ç´  %è¦ç´  ã®
`ä¸Šç«¯~å±¤~æ ¹@
ï¼ˆ `top layer root^en ï¼‰ã¯ã€
%è¦ç´  ã®å…ˆç¥–ã¨ã—ã¦ã€ %è¦ç´  ã®`~nodeæ–‡æ›¸$ã®ã€‘`ä¸Šç«¯~å±¤$ã‚’æˆã™ã‚‚ã®ã¯ï¼»
åœ¨ã‚‹ãªã‚‰ã°ï¼Œãã‚Œã‚‰ã®ã†ã¡ %è¦ç´  ã«æœ€ã‚‚è¿‘ã„ã‚‚ã®ï¼
ç„¡ã„ãªã‚‰ã° Îµ ï¼ˆ `none^en ï¼‰
ï¼½ã¨ã™ã‚‹
ï¼ˆ Îµ ã®äº‹ä¾‹ã§ã¯ã€
%è¦ç´  ã¯é€šå¸¸é€šã‚Šå½“ã®æ–‡æ›¸ã‚’æˆã™ä¸€éƒ¨ã¨ã—ã¦å¡—ã‚‰ã‚Œã‚‹ï¼‰ã€‚
â—
The top layer root of an element is its nearest ancestor element that is in the top layer, or none otherwise (in which case itâ€™s painted as part of the document as normal).
</p>

<p>
æ‰€ä¸ã®
( è¦ç´  %A, è¦ç´  %B )
ã«å¯¾ã—ï¼Œï¼»
%A ã®`~nodeæ–‡æ›¸$ ~EQ %B ã®`~nodeæ–‡æ›¸$
ï¼½â€ ã¨ã™ã‚‹ã¨ãï¼š
â—
â†“</p>
<ul>
	<li>
%A, %B ã¯
`åŒã˜ä¸Šç«¯~å±¤~å†…@
ã«åœ¨ã‚‹ã¨ã¯ã€
æ¬¡ãŒæº€ãŸã•ã‚Œã‚‹ã“ã¨ã‚’ã„ã†
â‡’
%A ã®`ä¸Šç«¯~å±¤~æ ¹$ ~EQ %B ã®`ä¸Šç«¯~å±¤~æ ¹$
ï¼ˆ Îµ ã®å ´åˆã‚‚å«ã‚€ï¼‰
â—
Two elements are in the same top layer if they have the same top layer root (including if both are none).ï¼¼
</li>
	<li>
<p>
%A ã¯ %B
`ã‚ˆã‚Šé«˜ã„ä¸Šç«¯~å±¤~å†…@
ã«åœ¨ã‚‹ã¨ã¯ã€
~ANDâ†“ ãŒæº€ãŸã•ã‚Œã‚‹ã“ã¨ã‚’ã„ã†ï¼š
</p>
		<ul>
			<li>
%A ã®`ä¸Šç«¯~å±¤~æ ¹$ ~NEQ Îµ
</li>
			<li>
<p>
ï¼»
%B ã®`ä¸Šç«¯~å±¤~æ ¹$ ~EQ Îµ
ï¼½~ORï¼»
~ANDâ†“
ï¼½
</p>
				<ul>
					<li>
%B ã®`ä¸Šç«¯~å±¤~æ ¹$ ~NEQ Îµ
</li>
					<li>
`ä¸Šç«¯~å±¤$ã«ãŠã„ã¦ï¼Œ
%A ã®`ä¸Šç«¯~å±¤~æ ¹$ã¯ %B ã®`ä¸Šç«¯~å±¤~æ ¹$ã‚ˆã‚Šå¾Œã«åœ¨ã‚‹
</li>
				</ul>
			</li>
		</ul>

<p class="trans-note">ã€
æº€ãŸã•ã‚Œã‚‹ãªã‚‰ã°ã€
%A ã¯ %B ã‚ˆã‚Šæ‰‹å‰ã«å¡—ã‚‰ã‚Œã‚‹ã€‚
ã€‘</p>
â—
An element A is in a higher top layer than an element B if A has a top layer root, and either B has a top layer root earlier in the top layer than Aâ€™s, or B doesnâ€™t have a top layer root at all.
</li>
</ul>

<p class="trans-note">ã€â€ 
ã“ã®å‰ææ¡ä»¶ã¯ã€
ã“ã®è¨³ã«ã‚ˆã‚‹è£œå®Œã€‚
ã•ã‚‚ãªã‘ã‚Œã°ã€
ã“ã‚Œã‚‰ã®å®šç¾©ã‚’æˆã™æ¡ä»¶ã¯ï¼»
%A, %B ã®`~nodeæ–‡æ›¸$ãŒç•°ãªã‚‹å ´åˆã§ã‚‚ï¼Œ
ã„ãšã‚Œã‹ã®`ä¸Šç«¯~å±¤~æ ¹$ãŒ Îµ ã‚’ã¨ã‚‹å ´åˆ
ï¼½ã«ã¯æº€ãŸã•ã‚Œã‚‹äº‹ä¾‹ãŒç”Ÿã˜ã‚‹ãŒã€
ãã‚Œã¯ï¼Œæ„å›³ã•ã‚Œã‚‹ã‚‚ã®ã§ã¯ãªã„ã§ã‚ã‚ã†ã€‚
ã€‘</p>

<p class="note">æ³¨è¨˜ï¼š
ä½œè€…ã¯ã€
`ä¸Šç«¯~å±¤$ã‚’ç›´ã«æ“ä½œã—å¾—ãªã„
â€” ãã‚Œã¯ã€
ã‚‚ã£ã±ã‚‰ï¼Œ`~UA$ãŒç®¡ç†ã™ã‚‹ã€‚
ã“ã‚Œã¯ã€
~popupã®ä¸­ã®~popupã®æ§˜ãªï¼Œï¼»
ä¸Šç«¯~å±¤ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹~APIã® â€œå…¥å­ãªâ€ å‘¼å‡ºn
ï¼½ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºä¿ã™ã‚‹ã€‚
â—
Note: The top layer is managed entirely by the user agent; it cannot be directly manipulated by authors. This ensures that "nested" invocations of top-layer-using APIs, like a popup within a popup, will display correctly.
</p>

<p class="note">æ³¨è¨˜ï¼š
`ä¸Šç«¯~å±¤$ã¯ã€
`overlay$p ~propã¨ï¼Œã„ãã¶ã‚“é€šä¾‹çš„ã§ãªã„ä»•æ–¹ã§ãƒ¤ãƒªãƒˆãƒªã™ã‚‹ã€‚
è©³ç´°ã¯ `overlay$p ã‚’è¦‹ã‚ˆã€‚
â—
Note: The top layer interacts with the overlay property in a somewhat unusual way. See overlay for details.
</p>

<p>
å„`æ–‡æ›¸$ã¯ã€
`ä¸Šç«¯~å±¤ã‹ã‚‰ã®é™¤å»-å¾…ã¡è¦ç´ ~ç¾¤@
ã‚‚æœ‰ã™ã‚‹
â€” ãã‚Œã¯ã€
é™¤å»~å‡¦ç†å¾…ã¡ãªè¦ç´ ãŸã¡ãŒæˆã™`æœ‰é †åº~é›†åˆ$ã§ã‚ã‚‹
ï¼ˆã“ã‚ŒãŒï¼Œã©ã†åˆ©ç”¨ã•ã‚Œã‚‹ã‹ã«ã¤ã„ã¦ã®è©³ç´°ã¯ã€
ä»¥ä¸‹ã«ä¸ãˆã‚‹å„~algoã‚’è¦‹ã‚ˆï¼‰ã€‚
â—
Documents also have a pending top layer removals ordered set, containing elements that are pending removal. (See the algorithms, below, for details on how this is used.)
</p>

<p>
ä»–ã®ä»•æ§˜ã®~algoã¯ã€
`ä¸Šç«¯~å±¤$ï¼ˆãŠã‚ˆã³`ä¸Šç«¯~å±¤ã‹ã‚‰ã®é™¤å»-å¾…ã¡è¦ç´ ~ç¾¤$ï¼‰ã¨ç›´ã«ãƒ¤ãƒªãƒˆãƒªã™ã‚‹ãƒ™ã‚­ã§ãªã„ã€‚
ï¼ˆ`ä¸Šç«¯~å±¤$ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹å€‹ã€…ã®ç‰¹èƒ½ã¯ã€
ä¸Šç«¯~å±¤~å†…ã®æ§˜ã€…ãªã‚‚ã®ã«å¯¾ã™ã‚‹æ‰€æœ‰æ¨©ã‚’æŒã¤ã“ã¨ã‚‚ã‚ã‚‹
â€” `~popover$ã®å†…å´ã«ã‚ã‚‹~popoverã®æ§˜ãªï¼Œ~groupã¨ã—ã¦ï¼»
ä¸¦æ›¿ã‚‰ã‚Œã‚‹ï¼ç§»å‹•ã•ã‚Œã‚‹
ï¼½å¿…è¦ãŒã‚ã‚‹ã‚‚ã®ãªã©ï¼‰ã€‚
ä»£ã‚ã‚Šã«ã€
ä»–ã®ä»•æ§˜ã¯ï¼Œä»¥ä¸‹ã«ä¸ãˆã‚‹~algoã‚’åˆ©ç”¨ã™ã‚‹ãƒ™ã‚­ã§ã‚ã‚‹ã€‚
â—
The top layer (and the pending top layer removals) should not be interacted with directly by specification algorithms. (Individual features using the top layer might have ownership over various things in the top layer, like a popover inside of a popover, that need to be reordered or moved as a group.) Instead, specifications should use the following algorithms.
</p>

		<section id="top-styling">
<h3 title="Top Layer Styling">3.1. ä¸Šç«¯~å±¤ã®~styleæ³•</h3>

<p>
ï¼»
`ä¸Šç«¯~å±¤~å†…ã«æç”»ã•ã‚Œã¦$ã„ã‚‹è¦ç´ 
ï¼½ãŠã‚ˆã³ï¼»
ãã®ã‚ˆã†ãªè¦ç´ ã‚’`å‡ºè‡ªã®è¦ç´ $ã¨ã™ã‚‹ `backdrop$pe ç–‘ä¼¼è¦ç´ 
ï¼½ %E ã¯ã€
æ¬¡ã«æŒ™ã’ã‚‹~~æ€§è³ªã‚’æº€ãŸã™ã‚ˆã†ã«æç”»ã•ã‚Œã‚‹ï¼š
â—
Every element rendered in the top layer, as well as its corresponding ::backdrop pseudo-element, are rendered with the following qualities:
</p>
<ul>
	<li>
%E ã¯æ–°ãŸãª`ç©å±¤~æ–‡è„ˆ$ã‚’ç”Ÿæˆã™ã‚‹ã€‚
â—
It generates a new stacking context.
</li>
	<li>
%E ã®è¦ª~ç©å±¤~æ–‡è„ˆã¯ã€
æ ¹~ç©å±¤~æ–‡è„ˆã«ãªã‚‹ã€‚
â—
Its parent stacking context is the root stacking context.
</li>
	<li>
<p>
%E ã¯ã€
`æ ¹~è¦ç´ $ã€ï¼æ–‡æ›¸ã®æ ¹ã€‘ã®åŒèƒã§ã‚ã£ãŸã‹ã®ã‚ˆã†ã«ï¼Œä¸å¯åˆ†ãªå˜ä½ã¨ã—ã¦æç”»ã•ã‚Œã‚‹ã€‚
â—
It is rendered as an atomic unit as if it were a sibling of the documentâ€™s root.
</p>

<p class="note">æ³¨è¨˜ï¼š
%E ã®å…ˆç¥–~è¦ç´ ã®ï¼»
`overflow$p, `opacity$p, `mask$p, ç­‰ã€…
ï¼½ã¯ã€
ã“ã®æç”»ã«ã¯å½±éŸ¿ã—å¾—ãªã„ã€‚
ã€ `inherit^v ~keywordã§æ˜ç¤ºçš„ã«ç¶™æ‰¿ã—ãŸå ´åˆã¯åˆ¥ã¨ã—ã¦ã€‚ã€‘
â—
Note: Ancestor elements with overflow, opacity, mask, etc. cannot affect it.
</p>
	</li>
	<li>
%E ã®`åŒ…å«å¡Š$ã¯ã€
%E ã® `position$p ~propã®ç®—å‡ºdå€¤ã«å¿œã˜ã¦ï¼»
`fixed$v ãªã‚‰ã°`è¡¨ç¤ºåŸŸ$ï¼
~ELSE_ `åˆæœŸ~åŒ…å«å¡Š$
ï¼½ã«ãªã‚‹ã€‚
â—
If its position property computes to fixed, its containing block is the viewport; otherwise, itâ€™s the initial containing block.
</li>
	<li>
%E ã¯è¦ç´ ã§ã‚ã£ã¦ï¼Œ
%E ã®`~shadowã‚‚å«ã‚ãŸåºƒç¾©-å…ˆç¥–$ã«ï¼»
`display$p ãŒ `none^v ã‚’ã¨ã‚‹ã‚‚ã®
ï¼½ãŒã‚ã‚‹å ´åˆã€ï¼»
%E, ãŠã‚ˆã³ %E ã‚’`å‡ºè‡ªã®è¦ç´ $ã¨ã™ã‚‹ `backdrop$pe ç–‘ä¼¼è¦ç´ 
ï¼½ã¯æç”»ã•ã‚Œãªã„ã€‚
â—
If it is an element, it and its ::backdrop pseudo-element are not rendered if its shadow-including inclusive ancestor has the display: none.
</li>
	<li>
%E ã® `display$p ~propã¯ã€
æŒ‡å®šdå€¤ãŒ `contents$v ã®å ´åˆã«ã¯ï¼Œ
ç®—å‡ºdå€¤ã¯ `block$v ã«ãªã‚‹ã€‚
â—
If its specified display property is contents, it computes to block.
</li>
	<li>
%E ã® `position$p ~propã¯ã€
æŒ‡å®šdå€¤ãŒï¼»
`absolute$v, `fixed$v
ï¼½ä»¥å¤–ã®å ´åˆã«ã¯ï¼Œ
ç®—å‡ºdå€¤ã¯ `absolute$v ã«ãªã‚‹ã€‚
â—
If its specified position property is not absolute or fixed, it computes to absolute.
</li>
	<li>
åˆ¥ã®ä»•æ§˜ã«ã‚ˆã‚Šä¸Šæ›¸ãã•ã‚Œãªã„é™ã‚Šã€ï¼»
å·¦ç«¯, å³ç«¯, ä¸Šç«¯
ï¼½ã‹ã‚‰ã® %E ã®`é™çš„~ä½ç½®$ã¯ï¼Œã„ãšã‚Œã‚‚ 0 ã«ãªã‚‹ã€‚
â—
Unless overridden by another specification, its static position for left, right, and top is zero.
</li>
</ul>

		</section>
		<section id="backdrop">
<h3 title="The ::backdrop Pseudo-Element">3.2. `backdrop^pe ç–‘ä¼¼è¦ç´ </h3>

<p>
`ä¸Šç«¯~å±¤~å†…ã«æç”»ã•ã‚Œã¦$ã„ã‚‹å„~è¦ç´ ã«ã¯ã€
ã€ãã‚Œã‚’`å‡ºè‡ªã®è¦ç´ $ã¨ã™ã‚‹ã€‘
`backdrop@pe
ç–‘ä¼¼è¦ç´ ãŒã‚ã‚‹ã€‚
â—
Each element rendered in the top layer has a ::backdrop pseudo-element, for which it is the originating element.
</p>

<p>
`backdrop$pe ç–‘ä¼¼è¦ç´ ã¯ã€
ãã® `content$p ã®ç®—å‡ºdå€¤ãŒ `noneï¼ ~CSSCONTENT#valdef-content-none$v ä»¥å¤–ã®ã¨ãã¯ã€
æ ¹~è¦ç´ ã®åŒèƒã§ã‚ã£ãŸã‹ã®ã‚ˆã†ã«~boxã‚’ç”Ÿæˆã™ã‚‹ã€‚
ãã‚Œã¯ã€
`ä¸Šç«¯~å±¤$å†…ã§ ãã®`å‡ºè‡ªã®è¦ç´ $ã®ç›´ä¸‹ã«ã‚ã‚‹åˆ¥ã€…ãª~itemã¨ã—ã¦è‡ªå‹•çš„ã«æç”»ã•ã‚Œã‚‹
ï¼ˆè©³ç´°ã¯ã€
`æ–‡æ›¸ã‚’å¡—ã‚‹$ã‚’è¦‹ã‚ˆï¼‰ã€‚
â—
When its computed content value is not none, ::backdrop pseudo-elements generate boxes as if they were siblings of the root element. Theyâ€™re automatically rendered as a separate item in the top layer, below their originating element. (See "paint a document" for details.)
</p>

<p class="note">æ³¨è¨˜ï¼š
`backdrop$pe ç–‘ä¼¼è¦ç´ ã¯ã€
ä¸Šç«¯~å±¤~å†…ã®è¦ç´ ï¼ˆ~fullscreenã«è¡¨ç¤ºã•ã‚Œã‚‹è¦ç´ ãªã©ï¼‰ç”¨ã«ï¼»
ä¸‹å±¤ã®æ–‡æ›¸ã‚’éš ã™ãŸã‚ã®å¾Œæ™¯
ï¼½ã‚’ä½œæˆã™ã‚‹ãŸã‚ã«åˆ©ç”¨ã§ãã‚‹ã€‚
â—
Note: The ::backdrop pseudo-element can be used to create a backdrop that hides the underlying document for an element in a top layer (such as an element that is displayed fullscreen).
</p>

<p>
`backdrop$pe ç–‘ä¼¼è¦ç´ ã¯ã€
`å…¨éƒ¨çš„ã«~styleå¯èƒ½ãªç–‘ä¼¼è¦ç´ $ã§ã‚ã‚‹ã€‚
â—
The ::backdrop pseudo-element is a fully styleable pseudo-element.
</p>

<p>
~UAã¯ã€
~UA~levelã®~stylesheetå†…ã«æ¬¡ã®è¦å‰‡ã‚’åŒ…å«ã™ã‚‹ãƒ™ã‚­ã§ã‚ã‚‹ï¼š
â—
User agents should contain the following rules in a UA-level style sheet:
</p>

<pre class="lang-css">
::backdrop {
  position: fixed;
  inset: 0;
}
</pre>

<p>
ä»–ã®ä»•æ§˜ã¯ã€
`backdrop$pe ç”¨ã®æ—¢å®šã®æç”»ã«è¿½åŠ çš„ãª~propã‚’æŒ‡å®šã—å¾—ã‚‹ã€‚
â—
Other specifications can additional properties to the default ::backdrop rendering.
</p>

<p class="note">æ³¨è¨˜ï¼š
ä¾‹ãˆã°ï¼Œ
`~fullscreenè¦ç´ $ï¼ˆ `FULLSCREEN$r ï¼‰ã¯ã€
ãã® `backdrop$pe ã‚’æ—¢å®šã§ã¯`ä¸é€æ˜ãªé»’$ã¨ã—ã¦~styleã™ã‚‹ã€‚
â—
Note: For example, a fullscreen element (see [FULLSCREEN]) styles its ::backdrop as opaque black by default.
</p>

<p>
`backdrop$pe ç–‘ä¼¼è¦ç´ ãŒã©ã†æç”»ã•ã‚Œã‚‹ã‹ã«é–¢ã™ã‚‹è¿½åŠ çš„ãªè©³ç´°ã¯ã€
`Â§ ä¸Šç«¯~å±¤ã®~styleæ³•ï¼ #top-styling$ã‚’è¦‹ã‚ˆã€‚
â—
See Â§ 3.1 Top Layer Styling for additional details on how ::backdrop elements are rendered.
</p>

		</section>
		<section id="top-manip">
<h3 title="Top Layer Manipulation">3.3. ä¸Šç«¯~å±¤ã«å¯¾ã™ã‚‹æ“ä½œ</h3>

<div class="algo">
<p>
`è¦ç´ $ %è¦ç´  ãŒ
`ä¸Šç«¯~å±¤~å†…@
ã«åœ¨ã‚‹ã¨ã¯ã€
æ¬¡ãŒæº€ãŸã•ã‚Œã‚‹ã“ã¨ã‚’ã„ã†
â‡’
ï¼»
%è¦ç´  ~IN %è¦ç´  ã®`~nodeæ–‡æ›¸$ã®`ä¸Šç«¯~å±¤$
ï¼½~ANDï¼»
%è¦ç´  ~NIN %è¦ç´  ã®`~nodeæ–‡æ›¸$ã®`ä¸Šç«¯~å±¤ã‹ã‚‰ã®é™¤å»-å¾…ã¡è¦ç´ ~ç¾¤$
ï¼½
â—
An element el is in the top layer if el is contained in its node documentâ€™s top layer but not contained in its node documentâ€™s pending top layer removals. 
</p>

<p class="note">æ³¨è¨˜ï¼š
å„~ä»•æ§˜ã¯ã€
`ä¸Šç«¯~å±¤$ã‚’æ“ä½œã—ã¦ã„ã‚‹ã¨ãã¯ï¼Œï¼»
â€œ`ä¸Šç«¯~å±¤~å†…ã«æç”»ã•ã‚Œã¦$ã„ã‚‹â€ ã§ã¯ãªãï¼Œã“ã®æ¦‚å¿µ
ï¼½ã‚’åˆ©ç”¨ã™ã‚‹ãƒ™ã‚­ã§ã‚ã‚‹ã€‚
ã“ã®æ¦‚å¿µã‚’åˆ©ç”¨ã™ã‚Œã°ã€ï¼»
`overlay$p ã«å¯¾ã™ã‚‹é·ç§»ã®æœ‰ç„¡
ï¼½ã«å¿œã˜ã¦ï¼Œã‚ã‚‹ã„ã¯ï¼»
2 å›ã®æ¼”ç®—ãŒï¼»
ã‚ã‚‹æç”»~æ›´æ–°ã‹ã‚‰æ¬¡å›ã®æç”»~æ›´æ–°ã¾ã§ã®`åˆé–“^emã«èµ·ããŸã‹ï¼Œ
ã‚ã‚‹æç”»~æ›´æ–°ã®`å‰å¾Œ^emã«èµ·ããŸã‹
ï¼½ã«å¿œã˜ã¦æŒ™å‹•ãŒç•°ãªã‚‹ã“ã¨ã¯ï¼Œé¿ã‘ã‚‰ã‚Œã‚‹ã€‚
â—
Note: Specs should use this concept, rather than rendered in the top layer, when they are manipulating the top layer itself. Using this concept avoids the behavior being different based on whether thereâ€™s an overlay transition, or whether two operations happened between rendering updates or across them.
</p>
</div>

<div class="algo">
<p>
`è¦ç´ $ %è¦ç´  ãŒ
`ä¸Šç«¯~å±¤~å†…ã«æç”»ã•ã‚Œã¦@
ã„ã‚‹ã¨ã¯ã€
æ¬¡ãŒæº€ãŸã•ã‚Œã‚‹ã“ã¨ã‚’ã„ã†
â‡’
ï¼»
%è¦ç´  ~IN %è¦ç´  ã®`~nodeæ–‡æ›¸$ã®`ä¸Šç«¯~å±¤$
ï¼½~ANDï¼»
%è¦ç´  ã® `overlay$p ã¯ `auto^v ã‚’ã¨ã‚‹
ï¼½
â—
An element el is rendered in the top layer if el is contained in its node documentâ€™s top layer, and el has overlay: auto.
</p>

<p class="note">æ³¨è¨˜ï¼š
å„~ä»•æ§˜ã¯ã€ï¼»
`ä¸Šç«¯~å±¤$ã‚’æ“ä½œã—ã¦ã¯ã„ãªã„
ï¼½ãŒï¼»
è¦ç´ ãŒ â€œä»–ã™ã¹ã¦ã®ä¸Šå±¤ã«ã‚ã‚‹â€ ã¨ãã®æç”»ã®æŒ™å‹•ã«å¿œç­”ã—ã¦ã„ã‚‹
ï¼½ã¨ãã¯ï¼Œï¼»
â€œ`ä¸Šç«¯~å±¤~å†…$ã«åœ¨ã‚‹â€ ã§ã¯ãªãï¼Œã“ã®æ¦‚å¿µ
ï¼½ã‚’åˆ©ç”¨ã™ã‚‹ãƒ™ã‚­ã§ã‚ã‚‹ã€‚
ä¾‹ãˆã°ï¼Œï¼»
æ‰€ä¸ã®è¦ç´  %è¦ç´  ã‚’`å‡ºè‡ªã®è¦ç´ $ã¨ã™ã‚‹ `backdrop$pe ç–‘ä¼¼è¦ç´ 
ï¼½ã®æœ‰ç„¡ã¯ã€
%è¦ç´  ãŒ`ä¸Šç«¯~å±¤~å†…ã«æç”»ã•ã‚Œã¦$ã„ã‚‹ã“ã¨ã«ä¾æ‹ ã™ã‚‹
â€” ï¼»
%è¦ç´  ~IN `ä¸Šç«¯~å±¤ã‹ã‚‰ã®é™¤å»-å¾…ã¡è¦ç´ ~ç¾¤$
ï¼½ã®å ´åˆã§ã‚‚ã€
%è¦ç´  ãŒ â€œä»–ã™ã¹ã¦ã®ä¸Šå±¤â€ ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹é–“ã¯ï¼Œ
`backdrop$pe ç–‘ä¼¼è¦ç´ ã¯åœ¨ã‚‹ã€‚
â—
Note: Specs should use this concept, rather than in the top layer, when they are not manipulating the top layer itself, but rather responding to the rendering behavior of being "on top of everything". For example, the presence of a ::backdrop pseudo relies on the element being rendered in the top layer; even if the element is pending removal, it has a ::backdrop as long as itâ€™s being displayed on top of everything.
</p>
</div>

<div class="algo">
<p>
`ä¸Šç«¯~å±¤ã«è¦ç´ ã‚’è¿½åŠ ã™ã‚‹@
~algoã¯ã€
æ‰€ä¸ã®
( `è¦ç´ $ %è¦ç´  )
ã«å¯¾ã—ï¼š
â—
To add an element to the top layer, given an Element el:
To add an element to the top layer, given a Document doc and an Element el:
</p>
<ol>
	<li>
%æ–‡æ›¸ ~LET %è¦ç´  ã®`~nodeæ–‡æ›¸$
â—
Let doc be elâ€™s node document.
</li>
	<li>
<p>
~IFï¼»
%è¦ç´  ~IN %æ–‡æ›¸ ã®`ä¸Šç«¯~å±¤$
ï¼½ï¼š
â—
If el is already contained in docâ€™s top layer:
</p>
		<ol>
			<li>
~Assertï¼š
%è¦ç´  ~IN %æ–‡æ›¸ ã®`ä¸Šç«¯~å±¤ã‹ã‚‰ã®é™¤å»-å¾…ã¡è¦ç´ ~ç¾¤$
ï¼ˆã•ã‚‚ãªã‘ã‚Œã°ã€
ä»•æ§˜ã®èª¤ã‚Šã§ã‚ã‚‹ã€‚ï¼‰
â—
Assert: el is also in docâ€™s pending top layer removals. (Otherwise, this is a spec error.)
</li>
			<li>
%æ–‡æ›¸ ã®`ä¸Šç«¯~å±¤$ã‹ã‚‰ %è¦ç´  ã‚’`é™¤å»ã™ã‚‹$
â—
Remove el from both docâ€™s top layerï¼¼
</li>
			<li>
%æ–‡æ›¸ ã®`ä¸Šç«¯~å±¤ã‹ã‚‰ã®é™¤å»-å¾…ã¡è¦ç´ ~ç¾¤$ã‹ã‚‰ %è¦ç´  ã‚’`é™¤å»ã™ã‚‹$
â—
and pending top layer removals.
</li>
		</ol>
	</li>
	<li>
%æ–‡æ›¸ ã®`ä¸Šç«¯~å±¤$ã« %è¦ç´  ã‚’`ä»˜åŠ ã™ã‚‹$set
â—
Append el to docâ€™s top layer.
</li>
	<li>
%æ–‡æ›¸ ã®`ä¸Šç«¯~å±¤~styleè¦ç´ ~ç¾¤$ã« %è¦ç´  ã‚’è¿½åŠ ã™ã‚‹
â—
At the UA !important cascade origin, add a rule targeting el containing an overlay: auto declaration.
</li>
</ol>
</div>

<div class="algo">
<p>
`ä¸Šç«¯~å±¤ã‹ã‚‰è¦ç´ ã‚’é™¤å»ã™ã‚‹ã‚ˆã†è¦è«‹ã™ã‚‹@
~algoã¯ã€
æ‰€ä¸ã®
( `è¦ç´ $ %è¦ç´  )
ã«å¯¾ã—ï¼š
â—
To request an element to be removed from the top layer, given an Element el:
</p>
<ol>
	<li>
%æ–‡æ›¸ ~LET %è¦ç´  ã®`~nodeæ–‡æ›¸$
â—
Let doc be elâ€™s node document.
</li>
	<li>
~IFï¼»
%è¦ç´  ~NIN %æ–‡æ›¸ ã®`ä¸Šç«¯~å±¤$
ï¼½~ORï¼»
%è¦ç´  ~IN %æ–‡æ›¸ ã®`ä¸Šç«¯~å±¤ã‹ã‚‰ã®é™¤å»-å¾…ã¡è¦ç´ ~ç¾¤$
ï¼½
â‡’
~RET
â—
If el is not contained docâ€™s top layer, or el is already contained in docâ€™s pending top layer removals, return.
</li>
	<li>
%æ–‡æ›¸ ã®`ä¸Šç«¯~å±¤~styleè¦ç´ ~ç¾¤$ã‹ã‚‰ %è¦ç´  ã‚’é™¤å»ã™ã‚‹
â—
Remove the UA !important overlay: auto rule targeting el.
</li>
	<li>
%æ–‡æ›¸ ã®`ä¸Šç«¯~å±¤ã‹ã‚‰ã®é™¤å»-å¾…ã¡è¦ç´ ~ç¾¤$ã« %è¦ç´  ã‚’`ä»˜åŠ ã™ã‚‹$set
â—
Append el to docâ€™s pending top layer removals.
</li>
</ol>
</div>

<div class="algo">
<p>
`ä¸Šç«¯~å±¤ã‹ã‚‰è¦ç´ ã‚’å³æ™‚ã«é™¤å»ã™ã‚‹@
~algoã¯ã€
æ‰€ä¸ã®
( `è¦ç´ $ %è¦ç´  )
ã«å¯¾ã—ï¼š
â—
To remove an element from the top layer immediately, given an Element el:
</p>
<ol>
	<li>
%æ–‡æ›¸ ~LET %è¦ç´  ã®`~nodeæ–‡æ›¸$
â—
Let doc be elâ€™s node document.
</li>
	<li>
%æ–‡æ›¸ ã®`ä¸Šç«¯~å±¤$ã‹ã‚‰ %è¦ç´  ã‚’`é™¤å»ã™ã‚‹$
â—
Remove el from docâ€™s top layerï¼¼
</li>
	<li>
%æ–‡æ›¸ ã®`ä¸Šç«¯~å±¤ã‹ã‚‰ã®é™¤å»-å¾…ã¡è¦ç´ ~ç¾¤$ã‹ã‚‰ %è¦ç´  ã‚’`é™¤å»ã™ã‚‹$
â—
and pending top layer removals.
</li>
	<li>
%æ–‡æ›¸ ã®`ä¸Šç«¯~å±¤~styleè¦ç´ ~ç¾¤$ã‹ã‚‰ %è¦ç´  ã‚’é™¤å»ã™ã‚‹ï¼ˆã‚‚ã—ã‚ã‚Œã°ï¼‰
â—
Remove the UA !important overlay: auto rule targeting el, if it exists.
</li>
</ol>

<p class="note">æ³¨è¨˜ï¼š
ã“ã®~algoã¯ã€
ç‰¹åˆ¥ãªäº‹ä¾‹
â€” ä¸Šç«¯~å±¤ã‹ã‚‰å³æ™‚ã«
ï¼ˆ `overlay$p ã«å¯¾ã™ã‚‹é·ç§»ãªã©ã¯ï¼Œç«¯æŠ˜ã£ã¦ï¼‰
é™¤å»ã™ã‚‹ã“ã¨ãŒå¿…è¦yãªäº‹ä¾‹ â€”
ã«é™ã‚Šï¼Œåˆ©ç”¨ã•ã‚Œã‚‹ã“ã¨ãŒæ„å›³ã•ã‚Œã‚‹
â€” ~modal~dialogãŒæ–‡æ›¸ã‹ã‚‰é™¤å»ã•ã‚ŒãŸã¨ããªã©ã€‚
ã»ã¨ã‚“ã©ã®å ´åˆã€
`ä¸Šç«¯~å±¤ã‹ã‚‰è¦ç´ ã‚’é™¤å»ã™ã‚‹ã‚ˆã†è¦è«‹ã™ã‚‹$æ–¹ãŒé©åˆ‡ã«ãªã‚‹ã€‚
â—
Note: This algorithm is only intended to be used in special cases where removing something from the top layer immediately (bypassing things like an overlay transition) is necessary, such as a modal dialog that is removed from the document. Most of the time, requesting removal from the top layer is more appropriate.
</p>
</div>

<div class="algo">
<p>
`ä¸Šç«¯~å±¤ã‹ã‚‰ã®é™¤å»ã‚’å‡¦ç†ã™ã‚‹@
~algoã¯ã€
æ‰€ä¸ã®
( `æ–‡æ›¸$ %æ–‡æ›¸ )
ã«å¯¾ã—ï¼š
â—
To process top layer removals, given a Document doc:
</p>
<ol>
	<li>
%æ–‡æ›¸ ã®`ä¸Šç«¯~å±¤ã‹ã‚‰ã®é™¤å»-å¾…ã¡è¦ç´ ~ç¾¤$ã‚’æˆã™
~EACH( è¦ç´  %è¦ç´  )
ã«å¯¾ã—
â‡’
~IFï¼»
%è¦ç´  ã® `overlay$p ã®ç®—å‡ºdå€¤ ~EQ `none$v
ï¼½~ORï¼»
%è¦ç´  ã¯`å…·ç¾åŒ–ã•ã‚Œã¦$ã„ãªã„
ï¼½
â‡’
`ä¸Šç«¯~å±¤ã‹ã‚‰è¦ç´ ã‚’å³æ™‚ã«é™¤å»ã™ã‚‹$( %è¦ç´  )
â—
For each element el in docâ€™s pending top layer removals: if el's computed value of overlay is none, or el is not rendered, remove from the top layer immediately el.
</li>
</ol>

<p class="note">æ³¨è¨˜ï¼š
ã“ã‚Œã¯ã€
~HTMLã®`æç”»ã‚’æ›´æ–°ã™ã‚‹æ‰‹ç¶šãï¼ ~WAPI#update-the-rendering$ã®ä¸­ã‹ã‚‰~callã•ã‚Œã‚‹ã“ã¨ãŒæ„å›³ã•ã‚Œã‚‹ã€‚
ä»–ã®~algoã‹ã‚‰~callã•ã‚Œã‚‹ã“ã¨ã¯æ„å›³ã•ã‚Œãªã„ã€‚
â—
Note: This is intended to be called during the "Update the Rendering" step of HTMLâ€™s rendering algorithm. It is not intended to be called by other algorithms.
</p>

<p class="note">æ³¨è¨˜ï¼š
`overlay$p ã«å¯¾ã™ã‚‹æ¤œæŸ»ã¯ã€
ä½œè€…~levelã®é·ç§»ã«ã‚ˆã‚Šï¼Œä»»æ„ã«é•·ãé…å»¶ã•ã‚Œå¾—ã‚‹
â€” è©³ç´°ã¯ã€
`Â§ ä¸Šç«¯~å±¤ã®åˆ¶å¾¡-æ³•ï¼ #overlay$ã‚’è¦‹ã‚ˆã€‚
â—
Note: The overlay check can be delayed arbitrarily long by author-level transitions; see Â§ 3.4 Controlling the Top Layer: the overlay property for details.
</p>
</div>

		</section>
		<section id="overlay">
<h3 title="Controlling the Top Layer: the overlay property">3.4. ä¸Šç«¯~å±¤ã®åˆ¶å¾¡-æ³•ï¼š `overlay^p ~prop</h3>

<div>
â—å `overlay@p
â—å€¤ `none$v | `auto$v
â—åˆ `none$v
â—é© ã™ã¹ã¦ã®è¦ç´ 
â—ç¶™ ã•ã‚Œãªã„
â—ç™¾ å—å®¹ã—ãªã„
â—ç®— æŒ‡å®šã•ã‚ŒãŸã¨ãŠã‚Š
â—é † æ–‡æ³•ã«å¾“ã†
â—ã‚¢ ï¼ˆæ³¨é‡ˆæ–‡ã‚’è¦‹ã‚ˆï¼‰
â—è¡¨çµ‚
â—
Name: 	overlay
Value: 	none | auto
Initial: 	none
Applies to: 	all elements
Inherited: 	no
Percentages: 	n/a
Computed value: 	as specified
Canonical order: 	per grammar
Animation type: 	see prose
</div>

<p>
`overlay$p ~propã¯ã€ï¼»
è¦ç´ ãŒ`ä¸Šç«¯~å±¤~å†…$ã«åœ¨ã‚‹ã¨ãï¼Œå®Ÿéš›ã«`ä¸Šç«¯~å±¤~å†…ã«æç”»ã•ã‚Œ$ã‚‹ã‹å¦ã‹
ï¼½ã‚’æ±ºå®šã™ã‚‹ã€‚
â—
When an element is in the top layer, the overlay property determines whether it is actually rendered in the top layer or not.
</p>

<dl class="valdef">
	<dt>`none@v</dt>
	<dd>
å½“ã®è¦ç´ ã¯ã€
`ä¸Šç«¯~å±¤~å†…ã«æç”»ã•ã‚Œ$ãªã„ã€‚
â—
The element isnâ€™t rendered in the top layer.
</dd>

	<dt>`auto@v</dt>
	<dd>
å½“ã®è¦ç´ ã¯ã€
`ä¸Šç«¯~å±¤~å†…$ã«åœ¨ã‚‹ãªã‚‰ã°ï¼Œ`ä¸Šç«¯~å±¤~å†…ã«æç”»ã•ã‚Œ$ã‚‹ã€‚
â—
The element is rendered in the top layer if it is in the top layer.
</dd>
	<dd>
è¦ç´ ã¯ã€
~boxã‚’é€šå¸¸ã«æ–‡æ›¸~treeå†…ã®ä½ç½®ã«åŸºã¥ã„ã¦ç”Ÿæˆã™ã‚‹ã®ã§ã¯ãªãï¼Œ
~boxã‚’æ ¹~è¦ç´ ã®åŒèƒã¨ã—ã¦ç”Ÿæˆã™ã‚‹
â€” ~boxã¯ï¼Œãã‚Œã® â€œä¸Šã«â€ æç”»ã•ã‚Œã‚‹ã€‚
â—
Rather than generating boxes as part of its normal position in the document, it generates boxes as a sibling of the root element, rendered "above" it.
</dd>
</dl>

<div class="note" id="overlay-guidance">
<p>æ³¨è¨˜ï¼š
`overlay$p ã¯ã€
ã„ãã¶ã‚“é€šä¾‹çš„ã§ãªã„~propã§ã‚ã‚‹
â€” ãã‚Œã‚’è¨­å®šã—å¾—ã‚‹ã®ã¯ï¼Œ~UAã«`é™ã‚‰ã‚Œ^emã€
ä½œè€…ã¯ï¼Œ`ã¾ã£ãŸã^emè¨­å®šã—å¾—ãªã„ã®ã§ã€‚
â—
Note: overlay is a somewhat unusual property, as it is only set by the user agent, and canâ€™t be set by authors at all.
</p>

<p>
ã—ã‹ã—ãªãŒã‚‰ï¼Œä½œè€…ã¯ã€
`overlay$p ~propã®å€¤ãŒ`å¤‰åŒ–ã™ã‚‹ã¨ã^emã«å½±éŸ¿ã™ã‚‹èƒ½ã‚’`æœ‰ã™ã‚‹^em
â€” ãã‚Œã«å¯¾ã™ã‚‹ `transition$p ã‚’è¨­å®šã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€‚
ã“ã‚Œã¯ã€
ã“ã®é·ç§»ã«æƒã†~animationã‚’ä½œè€…ã«è¨±å®¹ã™ã‚‹
â€” å½“ã®~animationã«ãŠã„ã¦æ¬²ã•ã‚Œã‚‹åœ°ç‚¹ã«é™ã‚Šï¼Œå½“ã®è¦ç´ ã‚’ä¸Šç«¯~å±¤ï¼»
ã®å†…ï¼ã‹ã‚‰å¤–
ï¼½ã¸ç§»å‹•ã™ã‚‹ã“ã¨ã§
ã€å…·ä½“çš„ã«ã¯ã€ä¸‹ã®æ³¨è¨˜ã¨ `backdrop$pe ã®ä½µç”¨ã«ã‚ˆã‚Šï¼Ÿã€‘ã€‚
ã“ã‚Œã¯ï¼Œä¾‹ãˆã°ã€
è¦ç´ ã‚’ï¼»
~pageä¸Šã®é€šå¸¸ã®ä½ç½®ã‹ã‚‰~fade-outã•ã›ã¦ã‹ã‚‰ï¼Œ
æ–°ãŸãªä¸Šç«¯~å±¤~ä½ç½®ã¸~fade-inã•ã›ã‚‹
ï¼½ã‚ã‚‹ã„ã¯ï¼»
ãã®é€†ã‚’è¡Œã†
ï¼½~animationã‚’è¨±å®¹ã™ã‚‹ã€‚
â—
However, authors do have the ability to affect when overlay changes its value, by setting a transition on the property. This allows an author to align an animation with the transition, with the element moving in or out of the top layer only at the desired point in the animation. This allows, for example, an animation that causes an element to fade out of its normal position on the page, then fade in at its new top-layer position, or vice versa.
</p>
</div>

<p>
`overlay$p ~propã«å¯¾ã™ã‚‹~animationã¯ã€
æ¬¡ã«å¾“ã†ã“ã¨ã‚’é™¤ã„ã¦ï¼Œ`é›¢æ•£çš„$ã«`è£œé–“-$ã—ãŸã¨ãã¨åŒã˜ã«ãªã‚‹
â‡’
`auto$v ã¨ä»–ã®å€¤ã‚’è£œé–“ã™ã‚‹ã¨ãã¯ã€ï¼»
0 ~LT %p ~LT 1
ï¼½ã‚’æº€ãŸã™ %p å€¤ã¯ `auto$v ã«å¯¾å¿œä»˜ã‘ã‚‰ã‚Œã‚‹ã€‚
â—
For animation, auto is interpolated as a discrete step where values of p such that 0 &lt; p &lt; 1 map to auto and other values of p map to the closer endpoint; if neither value is auto then discrete animation is used.
</p>

<p class="note">æ³¨è¨˜ï¼š
ã“ã‚Œã¯ã€
`visibility$p ã«å¯¾ã™ã‚‹~animateæ³•ã¨é¡ä¼¼ã™ã‚‹ã€‚
ã»ã¨ã‚“ã©ã®`~easingé–¢æ•°$ã§ã¯ã€
ã“ã‚Œã«ã‚ˆã‚Šï¼Œå½“ã®è¦ç´ ãŒï¼»
é·ç§»ã®æ‰€è¦æ™‚é–“~å…¨ä½“ã«ã‚ãŸã£ã¦`ä¸Šç«¯~å±¤~å†…ã«æç”»ã•ã‚Œ$ã‚‹
ï¼½ã‚ˆã†ä¿ãŸã‚Œã‚‹
â€” è¦ç´ ãŒ`ä¸Šç«¯~å±¤$ï¼»
ã«å…¥ã‚‹ã¨ãï¼ã‹ã‚‰å‡ºã‚‹ã¨ã
ï¼½ã©ã¡ã‚‰ã§ã‚ã‚Œã€‚
ï¼»
`step-startï¼ ~CSSEASING#valdef-step-easing-function-step-start$v ï¼
`step-endï¼ ~CSSEASING#valdef-step-easing-function-step-end$v ï¼
`linear$f
ï¼½ã‚’åˆ©ç”¨ã™ã‚Œã°ã€
`overlay$p ã®å€¤ãŒã„ã¤åˆ‡ã‚Šæ›¿ã‚ã‚‹ã‹ã‚’ ã‚‚ã£ã¨ç²¾ç¢ºã«åˆ¶å¾¡ã§ãã‚‹ã€‚
â—
Note: This is similar to how visibility animates. With most easing functions, this will keep the element rendered in the top layer for the entire duration of the transition, whether itâ€™s entering or leaving the top layer. step-start/step-end/linear() can be used to control when the value flips more precisely.
</p>

<p>
`~UA~stylesheet$å†…ã«ã¯ã€
æ¬¡ã®è¦å‰‡ãŒåœ¨ã‚‹ãƒ¢ãƒãƒˆã‚¹ãƒ«ï¼š
â—
User agents must have the following rule in their UA stylesheet:
</p>

<pre class="lang-css">
* { overlay: none !important; }
</pre>

<p class="note">æ³¨è¨˜ï¼š
ã“ã®ã“ã¨ã¯ã€ï¼»
ä½œè€…ï¼åˆ©ç”¨è€…
ï¼½ã¯ `overlay$p ~propã‚’`è¨­å®šã—å¾—ãªã„^emã“ã¨ã‚’æ„å‘³ã™ã‚‹
â€” ã“ã®~propã¯ã€
ã‚‚ã£ã±ã‚‰~UAã«ã‚ˆã‚Šåˆ¶å¾¡ã•ã‚Œã‚‹
ï¼ˆè¦ç´ ã® `overlay$p ã¯ã€
è¦ç´ ãŒ`ä¸Šç«¯~å±¤$å†…ã«ã‚ã‚‹é–“ï¼Œ`ä¸Šç«¯~å±¤~styleè¦ç´ ~ç¾¤$ã‚’ä»‹ã—ã¦ `auto^v ã«è¨­å®šã•ã‚Œã‚‹ï¼‰ã€‚
â—
Note: This means that the overlay property cannot be set by authors or usersâ€”it is entirely controlled by the user agent (which sets elements to overlay: auto, via another UA-!important rule, when theyâ€™re in the top layer).
</p>

<p>
åŠ ãˆã¦ï¼Œ~UAã¯ã€
`~UA~stylesheet$å†…ã«æ¬¡ã®ã‚ˆã†ãªï¼»
ä¸Šã®è¦å‰‡ã‚ˆã‚Šå„ªå…ˆã•ã‚Œã‚‹`~styleè¦å‰‡$
ï¼½ãŒåœ¨ã‚‹ã‹ã®ã‚ˆã†ã«æŒ™å‹•ã™ã‚‹ãƒ¢ãƒãƒˆã‚¹ãƒ«ï¼š
</p>
<ul>
	<li>
<p>
`ä¸Šç«¯~å±¤~styleè¦ç´ ~ç¾¤$ã‚’æˆã™è¦ç´ ãŸã¡ã‚’~targetã«ã—ã¦ã„ã‚‹
â€” ã™ãªã‚ã¡ã€
ãã‚Œã‚‰ã®è¦ç´ ã®ã¿ã‚’`~subject$ã¨ã™ã‚‹ â€œä»®æƒ³ã®â€ é¸æŠå­ã‚’ä¼´ã†ã€‚
</p>

<p>
å„`æ–‡æ›¸$ã¯ã€
`ä¸Šç«¯~å±¤~styleè¦ç´ ~ç¾¤@
ã‚’æœ‰ã™ã‚‹
â€” ãã‚Œã¯ã€
è¦ç´ ãŸã¡ãŒæˆã™é›†åˆã§ã‚ã‚Šï¼ŒåˆæœŸ~æ™‚ã¯ç©ºã¨ã™ã‚‹ã€‚
</p>
</li>
	<li>
æ¬¡ã®å®£è¨€ã‚’åŒ…å«ã—ã¦ã„ã‚‹
â‡’
`overlay: auto !important;^css
</li>
</ul>

<p class="trans-note">ã€
ã“ã®~styleè¦å‰‡ã«é–¢ã™ã‚‹è¨˜è¿°ã‚„ç”¨èªã¯ã€
åŸæ–‡ã«ã¦ä»–ã®å„æ‰€ã«è¿°ã¹ã‚‰ã‚ŒãŸè¦ä»¶ã‚’é›†ç´„ã™ã‚‹ãŸã‚ã®ï¼Œã“ã®è¨³ã«ã‚ˆã‚‹è¿½åŠ ã€‚
ã€‘</p>

<p>
~UAã¯ã€
è‡ªèº«ã®è£é‡ã§ï¼Œ
`overlay$p ã«å¯¾ã—èµ°ã£ã¦ã„ã‚‹`é·ç§»^ã‚’é™¤å»ã—ã¦ã‚‚`ãƒ¨ã‚¤^emã€‚
ãã®ãŸã‚ã®æ¡ä»¶ã¯ã€
æ„å›³çš„ã«æœªå®šç¾©ã§ã‚ã‚‹ã€‚
â—
User agents may, at their discretion, remove a running transition on overlay. The conditions for this are intentionally undefined.ï¼¼
</p>

<p class="note">æ³¨è¨˜ï¼š
æœªå®šç¾©ã¨ã—ã¦ã„ã‚‹ã®ã¯ã€
<code class="css">`transition$p: `overlay 1e9s^v</code> ã«é¡ä¼¼ãªè©¦ã¿ã§ï¼Œ
è¦ç´ ã‚’`ä¸Šç«¯~å±¤$ã«æ’ä¹…çš„ã«ä¿ã¨ã†ã¨ã™ã‚‹æ¿«ç”¨~å±€é¢ã‚’é˜²æ­¢ã™ã‚‹ãŸã‚ã§ã‚ã‚‹ã€‚
â—
(This is to prevent potential abuse scenarios where a transition: overlay 1e9s; or similar attempts to keep an element in the top layer permanently.)
</p>

		</section>
	</section>
	<section id="painting-order">
<h2 title="Painting Order and Stacking Contexts">4. å¡—ngé †åºã¨ç©å±¤~æ–‡è„ˆ</h2>

<p>
ã“ã®ç¯€ã§ã¯~CSSã®`~box~tree$ã®å¡—ngé †åºã‚’è¿°ã¹ã‚‹ã€‚
â—
This chapter describes the painting order of CSSâ€™s box tree.
</p>

<p class="trans-note">ã€
ã“ã®ç¯€ã‚’æˆã™å†…å®¹ã¯ã€
`CSS22$r `ä»˜éŒ² Eï¼ ~CSS22/zindex.html#elaborate-stacking-contexts$
ã«å–ã£ã¦ä»£ã‚ã‚‹ã€‚
ã€‘</p>

<p>
`~box~tree$ã‚’è¾¿ã‚‹ã¨ãã«ã¯ã€
`~treeé †åº$ãŒåˆ©ç”¨ã•ã‚Œã‚‹ã“ã¨ãŒå¤šã„ã€‚
ã“ã‚Œã¯ã€
æ–­ç‰‡åŒ–ã•ã‚ŒãŸ~boxã«ãŠã„ã¦ã¯ï¼Œ`æ–­ç‰‡$ãŸã¡ã®ï¼»
è¦–è¦š-é †åºã§ã¯ãªãï¼Œè«–ç†-é †åº
ï¼½ã‚’æŒ‡ã™ã€‚
ï¼ˆã“ã‚Œã¯ã€
ä¾‹ãˆã°ï¼ŒåŒæ–¹å‘ãª~textã‚’æç”»ã™ã‚‹ã¨ãã«é–¢é€£ã™ã‚‹ã“ã¨ã‚‚ã‚ã‚‹ã€‚ï¼‰
â—
When traversing the box tree, tree order is often used. For fragments, this refers to the logical order of the fragments, not the visual order. (This can be relevant, for example, when rending bidirectional text.)
</p>

<p>
å¡—ngé †åºã¯ã€
â€œç”»å®¶ã®~modelâ€ ã§å®šç¾©ã•ã‚Œã‚‹
â€” å„~è¦ç´ ã¯ã€
ä¸€é€£ã®å±¤ãŸã¡ãŒæˆã™ç©å±¤-å†…ã§å¡—ã‚‹ã‚‚ã®ã¨ã—ã¦è¿°ã¹ã‚‰ã‚Œã‚‹ã€‚
ç©å±¤-ã¯ã€
æœ€åˆã¯æœ€ã‚‚ä¸‹ç«¯ã‹ã‚‰é †ã«æç”»ã•ã‚Œã‚‹ã€‚
åˆ©ç”¨è€…ã¯ã€
ç©å±¤-ã®ä¸Šç«¯ã®ä¸Šã‹ã‚‰ç©å±¤-ã‚’è¦‹ä¸‹ã‚ã—ã¦ã„ã‚‹ã“ã¨ãŒå«æ„ã•ã‚Œã‚‹ï¼š
â—
Painting order is defined in terms of a "painterâ€™s model", where elements are described as painting in a stack, with the bottom of the stack rendered "first", below items higher in the stack. The user is implied to exist above the top of the stack, looking down:
</p>

<pre class="presentation">
            |      |    |    |
            |      |    |    |   â‡¦ ğŸ§‘â€ğŸ¨
            |      |    |    |   åˆ©ç”¨è€…
z-index:  canvas  -1    0    1
</pre>


<p>
æ‰€ä¸ã®`ç©å±¤~æ–‡è„ˆ$ %ç©å±¤~æ–‡è„ˆ ã«ãŠã„ã¦ã€
%ç©å±¤~æ–‡è„ˆ ã®èƒŒæ™¯ã¯ï¼Œç©å±¤-ã®ä¸‹ç«¯ã«ã‚ã‚‹ã€‚
ã€ %ç©å±¤~æ–‡è„ˆ ã«å±ã™ã‚‹~boxã®ã†ã¡ã€‘
`æœ‰ä½ç½®$ã‹ã¤`ç©å±¤~æ–‡è„ˆ$ã‚’ç”Ÿæˆã™ã‚‹ã‚‚ã®ã®ã†ã¡ï¼Œã€`ç©å±¤-~level$ãŒã€‘æœ€ã‚‚ï¼»
è² ãªã‚‚ã®ï¼æ­£ãªã‚‚ã®
ï¼½ã¯ï¼Œç©å±¤-ã®ï¼»
ä¸‹ç«¯ï¼ä¸Šç«¯
ï¼½ã€åˆ©ç”¨è€…ã‹ã‚‰è¦‹ã¦ï¼Œï¼»æœ€ã‚‚å¥¥ï¼æœ€ã‚‚æ‰‹å‰ï¼½ã€‘ã«ã‚ã‚‹ã€‚
â—
The stacking context background and most negative positioned stacking contexts are at the bottom of the stack, while the most positive positioned stacking contexts are at the top of the stack.
</p>

<p class="trans-note">ã€
åŠ ãˆã¦ã€è¦ª~ç©å±¤~æ–‡è„ˆã¯å­~ç©å±¤~æ–‡è„ˆã‚ˆã‚Šä¸‹ï¼ˆå¥¥ï¼‰ã«ã‚ã‚‹ã€‚
ã€‘</p>

<p>
`~canvas$ã®è‰²ã¯ã€
åˆ¥ã®ä½•ã‹ã®ä¸­ã«åŒ…å«ã•ã‚ŒãŸå ´åˆã«ã¯é€æ˜ã«ãªã‚Šï¼Œ
ãã†ã§ãªã„å ´åˆã¯~UAå®šç¾©ã«ãªã‚‹ã€‚
`~canvas$ã¯ã€
åºƒã•ç„¡é™ã§ã‚ã‚Šï¼Œæ ¹~è¦ç´ ã‚’åŒ…å«ã™ã‚‹ã€‚
`è¡¨ç¤ºåŸŸ$ã¯ã€
åˆæœŸ~æ™‚ã«ã¯ï¼Œãã®å·¦ä¸Šéš…ãŒ`~canvas$ã®åŸç‚¹ã«ã‚ã‚‹ã€‚
â—
The canvas is transparent if contained within another, and given a UA-defined color if it is not. It is infinite in extent and contains the root element. Initially, the viewport is anchored with its top left corner at the canvas origin.
</p>

<div class="algo">
<p>
`æ–‡æ›¸ã‚’å¡—ã‚‹@
~algoã¯ã€
æ‰€ä¸ã®
( æ–‡æ›¸ %æ–‡æ›¸, ã€ï¼ç„¡é™ã€‘`~canvas$ %~canvas )
ã«å¯¾ã—ï¼š
â—
To paint a document, given a document doc and an infinite canvas canvas:
</p>
<ol>
	<li>
`ç©å±¤~æ–‡è„ˆã‚’å¡—ã‚‹$( %æ–‡æ›¸ ã®`æ ¹~è¦ç´ $, %~canvas )
â—
Paint a stacking context given docâ€™s root element and canvas.
</li>
	<li>
<p>
%æ–‡æ›¸ ã®`ä¸Šç«¯~å±¤$ã‚’æˆã™
~EACH( è¦ç´  %è¦ç´  )
ã«å¯¾ã—ï¼š
â—
For each element el in docâ€™s top layer:
</p>
		<ol>
			<li>
`ç©å±¤~æ–‡è„ˆã‚’å¡—ã‚‹$( %è¦ç´  ã® `backdrop$pe ç–‘ä¼¼è¦ç´ , %~canvas )
â—
Paint a stacking context given el's ::backdrop pseudo-element and canvas.
</li>
			<li>
`ç©å±¤~æ–‡è„ˆã‚’å¡—ã‚‹$( %è¦ç´ , %~canvas )
â€” ï¼»
%è¦ç´  ã¯`ç©å±¤~æ–‡è„ˆ$ã‚’ç”Ÿæˆã™ã‚‹
ï¼½ã‹ã¤ï¼»
%è¦ç´  ã®`åŒ…å«å¡Š$ã¯`åˆæœŸ~åŒ…å«å¡Š$ã§ã‚ã‚‹
ï¼½ã‚‚ã®ã¨æ‰±ã†ä¸‹ã§
â—
Paint a stacking context given el and canvas, treating el as a stacking context, with the initial containing block as its containing block.
</li>
		</ol>
	</li>
</ol>
</div>

<div class="algo">
<p>
`ç©å±¤~æ–‡è„ˆã‚’å¡—ã‚‹@
~algoã¯ã€
æ‰€ä¸ã®
( ï¼»
`è¦ç´ $ï¼`ç–‘ä¼¼è¦ç´ $ï¼`~box$
ï¼½ %æ ¹,
ã€ï¼ç„¡é™ã€‘`~canvas$ %~canvas,
çœŸå½å€¤ %ç©å±¤~å®¹å™¨ã‹ ~DF ~F )
ã«å¯¾ã—ï¼š
â—
To paint a stacking context given an element, pseudo-element, or box root, and an infinite canvas canvas: 
</p>

<p class="trans-note">ã€
%ç©å±¤~å®¹å™¨ã‹ ã¯ã€
ä»–æ‰€ã«è¿°ã¹ã‚‰ã‚ŒãŸè¦ä»¶ã‚’å®šå¼åŒ–ã™ã‚‹ãŸã‚ã«å°å…¥ã—ãŸï¼Œã“ã®è¨³ã«ã‚ˆã‚‹è¿½åŠ ã€‚
ã€‘</p>
<ol>
	<li>
~IFï¼»
%æ ¹ ã¯`è¦ç´ $ã§ã‚ã‚‹
ï¼½
â‡’
%æ ¹ ~SET %æ ¹ ã®`é¦–è¦~box$
ã€ï¼`ç©å±¤~æ–‡è„ˆã‚’å¡—ã‚‹$( %æ ¹ ã®`é¦–è¦~box$, %~canvas )ã€‘
â—
If root is an element, paint a stacking context given rootâ€™s principal box and canvas, then return.
</li>
	<li>
~Assertï¼š
%æ ¹ ã¯æ¬¡ã‚’æº€ãŸã™
â‡’
ï¼»
`~box$ã§ã‚ã‚‹
ï¼½~ANDï¼»
`ç©å±¤~æ–‡è„ˆ$ã‚’ç”Ÿæˆã—ã¦ã„ã‚‹
ï¼½
â—
Assert: root is a box, and generates a stacking context.
</li>
	<li>
~IFï¼»
%æ ¹ ã¯`æ ¹~è¦ç´ $ã®`é¦–è¦~box$ã§ã‚ã‚‹
ï¼½
â‡’
%~canvas å…¨ä½“ã« %æ ¹ ã®èƒŒæ™¯ã‚’å¡—ã‚‹
â€” ãã®éš›ã®`èƒŒæ™¯~ä½ç½®æ±ºã‚åŒºç”»$ã®åŸç‚¹ã¯ã€ï¼»
%æ ¹ ã®èƒŒæ™¯ãŒé€šå¸¸ã«å¡—ã‚‰ã‚ŒãŸå ´åˆã«åˆ©ç”¨ã•ã‚Œã‚‹ã“ã¨ã«ãªã‚‹ %~canvas ä¸Šã®ä½ç½®
ï¼½ã¨ã™ã‚‹
â—
If root is a root elementâ€™s principal box, paint rootâ€™s background over the entire canvas, with the origin of the background positioning area being the position on canvas that would be used if rootâ€™s background was being painted normally.
</li>
	<li>
~IFï¼»
%æ ¹ ã¯`å¡Š~levelã®~box$ã§ã‚ã‚‹
ï¼½
â‡’
`å¡Šã®è£…é£¾ã‚’å¡—ã‚‹$( %æ ¹, %~canvas )
â—
If root is a block-level box, paint a blockâ€™s decorations given root and canvas.
</li>
	<li>
%å¯¾è±¡~å­å­«~ç¾¤ ~LET %æ ¹ ã®å­å­«ãŸã¡ãŒæˆã™`~treeé †åº$ã«ã‚ˆã‚‹é›†åˆ
â—
â†“</li>
	<li>
<p>
%å¯¾è±¡~å­å­«~ç¾¤ ã‹ã‚‰ %æ ¹ ãŒç”Ÿæˆã—ãŸ`ç©å±¤~æ–‡è„ˆ$ã«å±ã•ãªã„ã‚‚ã®ã‚’é™¤å»ã™ã‚‹
</p>

<p class="trans-note">ã€
ã“ã®æ®µã¯ã€
ã“ã®è¨³ã«ã‚ˆã‚‹è£œå®Œã€‚
ã“ã‚Œã¯ã€
å½“ã®ç©å±¤~æ–‡è„ˆã®å­~ç©å±¤~æ–‡è„ˆã®å­å­«ãŸã¡ã‚’é™¤å¤–ã™ã‚‹
â€” ãã‚Œã‚‰ã¯ã€
å†å¸°çš„ãªå‘¼å‡ºnã‚’é€šã—ã¦å¡—ã‚‰ã‚Œã‚‹ã®ã§ã€‚
ã€‘</p>
	</li>
	<li>
<p>
%æœ‰ä½ç½®~å­å­«~ç¾¤~map ~LET æ–°ãŸãª`æœ‰é †åº~map$
</p>

<p class="trans-note">ã€
ã“ã®è¨³ã§ã¯ã€
æœ‰é †åº~mapã‚’åˆ©ç”¨ã—ã¦ï¼ŒåŸæ–‡ã®è¨˜è¿°ã‚’è¨€ã„æ›ãˆã‚‹ã€‚
ã€‘</p>
â—
â†“</li>
	<li>
~IFï¼»
%ç©å±¤~å®¹å™¨ã‹ ~EQ ~T
ï¼½
â‡’
%å¯¾è±¡~å­å­«~ç¾¤ ã‹ã‚‰æ¬¡ã‚’æº€ãŸã™ã‚‚ã®ã‚’é™¤å»ã™ã‚‹
â‡’
ï¼»
`æœ‰ä½ç½®$ã§ã‚ã‚‹
ï¼½~ORï¼»
`ç©å±¤~æ–‡è„ˆ$ã‚’ç”Ÿæˆã—ã¦ã„ã‚‹
ï¼½
</li>
	<li>
<p>
~ELSEï¼š
</p>
		<ol>
			<li>
%~levelç¾¤ ~LET %å¯¾è±¡~å­å­«~ç¾¤ ã‚’æˆã™å„ï¼»
`æœ‰ä½ç½®$ãªå­å­«
ï¼½ã®`ç©å±¤-~level$ãŸã¡ãŒæˆã™ï¼Œæ˜‡é †ã«ã‚ˆã‚‹é›†åˆ
</li>
			<li>
%~levelç¾¤ ã‚’æˆã™
~EACH( %~level )
ã«å¯¾ã—
â‡’
%æœ‰ä½ç½®~å­å­«~ç¾¤~map[ %~level ] ~SET %å¯¾è±¡~å­å­«~ç¾¤ ã‹ã‚‰æ¬¡ã‚’æº€ãŸã•ãªã„ã‚‚ã®ã‚’é™¤å»ã—ãŸçµæœã®é›†åˆ
â‡’
ï¼»
`æœ‰ä½ç½®$ã§ã‚ã‚‹
ï¼½~ANDï¼»
`ç©å±¤-~level$ ~EQ %~level
ï¼½
</li>
		</ol>
â—
â†“</li>
	<li>
%æœ‰ä½ç½®~å­å­«~ç¾¤~map ã‚’æˆã™
~EACH( %~level â†’ %å­å­«~ç¾¤ )
ã«å¯¾ã—
â‡’
~IFï¼»
%~level ~LT 0
ï¼½
â‡’
%å­å­«~ç¾¤ ã‚’æˆã™
~EACH( %å­å­« )
ã«å¯¾ã—
â‡’
`ç©å±¤~æ–‡è„ˆã‚’å¡—ã‚‹$( %å­å­«, %~canvas )
â—
For each of rootâ€™s positioned descendants with negative (non-zero) z-index values, sort those descendants by z-index order (most negative first) then tree order, and paint a stacking context given each descendant and canvas.
</li>
	<li>
%æœ‰ä½ç½®ã§ãªã„å­å­«~ç¾¤ ~LET %å¯¾è±¡~å­å­«~ç¾¤ ã‹ã‚‰`æœ‰ä½ç½®$ãªã‚‚ã®ã‚’é™¤å»ã—ãŸçµæœã®é›†åˆ
â—
â†“</li>
	<li>
%æœ‰ä½ç½®ã§ãªã„å­å­«~ç¾¤ ã‚’æˆã™
~EACH( %å­å­« )
ã«å¯¾ã—
â‡’
~IFï¼»
%å­å­« ã¯`~flowå†…$ã«ã‚ã‚‹
ï¼½~ANDï¼»
%å­å­« ã¯`å¡Š~level$ã§ã‚ã‚‹
ï¼½
â‡’
`å¡Šã®è£…é£¾ã‚’å¡—ã‚‹$( %å­å­«, %~canvas )
â—
For each of rootâ€™s in-flow, non-positioned, block-level descendants, in tree order, paint a blockâ€™s decorations given the descendant and canvas.
</li>
	<li>
%æœ‰ä½ç½®ã§ãªã„å­å­«~ç¾¤ ã‚’æˆã™
~EACH( %å­å­« )
ã«å¯¾ã—
â‡’
~IFï¼»
%å­å­« ã¯`æµ®å‹•ä½“$ã§ã‚ã‚‹
ï¼½
â‡’
`ç©å±¤~å®¹å™¨ã‚’å¡—ã‚‹$( %å­å­«, %~canvas )
â—
For each of rootâ€™s non-positioned floating descendants, in tree order, paint a stacking container given the descendant and canvas.
</li>
	<li>
~IFï¼»
%æ ¹ ã¯`è¡Œå†…~level$ã®`~box$ã§ã‚ã‚‹
ï¼½
â‡’
%æ ¹ ãŒå±ã™ã‚‹
~EACH( `è¡Œl~box$ %è¡Œl~box )
ã«å¯¾ã—
â‡’
`~boxã‚’è¡Œl~boxå†…ã§å¡—ã‚‹$( %æ ¹, %è¡Œl~box, %~canvas )
â—
If root is an inline-level box
â€¢ For each line box root is in, paint a box in a line box given root, the line box, and canvas.
</li>
	<li>
<p>
~ELSEï¼š
â—
Otherwise
</p>
		<ol>
			<li>
ä¸‹ã«ä¸ãˆã‚‹æ‰‹ç¶šã( %æ ¹ )
â—
First for root,ï¼¼
</li>
			<li>
%æœ‰ä½ç½®ã§ãªã„å­å­«~ç¾¤ ã‚’æˆã™
~EACH( %å­å­« )
ã«å¯¾ã—
â‡’
~IFï¼»
%å­å­« ã¯`~flowå†…$ã«ã‚ã‚‹
ï¼½~ANDï¼»
%å­å­« ã¯`å¡Š~level$ã§ã‚ã‚‹
ï¼½
â‡’
ä¸‹ã«ä¸ãˆã‚‹æ‰‹ç¶šã( %å­å­« )
â—
then for all its in-flow, non-positioned, block-level descendant boxes, in tree order:
</li>
		</ol>

<div class="algo">
<p>
æ‰‹ç¶šãã¯ã€
æ‰€ä¸ã®
( %~box )
ã«å¯¾ã—ï¼š
</p>
				<ol>
					<li>
~IFï¼»
%~box ã¯`ç½®æ›dè¦ç´ $ã§ã‚ã‚‹
ï¼½
â‡’
ç½®æ›ã•ã‚ŒãŸå†…å®¹ã‚’ %~canvas ã«ä¸å¯åˆ†ã«å¡—ã‚‹
â—
If the box is a replaced element, paint the replaced content into canvas, atomically.
</li>
					<li>
~ELSE
â‡’
%~box ã‚’æˆã™
~EACH( `è¡Œl~box$ %è¡Œl~box )
ã«å¯¾ã—
â‡’
`~boxã‚’è¡Œl~boxå†…ã§å¡—ã‚‹$( %~box, %è¡Œl~box, %~canvas )
â—
Otherwise, for each line box of the box, paint a box in a line box given the box, the line box, and canvas.
</li>
					<li>
~IFï¼»
~UAã¯`å¸¯åŸŸ~å†…ã®å¤–å½¢ç·š$ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹
ï¼½
â‡’
%~box ã®`å¤–å½¢ç·š$ã‚’ %~canvas ã«å¡—ã‚‹
â—
If the UA uses in-band outlines, paint the outlines of the box into canvas.
</li>
				</ol>
</div>
	</li>
	<li>
<p>
%æœ‰ä½ç½®~å­å­«~ç¾¤~map[ 0 ] ã‚’æˆã™
~EACH( %å­å­« )
ã«å¯¾ã—ï¼Œ
%å­å­« ã® `z-index$p ã«å¿œã˜ã¦ï¼š
</p>
		<ul class="switch">
			<li>
`0^v
â‡’
`ç©å±¤~æ–‡è„ˆã‚’å¡—ã‚‹$( %å­å­«, %~canvas ) 
</li>
			<li>
`auto^v
â‡’
`ç©å±¤~å®¹å™¨ã‚’å¡—ã‚‹$( %å­å­«, %~canvas ) 
</li>
		</ul>
<p class="trans-note">ã€
ã“ã‚Œã¯ã€
å®Ÿéš›ã«ã¯ï¼Œ %å­å­« ãŒ`ç©å±¤~æ–‡è„ˆ$ã‚’ç”Ÿæˆã—ã¦ã„ã‚‹ã‹å¦ã‹ã§å ´åˆåˆ†ã‘ã™ã‚‹ã¹ãã«æ€ã‚ã‚Œã‚‹ã€‚
`auto^v ã¯ï¼ˆ`ç©å±¤-~level$ã¯ 0 ã§ã‚ã‚‹ãŒï¼‰ç©å±¤~æ–‡è„ˆã‚’ç”Ÿæˆã—ãªã„ã“ã¨ã‚’æ„å‘³ã™ã‚‹ãŒã€
ç©å±¤~æ–‡è„ˆã‚’ç”Ÿæˆã•ã›ã‚‹ã‚‚ã®ã¯ï¼Œ `z-index$p ã®ä»–ã«ã‚‚ã‚ã‚‹ã®ã§ã€‚
ã€‘</p>
â—
For each of rootâ€™s positioned descendants with z-index: auto or z-index: 0, in tree order:
â€¢ descendant has z-index: auto
â€¢â€¢ Paint a stacking container given the descendant and canvas.
â€¢ descendant has z-index: 0
â€¢â€¢ Paint a stacking context given the descendant and canvas.
</li>
	<li>
%æœ‰ä½ç½®~å­å­«~ç¾¤~map ã‚’æˆã™
~EACH( %~level â†’ %å­å­«~ç¾¤ )
ã«å¯¾ã—
â‡’
~IFï¼»
%~level ~GT 0
ï¼½
â‡’
%å­å­«~ç¾¤ ã‚’æˆã™
~EACH( %å­å­« )
ã«å¯¾ã—
â‡’
`ç©å±¤~æ–‡è„ˆã‚’å¡—ã‚‹$( %å­å­«, %~canvas )
â—
For each of rootâ€™s positioned descendants with positive (non-zero) z-index values, sort those descendants by z-index order (smallest first) then tree order, and paint a stacking context given each descendant and canvas.
</li>
	<li>
~IFï¼»
~UAã¯`å¸¯åŸŸ~å¤–ã®å¤–å½¢ç·š$ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹
ã€ï¼(those that it... ã€‘
ï¼½
â‡’
%æ ¹ ã®`å¤–å½¢ç·š$ã‚’ %~canvas ã«å¡—ã‚‹
â—
If the UA uses out-of-band outlines, draw all of rootâ€™s outlines (those that it skipped drawing due to not using in-band outlines during the current invocation of this algorithm) into canvas.
</li>
</ol>
</div>

<div class="algo">
<p>
`å¡Šã®è£…é£¾ã‚’å¡—ã‚‹@
~algoã¯ã€
æ‰€ä¸ã®
( `å¡Š~box$ %æ ¹, `~canvas$ %~canvas )
ã«å¯¾ã—ï¼š
â—
To paint a blockâ€™s decorations given a block box root and a canvas canvas:
</p>
<ol>
	<li>
<p>
~IFï¼»
%æ ¹ ã¯`~tableåŒ…è£…~box$ã§ãªã„
ï¼½ï¼š
â—
If root is not a table wrapper box:
</p>
		<ol>
			<li>
~IFï¼»
%æ ¹ ã¯`æ ¹~è¦ç´ $ã®`é¦–è¦~box$ã§ãªã„
ï¼½
â‡’
%æ ¹ ã®èƒŒæ™¯ã‚’ %~canvas ã«å¡—ã‚‹
â—
Paint rootâ€™s background to canvas if it is not the root elementâ€™s principal box.
</li>
			<li>
%æ ¹ ã®~borderã‚’ %~canvas ã«å¡—ã‚‹
â—
Paint rootâ€™s border to canvas.
</li>
		</ol>
	</li>
	<li>
<p>
~IFï¼»
%æ ¹ ã¯`~tableåŒ…è£…~box$ã§ã‚ã‚‹
ï¼½ï¼š
â—
If root is a table wrapper box:
</p>
		<ol>
			<li>
~IFï¼»
%æ ¹ ã¯`æ ¹~è¦ç´ $ã®`é¦–è¦~box$ã§ãªã„
ï¼½
â‡’
%æ ¹ ã®èƒŒæ™¯ã‚’ %~canvas ã«å¡—ã‚‹
â—
Paint rootâ€™s background to canvas if it is not the root elementâ€™s principal box.
</li>
			<li>
%æ ¹ ã‚’æˆã™
~EACH( ~col~group %~col~group )
ã«å¯¾ã—`~treeé †åº$ã§
â‡’
%~col~group ã®èƒŒæ™¯ã‚’ %~canvas ã«å¡—ã‚‹
â—
For each column group of root in tree order, paint the column groupâ€™s background to canvas.
</li>
			<li>
%æ ¹ ã‚’æˆã™
~EACH( ~col %~col )
ã«å¯¾ã—ï¼Œ`~treeé †åº$ã§
â‡’
%~col ã®èƒŒæ™¯ã‚’ %~canvas ã«å¡—ã‚‹
â—
For each column of root in tree order, paint the columnâ€™s background to canvas.
</li>
			<li>
%æ ¹ ã‚’æˆã™
~EACH( ~row~group %~row~group )
ã«å¯¾ã—`~treeé †åº$ã§
â‡’
%~row~group ã®èƒŒæ™¯ã‚’ %~canvas ã«å¡—ã‚‹
â—
For each row group of root in tree order, paint the row groupâ€™s background to canvas.
</li>
			<li>
%æ ¹ ã‚’æˆã™
~EACH( ~row %~row )
ã«å¯¾ã—`~treeé †åº$ã§
â‡’
%~row ã®èƒŒæ™¯ã‚’ %~canvas ã«å¡—ã‚‹
â—
For each row of root in tree order, paint the rowâ€™s background to canvas.
</li>
			<li>
%æ ¹ ã‚’æˆã™
~EACH( ~cell %~cell )
ã«å¯¾ã—`~treeé †åº$ã§
â‡’
%~cell ã®èƒŒæ™¯ã‚’ %~canvas ã«å¡—ã‚‹
â—
For each cell of root in tree order, paint the cellâ€™s background to canvas.
</li>
			<li>
%æ ¹ ã‚’æˆã™ ã™ã¹ã¦ã®~tableè¦ç´ ã®~borderã‚’å¡—ã‚‹
â€” %æ ¹ ã® `border-collapse$p ã«å¿œã˜ã¦
â‡’ï¼ƒ
`separate^v ã€ï¼separatedã€‘ãªã‚‰ã°`~treeé †åº$ã§ï¼
`collapse^v ã€ï¼connectedã€‘ãªã‚‰ã° `css-tables-3$r ã«ã¦æŒ‡å®šã•ã‚Œã‚‹ã¨ãŠã‚Šã«
â—
Paint the borders of all of the table elements of root. If the borders are separated, do so in tree order; if connected, do so as specified in [css-tables-3].
</li>
		</ol>
	</li>
</ol>
</div>

<div class="algo">
<p>
`~boxã‚’è¡Œl~boxå†…ã§å¡—ã‚‹@
~algoã¯ã€
æ‰€ä¸ã®
( `~box$ %æ ¹, `è¡Œl~box$ %è¡Œl~box, `~canvas$ %~canvas )
ã«å¯¾ã—ï¼š
â—
To paint a box in a line box, given a box root, a line box line box, and a canvas canvas:
</p>
<ol>
	<li>
%æ ¹ ã‚’æˆã™
~EACH( `æ–­ç‰‡$ %æ–­ç‰‡ )
ã«å¯¾ã—
â‡’
~IFï¼»
%æ–­ç‰‡ ã¯ %è¡Œl~box å†…ã«ã‚ã‚‹
ï¼½
â‡’
%æ–­ç‰‡ ã®èƒŒæ™¯ã‚’ %~canvas ã«å¡—ã‚‹
â—
Paint the backgrounds of rootâ€™s fragments that are in line box into canvas.
</li>
	<li>
%æ ¹ ã‚’æˆã™
~EACH( `æ–­ç‰‡$ %æ–­ç‰‡ )
ã«å¯¾ã—
â‡’
~IFï¼»
%æ–­ç‰‡ ã¯ %è¡Œl~box å†…ã«ã‚ã‚‹
ï¼½
â‡’
%æ–­ç‰‡ ã®~borderã‚’ %~canvas ã«å¡—ã‚‹
â—
Paint the borders of rootâ€™s fragments that are in line box into canvas.
</li>
	<li>
<p>
%æ ¹ ã«å¿œã˜ã¦ï¼š
</p>
		<ul class="switch">
			<li>
<p>
`è¡Œå†…~box$ã§ã‚ã‚‹ï¼š
â—
If root is an inline box
</p>
				<ol>
					<li>
<p>
%æ ¹ ã®å­~ç¾¤ã‚’æˆã™
~EACH( %å­ )
ã«å¯¾ã—ï¼Œ`~treeé †åº$ã§ï¼š
â—
For all rootâ€™s in-flow, non-positioned, inline-level children that generate fragments in line box, and all child text sequences that generate fragments in line box, in tree order:
â—
â†“</p>
						<ol>
							<li>
~IFï¼»
%å­ ã¯ %è¡Œl~box å†…ã«`æ–­ç‰‡$ã‚’ç”Ÿæˆã—ãªã„
ï¼½
â‡’
~CONTINUE
â—
â†‘</li>
							<li>
<p>
~IFï¼»
%å­ ã¯`~texté€£åˆ—$ã§ã‚ã‚‹
ï¼½ï¼š
â—
If this child is a text sequence, then:
</p>
								<ol>
									<li>
<p>
%~text ~LET %å­ ã‚’æˆã™~textã®ã†ã¡ %è¡Œl~box å†…ã«å…¥ã‚‹éƒ¨åˆ†
</p>

<p class="trans-note">ã€
ã“ã®æ®µã¯ã€
ä»¥ä¸‹ã‚’æ˜ç¢ºåŒ–ã™ã‚‹ãŸã‚ã®ï¼Œã“ã®è¨³ã«ã‚ˆã‚‹è¿½åŠ ã€‚
%å­ ã‚’æˆã™~textã¯è¤‡æ•°~è¡Œlã«æ–­ç‰‡åŒ–ã•ã‚Œã‚‹ã“ã¨ã‚‚ã‚ã‚‹ã®ã§ã€‚
ã€‘</p>
â—
â†“</li>
									<li>
%~text ã«å½±éŸ¿ã—ã¦ã„ã‚‹
~EACH( ä¸‹ç·š %ä¸‹ç·š )
ã«å¯¾ã—ï¼Œ
%ä¸‹ç·š ã‚’é©ç”¨ã—ã¦ã„ã‚‹è¦ç´ ãŸã¡ã®`~treeé †åº$ã§
â‡’
%ä¸‹ç·š ã‚’ %~canvas ã€ã® %~text ãŒå ã‚ã‚‹åŒºé–“ï¼ˆä»¥ä¸‹åŒæ§˜ï¼‰ã€‘ã«å¡—ã‚‹
ã€ï¼(such that the deepestâ€¦ã€‘
â—
Paint any underlining affecting the text, in tree order of the elements applying the underlining (such that the deepest elementâ€™s underlining, if any, is painted topmost and the root elementâ€™s underlining, if any, is drawn bottommost) into canvas.
</li>
									<li>
%~text ã«å½±éŸ¿ã—ã¦ã„ã‚‹
~EACH( ä¸Šç·š %ä¸Šç·š )
ã«å¯¾ã—ï¼Œ %ä¸Šç·š ã‚’é©ç”¨ã—ã¦ã„ã‚‹è¦ç´ ãŸã¡ã®`~treeé †åº$ã§
â‡’
%ä¸Šç·š ã‚’ %~canvas ã«å¡—ã‚‹
ã€ï¼(such that the deepestâ€¦ã€‘
â—
Paint any overlining affecting the text, in tree order of the elements applying the overlining (such that the deepest elementâ€™s overlining, if any, is painted topmost and the root elementâ€™s overlining, if any, is drawn bottommost) into canvas.
</li>
									<li>
%~text ã‚’ %~canvas ã«å¡—ã‚‹
â—
Paint the text into canvas.
</li>
									<li>
%~text ã«å½±éŸ¿ã—ã¦ã„ã‚‹
~EACH( æ‰“æ¶ˆç·š %æ‰“æ¶ˆç·š )
ã«å¯¾ã—ï¼Œ %æ‰“æ¶ˆç·š ã‚’é©ç”¨ã—ã¦ã„ã‚‹è¦ç´ ãŸã¡ã®`~treeé †åº$ã§
â‡’
%æ‰“æ¶ˆç·š ã‚’ %~canvas ã«å¡—ã‚‹
ã€ï¼(such that the deepestâ€¦ã€‘
â—
Paint any line-through affecting the text, in tree order of the elements applying the line-through (such that the deepest elementâ€™s line-through, if any, is painted topmost and the root elementâ€™s line-through, if any, is drawn bottommost) into canvas.
</li>
								</ol>
							</li>
							<li>
~ELSE
ï¼ˆ %å­ ã¯`è¡Œå†…~level$ã®`~box$ã§ã‚ã‚‹ï¼‰
â‡’
~IFï¼»
%å­ ã¯`~flowå†…$ã«ã‚ã‚‹
ï¼½~ANDï¼»
%å­ ã¯`æœ‰ä½ç½®$ã§ãªã„
ï¼½
â‡’
`~boxã‚’è¡Œl~boxå†…ã§å¡—ã‚‹$( %å­, %è¡Œl~box, %~canvas )
â—
â†‘
â—
If this child is a box:
â€¢ Paint a box in a line box given the child, line box, and canvas.
</li>
						</ol>
					</li>
				</ol>
			</li>
			<li>
`è¡Œå†…~level$ã®ï¼»
`å¡Š~box$ï¼`~tableåŒ…è£…~box$
ï¼½ã§ã‚ã‚‹
â‡’
`ç©å±¤~å®¹å™¨ã‚’å¡—ã‚‹$( %æ ¹, %~canvas )
â—
If root is an inline-level block or table wrapper box
â€¢ Paint a stacking container given root and canvas.
</li>
			<li>
`è¡Œå†…~level$ã®`ç½®æ›dè¦ç´ $ã§ã‚ã‚‹
â‡’
å½“ã®ç½®æ›då†…å®¹ã‚’ %~canvas ã«ä¸å¯åˆ†ã«å¡—ã‚‹
â—
If root is an inline-level replaced element
â€¢ Paint the replaced content into canvas, atomically.
</li>
		</ul>
	</li>
	<li>
~IFï¼»
~UAã¯`å¸¯åŸŸ~å†…ã®å¤–å½¢ç·š$ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹
ï¼½
â‡’
%æ ¹ ã® %è¡Œl~box å†…ã®
~EACH( `æ–­ç‰‡$ %æ–­ç‰‡ )
ã«å¯¾ã—
â‡’
%æ–­ç‰‡ ã®`å¤–å½¢ç·š$ã‚’ %~canvas ã«å¡—ã‚‹
â—
If the UA uses in-band outlines, paint the outlines of rootâ€™s fragments that are in line box into canvas.
</li>
</ol>


<p class="note">æ³¨è¨˜ï¼š
è¡Œå†…~boxã‚’æˆã™æ–­ç‰‡ãŸã¡ã®è¦–è¦šçš„ãªé †åºã¯ï¼Œï¼»
`åŒæ–¹å‘ãªä¸¦æ›¿ngï¼ ~CSSWM#bidi-box-model$ã«å› ã‚Šï¼Œè¡Œlã®ä¸­ã§é…åˆ—ã—ç›´ã•ã‚Œå¾—ã‚‹
ï¼½ãŒã€
ãã‚Œã§ã‚‚ï¼Œæ–­ç‰‡ãŸã¡ã¯~treeé †åºã§å¡—ã‚‰ã‚Œã‚‹ã€‚
â—
Note: Even though the visual order of inline box fragments can be rearranged within a line due to bidirectional reordering, the fragments are nevertheless painted in tree order.
</p>
</div>

<div class="algo">
<p>
`ç©å±¤~å®¹å™¨ã‚’å¡—ã‚‹@
~algoã¯ã€
æ‰€ä¸ã®
( `~box$ %æ ¹, `~canvas$ %~canvas )
ã«å¯¾ã—ï¼š
â—
To paint a stacking container, given a box root and a canvas canvas:
</p>
<ol>
	<li>
<p>
`ç©å±¤~æ–‡è„ˆã‚’å¡—ã‚‹$( %æ ¹, %~canvas, ~T )
â€” ãŸã ã—ã€
%æ ¹ ã¯æ–°ãŸãª`ç©å±¤~æ–‡è„ˆ$ã‚’ç”Ÿæˆã—ã¦ã„ã‚‹ã‚‚ã®ã¨ã—ã¦æ‰±ã†
</p>

<p>
ï¼ˆã“ã‚Œã¯ã€ï¼»
`æœ‰ä½ç½®$ãªå­å­«, ç©å±¤~æ–‡è„ˆã‚’ç”Ÿæˆã—ã¦ã„ã‚‹å­å­«
ï¼½ã®å¡—ã‚Šã‚’çœç•¥ã™ã‚‹ï¼ˆãã‚Œã‚‰ã¯ï¼Œè¦ª~ç©å±¤~æ–‡è„ˆã«å¡—ã‚‰ã›ã‚‹ï¼‰ã“ã¨ã‚’é™¤ã„ã¦ï¼Œ
`ç©å±¤~æ–‡è„ˆã‚’å¡—ã‚‹$( %æ ¹, %~canvas ) ã¨åŒæ§˜ã«ãµã‚‹ã¾ã†ï¼‰ã€‚
</p>
â—
Paint a stacking context given root and canvas, treating root as if it created a new stacking context, but omitting any positioned descendants or descendants that actually create a stacking context (letting the parent stacking context paint them, instead).
</li>
</ol>
</div>

<p>
~UAã¯ã€
ï¼ˆ `outline$p ~propã«ã‚ˆã‚‹ï¼‰`å¤–å½¢ç·š$ã‚’ã€ä»»æ„é¸æŠã§ã€‘æ¬¡ã®ã„ãšã‚Œã‹ã«ã‚ˆã‚Šæã‘ã‚‹ï¼š
â—
UAs can draw outlines (from the outline property) eitherï¼¼
</p>
<ul>
	<li>
`å¸¯åŸŸ~å†…ã®å¤–å½¢ç·š@
ï¼ˆ `in-band^en ï¼‰
â‡’
å„~è¦ç´ ã®å¤–å½¢ç·šã‚’è¦ç´ ã‚’å¡—ã‚‹ã«ä¼´ã„å¡—ã‚‹
â€” ã—ãŸãŒã£ã¦ã€
å¤–å½¢ç·šã¯ï¼Œè¦ç´ ã«å¾Œç¶šã—ã¦ã„ã‚‹å†…å®¹ã«é‡åˆã—ã¦é®ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šå¾—ã‚‹ã€‚
â—
in-band (painted along each element, and thus potentially obscured/overlapping by following content) orï¼¼
</li>
	<li>
`å¸¯åŸŸ~å¤–ã®å¤–å½¢ç·š@
ï¼ˆ `out-of-band^en ï¼‰
â‡’
ã™ã¹ã¦ã®`å¤–å½¢ç·š$ã‚’å½“ã®ç©å±¤~æ–‡è„ˆã«ãŠã„ã¦æœ€å¾Œã«å¡—ã‚‹
â€” ãªã®ã§ã€
å½“ã®ç©å±¤~æ–‡è„ˆ~å†…ã«ã¯ï¼Œå¤–å½¢ç·šã‚’é®ã‚‹ã‚‚ã®ã¯ç„¡ã„ã€‚
â—
out-of-band (all outlines painted at the end of the stacking context, so nothing in the stacking context can obscure them).ï¼¼
</li>
</ul>

<p>
~UAã¯ã€
`å¸¯åŸŸ~å¤–ã®å¤–å½¢ç·š$ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã‚‹
â€” å¤–å½¢ç·šã‚’å®¹æ˜“ã«å¯è¦–ã«ã™ã‚‹ã“ã¨ã¯ã€
~accessibilityç‰¹èƒ½ã«ã¨ã£ã¦é‡è¦ãªã®ã§ã€‚
â—
It is recommended that UAs use out-of-band outlines, as making outlines easily visible is an important accessibility feature.
</p>

	</section>
</main></div>

