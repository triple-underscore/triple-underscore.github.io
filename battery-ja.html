<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<title>Battery Status API ï¼ˆæ—¥æœ¬èªè¨³ï¼‰</title>

<link rel="stylesheet" href="common.css" type="text/css">
<link rel="stylesheet" href="common-w3c.css" type="text/css">
<style>
.test {
	background: var(--note-bg-color);
}
</style>


<script src="common0.js"></script>
<script src="common1.js" async></script>


<script>
Util.ready = function(){
	const source_data = {
		toc_main: 'MAIN0',
		generate: expand
	}

	Util.switchWordsInit(source_data);
}

function expand(){
	const class_map = this.class_map;
	const tag_map = this.tag_map;
	const link_map = this.link_map;
	const unicode_map = this.unicode_map;

	let current_ifc = '';

	return this.html.replace(
		/%[\w\-~ä¸€-é¿†]+|`(.*?)([$@\^])(\w*)/g,
		create_html
	);

	function create_html(match, key, indicator, klass){
if(!indicator) {//%
	return `<var>${match.slice(1)}</var>`;
}

let text = key;
let href = '';

switch(klass){
case 'r':
	text = `[${key}]`;
	href = `#bib-${key.toLowerCase()}`;
	break;
case 'm':
	const n = text.indexOf('(');
	if(n > 0){
		key = text.slice(0, n);
		text = key + text.slice(n).replace(/\w+/g, '<var>$&</var>');
	}
	break;
case '0':
	href = link_map[ `m.${key}`];
	break;
case 'l':
	text = `"<code class="literal">${key}</code>"`;
	break;
case 'sl':
	text = `[[${key}]]`;
	break;
case 'test': // tests
	href = `https://wpt.live/battery-status/${key}.https.html`;
	text = `${key}`;
	break;
case 'en':
	return `<span lang="en">${key}</span>`;
	break;
}

let tag = tag_map[klass];
if(tag) {
	let classname = class_map[klass];
	classname = classname ? ` class="${classname}"` : '';
	text = `<${tag}${classname}>${text}</${tag}>`;
}

if(indicator !== '^'){
	href = link_map[ klass ? `${klass}.${key}` : key ] || href;
	if(!href){
		console.log(match); // check error
		return match;
	}

	switch(indicator){
	case '$':
		text = `<a href="${href}">${text}</a>`;
		break;
	case '@':
		text = `<dfn id="${href.slice(1)}">${text}</dfn>`;
		break;
	}
}

return text;

	}
}
</script>



<script type="text/plain" id="_source_data">


â—â—options
spec_title:Battery Status API
spec_date:2024-10-24
trans_update:2024-10-13
source_checked:240105
original_url:https://w3c.github.io/battery/
	abbr_url:BATTERY
spec_status:ED
ref_id_prefix:bib-
ref_id_lowercase:true
page_state_key:SENSORS
site_nav:sensors
	conformance:w3c
copyright:2024,permissive
trans_1st_pub:2019-09-03


â—â—class_map
E:error
et:event-type
e:element
v:value
jv:js-value
sl:js-slot

â—â—tag_map
c:code
I:code
E:code
m:code
et:code
e:code
v:code
jv:code
sl:span
i:i
cite:cite

â—â—original_id_map

â—â—mdn_urls
dom-batterymanager:API/BatteryManager

dfn-chargingchange:Events/chargingchange
dfn-chargingtimechange:Events/chargingtimechange
dfn-dischargingtimechange:Events/dischargingtimechange
dfn-levelchange:Events/levelchange

â—â—link_map

Exposed:~WEBIDLjs#Exposed
SecureContext:~WEBIDLjs#SecureContext

boolean:~WEBIDL#idl-boolean
double:~WEBIDL#idl-double
unrestricted double:~WEBIDL#idl-unrestricted-double
Promise:~WEBIDL#idl-promise
c.Promise:~WEBIDL#idl-promise

E.NotAllowedError:~WEBIDL#notallowederror

I.EventHandler:~WAPI#eventhandler
I.EventTarget:~DOM4#eventtarget
I.Navigator:~HTMLnavigator#navigator
I.Window:~WINDOW#window
I.BatteryManager:#dom-batterymanager

m.charging:#dom-batterymanager-charging
m.chargingTime:#dom-batterymanager-chargingtime
m.dischargingTime:#dom-batterymanager-dischargingtime
m.getBattery:#dom-navigator-getbattery
m.level:#dom-batterymanager-level
m.onchargingchange:#dom-batterymanager-onchargingchange
m.onchargingtimechange:#dom-batterymanager-onchargingtimechange
m.ondischargingtimechange:#dom-batterymanager-ondischargingtimechange
m.onlevelchange:#dom-batterymanager-onlevelchange

m.addEventListener:~DOM4#dom-eventtarget-addeventlistener
m.querySelector:~DOM4#dom-parentnode-queryselector
m.textContent:~DOM4#dom-node-textcontent

sl.BatteryPromise:#dfn-batterypromise
sl.BatteryManager:#dfn-batterymanager
sl.Charging:#dfn-charging
sl.ChargingTime:#dfn-chargingtime
sl.DischargingTime:#dfn-dischargingtime
sl.Level:#dfn-level

et.chargingchange:#dfn-chargingchange
et.chargingtimechange:#dfn-chargingtimechange
et.dischargingtimechange:#dfn-dischargingtimechange
et.levelchange:#dfn-levelchange

l.'self':~PERMISSIONS-POLICY#default-allowlist-self

	â—ç”¨èª
~batteryçŠ¶æ…‹s~task~source:#dfn-battery-status-task-source
ç¾åœ¨ã®~batteryçŠ¶æ…‹sæƒ…å ±:#dfn-current-battery-status-information
~batteryçŠ¶æ…‹sæƒ…å ±ã‚’å ±å‘Š-ä¸èƒ½:#dfn-unable-to-report-the-battery-status-information
~batteryçŠ¶æ…‹sã‚’æ›´æ–°ã—ã¦é€šçŸ¥ã™ã‚‹:#dfn-update-the-battery-status-and-notify

	~UA:#dfn-user-agent

	â—ç”¨èªï¼ˆå¤–éƒ¨
~task:~WAPI#concept-task
~task~source:~WAPI#task-source
å¤§åŸŸ~taskã‚’~queueã™ã‚‹:~WAPI#queue-a-global-task
ç¾åœ¨ã®å¤§åŸŸ~obj:~WAPI#current-global-object
é–¢é€£ãª~realm:~WAPI#concept-relevant-realm
é–¢é€£ãªå¤§åŸŸ~obj:~WAPI#concept-relevant-global

~eventã‚’ç™ºç«ã™ã‚‹:~DOM4#concept-event-fire
~event~handler:~WAPI#event-handlers
~event~handler~eventå‹:~WAPI#event-handler-event-type

åˆ©ç”¨ã¯è¨±å®¹ã•ã‚Œã¦:~HEembed#allowed-to-use
çµä»˜ã‘ã‚‰ã‚ŒãŸæ–‡æ›¸:~WINDOW#concept-document-window

æ—¢å®šã®è¨±å®¹list:~PERMISSIONS-POLICY#policy-controlled-feature-default-allowlist
æ–½ç­–ã«ã‚ˆã‚Šåˆ¶å¾¡ã•ã‚Œã‚‹ç‰¹èƒ½:~PERMISSIONS-POLICY#policy-controlled-feature
	è­˜åˆ¥ã•ã‚Œã‚‹ç‰¹èƒ½:~PERMISSIONS#_powerful-feature-by-name

æ–°ãŸãª~obj:~WEBIDLjs#new
~promiseã‚’å´ä¸‹ã™ã‚‹:~WEBIDLjs#reject
~promiseã‚’è§£æ±ºã™ã‚‹:~WEBIDLjs#resolve
æ–°ãŸãª~promise:~WEBIDLjs#a-new-promise

å†…éƒ¨~slot:~TC39#sec-object-internal-methods-and-internal-slots

â—â—words_table1


â—â—words_table

	â—battery
battery::::ãƒãƒƒãƒ†ãƒªãƒ¼
device:
	~hostã—ã¦ã„ã‚‹:hosting
å……é›»-:charge::~
å……é›»:charging::~
æ”¾é›»-:discharge::~
æ”¾é›»:discharging::~
æº€æ¯:full::~
ç›´åˆ—:serial::~
ä¸¦åˆ—:parallel::~
æ¯æ¸‡-:exhaust:~
ç·å’Œ:sum::~
å®¹é‡:capacity::~
å¹³å‡:average::~
åŠ é‡:weighted::~
é›»åŠ›:power:~
	åŠ¹ç‡çš„ã«é›»åŠ›ã‚’ä½¿ã†:power-efficient
è£…å‚™-:attach::~

	ç§’æ•°ã§:in seconds
	ç§’æ•°ã«ã‚ˆã‚‹:in seconds
	åˆ†å˜ä½:in minutes
	ã‚ˆã†ã¨ã™ã‚‹ï¼ã—ã¤ã¤:about to be
	å°½ãã‚‹:run out
	æ•°ç§’ã”ã¨:every few seconds
	æ®‹ã‚Šå°‘ãªã„:low
	æ®‹ã‚Šæ™‚é–“:time remaining
	çŸ­å‘½ã«:negatively affect the battery life
	ä½¿ã„æœãŸã—ãŸ:depleted
	-:plugged

	â—ä¿å®‰
ç§çš„:private::~
é€æ˜æ€§:transparency::~
èª­å‡º:readout::èª­ã¿å‡ºã—
ãƒœãƒ¤ã‚«ã—ã¦:obfuscateã—ã¦:ã¼ã‚„ã‹ã—ã¦
revokeã™ã‚‹::å–ã‚Šæ¶ˆã™
	æŒ‡ç´‹åé›†~è¡Œè·¯:fingerprinting vector
è¨±å®¹list:allowlist::è¨±å®¹ list:è¨±å®¹ãƒªã‚¹ãƒˆ

	â—ä»•æ§˜
	~Web~IDL:WebIDL
æ§ãˆã‚:unobtrusive:~
ä¼ãˆã‚‹:informã™ã‚‹:~
æ¨¡å€£-:emulate:~
ç´ æœ´:naive:~
	ç´ æœ´:naÃ¯ve:~
ç¸®å°:scale back:~
é«˜åº¦ãª:advanced:~
æ¨¡ç¯„å‹:archetype:~
ç´°å·¥-:craft:~
é€€è¡Œ-:degrade:~
æé€ ã—ãŸ:fakeãª:~
ä¸€ä½“åŒ–-:unify:~
æ¨ªæ–­çš„:horizontal:~
æœ€æ–°:latest:~
ç¾ä»£åŒ–:modern åŒ–:~
	ç¾ä»£åŒ–:modernization
ç›®æŒ‡ã™:aimã™ã‚‹:~

	Battery Status API:~batteryçŠ¶æ…‹s~API
	ã—ã‹ãªããªã‚‹:must
	ä¸èƒ½:unable to
	å§”ã­ã‚‰ã‚Œ:left to
	ç›®ä¸‹ã®:at hand
	çŸ¥ã‚‹:know#2
	ç·¨é›†~app:word processor
	è¦‹åšã™:assumption#1
	è¶³ã‚Šã¦:sufficient
	æº€ãŸã•ã‚Œ:meeting
	~~å¯èƒ½æ€§:potential
	~~ç°¡å˜ãª:trivial
	~webä¸Šã®:web-based
	ã‚ã‚‹ã„ã¯:alternatively
	åˆ¥æ³•ã¨ã—ã¦:alternatively
	ãã®çµæœ:thereby ã€œleading to
	å›:round
	~WG:group
	pull è¦è«‹:PR

	â—æœªåˆ†é¡
email::::ãƒ¡ãƒ¼ãƒ«
ä¿å­˜-:save:~
å–ªå¤±:loss:~
æ›¸è¾¼ã‚€:writeã™ã‚‹::æ›¸ãè¾¼ã‚€
é«˜-:high:~
ç®¡ç†å™¨:manager::~::ãƒãƒãƒ¼ã‚¸ãƒ£
navigator::::ãƒŠãƒ“ã‚²ãƒ¼ã‚¿

	`+Infinity^jv:positive Infinity
	~instanceåŒ–:instantiate
	æ–°ç€:new
	å•ã„åˆã‚ã›:check
	~~é »åº¦:definition of how often
	ãã®é »åº¦ã‚’ä¸‹ã’ã‚‹:less frequently
	ã‚ˆã‚Šé€Ÿã:faster
	%~eventå:eventName
	%å¤§åŸŸ~obj:global
	%~navigator:navigator
	%~batteryç®¡ç†å™¨:~batteryManager:#1

	â—æŒ‡ç¤ºèª
	ã‚ã‚‹:at least one


â—â—ref_normative

[dom]
    DOM Standard. Anne van Kesteren. WHATWG. Living Standard. URL: https://dom.spec.whatwg.org/ 
[ECMASCRIPT]
    ECMAScript Language Specification. Ecma International. URL: https://tc39.es/ecma262/multipage/ 
[html]
    HTML Standard. Anne van Kesteren; Domenic Denicola; Ian Hickson; Philip JÃ¤genstedt; Simon Pieters. WHATWG. Living Standard. URL: https://html.spec.whatwg.org/multipage/ 
[permissions-policy]
    Permissions Policy. Ian Clelland. W3C. 18 December 2023. W3C Working Draft. URL: https://www.w3.org/TR/permissions-policy-1/ 
[RFC2119]
    Key words for use in RFCs to Indicate Requirement Levels. S. Bradner. IETF. March 1997. Best Current Practice. URL: https://www.rfc-editor.org/rfc/rfc2119 
[RFC8174]
    Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words. B. Leiba. IETF. May 2017. Best Current Practice. URL: https://www.rfc-editor.org/rfc/rfc8174 
[WEBIDL]
    Web IDL Standard. Edgar Chen; Timothy Gu. WHATWG. Living Standard. URL: https://webidl.spec.whatwg.org/ 

â—â—
ref_informative


â—â—trans_metadata
<p>
~THIS_PAGEã¯ã€~W3Cã«ã‚ˆã‚Šå‹§å‘Šã¨ã—ã¦å…¬é–‹ã•ã‚ŒãŸ
<a href="~SPEC_URL">Battery Status API</a>
ã‚’æ—¥æœ¬èªã«ç¿»è¨³ã—ãŸã‚‚ã®ã§ã™ã€‚
~PUB
</p>


â—â—spec_metadata

æœ€æ–°å…¬è¡¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³
	https://www.w3.org/TR/battery-status/
å…¬è¡¨å±¥æ­´
	https://www.w3.org/standards/history/battery-status/
ç·¨é›†è€…è‰æ¡ˆ
	https://w3c.github.io/battery/
commit å±¥æ­´
	https://github.com/w3c/battery/commits/
ãƒ†ã‚¹ãƒˆä¸€å¼
	https://wpt.live/battery-status/
å®Ÿè£…å ±å‘Š
	https://w3c.github.io/test-results/battery-status/20160621.html
ç·¨é›†
	Anssi Kostiainen (Intel Corporation)
å‰ä»»ç·¨é›†è€…
	Raphael Kubo da Costa (Intel Corporation)
	Mounir Lamouri (Google Inc.) (previously Mozilla)
ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
	<a href="https://github.com/w3c/battery/">GitHub w3c/battery</a> (<a href="https://github.com/w3c/battery/pulls/">pull requests</a>, <a href="https://github.com/w3c/battery/issues/new/choose">new issue</a>, <a href="https://github.com/w3c/battery/issues/">open issues</a>)
	<a href="mailto:public-device-apis@w3.org?subject=%5Bbattery-status%5D%20YOUR%20TOPIC%20HERE">public-device-apis@w3.org</a> with subject line <kbd>[battery-status] <em>â€¦ message topic â€¦</em></kbd> (<a rel="discussion" href="https://lists.w3.org/Archives/Public/public-device-apis">archives</a>)

å…¬è¡¨è€…
	<a href="https://www.w3.org/groups/wg/das">Device and Sensors WG</a>
</script>
</head>

<body>

<header>
	<hgroup>
<h1>Battery Status API</h1>
	</hgroup>
</header>

<div id="MAIN" hidden>

	<section id="abstract">
â—è¦ç´„

<p>
ã“ã®ä»•æ§˜ã¯ã€
~hostã—ã¦ã„ã‚‹~deviceã®~batteryçŠ¶æ…‹sã«ã¤ã„ã¦ã®æƒ…å ±ã‚’ä¾›ã™ã‚‹~APIã‚’å®šç¾©ã™ã‚‹ã€‚
â—
This specification defines an API that provides information about the battery status of the hosting device.
</p>

	</section>
	<section id="sotd">
â—ä½ç½®ä»˜ã‘

<p>
ã“ã®ç¯€ã§ã¯ã€å…¬è¡¨~æ™‚ç‚¹ã«ãŠã‘ã‚‹â€¦
ã€ä»¥ä¸‹ã€ã“ã®ç¯€ã®ä»–ã®å†…å®¹ã¯ã€~SOTD-W3Cã«ç§»è­²ã€‚ã€‘
</p>

<p>
`Devices and Sensors ~WG^cite ã¯ã€
ã“ã®ä»•æ§˜ã«ç·¨é›†ä¸Šã®ç¾ä»£åŒ–ã‚’é©ç”¨ã™ã‚‹ã“ã¨ã«åŠ ãˆï¼Œ
æ¨ªæ–­çš„ãªè€ƒæŸ»ã‚’è¦è«‹ã™ã‚‹å‰ã«ï¼»
å½“~APIã®~securityã¨~privacyã®å´é¢ã«å¯¾ã™ã‚‹è‡ªå·±-è€ƒæŸ»ã¨æ”¹è¨‚
ï¼½å›ã‚’é‚è¡Œã™ã‚‹ã“ã¨ã«ãªã‚‹ã€‚
æ—¢å­˜ã®
<a href="https://www.w3.org/PM/horizontal/review.html?shortname=battery-status">ï¼»
~securityï¼~privacy
ï¼½ã®èª²é¡Œ</a>
ã‚‚å¯ç”¨ã§ã‚ã‚‹ã€‚
â—
The Devices and Sensors Working Group will apply editorial modernizations to this specification, perform a round of self-review and revisions on the security and privacy aspects of the API before requesting horizontal review. Existing security and privacy issues are available.
</p>

	</section>

<main id="MAIN0">

	<section id="introduction">
<h2 title="Introduction">1. åºè«–</h2>

â—éè¦ç¯„çš„

<p>
`~batteryçŠ¶æ…‹s~API^citeï¼ˆ `Battery Status API^en ï¼‰ã¯ã€
~webé–‹ç™ºè€…~ç”¨ã«ï¼»
~hostã—ã¦ã„ã‚‹~deviceã®~batteryçŠ¶æ…‹sã‚’~programçš„ã«æ±ºå®šã™ã‚‹æ‰‹æ®µ
ï¼½ã‚’å®šç¾©ã™ã‚‹ã€‚
~webé–‹ç™ºè€…ã¯ã€ï¼»
~deviceã®~batteryçŠ¶æ…‹sã‚’çŸ¥ã‚Šå¾—ãªã„ä¸‹ã§~web~appã‚’è¨­è¨ˆã™ã‚‹
ï¼½ã¨ãã¯ï¼Œï¼»
~battery~levelã¯ã€
ç›®ä¸‹ã®~taskç”¨ã«è¶³ã‚Šã¦ã„ã‚‹
ï¼½ã¨è¦‹åšã™ã—ã‹ãªããªã‚‹ã€‚
ã“ã®ã“ã¨ã¯ã€ï¼»
~deviceã®~batteryã¯ã€
æ¬²ã•ã‚Œã‚‹ã‚ˆã‚Šé€Ÿãæ¯æ¸‡ã—å¾—ã‚‹
ï¼½ã“ã¨ã‚’æ„å‘³ã™ã‚‹
â€” ~webé–‹ç™ºè€…ã¯ã€
~batteryçŠ¶æ…‹sã«åŸºã¥ã„ã¦è£å®šã‚’ä¸‹ã›ãªã„ã®ã§ã€‚
~batteryçŠ¶æ…‹sã®çŸ¥è­˜ãŒã‚ã‚‹ä¸‹ã§ã¯ã€
~webé–‹ç™ºè€…ã¯ï¼Œ~webå†…å®¹ã¨~appã‚’åŠ¹ç‡çš„ã«é›»åŠ›ã‚’ä½¿ã†ã‚ˆã†ç´°å·¥-å¯èƒ½ã«ãªã‚Šã€
ãã®çµæœï¼Œåˆ©ç”¨è€…~ä½“é¨“ã‚‚æ”¹å–„ã•ã‚Œã‚‹ã€‚
ã—ã‹ã—ãªãŒã‚‰ã€
ä½œè€…ã¯ï¼Œï¼»
ã“ã®~APIã®ç´ æœ´ãªå®Ÿè£…ã€åˆ©ç”¨ï¼Ÿã€‘ã¯ã€
~batteryã‚’çŸ­å‘½ã«ã—å¾—ã‚‹
ï¼½ã“ã¨ã‚’è‡ªè¦šã™ã‚‹ã¹ãã§ã‚ã‚‹ã€‚
â—
The Battery Status API specification defines a means for web developers to programmatically determine the battery status of the hosting device. Without knowing the battery status of a device, a web developer must design the web application with an assumption of sufficient battery level for the task at hand. This means the battery of a device may exhaust faster than desired because web developers are unable to make decisions based on the battery status. Given knowledge of the battery status, web developers are able to craft web content and applications which are power-efficient, thereby leading to improved user experience. Authors should be aware, however, that a naÃ¯ve implementation of this API can negatively affect the battery life.
</p>

<p>
`~batteryçŠ¶æ…‹s~API^citeã¯ã€
~deviceã®~batteryãŒï¼»
å……é›»-ä¸­ã§ãªã„ã‹, æ®‹ã‚Šå°‘ãªã„
ï¼½ã¨ãã«ã¯ï¼Œä½œæ¥­ã‚’ï¼»
å…ˆé€ã‚Šã™ã‚‹ï¼ç¸®å°ã™ã‚‹
ï¼½ãŸã‚ã«åˆ©ç”¨ã§ãã‚‹ã€‚
é«˜åº¦ãª~web~appã®æ¨¡ç¯„å‹ï¼ˆ `archetype^en ï¼‰ã‚„
~webä¸Šã®~email~clientã¯ã€ï¼»
~deviceã‚’å……é›»ã—ã¦ã„ã‚‹é–“ã¯ã€
æ•°ç§’ã”ã¨ã«æ–°ç€~emailã®æœ‰ç„¡ã‚’~serverã«å•ã„åˆã‚ã›ã‚‹
ï¼½ä¸€æ–¹ã§ï¼Œï¼»
~deviceã®~batteryãŒï¼»
å……é›»-ä¸­ã§ãªã„ï¼æ®‹ã‚Šå°‘ãªã„
ï¼½å ´åˆã«ã¯ã€
ãã®é »åº¦ã‚’ä¸‹ã’ã‚‹
ï¼½ã“ã¨ã‚‚ã‚ã‚ã†ã€‚
åˆ¥ã®ä¾‹ã¨ã—ã¦ã€
~webä¸Šã®ç·¨é›†~appã¯ï¼Œï¼»
~battery~levelã‚’ç›£è¦–ã—ã¦ã€
~batteryãŒå°½ãã‚‹å‰ã«å¤‰æ›´ã‚’ä¿å­˜ã—ã¦ï¼Œ~dataå–ªå¤±ã‚’é˜²æ­¢ã™ã‚‹
ï¼½ã“ã¨ã‚‚ã§ãã‚‹ã€‚
â—
The Battery Status API can be used to defer or scale back work when the device is not charging in or is low on battery. An archetype of an advanced web application, a web-based email client, may check the server for new email every few seconds if the device is charging, but do so less frequently if the device is not charging or is low on battery. Another example is a web-based word processor which could monitor the battery level and save changes before the battery runs out to prevent data loss.
</p>

	</section>
	<section id="conformance">
<h2 title="Conformance">2. é©åˆæ€§</h2>

<p class="trans-note">ã€
ã“ã®ç¯€ã®å†…å®¹ã¯ <a href="~W3Ccommon#conformance">~W3Cæ—¥æœ¬èªè¨³ å…±é€š~page</a>ã«ç§»è­²ã€‚
ã€‘</p>

<!-- 
This specification defines conformance criteria that apply to a single product: the user agent that implements the interfaces that it contains.
-->

	</section>
	<section id="security-and-privacy-considerations">
<h2 title="Security and privacy considerations">3. ~securityï¼~privacyã®è€ƒæ…®ç‚¹</h2>

<p>
ã“ã®ä»•æ§˜ã«å®šç¾©ã•ã‚Œã‚‹~APIã¯ã€
~hostã—ã¦ã„ã‚‹~deviceã®~batteryçŠ¶æ…‹sã‚’æ±ºå®šã™ã‚‹ãŸã‚ã«åˆ©ç”¨ã•ã‚Œã‚‹ã€‚
~UAã¯ï¼š
â—
The API defined in this specification is used to determine the battery status of the hosting device.
</p>
<ul>
	<li>
~batteryçŠ¶æ…‹sæƒ…å ±ã®é«˜-ç²¾åº¦ãªèª­å‡ºã‚’å…¬é–‹ã™ã‚‹ãƒ™ã‚­ã§ãªã„
â€” æ–°ãŸãªæŒ‡ç´‹åé›†~è¡Œè·¯ã‚’å°å…¥ã—å¾—ã‚‹ã®ã§ã€‚
â—
The user agent SHOULD not expose high precision readouts of battery status information as that can introduce a new fingerprinting vector.
</li>
	<li>
~batteryçŠ¶æ…‹sæƒ…å ±ã¸ã®~accessã€ã®è¨±å¯ã€‘ã‚’åˆ©ç”¨è€…ã«ä¾é ¼ã—ã¦ã‚‚ãƒ¨ã‚¤ã€‚
ã‚ã‚‹ã„ã¯ã€
ç§çš„~é–²è¦§~modeã«ãŠã„ã¦ã¯ï¼Œåˆ©ç”¨è€…~è¨±å¯ã®è¦ä»¶ã‚’æ–½è¡Œã—ã¦ã‚‚ãƒ¨ã‚¤ã€‚
â—
The user agent MAY ask the user for battery status information access, or alternatively, enforce the user permission requirement in its private browsing modes.
</li>
	<li>
~scriptã«ã‚ˆã‚‹ ã“ã®~APIã®åˆ©ç”¨ã‚’æ§ãˆã‚ãªæ–¹å¼ã§ï¼Œåˆ©ç”¨è€…ã«ä¼ãˆã‚‹ãƒ™ã‚­ã§ã‚ã‚‹
â€” é€æ˜æ€§ã‚’æ´åŠ©ã™ã‚‹ãŸã‚ï¼ŒãŠã‚ˆã³
~API~accessã€ã®è¨±å¯ã€‘ã‚’~revokeã™ã‚‹ã“ã¨ã‚’åˆ©ç”¨è€…ã«è¨±å®¹ã™ã‚‹ãŸã‚ã€‚
â—
The user agent SHOULD inform the user of the API use by scripts in an unobtrusive manner to aid transparency and to allow the user to revoke the API access.
</li>
	<li>
ï¼»
~hostã—ã¦ã„ã‚‹~deviceã«ã¯~batteryã¯ç„¡ã„ ï¼
~batteryã¯å……é›»-ä¸­ï¼
æé€ ã—ãŸå€¤ã‚’å…¬é–‹ã—ã¦ã„ã‚‹
ï¼½å ´åˆã«ã¯ã€
å…¬é–‹ã•ã‚Œã‚‹å€¤ã‚’ä½œè€…ãŒç›´ã«çŸ¥ã‚Šå¾—ãªã„ä»•æ–¹ã§ãƒœãƒ¤ã‚«ã—ã¦ã‚‚ãƒ¨ã‚¤ã€‚
â—
The user agent MAY obfuscate the exposed value in a way that authors cannot directly know if a hosting device has no battery, is charging or is exposing fake values.
</li>
</ul>

	</section>
	<section id="concepts">
<h2 title="Concepts">4. æ¦‚å¿µ</h2>

<p>
ã“ã®ä»•æ§˜~å†…ã«è¨€åŠã•ã‚Œã‚‹`~task$ç”¨ã®`~task~source$ã¯ã€
`~batteryçŠ¶æ…‹s~task~source@
ã¨ã™ã‚‹ã€‚
â—
The task source for the tasks mentioned in this specification is the battery status task source.
</p>

	</section>
	<section id="extensions-to-the-navigator-interface">
<h2 title="Extensions to the Navigator interface">5. `Navigator^I ~interfaceã«å¯¾ã™ã‚‹æ‹¡å¼µ</h2>

<pre class="idl">
[`SecureContext$]
partial interface `Navigator$I {
  `Promise$&lt;`BatteryManager$I&gt; `getBattery$m();
};
</pre>

<p class="note">æ³¨è¨˜ï¼š
`getBattery()^m ~methodã¯ã€
<a href="https://github.com/w3c/battery/pull/51">pull è¦è«‹ #51</a>
ãŒå–ã‚Šè¾¼ã¾ã‚Œã‚‹ã¾ã§ã¯ï¼Œ
~secureã§ãªã„æ–‡è„ˆã«ã‚‚å…¬é–‹ã•ã‚Œã¦ã„ãŸã€‚
â—
Note
This method was exposed to a non-secure context until PR #51.
</p>

<div>
<p id="internal-slots">
å„ `Navigator$I ~obj %~navigator ã¯ã€
æ¬¡ã«æŒ™ã’ã‚‹å†…éƒ¨~slotã‚’ä¼´ã†ï¼š
</p>
<dl class="def-list">
	<dt>
`BatteryPromise@sl
</dt>
	<dd>
åˆæœŸ~å€¤ã¯ ~NULL ã¨ã™ã‚‹ã€‚
</dd>
	<dd>
%~navigator ã«å¯¾ã™ã‚‹ `getBattery()$m ã®~callã«å¯¾ã—è¿”ã•ã‚Œã‚‹ `Promise$c ã€‚
</dd>

	<dt>`BatteryManager@sl</dt>
	<dd>
åˆæœŸ~å€¤ã¯ ~NULL ã¨ã™ã‚‹ã€‚
</dd>
	<dd>
%~navigator ã«çµä»˜ã‘ã‚‰ã‚ŒãŸ `BatteryManager$I ~instance
â€” `getBattery()$m ã‚’ä»‹ã—ã¦ä½œæˆã•ã‚ŒãŸãªã‚‰ã°ã€‚
</dd>
</dl>
â—
5.1 Internal slots
â—
Internal slotï½œInitial valueï½œDescription
[[BatteryPromise]]ï½œnullï½œA Promise returned by calls to getBattery().
[[BatteryManager]]ï½œnullï½œThe BatteryManager instance associated with a given Navigator after it has been created via getBattery().
</div>

<div class="algo">
<p id="the-getbattery-method">
`getBattery()@m
~methodæ‰‹ç¶šãã¯ï¼š
â—
5.2 The getBattery() method
â—
The getBattery() method steps are:
</p>

<p class="test">
~testï¼š
`battery-promise-window$test,
`battery-promise$test
<small>ï¼ˆã“ã‚Œã‚‰ã®~testã«ã¯ã€~secureãªæ¥ç¶šï¼ˆ~HTTPSï¼‰ãŒè¦æ±‚ã•ã‚Œã‚‹ï¼‰</small>
â—
tests: 2
â€¢ battery-promise-window ğŸ”’
â€¢ battery-promise ğŸ”’
</p>

<ol>
	<li>
~IFï¼»
ã‚³ãƒ¬.`BatteryPromise$sl ~EQ ~NULL
ï¼½
â‡’
ã‚³ãƒ¬.`BatteryPromise$sl ~SET `æ–°ãŸãª~promise$( ã‚³ãƒ¬ã«`é–¢é€£ãª~realm$ )
â—
If this.[[BatteryPromise]] is null, then set it to a new promise in this's relevant realm.
</li>
	<li>
%æ–‡æ›¸ ~LET ã‚³ãƒ¬ã«`é–¢é€£ãªå¤§åŸŸ~obj$ã«`çµä»˜ã‘ã‚‰ã‚ŒãŸæ–‡æ›¸$
â—
â†“</li>
	<li>
~IFï¼»
%æ–‡æ›¸ ã«ã¯ï¼»
`battery^l ã§è­˜åˆ¥ã•ã‚Œã‚‹`æ–½ç­–ã«ã‚ˆã‚Šåˆ¶å¾¡ã•ã‚Œã‚‹ç‰¹èƒ½$
ï¼½ã®`åˆ©ç”¨ã¯è¨±å®¹ã•ã‚Œã¦$ã„ãªã„
ï¼½
â‡’
`~promiseã‚’å´ä¸‹ã™ã‚‹$( ã‚³ãƒ¬.`BatteryPromise$sl, `NotAllowedError$E ä¾‹å¤– )
â—
If this's relevant global object's associated Document is not allowed to use the "battery" policy-controlled feature, then reject this.[[BatteryPromise]] with a "NotAllowedError" DOMException.
</li>
	<li>
<p>
~ELSEï¼š
â—
Otherwise:
</p>
		<ol>
			<li>
~IFï¼»
ã‚³ãƒ¬.`BatteryManager$sl ~EQ ~NULL
ï¼½
â‡’
ã‚³ãƒ¬.`BatteryManager$sl ~SET `æ–°ãŸãª~obj$( `BatteryManager$I, ã‚³ãƒ¬ã«`é–¢é€£ãª~realm$ )
â—
If this.[[BatteryManager]] is null, then set it to the result of creating a new BatteryManager in this's relevant realm.
</li>
			<li>
`~promiseã‚’è§£æ±ºã™ã‚‹$( ã‚³ãƒ¬.`BatteryPromise$sl, ã‚³ãƒ¬.`BatteryManager$sl )
â—
Resolve this.[[BatteryPromise]] with this.[[BatteryManager]].
</li>
		</ol>
	</li>
	<li>
~RET ã‚³ãƒ¬.`BatteryPromise$sl
â—
Return this.[[BatteryPromise]].
</li>
</ol>
</div>

	</section>
	<section id="the-batterymanager-interface">
<h2 title="The BatteryManager interface">6. `BatteryManager^I ~interface</h2>

<pre class="idl">
[`SecureContext$, `Exposed$=`Window$I]
interface `BatteryManager$I : `EventTarget$I {
    readonly        attribute `boolean$             `charging$m;
    readonly        attribute `unrestricted double$ `chargingTime$m;
    readonly        attribute `unrestricted double$ `dischargingTime$m;
    readonly        attribute `double$              `level$m;
                    attribute `EventHandler$I        `onchargingchange$m;
                    attribute `EventHandler$I        `onchargingtimechange$m;
                    attribute `EventHandler$I        `ondischargingtimechange$m;
                    attribute `EventHandler$I        `onlevelchange$m;
};
</pre>

<p>
`BatteryManager@I
~interfaceã¯ã€
~hostã—ã¦ã„ã‚‹~deviceã®
`ç¾åœ¨ã®~batteryçŠ¶æ…‹sæƒ…å ±@
ã‚’è¡¨ç¾ã™ã‚‹ã€‚
â—
The BatteryManager interface represents the current battery status information of the hosting device.
</p>

<p>
~UAã¯ã€
â€” ä¾‹ãˆã°ã€ï¼»
åˆ©ç”¨è€…ã¾ãŸã¯~system
ï¼½ã®ï¼»
é¸å¥½ï¼è¨­å®šï¼åˆ¶é™
ï¼½ã«å› ã‚Š â€”
ã€ï¼any ofã€‘ã‚ã‚‹å±æ€§~ç”¨ã®å€¤ã‚’å ±å‘Š-ä¸èƒ½ãªå ´åˆï¼Œã€ãã®å±æ€§ã«é–¢ã—ã¦ï¼Ÿã€‘
`~batteryçŠ¶æ…‹sæƒ…å ±ã‚’å ±å‘Š-ä¸èƒ½@
ã§ã‚ã‚‹ã¨ã•ã‚Œã‚‹ã€‚
â—
The user agent is said to be unable to report the battery status information if it is not able to report the values for any of the attributes, for example, due to a user or system preference, setting, or limitation.
</p>

<p class="note">æ³¨è¨˜ï¼š
~UAãŒ`~batteryçŠ¶æ…‹sæƒ…å ±ã‚’å ±å‘Š-ä¸èƒ½$ãªå ´åˆã€
`BatteryManager$I ã®å„~å†…éƒ¨~slotã¯ï¼Œå„è‡ªã®æ—¢å®šã®å€¤ã§ã‚ã‚Šç¶šã‘ã‚‹
â€” ãã‚Œã¯ã€
å…¨éƒ¨çš„ã«å……é›»ã•ã‚ŒãŸ~batteryã‚’æ¨¡å€£ã™ã‚‹ã€‚
ã“ã®ã“ã¨ã¯ã€
ä¾‹ãˆã°ï¼»
~batteryçŠ¶æ…‹sæƒ…å ±ãŒå¯ç”¨ã«ã•ã‚Œã¦ã„ãªã„å ´åˆ
ï¼½ã«ï¼Œï¼»
æŒ‡ç´‹åé›†ã®~~å¯èƒ½æ€§ã‚’æŠ‘åˆ¶ã™ã‚‹ã“ã¨, ãŠã‚ˆã³
~appãŒå‡¦ç†èƒ½ã‚’é€€è¡Œã•ã›ã‚‹ã®ã‚’é˜²æ­¢ã™ã‚‹ã“ã¨
ï¼½ã‚’ç›®æŒ‡ã™ã€‚
â—
Note
If the user agent is unable to report the battery status information, the BatteryManager's internal slots will remain with their default values, which emulate a fully charged and plugged in battery. This is aimed at reducing the potential for fingerprinting and preventing applications from degrading performance, if the battery status information is not made available, for example.
</p>

		<section id="internal-slots-0">
<h3 title="Internal slots">6.1. å†…éƒ¨~slot</h3>

<p>
å„ `BatteryManager$I ~instanceã¯ã€
æ¬¡ã«æŒ™ã’ã‚‹`å†…éƒ¨~slot$ã‚’ä¼´ã£ã¦ä½œæˆã•ã‚Œã‚‹ï¼š
â—
6.1 Internal slots
â—
BatteryManager instances are created with the following internal slots:
â—
Internal slotï½œInitial value
[[Charging]]ï½œtrue
[[ChargingTime]]ï½œ0
[[DischargingTime]]ï½œPositive Infinity
[[Level]]ï½œ1.0
</p>

<dl class="def-list">
	<dt id="the-charging-internal-slot">
`Charging@sl
â—
The [[Charging]] internal slot
</dt>
	<dd>
åˆæœŸ~å€¤ã¯ `true^jv ã¨ã™ã‚‹ã€‚
â—
â†‘</dd>
	<dd>
<p>
~systemã®~batteryã®å……é›»~çŠ¶æ…‹ã‚’è¡¨ç¾ã™ã‚‹ï¼š
â—
The [[Charging]] internal slot represents the charging state of the system's battery.ï¼¼
</p>
		<ul>
			<li>
æ¬¡ã«è©²å½“ã™ã‚‹å ´åˆã¯ ~F ã«è¨­å®šã™ã‚‹ãƒ¢ãƒãƒˆã‚¹ãƒ«
â‡’ï¼ƒ
~batteryã¯æ”¾é›»-ä¸­
â—
It MUST be set to false if the battery is discharging,ï¼¼
</li>
			<li>
ä»–ã®å ´åˆ
â€” æ¬¡ã«è©²å½“ã™ã‚‹å ´åˆãªã© â€”
ã¯ ~T ã«è¨­å®šã™ã‚‹ãƒ¢ãƒãƒˆã‚¹ãƒ«
â‡’ï¼ƒ
å®Ÿè£…ã¯~batteryå……é›»~çŠ¶æ…‹ã‚’å ±å‘Š-ä¸èƒ½ã§ã‚ã‚‹ ï¼
~batteryã¯å……é›»-ä¸­ ï¼
~systemã¯~batteryã‚’è£…å‚™ã—ã¦ã„ãªã„
â—
and set to true if the battery is charging, the implementation is unable to report the state, or there is no battery attached to the system, or otherwise.
</li>
		</ul>
	</dd>
	<dd class="algo">
<p>
~system~batteryã®å……é›»~çŠ¶æ…‹ãŒå¤‰åŒ–ã—ãŸã¨ãã¯ã€
æ¬¡ã‚’èµ°ã‚‰ã™ãƒ¢ãƒãƒˆã‚¹ãƒ«ï¼š
</p>
		<ol>
			<li>
%å€¤ ~LET å½“ã®~batteryã¯ï¼»
å……é›»-ä¸­ãªã‚‰ã° ~T ï¼
æ”¾é›»-ä¸­ãªã‚‰ã° ~F
ï¼½</li>
			<li>
`~batteryçŠ¶æ…‹sã‚’æ›´æ–°ã—ã¦é€šçŸ¥ã™ã‚‹$( `Charging$sl, %å€¤, `chargingchange$et )
</li>
		</ol>
â—
When the system battery's charging state changes, the user agent must run the update the battery status and notify algorithm with [[Charging]], true or false depending on whether the battery is charging or discharging, and "chargingchange".
</dd>

	<dt id="the-chargingtime-internal-slot">
`ChargingTime@sl
â—
6.1.2 The [[ChargingTime]] internal slot
</dt>
	<dd>
åˆæœŸ~å€¤ã¯ `0^jv ã¨ã™ã‚‹ã€‚
â—
â†‘</dd>
	<dd>
<p>ï¼»
~systemã®~batteryãŒå…¨éƒ¨çš„ã«å……é›»ã•ã‚Œã‚‹
ï¼½ã¾ã§ã®æ®‹ã‚Šæ™‚é–“ã‚’ï¼Œç§’æ•°ã§è¡¨ç¾ã™ã‚‹ï¼š
â—
The [[ChargingTime]] internal slot represents the remaining time in seconds until the system's battery is fully charged.ï¼¼
</p>
		<ul>
			<li>
æ¬¡ã«è©²å½“ã™ã‚‹å ´åˆã¯ 0 ã«è¨­å®šã™ã‚‹ãƒ¢ãƒãƒˆã‚¹ãƒ«
â‡’ï¼ƒ
~batteryã¯æº€æ¯ï¼
~systemã¯~batteryã‚’è£…å‚™ã—ã¦ã„ãªã„
â—
It MUST be set to 0 if the battery is full or there is no battery attached to the system,ï¼¼
</li>
			<li>
ä»–ã®å ´åˆ
â€” æ¬¡ã«è©²å½“ã™ã‚‹å ´åˆãªã© â€”
ã¯ `+Infinity^jv ã«è¨­å®šã™ã‚‹ãƒ¢ãƒãƒˆã‚¹ãƒ«
â‡’ï¼ƒ
~batteryã¯æ”¾é›»-ä¸­ï¼
å®Ÿè£…ã¯æ®‹ã‚Šã®å……é›»~æ™‚é–“ã‚’å ±å‘Š-ä¸èƒ½
â—
and to the value positive Infinity if the battery is discharging, the implementation is unable to report the remaining charging time, or otherwise.
</li>
		</ul>
	</dd>
	<dd class="algo">
~batteryå……é›»~æ™‚é–“ãŒæ›´æ–°ã•ã‚ŒãŸã¨ãã¯ã€
æ¬¡ã‚’èµ°ã‚‰ã™ãƒ¢ãƒãƒˆã‚¹ãƒ«
â‡’
`~batteryçŠ¶æ…‹sã‚’æ›´æ–°ã—ã¦é€šçŸ¥ã™ã‚‹$( `ChargingTime$sl, ç§’æ•°ã«ã‚ˆã‚‹æ–°ãŸãªå……é›»~æ™‚é–“, `chargingtimechange$et )
â—
When the battery charging time is updated, the user agent must run the update the battery status and notify algorithm with [[ChargingTime]], the new charging time in seconds, and "chargingtimechange".
</dd>
	<dt id="the-dischargingtime-internal-slot">
`DischargingTime@sl
â—
6.1.3 The [[DischargingTime]] internal slot
</dt>
	<dd>
åˆæœŸ~å€¤ã¯ `+Infinity^jv ã¨ã™ã‚‹ã€‚
â—
â†‘</dd>
	<dd>
<p>
ï¼»
~systemã®~batteryãŒå®Œå…¨ã«æ”¾é›»ã•ã‚Œï¼Œ~systemã¯ä¼‘æ­¢ã•ã‚Œã‚ˆã†ã¨ã™ã‚‹
ï¼½ã¾ã§ã®æ®‹ã‚Šæ™‚é–“ã‚’ï¼Œç§’æ•°ã§è¡¨ç¾ã™ã‚‹ã€‚
â—
The [[DischargingTime]] attribute represents the remaining time in seconds until the system's battery is completely discharged and the system is about to be suspended.ï¼¼
</p>
		<ul>
			<li>
æ”¾é›»ã—ã¦ã„ãªã„å ´åˆã€ï¼or otherwiseã€‘
â€” æ¬¡ã«è©²å½“ã™ã‚‹å ´åˆãªã© â€”
ã¯ `+Infinity^jv ã«è¨­å®šã™ã‚‹ãƒ¢ãƒãƒˆã‚¹ãƒ«
â‡’ï¼ƒ
~batteryã¯å……é›»-ä¸­ ï¼
å®Ÿè£…ã¯æ®‹ã‚Šã®æ”¾é›»~æ™‚é–“ã‚’å ±å‘Š-ä¸èƒ½ ï¼
~systemã¯~batteryã‚’è£…å‚™ã—ã¦ã„ãªã„
â—
It MUST be set to the value positive Infinity if the battery is charging, the implementation is unable to report the remaining discharging time, there is no battery attached to the system, or otherwise.
</li>
		</ul>
	</dd>
	<dd class="algo">
~batteryæ”¾é›»~æ™‚é–“ãŒæ›´æ–°ã•ã‚ŒãŸã¨ãã¯ã€
æ¬¡ã‚’èµ°ã‚‰ã™ãƒ¢ãƒãƒˆã‚¹ãƒ«
â‡’
`~batteryçŠ¶æ…‹sã‚’æ›´æ–°ã—ã¦é€šçŸ¥ã™ã‚‹$( `DischargingTime$sl, ç§’æ•°ã«ã‚ˆã‚‹æ–°ãŸãªæ”¾é›»~æ™‚é–“, `dischargingtimechange$et )
â—
When the battery discharging time is updated, the user agent must run the update the battery status and notify algorithm with [[DischargingTime]], the new discharging time in seconds, and "dischargingtimechange".
</dd>

	<dt id="the-level-internal-slot">
`Level@sl
â—
6.1.4 The [[Level]] internal slot
</dt>
	<dd>
åˆæœŸ~å€¤ã¯ `1.0^jv ã¨ã™ã‚‹ã€‚
â—
â†‘</dd>
	<dd>
<p>
~systemã®~batteryã®~levelã‚’è¡¨ç¾ã™ã‚‹ã€‚
â—
The [[Level]] internal slot represents the system's battery's level.ï¼¼
</p>
		<ul>
			<li>
æ¬¡ã«è©²å½“ã™ã‚‹å ´åˆã¯ 0 ã«è¨­å®šã™ã‚‹ãƒ¢ãƒãƒˆã‚¹ãƒ«
â‡’ï¼ƒ
~batteryã‚’ä½¿ã„æœãŸã—ãŸãŸã‚~systemã¯ä¼‘æ­¢ã•ã‚Œã¤ã¤ã‚ã‚‹
â—
It MUST be set to 0 if the system's battery is depleted and the system is about to be suspended,ï¼¼
</li>
			<li>
æ¬¡ã«è©²å½“ã™ã‚‹å ´åˆã¯ 1.0 ã«è¨­å®šã™ã‚‹ãƒ¢ãƒãƒˆã‚¹ãƒ«
â‡’ï¼ƒ
~batteryã¯æº€æ¯ ï¼
å®Ÿè£…ã¯~battery~levelã‚’å ±å‘Š-ä¸èƒ½ ï¼
~systemã¯~batteryã‚’è£…å‚™ã—ã¦ã„ãªã„
â—
and to 1.0 if the battery is full, the implementation is unable to report the battery's level, or there is no battery attached to the system.
</li>
		</ul>
	</dd>
	<dd class="algo">
~battery~levelãŒæ›´æ–°ã•ã‚ŒãŸã¨ãã¯ã€
æ¬¡ã‚’èµ°ã‚‰ã™ãƒ¢ãƒãƒˆã‚¹ãƒ«
â‡’
`~batteryçŠ¶æ…‹sã‚’æ›´æ–°ã—ã¦é€šçŸ¥ã™ã‚‹$( `Level$sl, æ–°ãŸãª~battery~level, `levelchange$et )
â—
When the battery level is updated, the user agent must run the update the battery status and notify algorithm with [[Level]], the new battery level, and "levelchange".
</dd>
</dl>

<p class="note">æ³¨è¨˜ï¼š
ï¼»
`chargingtimechange$et ï¼
`dischargingtimechange$et ï¼
`levelchange$et
ï¼½~eventã‚’ç™ºç«ã™ã‚‹~~é »åº¦ã¯ã€
å®Ÿè£…ã«å§”ã­ã‚‰ã‚Œã‚‹ã€‚
â—
Note
The definition of how often the "chargingtimechange", "dischargingtimechange", and "levelchange" events are fired is left to the implementation.
</p>

		</section>
		<section id="_attributes">
<h3>6.2.ã€œ6.5. å±æ€§</h3>

<div class="algo" id="the-charging-attribute">
`charging@m
å–å¾—å­~æ‰‹ç¶šãã¯
â‡’
~RET ã‚³ãƒ¬.`Charging$sl
â—
6.2 The charging attribute
â—
The charging getter steps are to return this.[[Charging]].
</div>

<div class="algo" id="the-chargingtime-attribute">
`chargingTime@m
å–å¾—å­~æ‰‹ç¶šãã¯
â‡’
~RET ã‚³ãƒ¬.`ChargingTime$sl
â—
6.3 The chargingTime attribute
â—
The chargingTime getter steps are to return this.[[ChargingTime]].
</div>

<div class="algo" id="the-dischargingtime-attribute">
`dischargingTime@m
å–å¾—å­~æ‰‹ç¶šãã¯
â‡’
~RET ã‚³ãƒ¬.`DischargingTime$sl
â—
6.4 The dischargingTime attribute
â—
The dischargingTime getter steps are to return this.[[DischargingTime]].
</div>

<div class="algo" id="the-level-attribute">
`level@m
å–å¾—å­~æ‰‹ç¶šãã¯
â‡’
~RET ã‚³ãƒ¬.`Level$sl
â—
6.5 The level attribute
â—
The level getter steps are to return this.[[Level]].
</div>

		</section>
		<section id="event-handlers">
<h3 title="Event handlers">6.6. ~event~handler</h3>

<p>
`BatteryManager$I ~objã¯ã€
ãã®å±æ€§ã¨ã—ã¦ï¼Œæ¬¡ã«æŒ™ã’ã‚‹`~event~handler$
ï¼ˆãŠã‚ˆã³ï¼Œãã‚Œãã‚Œã«å¯¾å¿œã™ã‚‹`~event~handler~eventå‹$ï¼‰
ã‚’~supportã™ã‚‹ãƒ¢ãƒãƒˆã‚¹ãƒ«ï¼š
â—
The following are the event handlers (and their corresponding event handler event types) that MUST be supported as attributes by the BatteryManager object:
</p>

<table><thead>
<tr><th>~event~handler
<th>~event~handler~eventå‹
<tbody>

<tr><td>`onchargingchange@m
<td>`chargingchange@et

<tr><td>`onchargingtimechange@m
<td>`chargingtimechange@et

<tr><td>`ondischargingtimechange@m
<td>`dischargingtimechange@et

<tr><td>`onlevelchange@m
<td>`levelchange@et
</table>

		</section>
		<section id="algorithms">
<h3 title="Algorithms">6.7. ~algo</h3>

<div class="algo">
<p>
`~batteryçŠ¶æ…‹sã‚’æ›´æ–°ã—ã¦é€šçŸ¥ã™ã‚‹@
~algoã¯ã€
æ‰€ä¸ã®
( å†…éƒ¨~slot %~slot, %å€¤, %~eventå )
ã«å¯¾ã—ï¼š
â—
To update the battery status and notify given an internal slot slot, a value and an eventName, run the following steps:
</p>
<ol class="algorithm">
	<li>
%å¤§åŸŸ~obj ~LET `ç¾åœ¨ã®å¤§åŸŸ~obj$
â—
Let global be the current global object.
</li>
	<li>
~IFï¼»
%å¤§åŸŸ~obj ã¯ `Window$I ã§ãªã„
ï¼½
â‡’
~RET
â—
If global is not a Window, abort these steps.
</li>
	<li>
%~navigator ~LET %å¤§åŸŸ~obj ã«çµä»˜ã‘ã‚‰ã‚ŒãŸ `Navigator$I ~obj
â—
Let navigator be global's associated Navigator.
</li>
	<li>
%~batteryç®¡ç†å™¨ ~LET %~navigator.`BatteryManager$sl
â—
Let batteryManager be the value of navigator. [[BatteryManager]].
</li>
	<li>
~IFï¼»
%~batteryç®¡ç†å™¨ ~EQ ~NULL
ï¼½
â‡’
~RET
â—
If batteryManager is null, abort these steps.
</li>
	<li>
<p>
`å¤§åŸŸ~taskã‚’~queueã™ã‚‹$( `~batteryçŠ¶æ…‹s~task~source$, %å¤§åŸŸ~obj, æ¬¡ã®æ‰‹ç¶šã )
â—
Queue a global task on the battery status task source given global toï¼¼
</p>

<div class="algo">
<p>
æ‰‹ç¶šãã¯ï¼š
â—
run the following steps:
</p>
		<ol>
			<li>
%~batteryç®¡ç†å™¨.%~slot ~SET %å€¤
â—
Set batteryManager.slot to value.
</li>
			<li>
`~eventã‚’ç™ºç«ã™ã‚‹$( %~batteryç®¡ç†å™¨, %~eventå )
â—
Fire an event named eventName at batteryManager.
</li>
		</ol>
</div>
	</li>
</ol>
</div>

		</section>
		<section id="multiple-batteries">
<h3 title="Multiple batteries">6.8. ~batteryãŒè¤‡æ•°å€‹ã‚ã‚‹å ´åˆ</h3>

<p>
~hostã—ã¦ã„ã‚‹~deviceãŒè¤‡æ•°å€‹ã®~batteryã‚’å‚™ãˆã¦ã„ã‚‹å ´åˆã€
`BatteryManager$I ã¯ï¼Œãã‚Œã‚‰ã®~batteryã‚’ä¸€ä½“åŒ–ã—ãŸ~viewã‚’å…¬é–‹ã™ã‚‹ãƒ™ã‚­ã§ã‚ã‚‹ï¼š
â—
If a hosting device contains more than one battery, BatteryManager SHOULD expose a unified view of the batteries.
</p>

<ul>
	<li>
`Charging$sl å†…éƒ¨~slotã¯ã€ï¼»
ã‚ã‚‹~batteryã®å……é›»~çŠ¶æ…‹ãŒä¸Šã§è¿°ã¹ãŸã¨ãŠã‚Š ~T ã«ãªã‚‹ãªã‚‰ã° ~T ï¼
~ELSE_ ~F
ï¼½ã«è¨­å®šã™ã‚‹ãƒ¢ãƒãƒˆã‚¹ãƒ«ã€‚
â—
The [[Charging]] internal slot MUST be set to true if at least one battery's charging state as described above is true. Otherwise, it MUST be set to false.
</li>
	<li>
`ChargingTime$sl å†…éƒ¨~slotã¯ã€ï¼»
ä¸¦åˆ—ã«å……é›»ã—ã¦ã„ã‚‹å ´åˆã¯ å€‹ã€…ã®~batteryã®æœ€å¤§~å……é›»~æ™‚é–“ ï¼
ç›´åˆ—ã«å……é›»ã—ã¦ã„ã‚‹å ´åˆã¯ å€‹ã€…ã®å……é›»~æ™‚é–“ã®ç·å’Œ
ï¼½ã«è¨­å®šã§ãã‚‹ã€‚
â—
The [[ChargingTime]] internal slot can be set to the maximum charging time of the individual batteries if charging in parallel, and to the sum of the individual charging times if charging serially.
</li>
	<li>
`DischargingTime$sl å†…éƒ¨~slotã¯ã€ï¼»
ä¸¦åˆ—ã«æ”¾é›»ã—ã¦ã„ã‚‹å ´åˆã¯ å€‹ã€…ã®~batteryã®æœ€å¤§~æ”¾é›»~æ™‚é–“ï¼
ç›´åˆ—ã«æ”¾é›»ã—ã¦ã„ã‚‹å ´åˆã¯ å€‹ã€…ã®æ”¾é›»~æ™‚é–“ã®ç·å’Œ
ï¼½ã«è¨­å®šã§ãã‚‹ã€‚
â—
The [[DischargingTime]] internal slot can be set to the maximum discharging time of the individual batteries if discharging in parallel, and to the sum of individual discharging times if discharging serially.
</li>
	<li>
`Level$sl å†…éƒ¨~slotã¯ã€ï¼»
å„~batteryã®~battery~levelã®å®¹é‡ã«å¿œã˜ãŸåŠ é‡~å¹³å‡ï¼ˆå®¹é‡ãŒã™ã¹ã¦åŒã˜ãªã‚‰ï¼Œå˜ã«å¹³å‡ï¼‰
ï¼½ã«è¨­å®šã§ãã‚‹ã€‚
â—
The [[Level]] internal slot can be set to the average of the levels of batteries of same capacity, or the weighted average of the battery levels for batteries of different capacities.
</li>
</ul>

<p class="trans-note">ã€
~batteryçŠ¶æ…‹sæƒ…å ±ã‚’å ±å‘Š-ä¸èƒ½ãªã‚‚ã®, å¯èƒ½ãªã‚‚ã®ãŒæ··åœ¨ã—ã¦ã„ã‚‹å ´åˆã€
ã©ã†æŒ™å‹•ã™ã‚‹ã¹ãã‹ã¯è¿°ã¹ã‚‰ã‚Œã¦ã„ãªã„ã€‚
ã€‘</p>

		</section>
	</section>
	<section id="permissions-policy-integration">
<h2 title="Permissions Policy integration">7. è¨±å¯~æ–½ç­–ã¨ã®çµ±åˆ</h2>

<p>
`~batteryçŠ¶æ…‹s~API^citeã¯ã€
`æ–½ç­–ã«ã‚ˆã‚Šåˆ¶å¾¡ã•ã‚Œã‚‹ç‰¹èƒ½$ã§ã‚ã‚Šï¼Œ
æ–‡å­—åˆ— `battery^l ã«ã‚ˆã‚Šè­˜åˆ¥ã•ã‚Œã‚‹ã€‚
ãã®`æ—¢å®šã®è¨±å®¹list$ã¯ã€
`'self'$l ã¨ã™ã‚‹ã€‚
â—
The Battery Status API is a policy-controlled feature identified by the string "battery". Its default allowlist is 'self'.
</p>

	</section>
	<section id="examples">
<h2 title="Examples">8. ä¾‹</h2>

â—éè¦ç¯„çš„

<div class="example" id="example-1">

<p>
~levelãŒå¤‰åŒ–ã™ã‚‹å„å›ã”ã¨ã«ï¼Œ~battery~levelã‚’~consoleã«æ›¸è¾¼ã‚€~~ç°¡å˜ãªä¾‹ï¼š
â—
This trivial example writes the battery level to the console each time the level changes:
â—
Example 1
</p>

<pre class="lang-js">
/* <span class="comment">
~promiseãŒè§£æ±ºã•ã‚ŒãŸã¨ãã€
åˆæœŸ~å€¤ã‚’å–å¾—ã—ã¦â€¦
â—
We get the initial value when the promise resolves ...
</span> */
navigator.`getBattery$0().then(function(%battery) {
  console.log(%battery.`level$0);
  /* <span class="comment">
â€¦å¾Œç¶šãªæ›´æ–°ã‚‚å–å¾—ã™ã‚‹ã€‚
â—
... and any subsequent updates.
</span> */
  %battery.`onlevelchange$0 = function() {
    console.log(this.`level$0);
  };
});
</pre>

</div>

<div class="example" id="example-2">

<p>
åˆ¥æ³•ã¨ã—ã¦ï¼Œ
`addEventListener()$m ~methodã‚’åˆ©ç”¨ã—ã¦ã‚‚åŒã˜ã«ãªã‚‹ï¼š
â—
Alternatively, the same using the addEventListener() method:
â—
Example 2
</p>

<pre class="lang-js">
navigator.`getBattery$0().then(function(%battery) {
  console.log(%battery.`level$0);
  %battery.`addEventListener$0('`levelchange$et', function() {
    console.log(this.`level$0);
  });
});
</pre>
</div>

<div class="example" id="example-3">
<p>
æ¬¡ã®ä¾‹ã§ã¯ã€ï¼»
å……é›»~çŠ¶æ…‹,
~level,
åˆ†å˜ä½ã®æ®‹ã‚Šæ™‚é–“
ï¼½ã‚’ç¤ºã™æŒ‡ç¤ºå­ã‚’æ›´æ–°ã™ã‚‹ï¼š
â—
The following example updates the indicators to show the charging state, level and time remaining in minutes:
â—
Example 3
</p>

<pre class="lang-html">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Battery Status API Example&lt;/title&gt;
  &lt;script&gt;
    window.onload = function () {
      function updateBatteryStatus(%battery) {
        document.`querySelector$0('#charging').`textContent$0 = %battery.`charging$0 ? 'å……é›»-ä¸­' : 'å……é›»-ä¸­ã§ãªã„';
        document.`querySelector$0('#level').`textContent$0 = %battery.`level$0;
        document.`querySelector$0('#dischargingTime').`textContent$0 = %battery.`dischargingTime$0 / 60;
      }

      navigator.`getBattery$0().then(function(%battery) {
        /* <span class="comment">
åˆæœŸ~æ™‚ã«~promiseãŒè§£æ±ºã•ã‚ŒãŸã¨ãï¼Œ~batteryçŠ¶æ…‹sã‚’æ›´æ–°ã—ã¦â€¦
â—
Update the battery status initially when the promise resolves ...
</span> */
        updateBatteryStatus(%battery);

        /* <span class="comment">
â€¦å¾Œç¶šãªæ›´æ–°ã‚‚å–å¾—ã™ã‚‹ã€‚
â—
.. and for any subsequent updates.
</span> */
        %battery.`onchargingchange$0 = function () {
          updateBatteryStatus(%battery);
        };

        %battery.`onlevelchange$0 = function () {
          updateBatteryStatus(%battery);
        };

        %battery.`ondischargingtimechange$0 = function () {
          updateBatteryStatus(%battery);
        };
      });
    };
  &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id="charging"&gt;ï¼ˆå……é›»~çŠ¶æ…‹ã¯æœªçŸ¥ï¼‰&lt;/div&gt;
  &lt;div id="level"&gt;ï¼ˆ~battery~levelã¯æœªçŸ¥ï¼‰&lt;/div&gt;
  &lt;div id="dischargingTime"&gt;ï¼ˆæ”¾é›»ã—åˆ‡ã‚‹ã¾ã§ã®æ™‚é–“ã¯æœªçŸ¥ï¼‰&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

</div>

	</section>
	<section id="acknowledgements">
<h2 title="Acknowledgements">è¬è¾</h2>

<p lang="en">
The group is deeply indebted to Mounir Lamouri, Jonas Sicking, and the Mozilla WebAPI team in general for their invaluable feedback based on prototype implementations. Many thanks to the people behind the System Information API and Device Orientation Event specification for the initial inspiration. Also thanks to the nice folks bringing us the Page Visibility specification, which motivated the editor of this specification to write the introduction chapter discussing some real-world high value use cases that apply equally to this specification. Special thanks to all the participants of the Device APIs Working Group and others who have sent in substantial feedback and comments, and made the Web a better place for everyone by doing so. Finally, thanks to Lukasz Olejnik, Gunes Acar, Claude Castelluccia, and Claudia Diaz for the privacy analysis of the API.
</p>

	</section>
</main></div>
